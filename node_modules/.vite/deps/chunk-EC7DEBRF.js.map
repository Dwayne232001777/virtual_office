{
  "version": 3,
  "sources": ["../../../dev/gui/src/2D/adtInstrumentation.ts"],
  "sourcesContent": ["import type { Nullable } from \"core/types\";\r\nimport type { Observer } from \"core/Misc/observable\";\r\nimport { PerfCounter } from \"core/Misc/perfCounter\";\r\nimport type { IDisposable } from \"core/scene\";\r\n\r\nimport type { AdvancedDynamicTexture } from \"./advancedDynamicTexture\";\r\n\r\n/**\r\n * This class can be used to get instrumentation data from a AdvancedDynamicTexture object\r\n */\r\nexport class AdvancedDynamicTextureInstrumentation implements IDisposable {\r\n    private _captureRenderTime = false;\r\n    private _renderTime = new PerfCounter();\r\n\r\n    private _captureLayoutTime = false;\r\n    private _layoutTime = new PerfCounter();\r\n\r\n    // Observers\r\n    private _onBeginRenderObserver: Nullable<Observer<AdvancedDynamicTexture>> = null;\r\n    private _onEndRenderObserver: Nullable<Observer<AdvancedDynamicTexture>> = null;\r\n    private _onBeginLayoutObserver: Nullable<Observer<AdvancedDynamicTexture>> = null;\r\n    private _onEndLayoutObserver: Nullable<Observer<AdvancedDynamicTexture>> = null;\r\n\r\n    // Properties\r\n\r\n    /**\r\n     * Gets the perf counter used to capture render time\r\n     */\r\n    public get renderTimeCounter(): PerfCounter {\r\n        return this._renderTime;\r\n    }\r\n\r\n    /**\r\n     * Gets the perf counter used to capture layout time\r\n     */\r\n    public get layoutTimeCounter(): PerfCounter {\r\n        return this._layoutTime;\r\n    }\r\n\r\n    /**\r\n     * Enable or disable the render time capture\r\n     */\r\n    public get captureRenderTime(): boolean {\r\n        return this._captureRenderTime;\r\n    }\r\n\r\n    public set captureRenderTime(value: boolean) {\r\n        if (value === this._captureRenderTime) {\r\n            return;\r\n        }\r\n\r\n        this._captureRenderTime = value;\r\n\r\n        if (value) {\r\n            this._onBeginRenderObserver = this.texture.onBeginRenderObservable.add(() => {\r\n                this._renderTime.beginMonitoring();\r\n            });\r\n\r\n            this._onEndRenderObserver = this.texture.onEndRenderObservable.add(() => {\r\n                this._renderTime.endMonitoring(true);\r\n            });\r\n        } else {\r\n            this.texture.onBeginRenderObservable.remove(this._onBeginRenderObserver);\r\n            this._onBeginRenderObserver = null;\r\n            this.texture.onEndRenderObservable.remove(this._onEndRenderObserver);\r\n            this._onEndRenderObserver = null;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Enable or disable the layout time capture\r\n     */\r\n    public get captureLayoutTime(): boolean {\r\n        return this._captureLayoutTime;\r\n    }\r\n\r\n    public set captureLayoutTime(value: boolean) {\r\n        if (value === this._captureLayoutTime) {\r\n            return;\r\n        }\r\n\r\n        this._captureLayoutTime = value;\r\n\r\n        if (value) {\r\n            this._onBeginLayoutObserver = this.texture.onBeginLayoutObservable.add(() => {\r\n                this._layoutTime.beginMonitoring();\r\n            });\r\n\r\n            this._onEndLayoutObserver = this.texture.onEndLayoutObservable.add(() => {\r\n                this._layoutTime.endMonitoring(true);\r\n            });\r\n        } else {\r\n            this.texture.onBeginLayoutObservable.remove(this._onBeginLayoutObserver);\r\n            this._onBeginLayoutObserver = null;\r\n            this.texture.onEndLayoutObservable.remove(this._onEndLayoutObserver);\r\n            this._onEndLayoutObserver = null;\r\n        }\r\n    }\r\n    /**\r\n     * Instantiates a new advanced dynamic texture instrumentation.\r\n     * This class can be used to get instrumentation data from an AdvancedDynamicTexture object\r\n     * @param texture Defines the AdvancedDynamicTexture to instrument\r\n     */\r\n    public constructor(\r\n        /**\r\n         * Define the instrumented AdvancedDynamicTexture.\r\n         */\r\n        public texture: AdvancedDynamicTexture\r\n    ) {}\r\n\r\n    /**\r\n     * Dispose and release associated resources.\r\n     */\r\n    public dispose() {\r\n        this.texture.onBeginRenderObservable.remove(this._onBeginRenderObserver);\r\n        this._onBeginRenderObserver = null;\r\n        this.texture.onEndRenderObservable.remove(this._onEndRenderObserver);\r\n        this._onEndRenderObserver = null;\r\n        this.texture.onBeginLayoutObservable.remove(this._onBeginLayoutObserver);\r\n        this._onBeginLayoutObserver = null;\r\n        this.texture.onEndLayoutObservable.remove(this._onEndLayoutObserver);\r\n        this._onEndLayoutObserver = null;\r\n\r\n        (<any>this.texture) = null;\r\n    }\r\n}\r\n"],
  "mappings": ";;;;;;;;;AAEA,IAQa;AARb;;;AAQM,IAAO,wCAAP,MAA4C;;;;;MAkB9C,IAAW,oBAAiB;AACxB,eAAO,KAAK;MAChB;;;;MAKA,IAAW,oBAAiB;AACxB,eAAO,KAAK;MAChB;;;;MAKA,IAAW,oBAAiB;AACxB,eAAO,KAAK;MAChB;MAEA,IAAW,kBAAkB,OAAc;AACvC,YAAI,UAAU,KAAK,oBAAoB;AACnC;QACJ;AAEA,aAAK,qBAAqB;AAE1B,YAAI,OAAO;AACP,eAAK,yBAAyB,KAAK,QAAQ,wBAAwB,IAAI,MAAK;AACxE,iBAAK,YAAY,gBAAe;UACpC,CAAC;AAED,eAAK,uBAAuB,KAAK,QAAQ,sBAAsB,IAAI,MAAK;AACpE,iBAAK,YAAY,cAAc,IAAI;UACvC,CAAC;QACL,OAAO;AACH,eAAK,QAAQ,wBAAwB,OAAO,KAAK,sBAAsB;AACvE,eAAK,yBAAyB;AAC9B,eAAK,QAAQ,sBAAsB,OAAO,KAAK,oBAAoB;AACnE,eAAK,uBAAuB;QAChC;MACJ;;;;MAKA,IAAW,oBAAiB;AACxB,eAAO,KAAK;MAChB;MAEA,IAAW,kBAAkB,OAAc;AACvC,YAAI,UAAU,KAAK,oBAAoB;AACnC;QACJ;AAEA,aAAK,qBAAqB;AAE1B,YAAI,OAAO;AACP,eAAK,yBAAyB,KAAK,QAAQ,wBAAwB,IAAI,MAAK;AACxE,iBAAK,YAAY,gBAAe;UACpC,CAAC;AAED,eAAK,uBAAuB,KAAK,QAAQ,sBAAsB,IAAI,MAAK;AACpE,iBAAK,YAAY,cAAc,IAAI;UACvC,CAAC;QACL,OAAO;AACH,eAAK,QAAQ,wBAAwB,OAAO,KAAK,sBAAsB;AACvE,eAAK,yBAAyB;AAC9B,eAAK,QAAQ,sBAAsB,OAAO,KAAK,oBAAoB;AACnE,eAAK,uBAAuB;QAChC;MACJ;;;;;;MAMA,YAIW,SAA+B;AAA/B,aAAA,UAAA;AAhGH,aAAA,qBAAqB;AACrB,aAAA,cAAc,IAAI,YAAW;AAE7B,aAAA,qBAAqB;AACrB,aAAA,cAAc,IAAI,YAAW;AAG7B,aAAA,yBAAqE;AACrE,aAAA,uBAAmE;AACnE,aAAA,yBAAqE;AACrE,aAAA,uBAAmE;MAuFxE;;;;MAKI,UAAO;AACV,aAAK,QAAQ,wBAAwB,OAAO,KAAK,sBAAsB;AACvE,aAAK,yBAAyB;AAC9B,aAAK,QAAQ,sBAAsB,OAAO,KAAK,oBAAoB;AACnE,aAAK,uBAAuB;AAC5B,aAAK,QAAQ,wBAAwB,OAAO,KAAK,sBAAsB;AACvE,aAAK,yBAAyB;AAC9B,aAAK,QAAQ,sBAAsB,OAAO,KAAK,oBAAoB;AACnE,aAAK,uBAAuB;AAEtB,aAAK,UAAW;MAC1B;;;;",
  "names": []
}
