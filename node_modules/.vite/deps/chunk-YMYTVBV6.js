import {
  FlowGraphExecutionBlockWithOutSignal,
  init_flowGraphExecutionBlockWithOutSignal
} from "./chunk-HBEO6KQN.js";
import {
  RichTypeAny,
  init_flowGraphRichTypes
} from "./chunk-WADD4RBF.js";
import {
  RegisterClass,
  init_typeStore
} from "./chunk-7ANHXSNA.js";
import {
  Logger,
  init_logger
} from "./chunk-2X44KPCK.js";
import {
  __esm
} from "./chunk-V4OQ3NZ2.js";

// node_modules/@babylonjs/core/FlowGraph/Blocks/Execution/flowGraphConsoleLogBlock.js
var FlowGraphConsoleLogBlock;
var init_flowGraphConsoleLogBlock = __esm({
  "node_modules/@babylonjs/core/FlowGraph/Blocks/Execution/flowGraphConsoleLogBlock.js"() {
    init_flowGraphExecutionBlockWithOutSignal();
    init_flowGraphRichTypes();
    init_typeStore();
    init_logger();
    FlowGraphConsoleLogBlock = class extends FlowGraphExecutionBlockWithOutSignal {
      constructor(config) {
        super(config);
        this.message = this.registerDataInput("message", RichTypeAny);
        this.logType = this.registerDataInput("logType", RichTypeAny, "log");
        if (config?.messageTemplate) {
          const matches = this._getTemplateMatches(config.messageTemplate);
          for (const match of matches) {
            this.registerDataInput(match, RichTypeAny);
          }
        }
      }
      /**
       * @internal
       */
      _execute(context) {
        const typeValue = this.logType.getValue(context);
        const messageValue = this._getMessageValue(context);
        if (typeValue === "warn") {
          Logger.Warn(messageValue);
        } else if (typeValue === "error") {
          Logger.Error(messageValue);
        } else {
          Logger.Log(messageValue);
        }
        this.out._activateSignal(context);
      }
      /**
       * @returns class name of the block.
       */
      getClassName() {
        return "FlowGraphConsoleLogBlock";
      }
      _getMessageValue(context) {
        if (this.config?.messageTemplate) {
          let template = this.config.messageTemplate;
          const matches = this._getTemplateMatches(template);
          for (const match of matches) {
            const value = this.getDataInput(match)?.getValue(context);
            if (value !== void 0) {
              template = template.replace(new RegExp(`\\{${match}\\}`, "g"), value.toString());
            }
          }
          return template;
        } else {
          return this.message.getValue(context);
        }
      }
      _getTemplateMatches(template) {
        const regex = /\{([^}]+)\}/g;
        const matches = [];
        let match;
        while ((match = regex.exec(template)) !== null) {
          matches.push(match[1]);
        }
        return matches;
      }
    };
    RegisterClass("FlowGraphConsoleLogBlock", FlowGraphConsoleLogBlock);
  }
});

export {
  FlowGraphConsoleLogBlock,
  init_flowGraphConsoleLogBlock
};
//# sourceMappingURL=chunk-YMYTVBV6.js.map
