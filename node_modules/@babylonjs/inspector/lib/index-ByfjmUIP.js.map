{"version":3,"file":"index-ByfjmUIP.js","sources":["../../../../../../../../dev/sharedUiComponents/src/fluent/hoc/fluentToolWrapper.tsx","../../../../../../../../dev/sharedUiComponents/src/fluent/primitives/utils.ts","../../../../../../../../dev/sharedUiComponents/src/fluent/primitives/tooltip.tsx","../../../../../../../../dev/sharedUiComponents/src/fluent/primitives/button.tsx","../../../../../../../../dev/inspector-v2/src/components/errorBoundary.tsx","../../../../../../../../dev/inspector-v2/src/contexts/propertyContext.ts","../../../../../../../../dev/inspector-v2/src/instrumentation/functionInstrumentation.ts","../../../../../../../../dev/inspector-v2/src/instrumentation/propertyInstrumentation.ts","../../../../../../../../dev/inspector-v2/src/hooks/instrumentationHooks.ts","../../../../../../../../dev/inspector-v2/src/hooks/observableHooks.ts","../../../../../../../../dev/inspector-v2/src/hooks/compoundPropertyHooks.ts","../../../../../../../../dev/sharedUiComponents/src/copyCommandToClipboard.ts","../../../../../../../../dev/inspector-v2/src/components/properties/generateCopyString.ts","../../../../../../../../dev/inspector-v2/src/components/properties/boundProperty.tsx","../../../../../../../../dev/sharedUiComponents/src/fluent/primitives/collapse.tsx","../../../../../../../../dev/sharedUiComponents/src/fluent/primitives/link.tsx","../../../../../../../../dev/sharedUiComponents/src/fluent/primitives/toggleButton.tsx","../../../../../../../../dev/sharedUiComponents/src/fluent/primitives/infoLabel.tsx","../../../../../../../../dev/sharedUiComponents/src/fluent/primitives/toast.tsx","../../../../../../../../dev/sharedUiComponents/src/fluent/hoc/propertyLines/propertyLine.tsx","../../../../../../../../dev/sharedUiComponents/src/fluent/hoc/propertyLines/linkPropertyLine.tsx","../../../../../../../../dev/inspector-v2/src/components/properties/linkToEntityPropertyLine.tsx","../../../../../../../../dev/sharedUiComponents/src/fluent/primitives/accordion.tsx","../../../../../../../../dev/inspector-v2/src/hooks/settingsHooks.ts","../../../../../../../../dev/inspector-v2/src/components/uxContextProvider.tsx","../../../../../../../../dev/inspector-v2/src/components/extensibleAccordion.tsx","../../../../../../../../dev/inspector-v2/src/components/pane.tsx","../../../../../../../../dev/inspector-v2/src/hooks/themeHooks.ts","../../../../../../../../dev/inspector-v2/src/themes/babylonTheme.ts","../../../../../../../../dev/inspector-v2/src/components/theme.tsx","../../../../../../../../dev/inspector-v2/src/components/teachingMoment.tsx","../../../../../../../../dev/inspector-v2/src/extensibility/builtInsExtensionFeed.ts","../../../../../../../../dev/inspector-v2/src/hooks/pollingHooks.ts","../../../../../../../../dev/inspector-v2/src/hooks/resourceHooks.ts","../../../../../../../../dev/inspector-v2/src/hooks/teachingMomentHooks.ts","../../../../../../../../dev/inspector-v2/src/misc/observableCollection.ts","../../../../../../../../dev/inspector-v2/src/modularity/serviceDefinition.ts","../../../../../../../../dev/inspector-v2/src/components/properties/propertiesPane.tsx","../../../../../../../../dev/inspector-v2/src/services/settingsContext.ts","../../../../../../../../dev/sharedUiComponents/src/fluent/hoc/childWindow.tsx","../../../../../../../../dev/inspector-v2/src/hooks/useResizeHandle.ts","../../../../../../../../dev/inspector-v2/src/services/shellService.tsx","../../../../../../../../dev/inspector-v2/src/services/selectionService.ts","../../../../../../../../dev/inspector-v2/src/services/panes/properties/propertiesService.tsx","../../../../../../../../dev/inspector-v2/src/misc/graphUtils.ts","../../../../../../../../dev/inspector-v2/src/components/scene/sceneExplorer.tsx","../../../../../../../../dev/inspector-v2/src/services/sceneContext.ts","../../../../../../../../dev/inspector-v2/src/services/panes/scene/sceneExplorerService.tsx","../../../../../../../../dev/sharedUiComponents/src/fluent/primitives/switch.tsx","../../../../../../../../dev/sharedUiComponents/src/fluent/hoc/propertyLines/switchPropertyLine.tsx","../../../../../../../../dev/inspector-v2/src/components/debug/debugPane.tsx","../../../../../../../../dev/inspector-v2/src/services/panes/debugService.tsx","../../../../../../../../dev/sharedUiComponents/src/fluent/hoc/buttonLine.tsx","../../../../../../../../dev/inspector-v2/src/services/panes/settingsService.tsx","../../../../../../../../dev/sharedUiComponents/src/fluent/hoc/propertyLines/stringifiedPropertyLine.tsx","../../../../../../../../dev/inspector-v2/src/components/stats/countStats.tsx","../../../../../../../../dev/inspector-v2/src/components/stats/frameStepStats.tsx","../../../../../../../../dev/sharedUiComponents/src/fluent/primitives/uploadButton.tsx","../../../../../../../../dev/sharedUiComponents/src/fluent/hoc/fileUploadLine.tsx","../../../../../../../../dev/inspector-v2/src/components/performanceViewer/graphSupportingTypes.ts","../../../../../../../../dev/inspector-v2/src/components/performanceViewer/canvasGraphService.ts","../../../../../../../../dev/inspector-v2/src/components/performanceViewer/canvasGraph.tsx","../../../../../../../../dev/sharedUiComponents/src/fluent/primitives/spinButton.tsx","../../../../../../../../dev/sharedUiComponents/src/fluent/primitives/textInput.tsx","../../../../../../../../dev/sharedUiComponents/src/fluent/primitives/dropdown.tsx","../../../../../../../../dev/sharedUiComponents/src/fluent/primitives/popover.tsx","../../../../../../../../dev/sharedUiComponents/src/fluent/primitives/colorPicker.tsx","../../../../../../../../dev/inspector-v2/src/components/performanceViewer/performanceSidebar.tsx","../../../../../../../../dev/inspector-v2/src/components/performanceViewer/performanceViewer.tsx","../../../../../../../../dev/inspector-v2/src/components/stats/performanceStats.tsx","../../../../../../../../dev/sharedUiComponents/src/fluent/hoc/propertyLines/textPropertyLine.tsx","../../../../../../../../dev/inspector-v2/src/components/stats/statsPane.tsx","../../../../../../../../dev/sharedUiComponents/src/fluent/hoc/propertyLines/booleanBadgePropertyLine.tsx","../../../../../../../../dev/inspector-v2/src/components/stats/systemStats.tsx","../../../../../../../../dev/inspector-v2/src/services/panes/statsService.tsx","../../../../../../../../dev/inspector-v2/src/components/tools/toolsPane.tsx","../../../../../../../../dev/inspector-v2/src/services/panes/toolsService.tsx","../../../../../../../../dev/inspector-v2/src/extensibility/defaultInspectorExtensionFeed.ts","../../../../../../../../dev/sharedUiComponents/src/fluent/primitives/syncedSlider.tsx","../../../../../../../../dev/sharedUiComponents/src/fluent/hoc/propertyLines/syncedSliderPropertyLine.tsx","../../../../../../../../dev/sharedUiComponents/src/fluent/hoc/propertyLines/colorPropertyLine.tsx","../../../../../../../../dev/sharedUiComponents/src/fluent/hoc/propertyLines/dropdownPropertyLine.tsx","../../../../../../../../dev/sharedUiComponents/src/fluent/hoc/propertyLines/inputPropertyLine.tsx","../../../../../../../../dev/sharedUiComponents/src/fluent/hoc/propertyLines/vectorPropertyLine.tsx","../../../../../../../../dev/inspector-v2/src/legacy/inspectableCustomPropertiesService.tsx","../../../../../../../../dev/inspector-v2/src/contexts/extensionManagerContext.ts","../../../../../../../../dev/inspector-v2/src/extensibility/extensionManager.ts","../../../../../../../../dev/inspector-v2/src/modularity/serviceContainer.ts","../../../../../../../../dev/inspector-v2/src/services/themeSelectorService.tsx","../../../../../../../../dev/inspector-v2/src/modularTool.tsx","../../../../../../../../dev/inspector-v2/src/services/gizmoService.ts","../../../../../../../../dev/sharedUiComponents/src/fluent/icons.ts","../../../../../../../../dev/inspector-v2/src/components/gizmoToolbar.tsx","../../../../../../../../dev/inspector-v2/src/services/gizmoToolbarService.tsx","../../../../../../../../dev/inspector-v2/src/services/miniStatsService.tsx","../../../../../../../../dev/inspector-v2/src/components/properties/animation/targetedAnimationProperties.tsx","../../../../../../../../dev/inspector-v2/src/components/curveEditor/curveEditorContext.tsx","../../../../../../../../dev/inspector-v2/src/components/curveEditor/topBar.tsx","../../../../../../../../dev/inspector-v2/src/components/curveEditor/curveEditorColors.ts","../../../../../../../../dev/inspector-v2/src/components/curveEditor/sideBar/editAnimationPanel.tsx","../../../../../../../../dev/inspector-v2/src/components/curveEditor/sideBar/animationList.tsx","../../../../../../../../dev/inspector-v2/src/components/curveEditor/sideBar/addAnimationPanel.tsx","../../../../../../../../dev/inspector-v2/src/components/curveEditor/sideBar/loadAnimationPanel.tsx","../../../../../../../../dev/sharedUiComponents/src/stringTools.ts","../../../../../../../../dev/inspector-v2/src/components/curveEditor/sideBar/saveAnimationPanel.tsx","../../../../../../../../dev/inspector-v2/src/components/curveEditor/sideBar.tsx","../../../../../../../../dev/inspector-v2/src/components/curveEditor/canvas/curveData.ts","../../../../../../../../dev/inspector-v2/src/components/curveEditor/canvas/curve.tsx","../../../../../../../../dev/inspector-v2/src/components/curveEditor/canvas/keyPoint.tsx","../../../../../../../../dev/inspector-v2/src/components/curveEditor/canvas/graph.tsx","../../../../../../../../dev/inspector-v2/src/components/curveEditor/canvas/playHead.tsx","../../../../../../../../dev/inspector-v2/src/components/curveEditor/canvas/frameBar.tsx","../../../../../../../../dev/inspector-v2/src/components/curveEditor/canvas/rangeFrameBar.tsx","../../../../../../../../dev/inspector-v2/src/components/curveEditor/canvas/canvas.tsx","../../../../../../../../dev/inspector-v2/src/components/curveEditor/rangeSelector.tsx","../../../../../../../../dev/inspector-v2/src/components/curveEditor/bottomBar.tsx","../../../../../../../../dev/inspector-v2/src/components/curveEditor/curveEditor.tsx","../../../../../../../../dev/inspector-v2/src/components/curveEditor/curveEditorButton.tsx","../../../../../../../../dev/inspector-v2/src/components/properties/animation/animationGroupProperties.tsx","../../../../../../../../dev/inspector-v2/src/services/panes/properties/animationGroupPropertiesService.tsx","../../../../../../../../dev/sharedUiComponents/src/fluent/primitives/messageBar.tsx","../../../../../../../../dev/inspector-v2/src/components/properties/animation/animationsProperties.tsx","../../../../../../../../dev/inspector-v2/src/services/panes/properties/animationPropertiesService.tsx","../../../../../../../../dev/inspector-v2/src/components/properties/atmosphereProperties.tsx","../../../../../../../../dev/inspector-v2/src/services/panes/properties/atmospherePropertiesService.tsx","../../../../../../../../dev/inspector-v2/src/components/properties/audio/soundProperties.tsx","../../../../../../../../dev/inspector-v2/src/services/panes/properties/audioPropertiesService.tsx","../../../../../../../../dev/inspector-v2/src/components/properties/cameras/arcRotateCameraProperties.tsx","../../../../../../../../dev/inspector-v2/src/components/properties/cameras/geospatialCameraProperties.tsx","../../../../../../../../dev/sharedUiComponents/src/fluent/hoc/propertyLines/hexPropertyLine.tsx","../../../../../../../../dev/inspector-v2/src/components/properties/cameras/cameraProperties.tsx","../../../../../../../../dev/inspector-v2/src/components/properties/cameras/followCameraProperties.tsx","../../../../../../../../dev/inspector-v2/src/components/properties/cameras/freeCameraProperties.tsx","../../../../../../../../dev/inspector-v2/src/components/properties/cameras/targetCameraProperties.tsx","../../../../../../../../dev/inspector-v2/src/services/panes/properties/cameraPropertiesService.tsx","../../../../../../../../dev/inspector-v2/src/components/properties/commonGeneralProperties.tsx","../../../../../../../../dev/inspector-v2/src/services/panes/properties/commonPropertiesService.tsx","../../../../../../../../dev/inspector-v2/src/services/panes/properties/effectLayerPropertiesService.tsx","../../../../../../../../dev/inspector-v2/src/components/properties/frameGraph/frameGraphProperties.tsx","../../../../../../../../dev/inspector-v2/src/services/panes/properties/frameGraphPropertiesService.tsx","../../../../../../../../dev/inspector-v2/src/components/properties/lights/areaLightProperties.tsx","../../../../../../../../dev/inspector-v2/src/components/properties/lights/directionalLightProperties.tsx","../../../../../../../../dev/inspector-v2/src/components/properties/lights/hemisphericLightProperties.tsx","../../../../../../../../dev/inspector-v2/src/components/properties/lights/pointLightProperties.tsx","../../../../../../../../dev/inspector-v2/src/components/properties/lights/shadowGeneratorProperties.tsx","../../../../../../../../dev/inspector-v2/src/components/properties/lights/shadowLightProperties.tsx","../../../../../../../../dev/inspector-v2/src/components/properties/lights/spotLightProperties.tsx","../../../../../../../../dev/inspector-v2/src/services/panes/properties/lightPropertiesServices.tsx","../../../../../../../../dev/sharedUiComponents/src/constToOptionsMaps.ts","../../../../../../../../dev/inspector-v2/src/components/properties/materials/materialProperties.tsx","../../../../../../../../dev/inspector-v2/src/components/properties/materials/multiMaterialProperties.tsx","../../../../../../../../dev/sharedUiComponents/src/fluent/primitives/list.tsx","../../../../../../../../dev/sharedUiComponents/src/fluent/primitives/gradient.tsx","../../../../../../../../dev/sharedUiComponents/src/fluent/hoc/gradientList.tsx","../../../../../../../../dev/inspector-v2/src/misc/arrayUtils.ts","../../../../../../../../dev/inspector-v2/src/components/properties/materials/nodeMaterialProperties.tsx","../../../../../../../../dev/inspector-v2/src/components/properties/materials/normalMapProperties.tsx","../../../../../../../../dev/inspector-v2/src/components/properties/materials/openpbrMaterialProperties.tsx","../../../../../../../../dev/sharedUiComponents/src/fluent/primitives/comboBox.tsx","../../../../../../../../dev/sharedUiComponents/src/fluent/primitives/entitySelector.tsx","../../../../../../../../dev/sharedUiComponents/src/fluent/primitives/materialSelector.tsx","../../../../../../../../dev/sharedUiComponents/src/fluent/primitives/nodeSelector.tsx","../../../../../../../../dev/sharedUiComponents/src/fluent/hoc/textureUpload.tsx","../../../../../../../../dev/sharedUiComponents/src/fluent/primitives/textureSelector.tsx","../../../../../../../../dev/sharedUiComponents/src/fluent/primitives/skeletonSelector.tsx","../../../../../../../../dev/sharedUiComponents/src/fluent/hoc/propertyLines/entitySelectorPropertyLine.tsx","../../../../../../../../dev/inspector-v2/src/components/properties/materials/pbrBaseMaterialProperties.tsx","../../../../../../../../dev/inspector-v2/src/components/properties/materials/skyMaterialProperties.tsx","../../../../../../../../dev/inspector-v2/src/components/properties/materials/standardMaterialProperties.tsx","../../../../../../../../dev/inspector-v2/src/services/panes/properties/materialPropertiesService.tsx","../../../../../../../../dev/sharedUiComponents/src/fluent/primitives/textarea.tsx","../../../../../../../../dev/inspector-v2/src/components/properties/metadataProperties.tsx","../../../../../../../../dev/inspector-v2/src/services/panes/properties/metadataPropertiesService.tsx","../../../../../../../../dev/inspector-v2/src/components/properties/nodes/abstractMeshProperties.tsx","../../../../../../../../dev/inspector-v2/src/components/properties/nodes/gaussianSplattingProperties.tsx","../../../../../../../../dev/inspector-v2/src/components/properties/nodes/meshProperties.tsx","../../../../../../../../dev/inspector-v2/src/components/properties/nodes/nodeProperties.tsx","../../../../../../../../dev/inspector-v2/src/services/panes/properties/nodePropertiesService.tsx","../../../../../../../../dev/inspector-v2/src/components/properties/particles/systemProperties.tsx","../../../../../../../../dev/inspector-v2/src/utils/snippetUtils.ts","../../../../../../../../dev/inspector-v2/src/components/properties/particles/commandsProperties.tsx","../../../../../../../../dev/inspector-v2/src/components/properties/particles/emitterProperties.tsx","../../../../../../../../dev/inspector-v2/src/hooks/useObservableArray.ts","../../../../../../../../dev/inspector-v2/src/components/properties/particles/sizeProperties.tsx","../../../../../../../../dev/inspector-v2/src/components/properties/particles/emissionProperties.tsx","../../../../../../../../dev/inspector-v2/src/components/properties/particles/lifetimeProperties.tsx","../../../../../../../../dev/inspector-v2/src/components/properties/particles/colorProperties.tsx","../../../../../../../../dev/inspector-v2/src/components/properties/particles/rotationProperties.tsx","../../../../../../../../dev/inspector-v2/src/components/properties/particles/spritesheetProperties.tsx","../../../../../../../../dev/inspector-v2/src/components/properties/particles/attractor.tsx","../../../../../../../../dev/inspector-v2/src/components/properties/particles/attractorList.tsx","../../../../../../../../dev/inspector-v2/src/components/properties/particles/attractorAdapter.ts","../../../../../../../../dev/inspector-v2/src/components/properties/particles/attractorProperties.tsx","../../../../../../../../dev/inspector-v2/src/components/properties/particles/nodeEditorProperties.tsx","../../../../../../../../dev/inspector-v2/src/services/panes/properties/particleSystemPropertiesService.tsx","../../../../../../../../dev/inspector-v2/src/components/properties/physics/physicsProperties.tsx","../../../../../../../../dev/inspector-v2/src/services/panes/properties/physicsPropertiesService.tsx","../../../../../../../../dev/sharedUiComponents/src/fluent/primitives/checkbox.tsx","../../../../../../../../dev/sharedUiComponents/src/fluent/hoc/propertyLines/checkboxPropertyLine.tsx","../../../../../../../../dev/inspector-v2/src/components/properties/postProcesses/postProcessProperties.tsx","../../../../../../../../dev/inspector-v2/src/services/panes/properties/postProcessPropertiesService.tsx","../../../../../../../../dev/inspector-v2/src/components/properties/renderingPipelines/postProcessRenderPipelineProperties.tsx","../../../../../../../../dev/inspector-v2/src/components/properties/renderingPipelines/defaultRenderingPipelineProperties.tsx","../../../../../../../../dev/inspector-v2/src/components/properties/renderingPipelines/lensRenderingPipelineProperties.tsx","../../../../../../../../dev/inspector-v2/src/components/properties/renderingPipelines/ssaoRenderingPipelineProperties.tsx","../../../../../../../../dev/inspector-v2/src/components/properties/renderingPipelines/ssao2RenderingPipelineProperties.tsx","../../../../../../../../dev/inspector-v2/src/components/properties/renderingPipelines/ssrRenderingPipelineProperties.tsx","../../../../../../../../dev/inspector-v2/src/components/properties/renderingPipelines/iblShadowsRenderPipelineProperties.tsx","../../../../../../../../dev/inspector-v2/src/services/panes/properties/renderingPipelinePropertiesService.tsx","../../../../../../../../dev/inspector-v2/src/components/scene/sceneProperties.tsx","../../../../../../../../dev/inspector-v2/src/services/panes/properties/scenePropertiesService.tsx","../../../../../../../../dev/inspector-v2/src/components/properties/skeleton/boneProperties.tsx","../../../../../../../../dev/inspector-v2/src/components/properties/skeleton/skeletonProperties.tsx","../../../../../../../../dev/inspector-v2/src/services/panes/properties/skeletonPropertiesService.tsx","../../../../../../../../dev/sharedUiComponents/src/fluent/hoc/propertyLines/spinButtonPropertyLine.tsx","../../../../../../../../dev/inspector-v2/src/components/properties/sprites/spriteManagerProperties.tsx","../../../../../../../../dev/inspector-v2/src/misc/textureTools.ts","../../../../../../../../dev/inspector-v2/src/components/properties/textures/texturePreview.tsx","../../../../../../../../dev/inspector-v2/src/components/properties/sprites/spriteProperties.tsx","../../../../../../../../dev/inspector-v2/src/services/panes/properties/spritePropertiesService.tsx","../../../../../../../../dev/sharedUiComponents/src/fluent/primitives/lazyComponent.tsx","../../../../../../../../dev/inspector-v2/src/components/properties/textures/advancedDynamicTextureProperties.tsx","../../../../../../../../dev/inspector-v2/src/components/properties/textures/textureFormatUtils.ts","../../../../../../../../dev/inspector-v2/src/components/properties/textures/baseTextureProperties.tsx","../../../../../../../../dev/inspector-v2/src/components/properties/textures/cubeTextureProperties.tsx","../../../../../../../../dev/inspector-v2/src/components/properties/textures/multiRenderTargetProperties.tsx","../../../../../../../../dev/inspector-v2/src/components/properties/textures/renderTargetTextureProperties.tsx","../../../../../../../../dev/inspector-v2/src/components/properties/textures/textureProperties.tsx","../../../../../../../../dev/inspector-v2/src/components/properties/textures/thinTextureProperties.tsx","../../../../../../../../dev/inspector-v2/src/components/textureEditor/canvasShader.ts","../../../../../../../../dev/inspector-v2/src/components/textureEditor/canvasManager.ts","../../../../../../../../dev/inspector-v2/src/components/textureEditor/channels.tsx","../../../../../../../../dev/inspector-v2/src/components/textureEditor/properties.tsx","../../../../../../../../dev/inspector-v2/src/components/textureEditor/status.tsx","../../../../../../../../dev/inspector-v2/src/components/textureEditor/tools.tsx","../../../../../../../../dev/inspector-v2/src/components/textureEditor/textureEditor.tsx","../../../../../../../../dev/inspector-v2/src/services/textureEditor/tools/contrast.tsx","../../../../../../../../dev/inspector-v2/src/services/textureEditor/tools/eyedropper.tsx","../../../../../../../../dev/inspector-v2/src/services/textureEditor/tools/floodfill.tsx","../../../../../../../../dev/inspector-v2/src/services/textureEditor/tools/paintbrush.tsx","../../../../../../../../dev/inspector-v2/src/services/textureEditor/tools/rectangularSelect.tsx","../../../../../../../../dev/inspector-v2/src/services/textureEditor/textureEditorService.tsx","../../../../../../../../dev/inspector-v2/src/services/panes/properties/texturePropertiesService.tsx","../../../../../../../../dev/inspector-v2/src/components/properties/transformProperties.tsx","../../../../../../../../dev/inspector-v2/src/services/panes/properties/transformPropertiesService.tsx","../../../../../../../../dev/inspector-v2/src/services/panes/scene/animationGroupExplorerService.tsx","../../../../../../../../dev/inspector-v2/src/services/panes/scene/atmosphereExplorerService.tsx","../../../../../../../../dev/inspector-v2/src/services/panes/scene/effectLayersExplorerService.tsx","../../../../../../../../dev/inspector-v2/src/services/panes/scene/frameGraphExplorerService.tsx","../../../../../../../../dev/inspector-v2/src/services/panes/scene/guiExplorerService.tsx","../../../../../../../../dev/inspector-v2/src/services/panes/scene/materialExplorerService.tsx","../../../../../../../../dev/inspector-v2/src/services/panes/scene/nodeExplorerService.tsx","../../../../../../../../dev/inspector-v2/src/services/panes/scene/particleSystemExplorerService.tsx","../../../../../../../../dev/inspector-v2/src/services/panes/scene/postProcessExplorerService.tsx","../../../../../../../../dev/inspector-v2/src/services/panes/scene/renderingPipelinesExplorerService.tsx","../../../../../../../../dev/inspector-v2/src/services/panes/scene/skeletonExplorerService.tsx","../../../../../../../../dev/inspector-v2/src/services/panes/scene/soundExplorerService.tsx","../../../../../../../../dev/inspector-v2/src/services/panes/scene/spriteManagerExplorerService.tsx","../../../../../../../../dev/inspector-v2/src/services/panes/scene/texturesExplorerService.tsx","../../../../../../../../dev/inspector-v2/src/components/tools/capture/equirectangularCaptureTool.tsx","../../../../../../../../dev/inspector-v2/src/components/tools/capture/gifCaptureTool.tsx","../../../../../../../../dev/inspector-v2/src/components/tools/capture/sceneReplayTool.tsx","../../../../../../../../dev/inspector-v2/src/components/tools/capture/screenshotTool.tsx","../../../../../../../../dev/inspector-v2/src/components/tools/capture/videoCaptureTool.tsx","../../../../../../../../dev/inspector-v2/src/services/panes/tools/captureService.tsx","../../../../../../../../dev/inspector-v2/src/components/tools/exportTools.tsx","../../../../../../../../dev/inspector-v2/src/services/panes/tools/exportService.tsx","../../../../../../../../dev/inspector-v2/src/components/tools/import/gltfAnimationImportTool.tsx","../../../../../../../../dev/inspector-v2/src/services/panes/tools/import/gltfAnimationImportService.tsx","../../../../../../../../dev/inspector-v2/src/components/tools/import/gltfLoaderOptionsTool.tsx","../../../../../../../../dev/inspector-v2/src/services/panes/tools/import/gltfLoaderOptionsService.tsx","../../../../../../../../dev/inspector-v2/src/components/tools/import/gltfValidationTool.tsx","../../../../../../../../dev/inspector-v2/src/services/panes/tools/import/gltfValidationService.tsx","../../../../../../../../dev/inspector-v2/src/components/pickingToolbar.tsx","../../../../../../../../dev/inspector-v2/src/services/pickingService.tsx","../../../../../../../../dev/inspector-v2/src/services/userFeedbackService.tsx","../../../../../../../../dev/inspector-v2/src/inspector.tsx","../../../../../../../../dev/inspector-v2/src/legacy/propertiesSectionMapping.ts","../../../../../../../../dev/inspector-v2/src/legacy/inspector.tsx","../../../../../../../../dev/inspector-v2/src/legacy/debugLayer.ts","../../../../../../../../dev/sharedUiComponents/src/fluent/primitives/draggable.tsx","../../../../../../../../dev/sharedUiComponents/src/fluent/primitives/positionedPopover.tsx","../../../../../../../../dev/sharedUiComponents/src/fluent/primitives/searchBar.tsx","../../../../../../../../dev/sharedUiComponents/src/fluent/primitives/searchBox.tsx","../../../../../../../../dev/sharedUiComponents/src/fluent/hoc/pane.tsx","../../../../../../../../dev/sharedUiComponents/src/fluent/hoc/propertyLines/textAreaPropertyLine.tsx","../../../../../../../../dev/inspector-v2/src/index.ts"],"sourcesContent":["import type { PropsWithChildren, FunctionComponent } from \"react\";\r\nimport { createContext } from \"react\";\r\nimport type { Theme } from \"@fluentui/react-components\";\r\nimport { FluentProvider, webDarkTheme } from \"@fluentui/react-components\";\r\n\r\nexport type UiSize = \"small\" | \"medium\";\r\nexport type ToolHostProps = {\r\n    /**\r\n     * Will ensure all of the controls within the tool are of the same scale\r\n     */\r\n    size?: UiSize;\r\n\r\n    /**\r\n     * Allows host to pass in a theme\r\n     */\r\n    customTheme?: Theme;\r\n\r\n    /**\r\n     * Can be set to true to disable the copy button in the tool's property lines. Default is false (copy enabled)\r\n     */\r\n    disableCopy?: boolean;\r\n\r\n    /**\r\n     * Name of the tool displayed in the UX\r\n     */\r\n    toolName: string;\r\n\r\n    /**\r\n     * Override the qsp detection for fluent\r\n     */\r\n    useFluent?: boolean;\r\n};\r\n\r\nexport const ToolContext = createContext({ useFluent: false as boolean, disableCopy: false as boolean, toolName: \"\" as string, size: undefined as UiSize | undefined } as const);\r\n\r\n/**\r\n * For tools which are ready to move over the fluent, wrap the root of the tool (or the panel which you want fluentized) with this component\r\n * Today we will only enable fluent if the URL has the `newUX` query parameter is truthy\r\n * @param props\r\n * @returns\r\n */\r\nexport const FluentToolWrapper: FunctionComponent<PropsWithChildren<ToolHostProps>> = (props) => {\r\n    const url = new URL(window.location.href);\r\n    const useFluentFromUrl = url.searchParams.has(\"newUX\") || url.hash.includes(\"newUX\");\r\n    const useFluent = props.useFluent ?? useFluentFromUrl;\r\n    const contextValue = {\r\n        useFluent,\r\n        disableCopy: !!props.disableCopy,\r\n        toolName: props.toolName,\r\n        size: props.size,\r\n    };\r\n    return useFluent ? (\r\n        <FluentProvider theme={props.customTheme || webDarkTheme}>\r\n            <ToolContext.Provider value={contextValue}>{props.children}</ToolContext.Provider>\r\n        </FluentProvider>\r\n    ) : (\r\n        <ToolContext.Provider value={contextValue}>{props.children}</ToolContext.Provider>\r\n    );\r\n};\r\n","import { makeStyles, tokens } from \"@fluentui/react-components\";\r\nimport type { GriffelStyle } from \"@fluentui/react-components\";\r\n\r\nimport type { KeyboardEvent, FocusEvent } from \"react\";\r\n\r\nexport const TokenMap = {\r\n    px2: tokens.borderRadiusSmall,\r\n    px4: tokens.borderRadiusMedium,\r\n    px6: tokens.borderRadiusLarge,\r\n    px8: tokens.borderRadiusXLarge,\r\n    px10: tokens.fontSizeBase100,\r\n    px12: tokens.fontSizeBase200,\r\n    px14: tokens.fontSizeBase300,\r\n    px16: tokens.fontSizeBase400,\r\n    px20: tokens.fontSizeBase500,\r\n    px24: tokens.fontSizeBase600,\r\n    px28: tokens.lineHeightBase500,\r\n    px32: tokens.lineHeightBase600,\r\n    px36: tokens.lineHeightHero700,\r\n    px40: tokens.lineHeightHero800,\r\n};\r\n\r\nexport const CustomTokens = {\r\n    inputWidth: \"150px\",\r\n    lineHeight: TokenMap.px36,\r\n    lineHeightSmall: TokenMap.px28,\r\n    dividerGap: TokenMap.px10,\r\n    dividerGapSmall: TokenMap.px4,\r\n    labelMinWidth: \"50px\",\r\n    sliderMinWidth: \"30px\",\r\n    sliderMaxWidth: \"80px\",\r\n    rightAlignOffset: `-${TokenMap.px8}`,\r\n};\r\n\r\nexport const UniformWidthStyling: GriffelStyle = { width: CustomTokens.inputWidth, boxSizing: \"border-box\" };\r\nexport const useInputStyles = makeStyles({\r\n    input: UniformWidthStyling,\r\n    inputSlot: { textAlign: \"right\" },\r\n    invalid: { backgroundColor: tokens.colorPaletteRedBackground2 },\r\n    container: {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        justifyContent: \"center\", // align items vertically\r\n        minWidth: 0, // Allow shrinking\r\n    },\r\n});\r\n\r\nexport function HandleOnBlur(event: FocusEvent<HTMLInputElement>) {\r\n    event.stopPropagation();\r\n    event.preventDefault();\r\n}\r\n\r\nexport function HandleKeyDown(event: KeyboardEvent<HTMLInputElement>) {\r\n    event.stopPropagation(); // Prevent event propagation\r\n\r\n    // Prevent Enter key from causing form submission or value reversion\r\n    if (event.key === \"Enter\") {\r\n        event.preventDefault();\r\n    }\r\n}\r\n\r\n/**\r\n * Fluent's CalculatePrecision function\r\n * https://github.com/microsoft/fluentui/blob/dcbf775d37938eacffa37922fc0b43a3cdd5753f/packages/utilities/src/math.ts#L91C1\r\n *\r\n * Calculates a number's precision based on the number of trailing\r\n * zeros if the number does not have a decimal indicated by a negative\r\n * precision. Otherwise, it calculates the number of digits after\r\n * the decimal point indicated by a positive precision.\r\n *\r\n * @param value - the value to determine the precision of\r\n * @returns the calculated precision\r\n */\r\nexport function CalculatePrecision(value: number) {\r\n    /**\r\n     * Group 1:\r\n     * [1-9]([0]+$) matches trailing zeros\r\n     * Group 2:\r\n     * \\.([0-9]*) matches all digits after a decimal point.\r\n     */ const groups = /[1-9]([0]+$)|\\.([0-9]*)/.exec(String(value));\r\n    if (!groups) {\r\n        return 0;\r\n    }\r\n    if (groups[1]) {\r\n        return -groups[1].length;\r\n    }\r\n    if (groups[2]) {\r\n        return groups[2].length;\r\n    }\r\n    return 0;\r\n}\r\n\r\nconst HEX_REGEX = RegExp(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3}|[A-Fa-f0-9]{8})$/);\r\nexport function ValidateColorHex(val: string) {\r\n    return val != \"\" && HEX_REGEX.test(val);\r\n}\r\n","import type { Nullable } from \"core/index\";\r\n\r\nimport type { ReactElement } from \"react\";\r\nimport { forwardRef } from \"react\";\r\n\r\nimport { Tooltip as FluentTooltip } from \"@fluentui/react-components\";\r\n\r\nexport type TooltipProps = { content?: Nullable<string>; children: ReactElement };\r\n\r\n// forwardRef wrapper to avoid \"function components cannot be given refs\" warning\r\n// FluentTooltip handles ref forwarding to children internally via applyTriggerPropsToChildren\r\nexport const Tooltip = forwardRef<HTMLElement, TooltipProps>((props, _ref) => {\r\n    const { content, children } = props;\r\n\r\n    if (!content) {\r\n        return children;\r\n    }\r\n\r\n    return (\r\n        <FluentTooltip relationship=\"description\" content={content}>\r\n            {children}\r\n        </FluentTooltip>\r\n    );\r\n});\r\n\r\nTooltip.displayName = \"Tooltip\";\r\n","import { Button as FluentButton, makeStyles, Spinner } from \"@fluentui/react-components\";\r\nimport type { MouseEvent } from \"react\";\r\nimport { forwardRef, useCallback, useContext, useState } from \"react\";\r\nimport type { FluentIcon } from \"@fluentui/react-icons\";\r\nimport type { BasePrimitiveProps } from \"./primitive\";\r\nimport { ToolContext } from \"../hoc/fluentToolWrapper\";\r\nimport { TokenMap } from \"./utils\";\r\nimport { Tooltip } from \"./tooltip\";\r\n\r\nconst useButtonStyles = makeStyles({\r\n    smallIcon: {\r\n        fontSize: TokenMap.px16,\r\n    },\r\n    mediumIcon: {\r\n        fontSize: TokenMap.px20,\r\n    },\r\n});\r\n\r\nexport type ButtonProps = BasePrimitiveProps & {\r\n    onClick?: (e?: MouseEvent<HTMLButtonElement>) => unknown | Promise<unknown>;\r\n    icon?: FluentIcon;\r\n    appearance?: \"subtle\" | \"transparent\" | \"primary\" | \"secondary\";\r\n    label?: string;\r\n};\r\n\r\nexport const Button = forwardRef<HTMLButtonElement, ButtonProps>((props, ref) => {\r\n    const { size } = useContext(ToolContext);\r\n    const classes = useButtonStyles();\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    const { icon: Icon, label, onClick, disabled, className, title, ...buttonProps } = props;\r\n\r\n    const [isOnClickBusy, setIsOnClickBusy] = useState(false);\r\n    const handleOnClick = useCallback(\r\n        async (e: MouseEvent<HTMLButtonElement>) => {\r\n            const result = onClick?.(e);\r\n            if (result instanceof Promise) {\r\n                setIsOnClickBusy(true);\r\n                try {\r\n                    await result;\r\n                } finally {\r\n                    setIsOnClickBusy(false);\r\n                }\r\n            }\r\n        },\r\n        [onClick]\r\n    );\r\n\r\n    const iconClass = size === \"small\" ? classes.smallIcon : classes.mediumIcon;\r\n\r\n    return (\r\n        <Tooltip content={title ?? \"\"}>\r\n            <FluentButton\r\n                ref={ref}\r\n                iconPosition=\"after\"\r\n                {...buttonProps}\r\n                className={className}\r\n                size={size}\r\n                icon={isOnClickBusy ? <Spinner size=\"extra-tiny\" /> : Icon && <Icon className={iconClass} />}\r\n                onClick={handleOnClick}\r\n                disabled={disabled || isOnClickBusy}\r\n            >\r\n                {label && props.label}\r\n            </FluentButton>\r\n        </Tooltip>\r\n    );\r\n});\r\n\r\nButton.displayName = \"Button\";\r\n","import type { ErrorInfo, ReactNode } from \"react\";\r\n\r\nimport { Component } from \"react\";\r\nimport { makeStyles, tokens } from \"@fluentui/react-components\";\r\nimport { ErrorCircleRegular } from \"@fluentui/react-icons\";\r\nimport { Button } from \"shared-ui-components/fluent/primitives/button\";\r\nimport { TokenMap } from \"shared-ui-components/fluent/primitives/utils\";\r\n\r\nconst useStyles = makeStyles({\r\n    root: {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\",\r\n        padding: TokenMap.px20,\r\n        backgroundColor: tokens.colorNeutralBackground1,\r\n        color: tokens.colorNeutralForeground1,\r\n        height: \"100%\",\r\n        minHeight: \"100px\",\r\n    },\r\n    icon: {\r\n        fontSize: \"48px\",\r\n        color: tokens.colorPaletteRedForeground1,\r\n        marginBottom: TokenMap.px12,\r\n    },\r\n    title: {\r\n        fontSize: TokenMap.px16,\r\n        fontWeight: \"600\",\r\n        marginBottom: TokenMap.px8,\r\n    },\r\n    message: {\r\n        fontSize: TokenMap.px12,\r\n        color: tokens.colorNeutralForeground2,\r\n        marginBottom: TokenMap.px16,\r\n        textAlign: \"center\",\r\n        maxWidth: \"300px\",\r\n    },\r\n    details: {\r\n        fontSize: TokenMap.px10,\r\n        color: tokens.colorNeutralForeground3,\r\n        fontFamily: \"monospace\",\r\n        whiteSpace: \"pre-wrap\",\r\n        maxHeight: \"100px\",\r\n        overflow: \"auto\",\r\n        padding: TokenMap.px8,\r\n        backgroundColor: tokens.colorNeutralBackground3,\r\n        borderRadius: TokenMap.px4,\r\n        marginTop: TokenMap.px8,\r\n        maxWidth: \"100%\",\r\n    },\r\n});\r\n\r\ntype ErrorBoundaryProps = {\r\n    /** Child components to render */\r\n    children: ReactNode;\r\n    /** Optional fallback UI to show on error */\r\n    fallback?: ReactNode;\r\n    /** Optional callback when an error occurs */\r\n    onError?: (error: Error, errorInfo: ErrorInfo) => void;\r\n    /** Optional name for identifying this boundary in logs */\r\n    name?: string;\r\n};\r\n\r\ntype ErrorBoundaryState = {\r\n    hasError: boolean;\r\n    error: Error | null;\r\n    errorInfo: ErrorInfo | null;\r\n};\r\n\r\n/**\r\n * Error boundary component that catches JavaScript errors in child components\r\n * and displays a fallback UI instead of crashing the entire application.\r\n */\r\nexport class ErrorBoundary extends Component<ErrorBoundaryProps, ErrorBoundaryState> {\r\n    constructor(props: ErrorBoundaryProps) {\r\n        super(props);\r\n        this.state = { hasError: false, error: null, errorInfo: null };\r\n    }\r\n\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    static getDerivedStateFromError(error: Error): Partial<ErrorBoundaryState> {\r\n        return { hasError: true, error };\r\n    }\r\n\r\n    override componentDidCatch(error: Error, errorInfo: ErrorInfo) {\r\n        this.setState({ errorInfo });\r\n\r\n        // Log the error\r\n        const boundaryName = this.props.name || \"ErrorBoundary\";\r\n        // eslint-disable-next-line no-console\r\n        console.error(`[${boundaryName}] Error caught:`, error, errorInfo);\r\n\r\n        // Call optional error callback\r\n        this.props.onError?.(error, errorInfo);\r\n    }\r\n\r\n    private _handleRetry = () => {\r\n        this.setState({ hasError: false, error: null, errorInfo: null });\r\n    };\r\n\r\n    override render() {\r\n        if (this.state.hasError) {\r\n            // If a custom fallback is provided, use it\r\n            if (this.props.fallback) {\r\n                return this.props.fallback;\r\n            }\r\n\r\n            // Default fallback UI\r\n            return <ErrorFallback error={this.state.error} onRetry={this._handleRetry} />;\r\n        }\r\n\r\n        return this.props.children;\r\n    }\r\n}\r\n\r\ntype ErrorFallbackProps = {\r\n    error: Error | null;\r\n    onRetry: () => void;\r\n};\r\n\r\nfunction ErrorFallback({ error, onRetry }: ErrorFallbackProps) {\r\n    const styles = useStyles();\r\n\r\n    return (\r\n        <div className={styles.root}>\r\n            <ErrorCircleRegular className={styles.icon} />\r\n            <div className={styles.title}>Something went wrong</div>\r\n            <div className={styles.message}>An error occurred in this component. You can try again or continue using other parts of the inspector.</div>\r\n            <Button label=\"Try Again\" appearance=\"primary\" onClick={onRetry} />\r\n            {error && <div className={styles.details}>{error.message}</div>}\r\n        </div>\r\n    );\r\n}\r\n","import type { Observable } from \"core/index\";\r\n\r\nimport { createContext, useCallback, useContext } from \"react\";\r\n\r\nexport type PropertyChangeInfo = {\r\n    readonly entity: unknown;\r\n    readonly propertyKey: PropertyKey;\r\n    readonly oldValue: unknown;\r\n    readonly newValue: unknown;\r\n};\r\n\r\nexport type PropertyContext = {\r\n    readonly onPropertyChanged: Observable<PropertyChangeInfo>;\r\n};\r\n\r\nexport const PropertyContext = createContext<PropertyContext | undefined>(undefined);\r\n\r\nexport function usePropertyChangedNotifier() {\r\n    const propertyContext = useContext(PropertyContext);\r\n    return useCallback(\r\n        <ObjectT, PropertyT extends keyof ObjectT>(entity: ObjectT, propertyKey: PropertyT, oldValue: ObjectT[PropertyT], newValue: ObjectT[PropertyT]) => {\r\n            propertyContext?.onPropertyChanged.notifyObservers({ entity, propertyKey, oldValue, newValue });\r\n        },\r\n        [propertyContext]\r\n    );\r\n}\r\n","import type { IDisposable } from \"core/index\";\r\n\r\nexport type FunctionHooks<Args extends unknown[] = unknown[]> = {\r\n    /**\r\n     * This function will be called after the hooked function is called.\r\n     * @param args The arguments that were passed to the original function.\r\n     */\r\n    afterCall?: (...args: Args) => void;\r\n};\r\n\r\nconst InterceptorHooksMaps = new WeakMap<object, Map<PropertyKey, FunctionHooks<unknown[]>[]>>();\r\n\r\n/**\r\n * Intercepts a function on an object and allows you to add hooks that will be called during function execution.\r\n * @param target The object containing the function to intercept.\r\n * @param propertyKey The key of the property that is a function (this is the function that will be intercepted).\r\n * @param hooks The hooks to call during the function execution.\r\n * @returns A disposable that removes the hooks when disposed and returns the object to its original state.\r\n */\r\n// This overload only matches when K is a specific literal key (not a union like keyof T)\r\nexport function InterceptFunction<T extends object, K extends keyof T>(\r\n    target: T,\r\n    propertyKey: string extends K ? never : number extends K ? never : symbol extends K ? never : K,\r\n    hooks: NonNullable<T[K]> extends (...args: infer Args) => unknown ? FunctionHooks<Args> : FunctionHooks\r\n): IDisposable;\r\n// Fallback overload for generic/dynamic cases where the function type cannot be inferred\r\nexport function InterceptFunction<T extends object>(target: T, propertyKey: keyof T, hooks: FunctionHooks): IDisposable;\r\n/** @internal */\r\nexport function InterceptFunction<T extends object>(target: T, propertyKey: keyof T, hooks: FunctionHooks): IDisposable {\r\n    if (!hooks.afterCall) {\r\n        throw new Error(\"At least one hook must be provided.\");\r\n    }\r\n\r\n    const originalFunction = Reflect.get(target, propertyKey, target) as (...args: any) => any;\r\n    if (typeof originalFunction !== \"function\") {\r\n        throw new Error(`Property \"${propertyKey.toString()}\" of object \"${target}\" is not a function.`);\r\n    }\r\n\r\n    // Make sure the property is configurable and writable, otherwise it is immutable and cannot be intercepted.\r\n    const propertyDescriptor = Reflect.getOwnPropertyDescriptor(target, propertyKey);\r\n    if (propertyDescriptor) {\r\n        if (!propertyDescriptor.configurable) {\r\n            throw new Error(`Property \"${propertyKey.toString()}\" of object \"${target}\" is not configurable.`);\r\n        }\r\n\r\n        if (propertyDescriptor.writable === false || (propertyDescriptor.writable === undefined && !propertyDescriptor.set)) {\r\n            throw new Error(`Property \"${propertyKey.toString()}\" of object \"${target}\" is readonly.`);\r\n        }\r\n    }\r\n\r\n    // Get or create the hooks map for the target object.\r\n    let hooksMap = InterceptorHooksMaps.get(target);\r\n    if (!hooksMap) {\r\n        InterceptorHooksMaps.set(target, (hooksMap = new Map()));\r\n    }\r\n\r\n    // Get or create the hooks array for the property key.\r\n    let hooksForKey = hooksMap.get(propertyKey);\r\n    if (!hooksForKey) {\r\n        hooksMap.set(propertyKey, (hooksForKey = []));\r\n        if (\r\n            // Replace the function with a new one that calls the hooks in addition to the original function.\r\n            !Reflect.set(target, propertyKey, (...args: unknown[]) => {\r\n                const result = Reflect.apply(originalFunction, target, args);\r\n                for (const { afterCall } of hooksForKey!) {\r\n                    afterCall?.(...args);\r\n                }\r\n                return result;\r\n            })\r\n        ) {\r\n            throw new Error(`Failed to define new function \"${propertyKey.toString()}\" on object \"${target}\".`);\r\n        }\r\n    }\r\n    hooksForKey.push(hooks as FunctionHooks<unknown[]>);\r\n\r\n    let isDisposed = false;\r\n    return {\r\n        dispose: () => {\r\n            if (!isDisposed) {\r\n                // Remove the hooks from the hooks array for the property key.\r\n                hooksForKey.splice(hooksForKey.indexOf(hooks), 1);\r\n\r\n                // If there are no more hooks for the property key, remove the property from the hooks map.\r\n                if (hooksForKey.length === 0) {\r\n                    hooksMap.delete(propertyKey);\r\n\r\n                    // If there are no more hooks for the target object, remove the hooks map from the WeakMap.\r\n                    if (hooksMap.size === 0) {\r\n                        InterceptorHooksMaps.delete(target);\r\n                    }\r\n\r\n                    if (propertyDescriptor) {\r\n                        // If we have a property descriptor, it means the property was defined directly on the target object,\r\n                        // in which case we replaced it and the original property descriptor needs to be restored.\r\n                        if (!Reflect.defineProperty(target, propertyKey, propertyDescriptor)) {\r\n                            throw new Error(`Failed to restore original function \"${propertyKey.toString()}\" on object \"${target}\".`);\r\n                        }\r\n                    } else {\r\n                        // Otherwise, the property was inherited through the prototype chain, and so we can simply delete it from\r\n                        // the target object to allow it to fall back to the prototype chain as it did originally.\r\n                        if (!Reflect.deleteProperty(target, propertyKey)) {\r\n                            throw new Error(`Failed to delete transient function \"${propertyKey.toString()}\" on object \"${target}\".`);\r\n                        }\r\n                    }\r\n                }\r\n\r\n                isDisposed = true;\r\n            }\r\n        },\r\n    };\r\n}\r\n","import type { IDisposable, Nullable } from \"core/index\";\r\n\r\n/**\r\n * Gets the property descriptor for a property on an object, including inherited properties.\r\n * @param target The object containing the property.\r\n * @param propertyKey The key of the property to get the descriptor for.\r\n * @returns The owner of the property (which may be different from the target in the case of inheritance) along with the property descriptor, or null if the property is not found.\r\n */\r\nexport function GetPropertyDescriptor<T extends object>(target: T, propertyKey: keyof T): Nullable<[owner: object, descriptor: PropertyDescriptor]> {\r\n    let propertyOwner: object | null = target;\r\n    let propertyDescriptor: PropertyDescriptor | undefined;\r\n    while (propertyOwner) {\r\n        if ((propertyDescriptor = Reflect.getOwnPropertyDescriptor(propertyOwner, propertyKey))) {\r\n            break;\r\n        }\r\n        propertyOwner = Reflect.getPrototypeOf(propertyOwner);\r\n    }\r\n\r\n    if (propertyOwner && propertyDescriptor) {\r\n        return [propertyOwner, propertyDescriptor];\r\n    }\r\n\r\n    return null;\r\n}\r\n\r\n/**\r\n * Checks if a property is readonly.\r\n * @param propertyDescriptor The property descriptor to check.\r\n * @returns True if the property is readonly, false otherwise.\r\n */\r\nexport function IsPropertyReadonly(propertyDescriptor: PropertyDescriptor): boolean {\r\n    // If the property is not writable, it is readonly.\r\n    return propertyDescriptor.writable === false || (propertyDescriptor.writable === undefined && !propertyDescriptor.set);\r\n}\r\n\r\nexport type PropertyHooks<T = unknown> = {\r\n    /**\r\n     * This function will be called after the hooked property is set.\r\n     * @param value The new value that was set on the property.\r\n     */\r\n    afterSet?: (value: T) => void;\r\n};\r\n\r\nconst InterceptorHooksMaps = new WeakMap<object, Map<PropertyKey, PropertyHooks<unknown>[]>>();\r\n\r\n/**\r\n * Intercepts a property on an object and allows you to add hooks that will be called when the property is get or set.\r\n * @param target The object containing the property to intercept.\r\n * @param propertyKey The key of the property to intercept.\r\n * @param hooks The hooks to call when the property is get or set.\r\n * @returns A disposable that removes the hooks when disposed and returns the object to its original state.\r\n */\r\n// This overload only matches when K is a specific literal key (not a union like keyof T)\r\nexport function InterceptProperty<T extends object, K extends keyof T>(\r\n    target: T,\r\n    propertyKey: string extends K ? never : number extends K ? never : symbol extends K ? never : K,\r\n    hooks: PropertyHooks<NonNullable<T[K]>>\r\n): IDisposable;\r\n// Fallback overload for generic/dynamic cases where the property type cannot be inferred\r\nexport function InterceptProperty<T extends object>(target: T, propertyKey: keyof T, hooks: PropertyHooks): IDisposable;\r\n/** @internal */\r\nexport function InterceptProperty<T extends object>(target: T, propertyKey: keyof T, hooks: PropertyHooks): IDisposable {\r\n    // Find the property descriptor and note the owning object (might be inherited through the prototype chain).\r\n    const ownerAndDescriptor = GetPropertyDescriptor(target, propertyKey);\r\n\r\n    // If the property does not exist, we'll define one transiently directly on the target object.\r\n    const [propertyOwner, propertyDescriptor] = ownerAndDescriptor ?? [\r\n        target,\r\n        {\r\n            configurable: true,\r\n            enumerable: true,\r\n            writable: true,\r\n            value: undefined,\r\n        },\r\n    ];\r\n\r\n    if (!ownerAndDescriptor) {\r\n        Reflect.defineProperty(propertyOwner, propertyKey, propertyDescriptor);\r\n    } else {\r\n        // If the property is not configurable, it cannot be intercepted.\r\n        if (!propertyDescriptor.configurable) {\r\n            throw new Error(`Property \"${propertyKey.toString()}\" of object \"${target}\" is not configurable.`);\r\n        }\r\n\r\n        // If the property is not writable, it cannot be intercepted, but it cannot be mutated anyway so there is no need to intercept it.\r\n        if (IsPropertyReadonly(propertyDescriptor)) {\r\n            return {\r\n                dispose: () => {},\r\n            };\r\n        }\r\n    }\r\n\r\n    // Get or create the hooks map for the target object.\r\n    let hooksMap = InterceptorHooksMaps.get(target);\r\n    if (!hooksMap) {\r\n        InterceptorHooksMaps.set(target, (hooksMap = new Map()));\r\n    }\r\n\r\n    // Get or create the hooks array for the property key.\r\n    let hooksForKey = hooksMap.get(propertyKey);\r\n    if (!hooksForKey) {\r\n        hooksMap.set(propertyKey, (hooksForKey = []));\r\n\r\n        let { get: getValue, set: setValue } = propertyDescriptor;\r\n\r\n        // We already checked that the property is writable, so if there is no setter, then it must be a value property.\r\n        // In this case, getValue can return the direct value, and setValue can set the direct value.\r\n        if (!setValue) {\r\n            getValue = () => propertyDescriptor.value;\r\n            setValue = (value: any) => (propertyDescriptor.value = value);\r\n        }\r\n\r\n        if (\r\n            // Replace the property with a new one that calls the hooks in addition to the original getter and setter.\r\n            !Reflect.defineProperty(target, propertyKey, {\r\n                configurable: true,\r\n                get: getValue ? () => getValue.call(target) : undefined,\r\n                set: (newValue: unknown) => {\r\n                    setValue.call(target, newValue);\r\n                    for (const { afterSet } of hooksForKey!) {\r\n                        afterSet?.(newValue);\r\n                    }\r\n                },\r\n            })\r\n        ) {\r\n            throw new Error(`Failed to define new property \"${propertyKey.toString()}\" on object \"${target}\".`);\r\n        }\r\n    }\r\n    hooksForKey.push(hooks as PropertyHooks<unknown>);\r\n\r\n    let isDisposed = false;\r\n    return {\r\n        dispose: () => {\r\n            if (!isDisposed) {\r\n                // Remove the hooks from the hooks array for the property key.\r\n                hooksForKey.splice(hooksForKey.indexOf(hooks as PropertyHooks<unknown>), 1);\r\n\r\n                // If there are no more hooks for the property key, remove the property from the hooks map.\r\n                if (hooksForKey.length === 0) {\r\n                    hooksMap.delete(propertyKey);\r\n\r\n                    // If there are no more hooks for the target object, remove the hooks map from the WeakMap.\r\n                    if (hooksMap.size === 0) {\r\n                        InterceptorHooksMaps.delete(target);\r\n                    }\r\n\r\n                    const shouldRestorePropertyDescriptor =\r\n                        // If the property is owned by the target object, then we may have replaced an original property descriptor that needs to be restore.\r\n                        propertyOwner === target &&\r\n                        // But this is only the case if we found an existing property descriptor on the target object (hence the ownerAndDescriptor check),\r\n                        // or if the property value is not undefined, in which case we still want to retain the value that was set.\r\n                        (ownerAndDescriptor || target[propertyKey] !== undefined);\r\n                    // Otherwise, the property was inherited through the prototype chain, and so we can simply delete it from the target object.\r\n\r\n                    if (shouldRestorePropertyDescriptor) {\r\n                        if (!Reflect.defineProperty(target, propertyKey, propertyDescriptor)) {\r\n                            throw new Error(`Failed to restore original property descriptor \"${propertyKey.toString()}\" on object \"${target}\".`);\r\n                        }\r\n                    } else {\r\n                        if (!Reflect.deleteProperty(target, propertyKey)) {\r\n                            throw new Error(`Failed to delete transient property descriptor \"${propertyKey.toString()}\" on object \"${target}\".`);\r\n                        }\r\n                    }\r\n                }\r\n\r\n                isDisposed = true;\r\n            }\r\n        },\r\n    };\r\n}\r\n","import type { IDisposable, IReadonlyObservable, Nullable } from \"core/index\";\r\n\r\nimport { useEffect, useMemo } from \"react\";\r\n\r\nimport { Observable } from \"core/Misc/observable\";\r\n\r\nimport { InterceptFunction } from \"../instrumentation/functionInstrumentation\";\r\nimport { InterceptProperty } from \"../instrumentation/propertyInstrumentation\";\r\n\r\n/**\r\n * Provides an observable that fires when a specified function/property is called/set.\r\n * @param type The type of the interceptor, either \"function\" or \"property\".\r\n * @param target The object containing the function/property to intercept.\r\n * @param propertyKey The key of the function/property to intercept.\r\n * @returns An observable that fires when the function/property is called/set.\r\n */\r\nexport function useInterceptObservable<T extends object>(type: \"function\" | \"property\", target: T | null | undefined, propertyKey: keyof T): IReadonlyObservable<void> {\r\n    // Create a cached observable. It effectively has the lifetime of the component that uses this hook.\r\n    const observable = useMemo(() => new Observable<void>(), []);\r\n\r\n    // Whenever the type, target, or property key changes, we need to set up a new interceptor.\r\n    useEffect(() => {\r\n        let interceptToken: Nullable<IDisposable> = null;\r\n\r\n        if (target) {\r\n            if (type === \"function\") {\r\n                interceptToken = InterceptFunction(target, propertyKey, {\r\n                    afterCall: () => {\r\n                        observable.notifyObservers();\r\n                    },\r\n                });\r\n            } else if (type === \"property\") {\r\n                interceptToken = InterceptProperty(target, propertyKey, {\r\n                    afterSet: () => {\r\n                        observable.notifyObservers();\r\n                    },\r\n                });\r\n            } else {\r\n                throw new Error(`Unknown interceptor type: ${type}`);\r\n            }\r\n        }\r\n\r\n        // When the effect is cleaned up, we need to dispose of the interceptor.\r\n        return () => {\r\n            interceptToken?.dispose();\r\n        };\r\n    }, [type, target, propertyKey, observable]);\r\n\r\n    return observable;\r\n}\r\n","import type { IReadonlyObservable } from \"core/index\";\r\n\r\nimport type { ObservableCollection } from \"../misc/observableCollection\";\r\n\r\nimport { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\r\n\r\n/**\r\n * Returns the current value of the accessor and updates it when the specified event is fired on the specified element.\r\n * @param accessor A function that returns the current value.\r\n * @param element The element to listen for the event on.\r\n * @param eventNames The names of the events to listen for.\r\n * @returns The current value of the accessor.\r\n *  * @remarks If the accessor function is not idempotent (e.g. it returns a different array or object instance each time it is called),\r\n * then there is a good chance it should be wrapped in a `useCallback` to prevent unnecessary re-renders or re-render infinite loops.\r\n */\r\nexport function useEventfulState<T>(accessor: () => T, element: HTMLElement | null | undefined, ...eventNames: string[]): T {\r\n    const [current, setCurrent] = useState(accessor);\r\n\r\n    useEffect(() => {\r\n        setCurrent(accessor);\r\n        if (element) {\r\n            const removers = eventNames.map((eventName) => {\r\n                const handler = () => {\r\n                    setCurrent(accessor());\r\n                };\r\n\r\n                element.addEventListener(eventName, handler);\r\n\r\n                return () => {\r\n                    element.removeEventListener(eventName, handler);\r\n                };\r\n            });\r\n\r\n            return () => {\r\n                removers.forEach((remove) => remove());\r\n            };\r\n        }\r\n\r\n        return undefined;\r\n    }, [accessor, element, ...eventNames]);\r\n\r\n    return current;\r\n}\r\n\r\n/**\r\n * Returns the current value of the accessor and updates it when any of the specified observables change.\r\n * @param accessor A function that returns the current value.\r\n * @param observables The observables to listen for changes on.\r\n * @returns The current value of the accessor.\r\n * @remarks If the accessor function is not idempotent (e.g. it returns a different array or object instance each time it is called),\r\n * then there is a good chance it should be wrapped in a `useCallback` to prevent unnecessary re-renders or re-render infinite loops.\r\n */\r\nexport function useObservableState<T>(accessor: () => T, ...observables: Array<IReadonlyObservable | null | undefined>): T {\r\n    const [current, setCurrent] = useState(accessor);\r\n\r\n    useEffect(() => {\r\n        setCurrent(accessor);\r\n        const observers = observables.map((observable) => {\r\n            if (observable) {\r\n                const observer = observable.add(() => {\r\n                    setCurrent(accessor());\r\n                });\r\n\r\n                return observer;\r\n            }\r\n            return null;\r\n        });\r\n\r\n        return () => {\r\n            observers.forEach((observer) => observer?.remove());\r\n        };\r\n    }, [accessor, ...observables]);\r\n\r\n    return current;\r\n}\r\n\r\n/**\r\n * Returns a copy of the items in the collection and updates it when the collection changes.\r\n * @param collection The collection to observe.\r\n * @returns A copy of the items in the collection.\r\n */\r\nexport function useObservableCollection<T>(collection: ObservableCollection<T>) {\r\n    const itemsRef = useRef([...collection.items]);\r\n    return useObservableState(\r\n        useCallback(() => {\r\n            if (itemsRef.current.length !== collection.items.length || !itemsRef.current.every((item, index) => item === collection.items[index])) {\r\n                itemsRef.current = [...collection.items];\r\n            }\r\n            return itemsRef.current;\r\n        }, [collection]),\r\n        collection.observable\r\n    );\r\n}\r\n\r\n/**\r\n * Returns a copy of the items in the collection sorted by the order property and updates it when the collection changes.\r\n * @param collection The collection to observe.\r\n * @returns A copy of the items in the collection sorted by the order property.\r\n */\r\nexport function useOrderedObservableCollection<T extends Readonly<{ order?: number }>>(collection: ObservableCollection<T>) {\r\n    const items = useObservableCollection(collection);\r\n    const sortedItems = useMemo(() => items.sort((a, b) => (a.order ?? 0) - (b.order ?? 0)), [items]);\r\n    return sortedItems;\r\n}\r\n","import { useCallback } from \"react\";\r\n\r\nimport { Color3, Color4 } from \"core/Maths/math.color\";\r\nimport { Quaternion, Vector3 } from \"core/Maths/math.vector\";\r\nimport { useInterceptObservable } from \"./instrumentationHooks\";\r\nimport { useObservableState } from \"./observableHooks\";\r\n\r\ntype PropertyKeys<TargetT, PropertyT> = { [PropertyKeyT in keyof TargetT]: TargetT[PropertyKeyT] extends PropertyT | null | undefined ? PropertyKeyT : never }[keyof TargetT];\r\n\r\nexport function useProperty<TargetT extends object, PropertyKeyT extends keyof TargetT>(target: TargetT, propertyKey: PropertyKeyT): TargetT[PropertyKeyT];\r\nexport function useProperty<TargetT extends object, PropertyKeyT extends keyof TargetT>(\r\n    target: TargetT | null | undefined,\r\n    propertyKey: PropertyKeyT\r\n): TargetT[PropertyKeyT] | undefined;\r\n/**\r\n * Translates a property value to react state, updating the state whenever the property changes.\r\n * @param target The object containing the property to observe.\r\n * @param propertyKey The key of the property to observe.\r\n * @returns The current value of the property, or null if the target is null or undefined.\r\n */\r\nexport function useProperty<TargetT extends object, PropertyKeyT extends keyof TargetT>(target: TargetT | null | undefined, propertyKey: PropertyKeyT) {\r\n    return useObservableState(\r\n        useCallback(() => (target ? target[propertyKey] : undefined), [target, propertyKey]),\r\n        useInterceptObservable(\"property\", target, propertyKey)\r\n    );\r\n}\r\n\r\nexport function useVector3Property<TargetT extends object, PropertyKeyT extends PropertyKeys<TargetT, Vector3>>(target: TargetT, propertyKey: PropertyKeyT): TargetT[PropertyKeyT];\r\nexport function useVector3Property<TargetT extends object, PropertyKeyT extends PropertyKeys<TargetT, Vector3>>(\r\n    target: TargetT | null | undefined,\r\n    propertyKey: PropertyKeyT\r\n): TargetT[PropertyKeyT] | undefined;\r\n/**\r\n * Translates a Vector3 property value to react state, updating the state whenever the property changes or when the x/y/z components of the Vector3 change.\r\n * @param target The object containing the property to observe.\r\n * @param propertyKey The key of the property to observe.\r\n * @returns The current value of the property, or null if the target is null or undefined.\r\n */\r\nexport function useVector3Property<TargetT extends object, PropertyKeyT extends PropertyKeys<TargetT, Vector3>>(target: TargetT | null | undefined, propertyKey: PropertyKeyT) {\r\n    const vector = useProperty(target, propertyKey);\r\n    useProperty(vector as Vector3 | null | undefined, \"_x\");\r\n    useProperty(vector as Vector3 | null | undefined, \"_y\");\r\n    useProperty(vector as Vector3 | null | undefined, \"_z\");\r\n    return vector;\r\n}\r\n\r\nexport function useColor3Property<TargetT extends object, PropertyKeyT extends PropertyKeys<TargetT, Color3>>(target: TargetT, propertyKey: PropertyKeyT): TargetT[PropertyKeyT];\r\nexport function useColor3Property<TargetT extends object, PropertyKeyT extends PropertyKeys<TargetT, Color3>>(\r\n    target: TargetT | null | undefined,\r\n    propertyKey: PropertyKeyT\r\n): TargetT[PropertyKeyT] | undefined;\r\n/**\r\n * Translates a Color3 property value to react state, updating the state whenever the property changes or when the r/g/b components of the Color3 change.\r\n * @param target The object containing the property to observe.\r\n * @param propertyKey The key of the property to observe.\r\n * @returns The current value of the property, or null if the target is null or undefined.\r\n */\r\nexport function useColor3Property<TargetT extends object, PropertyKeyT extends PropertyKeys<TargetT, Color3>>(target: TargetT | null | undefined, propertyKey: PropertyKeyT) {\r\n    const color = useProperty(target, propertyKey);\r\n    useProperty(color as Color3 | null | undefined, \"r\");\r\n    useProperty(color as Color3 | null | undefined, \"g\");\r\n    useProperty(color as Color3 | null | undefined, \"b\");\r\n    return color;\r\n}\r\n\r\nexport function useColor4Property<TargetT extends object, PropertyKeyT extends PropertyKeys<TargetT, Color4>>(target: TargetT, propertyKey: PropertyKeyT): TargetT[PropertyKeyT];\r\nexport function useColor4Property<TargetT extends object, PropertyKeyT extends PropertyKeys<TargetT, Color4>>(\r\n    target: TargetT | null | undefined,\r\n    propertyKey: PropertyKeyT\r\n): TargetT[PropertyKeyT] | null;\r\n/**\r\n * Translates a Color4 property value to react state, updating the state whenever the property changes or when the r/g/b components of the Color4 change.\r\n * @param target The object containing the property to observe.\r\n * @param propertyKey The key of the property to observe.\r\n * @returns The current value of the property, or null if the target is null or undefined.\r\n */\r\nexport function useColor4Property<TargetT extends object, PropertyKeyT extends PropertyKeys<TargetT, Color4>>(target: TargetT | null | undefined, propertyKey: PropertyKeyT) {\r\n    const color = useProperty(target, propertyKey);\r\n    useProperty(color as Color3 | null | undefined, \"r\");\r\n    useProperty(color as Color3 | null | undefined, \"g\");\r\n    useProperty(color as Color3 | null | undefined, \"b\");\r\n    useProperty(color as Color4 | null | undefined, \"a\");\r\n    return color;\r\n}\r\n\r\nexport function useQuaternionProperty<TargetT extends object, PropertyKeyT extends PropertyKeys<TargetT, Quaternion>>(\r\n    target: TargetT,\r\n    propertyKey: PropertyKeyT\r\n): TargetT[PropertyKeyT];\r\nexport function useQuaternionProperty<TargetT extends object, PropertyKeyT extends PropertyKeys<TargetT, Quaternion>>(\r\n    target: TargetT | null | undefined,\r\n    propertyKey: PropertyKeyT\r\n): TargetT[PropertyKeyT] | undefined;\r\n/**\r\n * Translates a Quaternion property value to react state, updating the state whenever the property changes or when the x/y/z/w components of the Quaternion change.\r\n * @param target The object containing the property to observe.\r\n * @param propertyKey The key of the property to observe.\r\n * @returns The current value of the property, or null if the target is null or undefined.\r\n */\r\nexport function useQuaternionProperty<TargetT extends object, PropertyKeyT extends PropertyKeys<TargetT, Quaternion>>(\r\n    target: TargetT | null | undefined,\r\n    propertyKey: PropertyKeyT\r\n) {\r\n    const quaternion = useProperty(target, propertyKey);\r\n    useProperty(quaternion as Quaternion | null | undefined, \"_x\");\r\n    useProperty(quaternion as Quaternion | null | undefined, \"_y\");\r\n    useProperty(quaternion as Quaternion | null | undefined, \"_z\");\r\n    useProperty(quaternion as Quaternion | null | undefined, \"_w\");\r\n\r\n    return quaternion;\r\n}\r\n\r\n/**\r\n * Creates a hook for a concrete value. For example, if the value is a Vector3,\r\n * it will return a hook that can intercept a change to the Vector3 property or\r\n * any of its components (x, y, z).\r\n * @param value The current value of a property that will be hooked.\r\n * @returns A hook function that can be used to observe changes to the property.\r\n */\r\nexport function MakePropertyHook(value: unknown) {\r\n    if (value instanceof Vector3) {\r\n        return useVector3Property;\r\n    } else if (value instanceof Quaternion) {\r\n        return useQuaternionProperty;\r\n    } else if (value instanceof Color3) {\r\n        return useColor3Property;\r\n    } else if (value instanceof Color4) {\r\n        return useColor4Property;\r\n    } else {\r\n        return useProperty;\r\n    }\r\n}\r\n","import { GetClassName } from \"core/Misc/typeStore\";\r\n\r\n// Check if BABYLON namespace exists\r\nlet BabylonNamespace = \"\";\r\nconst GlobalObject = typeof global !== \"undefined\" ? global : typeof window !== \"undefined\" ? window : undefined;\r\nif (typeof GlobalObject !== \"undefined\") {\r\n    if (typeof (<any>GlobalObject).BABYLON !== \"undefined\") {\r\n        BabylonNamespace = \"BABYLON.\";\r\n    }\r\n}\r\n\r\n// Inspired by previous copyToClipboard() function which was copying Color3\r\n// Copies strCommand to clipboard\r\n// eslint-disable-next-line @typescript-eslint/naming-convention\r\nexport function copyCommandToClipboard(strCommand: string) {\r\n    const element = document.createElement(\"div\");\r\n    element.textContent = strCommand;\r\n    document.body.appendChild(element);\r\n\r\n    if (window.getSelection) {\r\n        const range = document.createRange();\r\n        range.selectNode(element);\r\n        window.getSelection()!.removeAllRanges();\r\n        window.getSelection()!.addRange(range);\r\n    }\r\n\r\n    document.execCommand(\"copy\");\r\n    element.remove();\r\n}\r\n\r\n// Return the class name of the considered target\r\n// babylonNamespace is either \"\" (ES6) or \"BABYLON.\"\r\n// eslint-disable-next-line @typescript-eslint/naming-convention\r\nexport function getClassNameWithNamespace(obj: any): { className: string; babylonNamespace: string } {\r\n    let className = GetClassName(obj);\r\n    if (className.includes(\"BABYLON.\")) {\r\n        className = className.split(\"BABYLON.\")[1];\r\n    }\r\n    return { className, babylonNamespace: BabylonNamespace };\r\n}\r\n","import { getClassNameWithNamespace } from \"shared-ui-components/copyCommandToClipboard\";\r\n\r\n/**\r\n * Generates a string representation of a value for clipboard copy.\r\n * Handles primitives, vectors, colors, quaternions, and other Babylon.js types.\r\n * @param value - The value to convert to a string\r\n * @returns A string that can be used to recreate the value\r\n */\r\nexport function GenerateCopyString(value: unknown): string {\r\n    if (value === null) {\r\n        return \"null\";\r\n    }\r\n    if (value === undefined) {\r\n        return \"undefined\";\r\n    }\r\n\r\n    // Primitives\r\n    if (typeof value === \"string\") {\r\n        return `\"${value}\"`;\r\n    }\r\n    if (typeof value === \"number\" || typeof value === \"boolean\") {\r\n        return String(value);\r\n    }\r\n\r\n    // Objects with getClassName (Babylon types like Vector3, Color3, Quaternion, etc.)\r\n    if (typeof value === \"object\" && value !== null) {\r\n        const obj = value as Record<string, unknown>;\r\n\r\n        // Check for Babylon.js types with getClassName\r\n        if (typeof obj.getClassName === \"function\") {\r\n            const className = obj.getClassName() as string;\r\n            const { babylonNamespace } = getClassNameWithNamespace(value);\r\n\r\n            // Vector2, Vector3, Vector4\r\n            if (className === \"Vector2\") {\r\n                return `new ${babylonNamespace}Vector2(${obj.x}, ${obj.y})`;\r\n            }\r\n            if (className === \"Vector3\") {\r\n                return `new ${babylonNamespace}Vector3(${obj.x}, ${obj.y}, ${obj.z})`;\r\n            }\r\n            if (className === \"Vector4\") {\r\n                return `new ${babylonNamespace}Vector4(${obj.x}, ${obj.y}, ${obj.z}, ${obj.w})`;\r\n            }\r\n\r\n            // Quaternion\r\n            if (className === \"Quaternion\") {\r\n                return `new ${babylonNamespace}Quaternion(${obj.x}, ${obj.y}, ${obj.z}, ${obj.w})`;\r\n            }\r\n\r\n            // Color3, Color4\r\n            if (className === \"Color3\") {\r\n                const hexString = ColorToHex(obj.r as number, obj.g as number, obj.b as number, 1);\r\n                return `new ${babylonNamespace}Color3(${obj.r}, ${obj.g}, ${obj.b}) // (HEX: ${hexString})`;\r\n            }\r\n            if (className === \"Color4\") {\r\n                const hexString = ColorToHex(obj.r as number, obj.g as number, obj.b as number, obj.a as number);\r\n                return `new ${babylonNamespace}Color4(${obj.r}, ${obj.g}, ${obj.b}, ${obj.a}) // (HEX: ${hexString})`;\r\n            }\r\n\r\n            // Matrix - output as array\r\n            if (className === \"Matrix\" && typeof obj.toArray === \"function\") {\r\n                const arr = obj.toArray() as number[];\r\n                return `${babylonNamespace}Matrix.FromArray([${arr.join(\", \")}])`;\r\n            }\r\n\r\n            // For other Babylon types with a name property (like nodes, materials, etc.)\r\n            if (typeof obj.name === \"string\") {\r\n                return `\"${obj.name}\"`;\r\n            }\r\n\r\n            // Fallback: use className\r\n            return `[${className}]`;\r\n        }\r\n\r\n        // Plain objects or arrays\r\n        if (Array.isArray(value)) {\r\n            return `[${value.map(GenerateCopyString).join(\", \")}]`;\r\n        }\r\n\r\n        // Fallback for other objects\r\n        return JSON.stringify(value);\r\n    }\r\n\r\n    return String(value);\r\n}\r\n\r\n/**\r\n * Converts linear color values (0-1) to a hex string with alpha.\r\n * @param r - Red component (0-1, linear)\r\n * @param g - Green component (0-1, linear)\r\n * @param b - Blue component (0-1, linear)\r\n * @param a - Alpha component (0-1)\r\n * @returns Hex string in format #RRGGBBAA\r\n */\r\nfunction ColorToHex(r: number, g: number, b: number, a: number): string {\r\n    // Convert linear to sRGB and then to 0-255 range\r\n    const toSRGB = (c: number) => Math.round(Math.min(255, Math.max(0, Math.pow(c, 1 / 2.2) * 255)));\r\n    const rHex = toSRGB(r).toString(16).padStart(2, \"0\").toUpperCase();\r\n    const gHex = toSRGB(g).toString(16).padStart(2, \"0\").toUpperCase();\r\n    const bHex = toSRGB(b).toString(16).padStart(2, \"0\").toUpperCase();\r\n    const aHex = Math.round(Math.min(255, Math.max(0, a * 255)))\r\n        .toString(16)\r\n        .padStart(2, \"0\")\r\n        .toUpperCase();\r\n    return `#${rHex}${gHex}${bHex}${aHex}`;\r\n}\r\n","import type { ComponentProps, ComponentType } from \"react\";\r\n\r\nimport { forwardRef, useMemo } from \"react\";\r\n\r\nimport { ErrorBoundary } from \"../errorBoundary\";\r\nimport { usePropertyChangedNotifier } from \"../../contexts/propertyContext\";\r\nimport { MakePropertyHook, useProperty } from \"../../hooks/compoundPropertyHooks\";\r\nimport { GetPropertyDescriptor } from \"../../instrumentation/propertyInstrumentation\";\r\nimport { getClassNameWithNamespace } from \"shared-ui-components/copyCommandToClipboard\";\r\nimport { GenerateCopyString } from \"./generateCopyString\";\r\n\r\n/**\r\n * Helper type to check if a type includes null or undefined\r\n */\r\ntype IsNullable<T> = null extends T ? true : undefined extends T ? true : false;\r\n\r\n/**\r\n * Base props for BoundProperty\r\n */\r\ntype BaseBoundPropertyProps<TargetT extends object, PropertyKeyT extends keyof TargetT, ComponentT extends ComponentType<any>> = Omit<\r\n    ComponentProps<ComponentT>,\r\n    \"value\" | \"onChange\" | \"nullable\" | \"defaultValue\" | \"ignoreNullable\"\r\n> & {\r\n    component: ComponentT;\r\n    target: TargetT | null | undefined;\r\n    propertyKey: PropertyKeyT;\r\n    /** Optional propertyPath used to generate the copyString if path to property is not equal to entity.target */\r\n    propertyPath?: string;\r\n    convertTo?: (value: TargetT[PropertyKeyT]) => TargetT[PropertyKeyT];\r\n    convertFrom?: (value: TargetT[PropertyKeyT]) => TargetT[PropertyKeyT];\r\n};\r\n\r\n/**\r\n * Enhanced BoundProperty props that enforces strict nullable handling\r\n */\r\nexport type BoundPropertyProps<TargetT extends object, PropertyKeyT extends keyof TargetT, ComponentT extends ComponentType<any>> = BaseBoundPropertyProps<\r\n    TargetT,\r\n    PropertyKeyT,\r\n    ComponentT\r\n> &\r\n    (IsNullable<TargetT[PropertyKeyT]> extends true\r\n        ? // Pass null explicitly to skip nullable handling entirely - value passes through as-is\r\n          | {\r\n                    defaultValue: null;\r\n                    nullable?: never;\r\n                    ignoreNullable?: never;\r\n                }\r\n              | (ComponentProps<ComponentT> extends { nullable?: boolean }\r\n                    ? // Component supports nullable UI and thus requires a defaultValue to be sent with nullable = {true}\r\n                      | {\r\n                                nullable: true;\r\n                                defaultValue: NonNullable<TargetT[PropertyKeyT]>;\r\n                                ignoreNullable?: never;\r\n                            }\r\n                          | {\r\n                                ignoreNullable: true;\r\n                                defaultValue: NonNullable<TargetT[PropertyKeyT]>;\r\n                                nullable?: never;\r\n                            }\r\n                    : // Component doesn't support nullable UI - only allow defaultValue: null\r\n                      never)\r\n        : {});\r\n\r\nfunction BoundPropertyCoreImpl<TargetT extends object, PropertyKeyT extends keyof TargetT, ComponentT extends ComponentType<any>>(\r\n    props: Omit<BoundPropertyProps<TargetT, PropertyKeyT, ComponentT>, \"target\"> & { target: TargetT },\r\n    ref?: any\r\n) {\r\n    const { target, propertyKey } = props;\r\n\r\n    // Get the value of the property. If it changes, it will cause a re-render, which is needed to\r\n    // re-evaluate which specific hook will catch all the nested property changes we want to observe.\r\n    const value = useProperty(target, propertyKey);\r\n\r\n    // Determine which specific property hook to use based on the value's type.\r\n    const useSpecificProperty = useMemo(() => MakePropertyHook(value), [value]);\r\n\r\n    const notifyPropertyChanged = usePropertyChangedNotifier();\r\n\r\n    // Create an inline nested component that changes when the desired specific hook type changes (since hooks can't be conditional).\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    const SpecificComponent = useMemo(() => {\r\n        return (props: ComponentProps<ComponentT>) => {\r\n            // eslint-disable-next-line @typescript-eslint/naming-convention\r\n            const { target, propertyKey, propertyPath, convertTo, convertFrom, component: Component, ...rest } = props;\r\n\r\n            // Hook the property, using the specific hook that also catches changes to nested properties as well (like x/y/z on a Vector3 for example).\r\n            const value = useSpecificProperty(target, propertyKey);\r\n            const convertedValue = convertTo ? convertTo(value) : value;\r\n\r\n            const onChange = useMemo(() => {\r\n                const propertyDescriptor = GetPropertyDescriptor(target, propertyKey)?.[1];\r\n                if (propertyDescriptor && (propertyDescriptor.set || propertyDescriptor.writable)) {\r\n                    return (val: TargetT[PropertyKeyT]) => {\r\n                        const oldValue = target[propertyKey];\r\n                        const newValue = convertFrom ? convertFrom(val) : val;\r\n                        target[propertyKey] = newValue;\r\n                        notifyPropertyChanged(target, propertyKey, oldValue, newValue);\r\n                    };\r\n                }\r\n                return undefined;\r\n            }, [target, propertyKey, convertFrom, notifyPropertyChanged]);\r\n\r\n            const propsToSend = {\r\n                // will be overriden if custom onCopy is passed in\r\n                onCopy: () => {\r\n                    if (propertyPath) {\r\n                        return GetOnCopyString(value, propertyPath);\r\n                    }\r\n                    const { className, babylonNamespace } = getClassNameWithNamespace(target);\r\n                    return `${GetOnCopyString(value, String(propertyKey))} // (debugNode as ${babylonNamespace}${className})`;\r\n                },\r\n                ...rest,\r\n                ref,\r\n                value: convertedValue as TargetT[PropertyKeyT],\r\n                onChange,\r\n            };\r\n\r\n            return <Component {...(propsToSend as ComponentProps<ComponentT>)} />;\r\n        };\r\n    }, [useSpecificProperty, notifyPropertyChanged]);\r\n\r\n    return <SpecificComponent {...(props as ComponentProps<ComponentT>)} />;\r\n}\r\n\r\nconst BoundPropertyCore = CreateGenericForwardRef(BoundPropertyCoreImpl);\r\n\r\nfunction BoundPropertyImpl<TargetT extends object, PropertyKeyT extends keyof TargetT, ComponentT extends ComponentType<any>>(\r\n    props: BoundPropertyProps<TargetT, PropertyKeyT, ComponentT>,\r\n    ref?: any\r\n) {\r\n    const { target, ...rest } = props;\r\n\r\n    // If target is null, don't render anything.\r\n    if (!target) {\r\n        return null;\r\n    }\r\n\r\n    // Target is guaranteed to be non-null here, pass to core implementation.\r\n    return (\r\n        <ErrorBoundary name={`BoundProperty:${String(props.propertyKey)}`}>\r\n            <BoundPropertyCore {...rest} target={target} ref={ref} />\r\n        </ErrorBoundary>\r\n    );\r\n}\r\n\r\n// Custom generic forwardRef function (this is needed because using forwardRef with BoundPropertyImpl does not properly resolve Generic types)\r\nfunction CreateGenericForwardRef<T extends (...args: any[]) => any>(render: T) {\r\n    return forwardRef(render as any) as unknown as T;\r\n}\r\n\r\n/**\r\n * Intercepts the passed in component's target[propertyKey] with useInterceptObservable and sets component state using useObservableState.\r\n * Renders the passed in component with value as the new observableState value and onChange as a callback to set the target[propertyKey] value.\r\n *\r\n * NOTE: BoundProperty has strict nullable enforcement!\r\n *\r\n * If Target[PropertyKey] is Nullable, caller has three options:\r\n * 1. `nullable: true` + `defaultValue: NonNullable<T>` - Shows enable/disable checkbox UI\r\n * 2. `ignoreNullable: true` + `defaultValue: NonNullable<T>` - Shows disabled state when null\r\n * 3. `defaultValue: null` - Skips nullable handling entirely, passes value through as-is\r\n *\r\n * @param props BoundPropertyProps with strict nullable validation\r\n * @returns JSX element\r\n */\r\nexport const BoundProperty = CreateGenericForwardRef(BoundPropertyImpl);\r\n\r\n/**\r\n * Mutually exclusive propertyPath or functionPath - one required\r\n */\r\ntype RequiredPropertyPath = { propertyPath: string; functionPath?: never } | { functionPath: string; propertyPath?: never };\r\n/**\r\n * Props for Property component - a simpler version of BoundProperty that only handles onCopy functionality\r\n * Pass in the full propertyPath from entity to property (e.g. \"meshes[0].position.x\") to ensure copyString is accurate\r\n * Use functionPath for function-based properties (e.g. \"setEnabled\" generates \"debugNode.setEnabled(value)\")\r\n */\r\nexport type PropertyProps<ComponentT extends ComponentType<any>> = Omit<ComponentProps<ComponentT>, \"onCopy\"> & {\r\n    component: ComponentT;\r\n} & RequiredPropertyPath;\r\n\r\nfunction GetOnCopyString(value: unknown, propertyPath: string) {\r\n    const valueStr = GenerateCopyString(value);\r\n    return `globalThis.debugNode.${propertyPath} = ${valueStr};`;\r\n}\r\n\r\nfunction GetOnCopyStringFunc(value: unknown, functionPath: string) {\r\n    const valueStr = GenerateCopyString(value);\r\n    return `globalThis.debugNode.${functionPath}(${valueStr});`;\r\n}\r\n\r\nfunction PropertyImpl<ComponentT extends ComponentType<any>>(props: PropertyProps<ComponentT>, ref?: any) {\r\n    const {\r\n        // eslint-disable-next-line @typescript-eslint/naming-convention\r\n        component: Component,\r\n        propertyPath,\r\n        functionPath,\r\n        value,\r\n        ...rest\r\n    } = props as PropertyProps<ComponentT> & { value?: unknown; propertyPath?: string; functionPath?: string };\r\n\r\n    const propsToSend = {\r\n        onCopy: () => (functionPath ? GetOnCopyStringFunc(value, functionPath) : GetOnCopyString(value, propertyPath!)),\r\n        ...rest,\r\n        ref,\r\n        value,\r\n    };\r\n\r\n    return <Component {...(propsToSend as ComponentProps<ComponentT>)} />;\r\n}\r\n\r\n/**\r\n * A simpler version of BoundProperty that only provides the onCopy functionality.\r\n * Does not bind the value/onChange - those must be provided by the caller.\r\n * Use this when you need copy support but have custom value/onChange handling.\r\n *\r\n * @param props PropertyProps with propertyName for copy support\r\n * @returns JSX element\r\n */\r\nexport const Property = CreateGenericForwardRef(PropertyImpl);\r\n","import { makeStyles } from \"@fluentui/react-components\";\r\nimport { Collapse as FluentCollapse } from \"@fluentui/react-motion-components-preview\";\r\nimport type { FunctionComponent, PropsWithChildren } from \"react\";\r\n\r\ntype CollapseProps = {\r\n    visible: boolean;\r\n    orientation?: \"horizontal\" | \"vertical\";\r\n};\r\n\r\nconst useCollapseStyles = makeStyles({\r\n    collapseContent: {\r\n        overflow: \"hidden\",\r\n        display: \"flex\",\r\n    },\r\n    horizontal: {\r\n        flexDirection: \"row\",\r\n    },\r\n    vertical: {\r\n        flexDirection: \"column\",\r\n    },\r\n});\r\n\r\n/**\r\n * Wraps the passed in children with a fluent collapse component, handling smooth animation when visible prop changes\r\n * NOTE: When passing in children, prefer react fragment over empty div to avoid bloating the react tree with an unnecessary div\r\n * @param props\r\n * @returns\r\n */\r\nexport const Collapse: FunctionComponent<PropsWithChildren<CollapseProps>> = (props) => {\r\n    Collapse.displayName = \"Collapse\";\r\n    const classes = useCollapseStyles();\r\n    return (\r\n        <FluentCollapse visible={props.visible} orientation={props.orientation}>\r\n            <div className={`${classes.collapseContent} ${props.orientation === \"horizontal\" ? classes.horizontal : classes.vertical}`}>{props.children}</div>\r\n        </FluentCollapse>\r\n    );\r\n};\r\n","import type { PropsWithChildren } from \"react\";\r\n\r\nimport type { ImmutablePrimitiveProps } from \"./primitive\";\r\n\r\nimport { forwardRef } from \"react\";\r\nimport { Body1, Caption1, Link as FluentLink } from \"@fluentui/react-components\";\r\n\r\nexport type LinkProps = ImmutablePrimitiveProps<string> & {\r\n    /**\r\n     * Used if you want to handle the link click yourself\r\n     */\r\n    onLink?: () => void;\r\n    /**\r\n     * The URL the link points to\r\n     */\r\n    url?: string;\r\n    /**\r\n     * Defines whether to open the link in current tab or new tab. Default is new\r\n     */\r\n    target?: \"current\" | \"new\";\r\n\r\n    /**Force link size */\r\n    size?: \"small\" | \"medium\";\r\n};\r\n\r\nexport const Link = forwardRef<HTMLAnchorElement, PropsWithChildren<LinkProps>>((props, ref) => {\r\n    const { target, url, onLink, size, ...rest } = props;\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    const TextComponent = size === \"small\" ? Caption1 : Body1;\r\n\r\n    return (\r\n        <FluentLink ref={ref} inline target={target === \"current\" ? \"_self\" : \"_blank\"} rel=\"noopener noreferrer\" href={url} onClick={onLink ?? undefined} {...rest}>\r\n            {props.children}\r\n            <TextComponent>{props.value}</TextComponent>\r\n        </FluentLink>\r\n    );\r\n});\r\nLink.displayName = \"Link\";\r\n","import { ToggleButton as FluentToggleButton, makeStyles } from \"@fluentui/react-components\";\r\nimport type { ButtonProps } from \"./button\";\r\nimport { useCallback, useContext, useEffect, useState } from \"react\";\r\nimport type { FunctionComponent } from \"react\";\r\nimport type { FluentIcon } from \"@fluentui/react-icons\";\r\nimport { ToolContext } from \"../hoc/fluentToolWrapper\";\r\nimport { Tooltip } from \"./tooltip\";\r\n\r\nconst useStyles = makeStyles({\r\n    button: {\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\",\r\n    },\r\n});\r\n\r\ntype ToggleButtonProps = Omit<ButtonProps, \"icon\" | \"onClick\"> & {\r\n    value: boolean;\r\n    checkedIcon: FluentIcon;\r\n    uncheckedIcon?: FluentIcon;\r\n    onChange: (checked: boolean) => void;\r\n};\r\n\r\n/**\r\n * Toggles between two states using a button with icons.\r\n * If no disabledIcon is provided, the button will toggle between visual enabled/disabled states without an icon change\r\n *\r\n * @param props\r\n * @returns\r\n */\r\nexport const ToggleButton: FunctionComponent<ToggleButtonProps> = (props) => {\r\n    ToggleButton.displayName = \"ToggleButton\";\r\n    const { value, onChange, title, appearance = \"subtle\" } = props;\r\n    const { size } = useContext(ToolContext);\r\n    const classes = useStyles();\r\n    const [checked, setChecked] = useState(value);\r\n    const toggle = useCallback(() => {\r\n        setChecked((prev) => {\r\n            const enabled = !prev;\r\n            onChange(enabled);\r\n            return enabled;\r\n        });\r\n    }, [setChecked]);\r\n\r\n    useEffect(() => {\r\n        setChecked(props.value);\r\n    }, [props.value]);\r\n\r\n    return (\r\n        <Tooltip content={title ?? \"\"}>\r\n            <FluentToggleButton\r\n                className={classes.button}\r\n                size={size}\r\n                icon={checked ? <props.checkedIcon /> : props.uncheckedIcon ? <props.uncheckedIcon /> : <props.checkedIcon />}\r\n                appearance={appearance}\r\n                checked={checked}\r\n                onClick={toggle}\r\n            />\r\n        </Tooltip>\r\n    );\r\n};\r\n","import type { FunctionComponent, MouseEvent, MouseEventHandler } from \"react\";\r\nimport { useCallback, useState, useEffect } from \"react\";\r\nimport { Body1Strong, InfoLabel as FluentInfoLabel, makeStyles, mergeClasses, useFluent } from \"@fluentui/react-components\";\r\n\r\nexport type InfoLabelProps = {\r\n    htmlFor: string; // required ID of the element whose label we are applying\r\n    info?: JSX.Element;\r\n    label: string;\r\n    className?: string;\r\n    /**\r\n     * When true, applies flex layout styling to the label slot for proper truncation in flex containers\r\n     */\r\n    flexLabel?: boolean;\r\n    /**\r\n     * Handler for right-click context menu. Also triggers on Ctrl+click.\r\n     */\r\n    onContextMenu?: MouseEventHandler;\r\n};\r\nexport type InfoLabelParentProps = Omit<InfoLabelProps, \"htmlFor\">;\r\nconst useInfoLabelStyles = makeStyles({\r\n    infoPopup: {\r\n        whiteSpace: \"normal\",\r\n        wordBreak: \"break-word\",\r\n    },\r\n    labelSlot: {\r\n        display: \"flex\",\r\n        minWidth: 0,\r\n    },\r\n    labelText: {\r\n        whiteSpace: \"nowrap\",\r\n        overflow: \"hidden\",\r\n        textOverflow: \"ellipsis\",\r\n    },\r\n    copyable: {\r\n        cursor: \"copy\",\r\n    },\r\n});\r\n/**\r\n * Renders a label with an optional popup containing more info\r\n * @param props\r\n * @returns\r\n */\r\nexport const InfoLabel: FunctionComponent<InfoLabelProps> = (props) => {\r\n    InfoLabel.displayName = \"InfoLabel\";\r\n    const classes = useInfoLabelStyles();\r\n    const { targetDocument } = useFluent();\r\n\r\n    const [ctrlPressed, setCtrlPressed] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const targetWindow = targetDocument?.defaultView ?? window;\r\n\r\n        const handleKeyDown = (e: KeyboardEvent) => {\r\n            if (e.ctrlKey) {\r\n                setCtrlPressed(true);\r\n            }\r\n        };\r\n        const handleKeyUp = (e: KeyboardEvent) => {\r\n            if (!e.ctrlKey) {\r\n                setCtrlPressed(false);\r\n            }\r\n        };\r\n        const handleBlur = () => {\r\n            setCtrlPressed(false);\r\n        };\r\n\r\n        targetWindow.addEventListener(\"keydown\", handleKeyDown);\r\n        targetWindow.addEventListener(\"keyup\", handleKeyUp);\r\n        targetWindow.addEventListener(\"blur\", handleBlur);\r\n\r\n        return () => {\r\n            targetWindow.removeEventListener(\"keydown\", handleKeyDown);\r\n            targetWindow.removeEventListener(\"keyup\", handleKeyUp);\r\n            targetWindow.removeEventListener(\"blur\", handleBlur);\r\n        };\r\n    }, [targetDocument]);\r\n\r\n    const infoContent = props.info ? <div className={classes.infoPopup}>{props.info}</div> : undefined;\r\n\r\n    const showCopyCursor = ctrlPressed && props.onContextMenu;\r\n\r\n    // Handle Ctrl+click as context menu action\r\n    const handleClick = useCallback(\r\n        (e: MouseEvent) => {\r\n            if (e.ctrlKey && props.onContextMenu) {\r\n                props.onContextMenu(e);\r\n            }\r\n        },\r\n        [props.onContextMenu]\r\n    );\r\n\r\n    return infoContent ? (\r\n        <FluentInfoLabel\r\n            htmlFor={props.htmlFor}\r\n            info={infoContent}\r\n            className={mergeClasses(props.className, showCopyCursor ? classes.copyable : undefined)}\r\n            label={props.flexLabel ? { className: classes.labelSlot } : undefined}\r\n            onContextMenu={props.onContextMenu}\r\n            onClick={handleClick}\r\n        >\r\n            <Body1Strong className={classes.labelText}>{props.label}</Body1Strong>\r\n        </FluentInfoLabel>\r\n    ) : (\r\n        <Body1Strong className={mergeClasses(props.className, showCopyCursor ? classes.copyable : undefined)} onContextMenu={props.onContextMenu} onClick={handleClick}>\r\n            {props.label}\r\n        </Body1Strong>\r\n    );\r\n};\r\n","import { FluentProvider, Toast, ToastBody, Toaster, useId, useToastController, useFluent } from \"@fluentui/react-components\";\r\nimport type { FunctionComponent, PropsWithChildren } from \"react\";\r\nimport { createContext, useCallback, useContext } from \"react\";\r\n\r\ntype ToastContextType = {\r\n    showToast: (message: string) => void;\r\n};\r\n\r\nconst ToastContext = createContext<ToastContextType>({ showToast: () => {} });\r\n\r\nexport const ToastProvider: FunctionComponent<PropsWithChildren> = ({ children }) => {\r\n    const toasterId = useId(\"toaster\");\r\n    const { dispatchToast } = useToastController(toasterId);\r\n    const { targetDocument } = useFluent();\r\n\r\n    const showToast = useCallback(\r\n        (message: string) => {\r\n            dispatchToast(\r\n                <Toast>\r\n                    <ToastBody>{message}</ToastBody>\r\n                </Toast>,\r\n                { intent: \"success\", timeout: 1000 }\r\n            );\r\n        },\r\n        [dispatchToast]\r\n    );\r\n\r\n    return (\r\n        <ToastContext.Provider value={{ showToast }}>\r\n            {children}\r\n            <FluentProvider applyStylesToPortals targetDocument={targetDocument}>\r\n                <Toaster toasterId={toasterId} position=\"bottom-end\" />\r\n            </FluentProvider>\r\n        </ToastContext.Provider>\r\n    );\r\n};\r\n\r\n/**\r\n * Hook to show toast notifications.\r\n * @returns Object with showToast function that accepts a message string\r\n */\r\nexport function useToast() {\r\n    return useContext(ToastContext);\r\n}\r\n","import { Body1, Checkbox, makeStyles, tokens, mergeClasses } from \"@fluentui/react-components\";\r\nimport {\r\n    ChevronCircleDown20Regular,\r\n    ChevronCircleDown16Regular,\r\n    ChevronCircleRight16Regular,\r\n    ChevronCircleRight20Regular,\r\n    CopyRegular,\r\n    Copy16Regular,\r\n} from \"@fluentui/react-icons\";\r\nimport type { FunctionComponent, HTMLProps, PropsWithChildren, MouseEvent } from \"react\";\r\nimport { useContext, useState, forwardRef, cloneElement, isValidElement, useRef, useCallback } from \"react\";\r\nimport { Collapse } from \"../../primitives/collapse\";\r\nimport { copyCommandToClipboard } from \"../../../copyCommandToClipboard\";\r\nimport { ToolContext } from \"../fluentToolWrapper\";\r\nimport type { PrimitiveProps } from \"../../primitives/primitive\";\r\nimport { Link } from \"../../primitives/link\";\r\nimport { ToggleButton } from \"../../primitives/toggleButton\";\r\nimport { Button } from \"../../primitives/button\";\r\nimport { CustomTokens, TokenMap } from \"../../primitives/utils\";\r\nimport { InfoLabel } from \"../../primitives/infoLabel\";\r\nimport { Tooltip } from \"../../primitives/tooltip\";\r\nimport { useToast } from \"../../primitives/toast\";\r\n\r\nconst usePropertyLineStyles = makeStyles({\r\n    baseLine: {\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"flex-start\",\r\n        width: \"100%\",\r\n    },\r\n    infoLabel: {\r\n        display: \"flex\",\r\n        flex: \"1 1 0\", // grow=1, shrink =1, basis = 0 initial size before\r\n        minWidth: CustomTokens.labelMinWidth,\r\n        textAlign: \"left\",\r\n    },\r\n    rightContent: {\r\n        flex: \"0 1 auto\",\r\n        minWidth: 0,\r\n        overflow: \"hidden\",\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"flex-end\",\r\n    },\r\n    childWrapper: {\r\n        minWidth: 0,\r\n        overflow: \"hidden\",\r\n        textOverflow: \"ellipsis\",\r\n        whiteSpace: \"nowrap\",\r\n    },\r\n    infoPopup: {\r\n        whiteSpace: \"normal\",\r\n        wordBreak: \"break-word\",\r\n    },\r\n    copy: {\r\n        marginRight: CustomTokens.rightAlignOffset, // Accounts for the padding baked into fluent button / ensures propertyLine looks visually aligned at the right\r\n    },\r\n    expandedContentDiv: {\r\n        overflow: \"hidden\",\r\n        paddingLeft: tokens.spacingHorizontalM,\r\n    },\r\n    checkbox: {\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        marginRight: tokens.spacingHorizontalXS,\r\n    },\r\n    checkboxIndicator: {\r\n        margin: TokenMap.px2,\r\n        width: TokenMap.px12,\r\n        height: TokenMap.px12,\r\n    },\r\n});\r\n\r\ntype BasePropertyLineProps = {\r\n    /**\r\n     * The name of the property to display in the property line.\r\n     */\r\n    label: string;\r\n    /**\r\n     * Optional description for the property, shown on hover of the info icon\r\n     */\r\n    description?: string;\r\n    /**\r\n     * Optional function returning a string to copy to clipboard.\r\n     */\r\n    onCopy?: () => string;\r\n    /**\r\n     * Link to the documentation for this property, available from the info icon either linked from the description (if provided) or default 'docs' text\r\n     */\r\n    docLink?: string;\r\n};\r\n\r\n// Only require value/onChange/defaultValue props if nullable is true\r\ntype NullableProperty<ValueT> = {\r\n    nullable: true;\r\n    ignoreNullable: false;\r\n    value: ValueT;\r\n    onChange: (value: ValueT) => void;\r\n    defaultValue?: ValueT;\r\n};\r\n\r\ntype IgnoreNullable<ValueT> = {\r\n    ignoreNullable: true;\r\n    nullable: false;\r\n    value: ValueT;\r\n    onChange: (value: ValueT) => void;\r\n    defaultValue: ValueT;\r\n};\r\n\r\ntype NonNullableProperty = {\r\n    nullable?: false;\r\n    ignoreNullable?: false;\r\n};\r\n\r\n// Only expect optional expandByDefault prop if expandedContent is defined\r\ntype ExpandableProperty = {\r\n    /**\r\n     * If supplied, an 'expand' icon will be shown which, when clicked, renders this component within the property line.\r\n     */\r\n    expandedContent: JSX.Element;\r\n\r\n    /**\r\n     * If true, the expanded content will be shown by default.\r\n     */\r\n    expandByDefault?: boolean;\r\n};\r\n\r\n// If expanded content is undefined, don't expect expandByDefault prop\r\ntype NonExpandableProperty = {\r\n    expandedContent?: undefined;\r\n};\r\n\r\nexport type PropertyLineProps<ValueT> = BasePropertyLineProps &\r\n    (NullableProperty<ValueT> | NonNullableProperty | IgnoreNullable<ValueT>) &\r\n    (ExpandableProperty | NonExpandableProperty);\r\n\r\n/**\r\n * A reusable component that renders a property line with a label and child content, and an optional description, copy button, and expandable section.\r\n *\r\n * @param props - The properties for the PropertyLine component.\r\n * @returns A React element representing the property line.\r\n *\r\n */\r\nexport const PropertyLine = forwardRef<HTMLDivElement, PropsWithChildren<PropertyLineProps<any>>>((props, ref) => {\r\n    PropertyLine.displayName = \"PropertyLine\";\r\n    const { disableCopy, size } = useContext(ToolContext);\r\n    const classes = usePropertyLineStyles();\r\n    const { label, onCopy, expandedContent, children, nullable, ignoreNullable } = props;\r\n\r\n    const [expanded, setExpanded] = useState(\"expandByDefault\" in props ? props.expandByDefault : false);\r\n    const cachedVal = useRef(nullable ? props.value : null);\r\n\r\n    const { showToast } = useToast();\r\n\r\n    const handleCopy = useCallback(() => {\r\n        if (onCopy) {\r\n            copyCommandToClipboard(onCopy());\r\n            showToast(\"Copied property to clipboard\");\r\n        }\r\n    }, [onCopy, showToast]);\r\n\r\n    const handleContextMenu = useCallback(\r\n        (e: MouseEvent) => {\r\n            e.preventDefault();\r\n            handleCopy();\r\n        },\r\n        [handleCopy]\r\n    );\r\n\r\n    const description = props.docLink ? <Link url={props.docLink} value={props.description ?? \"Docs\"} /> : props.description ? <Body1>{props.description}</Body1> : undefined;\r\n\r\n    // Process children to handle nullable state -- creating component in disabled state with default value in lieu of null value\r\n    const processedChildren =\r\n        (nullable || ignoreNullable) && isValidElement(children)\r\n            ? cloneElement(children, {\r\n                  ...children.props,\r\n                  disabled: children.props.disabled || (nullable && props.value == null),\r\n                  value: props.value ?? props.defaultValue,\r\n                  defaultValue: undefined, // Don't pass defaultValue to children as there is no guarantee how this will be used and we can't mix controlled + uncontrolled state\r\n              })\r\n            : children;\r\n\r\n    return (\r\n        <LineContainer ref={ref}>\r\n            <div className={classes.baseLine}>\r\n                <InfoLabel className={classes.infoLabel} htmlFor=\"property\" info={description} label={label} flexLabel onContextMenu={onCopy ? handleContextMenu : undefined} />\r\n                <div className={classes.rightContent} id=\"property\">\r\n                    {expandedContent && (\r\n                        <ToggleButton\r\n                            title=\"Expand/Collapse property\"\r\n                            appearance=\"transparent\"\r\n                            checkedIcon={size === \"small\" ? ChevronCircleDown16Regular : ChevronCircleDown20Regular}\r\n                            uncheckedIcon={size === \"small\" ? ChevronCircleRight16Regular : ChevronCircleRight20Regular}\r\n                            value={expanded === true}\r\n                            onChange={setExpanded}\r\n                        />\r\n                    )}\r\n\r\n                    {nullable && !ignoreNullable && (\r\n                        // If this is a nullableProperty and ignoreNullable was not sent, display a checkbox used to toggle null ('checked' means 'non null')\r\n                        <Tooltip content={props.value == null ? \"Enable property\" : \"Disable property (set to null)\"}>\r\n                            <Checkbox\r\n                                className={classes.checkbox}\r\n                                indicator={{ className: classes.checkboxIndicator }}\r\n                                checked={!(props.value == null)}\r\n                                onChange={(_, data) => {\r\n                                    if (data.checked) {\r\n                                        // if checked this means we are returning to non-null, use cached value if exists. If no cached value, use default value\r\n                                        cachedVal.current != null ? props.onChange(cachedVal.current) : props.onChange(props.defaultValue);\r\n                                    } else {\r\n                                        // if moving to un-checked state, this means moving to null value. Cache the old value and tell props.onChange(null)\r\n                                        cachedVal.current = props.value;\r\n                                        props.onChange(null);\r\n                                    }\r\n                                }}\r\n                            />\r\n                        </Tooltip>\r\n                    )}\r\n                    <div className={classes.childWrapper}>{processedChildren}</div>\r\n                    {onCopy && !disableCopy && (\r\n                        <Tooltip content=\"Copy to Clipboard\">\r\n                            <Button className={classes.copy} appearance=\"transparent\" icon={size === \"small\" ? Copy16Regular : CopyRegular} onClick={handleCopy} />\r\n                        </Tooltip>\r\n                    )}\r\n                </div>\r\n            </div>\r\n            {expandedContent && (\r\n                <Collapse visible={!!expanded}>\r\n                    <div className={classes.expandedContentDiv}>{expandedContent}</div>\r\n                </Collapse>\r\n            )}\r\n        </LineContainer>\r\n    );\r\n});\r\n\r\nconst useLineStyles = makeStyles({\r\n    container: {\r\n        width: \"100%\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\", // Stack line + expanded content\r\n        minHeight: CustomTokens.lineHeight,\r\n        boxSizing: \"border-box\",\r\n        justifyContent: \"center\",\r\n        paddingTop: tokens.spacingVerticalXXS,\r\n        paddingBottom: tokens.spacingVerticalXXS,\r\n        borderTop: `1px solid transparent`,\r\n        borderBottom: `1px solid transparent`,\r\n        \":hover\": {\r\n            borderTopColor: tokens.colorNeutralStroke2,\r\n            borderBottomColor: tokens.colorNeutralStroke2,\r\n        },\r\n    },\r\n    containerSmall: {\r\n        minHeight: CustomTokens.lineHeightSmall,\r\n    },\r\n});\r\n\r\nexport const LineContainer = forwardRef<HTMLDivElement, PropsWithChildren<HTMLProps<HTMLDivElement>>>((props, ref) => {\r\n    const { size } = useContext(ToolContext);\r\n    const classes = useLineStyles();\r\n\r\n    return (\r\n        <div ref={ref} className={mergeClasses(classes.container, size == \"small\" ? classes.containerSmall : undefined)} {...props}>\r\n            {props.children}\r\n        </div>\r\n    );\r\n});\r\n\r\nexport const PlaceholderPropertyLine: FunctionComponent<PrimitiveProps<any> & PropertyLineProps<any>> = (props) => {\r\n    return (\r\n        <PropertyLine {...props}>\r\n            <Body1>{props.value}</Body1>\r\n        </PropertyLine>\r\n    );\r\n};\r\n","import { PropertyLine } from \"./propertyLine\";\r\nimport { Link } from \"../../primitives/link\";\r\nimport type { LinkProps } from \"../../primitives/link\";\r\nimport type { PropertyLineProps } from \"./propertyLine\";\r\nimport type { FunctionComponent } from \"react\";\r\n\r\n/**\r\n * Wraps a link in a property line\r\n * @param props - PropertyLineProps and LinkProps\r\n * @returns property-line wrapped link\r\n */\r\nexport const LinkPropertyLine: FunctionComponent<PropertyLineProps<string> & LinkProps> = (props) => {\r\n    LinkPropertyLine.displayName = \"LinkPropertyLine\";\r\n    return (\r\n        <PropertyLine {...props}>\r\n            <Link {...props} />\r\n        </PropertyLine>\r\n    );\r\n};\r\n","import type { FunctionComponent } from \"react\";\r\n\r\nimport type { PropertyLineProps } from \"shared-ui-components/fluent/hoc/propertyLines/propertyLine\";\r\nimport type { ISelectionService } from \"../../services/selectionService\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\n\r\nimport type { Nullable } from \"core/types\";\r\nimport { LinkPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/linkPropertyLine\";\r\n\r\ntype LinkToEntityProps = { entity: Nullable<{ name: string; reservedDataStore?: Record<PropertyKey, unknown> }>; selectionService: ISelectionService };\r\n\r\n/**\r\n * A property line that links to a specific entity in the scene.\r\n * @param props an entity and a selection service\r\n * @returns A link property line component.\r\n */\r\nexport const LinkToEntityPropertyLine: FunctionComponent<PropertyLineProps<string> & LinkToEntityProps> = (props) => {\r\n    const { selectionService, entity, ...rest } = props;\r\n    const [linkedEntity, setLinkedEntity] = useState(entity);\r\n    useEffect(() => {\r\n        setLinkedEntity(props.entity);\r\n    }, [props.entity]);\r\n    return (\r\n        linkedEntity &&\r\n        !linkedEntity.reservedDataStore?.hidden && <LinkPropertyLine {...rest} value={linkedEntity.name} onLink={() => (selectionService.selectedEntity = linkedEntity)} />\r\n    );\r\n};\r\n","import type { AccordionToggleData, AccordionToggleEvent, AccordionProps as FluentAccordionProps } from \"@fluentui/react-components\";\r\nimport type { ForwardRefExoticComponent, FunctionComponent, PropsWithChildren, RefAttributes } from \"react\";\r\n\r\nimport { Children, forwardRef, isValidElement, useCallback, useContext, useEffect, useLayoutEffect, useMemo, useRef, useState } from \"react\";\r\n\r\nimport { AccordionHeader, AccordionItem, AccordionPanel, Divider, Accordion as FluentAccordion, Subtitle2Stronger, makeStyles, tokens } from \"@fluentui/react-components\";\r\nimport { CustomTokens } from \"./utils\";\r\nimport { ToolContext } from \"../hoc/fluentToolWrapper\";\r\n\r\nconst useStyles = makeStyles({\r\n    accordion: {\r\n        overflowX: \"hidden\",\r\n        overflowY: \"auto\",\r\n        paddingBottom: tokens.spacingVerticalM, // bottom padding since there is no divider at the bottom\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        height: \"100%\",\r\n    },\r\n    divider: {\r\n        paddingTop: CustomTokens.dividerGap,\r\n        paddingBottom: CustomTokens.dividerGap,\r\n    },\r\n    dividerSmall: {\r\n        paddingTop: CustomTokens.dividerGapSmall,\r\n        paddingBottom: CustomTokens.dividerGapSmall,\r\n    },\r\n    panelDiv: {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        overflow: \"hidden\",\r\n    },\r\n    highlightDiv: {\r\n        borderRadius: tokens.borderRadiusLarge,\r\n        animationDuration: \"1s\",\r\n        animationTimingFunction: \"ease-in-out\",\r\n        animationIterationCount: \"5\",\r\n        animationFillMode: \"forwards\",\r\n        animationName: {\r\n            from: {\r\n                boxShadow: `inset 0 0 4px ${tokens.colorTransparentBackground}`,\r\n            },\r\n            // eslint-disable-next-line @typescript-eslint/naming-convention\r\n            \"50%\": {\r\n                boxShadow: `inset 0 0 12px ${tokens.colorBrandBackground}`,\r\n            },\r\n            to: {\r\n                boxShadow: `inset 0 0 4px ${tokens.colorTransparentBackground}`,\r\n            },\r\n        },\r\n    },\r\n});\r\n\r\nexport type AccordionSectionProps = {\r\n    title: string;\r\n    collapseByDefault?: boolean;\r\n};\r\n\r\nexport const AccordionSection: FunctionComponent<PropsWithChildren<AccordionSectionProps>> = (props) => {\r\n    AccordionSection.displayName = \"AccordionSection\";\r\n    const classes = useStyles();\r\n\r\n    return <div className={classes.panelDiv}>{props.children}</div>;\r\n};\r\n\r\nexport type AccordionProps = {\r\n    highlightSections?: readonly string[];\r\n};\r\n\r\nconst StringAccordion = FluentAccordion as ForwardRefExoticComponent<FluentAccordionProps<string> & RefAttributes<HTMLDivElement>>;\r\n\r\nexport const Accordion = forwardRef<HTMLDivElement, PropsWithChildren<AccordionProps>>((props, ref) => {\r\n    Accordion.displayName = \"Accordion\";\r\n    const classes = useStyles();\r\n    const { size } = useContext(ToolContext);\r\n    const { children, highlightSections, ...rest } = props;\r\n    const validChildren = useMemo(() => {\r\n        return (\r\n            Children.map(children, (child) => {\r\n                if (isValidElement(child)) {\r\n                    const childProps = child.props as Partial<AccordionSectionProps>;\r\n                    if (childProps.title) {\r\n                        return {\r\n                            title: childProps.title,\r\n                            collapseByDefault: childProps.collapseByDefault,\r\n                            content: child,\r\n                        };\r\n                    }\r\n                }\r\n                return null;\r\n            })?.filter(Boolean) ?? []\r\n        );\r\n    }, [children]);\r\n\r\n    // Tracks open items, and used to tell the Accordion which sections should be expanded.\r\n    const [openItems, setOpenItems] = useState(validChildren.filter((child) => !child.collapseByDefault).map((child) => child.title));\r\n\r\n    // Tracks closed items, which is needed so that when the children change, we only update the open/closed state\r\n    // (depending on the collapseByDefault prop) for items that have not been explicitly opened or closed.\r\n    const [closedItems, setClosedItems] = useState(validChildren.filter((child) => child.collapseByDefault).map((child) => child.title));\r\n\r\n    const internalOpenItemsRef = useRef<string[] | undefined>(openItems);\r\n\r\n    // When highlight sections is requested, we temporarily override the open items, but if highlight sections is cleared,\r\n    // then we revert back to the normal open items tracking.\r\n    useLayoutEffect(() => {\r\n        if (highlightSections) {\r\n            internalOpenItemsRef.current = [...openItems];\r\n            setOpenItems([...highlightSections]);\r\n        } else {\r\n            setOpenItems([...(internalOpenItemsRef.current ?? [])]);\r\n            internalOpenItemsRef.current = undefined;\r\n        }\r\n    }, [highlightSections]);\r\n\r\n    useEffect(() => {\r\n        for (const defaultOpenItem of validChildren.filter((child) => !child.collapseByDefault).map((child) => child.title)) {\r\n            // If a child is not marked as collapseByDefault, then it should be opened by default, and\r\n            // it is only \"default\" if it hasn't already been explicitly added to the opened or closed list.\r\n            if (!closedItems.includes(defaultOpenItem) && !openItems.includes(defaultOpenItem)) {\r\n                setOpenItems((prev) => [...prev, defaultOpenItem]);\r\n            }\r\n        }\r\n    }, [validChildren]);\r\n\r\n    const onToggle = useCallback((event: AccordionToggleEvent, data: AccordionToggleData<string>) => {\r\n        if (data.openItems.includes(data.value)) {\r\n            setOpenItems((prev) => [...prev, data.value]);\r\n            setClosedItems((prev) => prev.filter((item) => item !== data.value));\r\n        } else {\r\n            setClosedItems((prev) => [...prev, data.value]);\r\n            setOpenItems((prev) => prev.filter((item) => item !== data.value));\r\n        }\r\n    }, []);\r\n\r\n    return (\r\n        <StringAccordion ref={ref} className={classes.accordion} collapsible multiple onToggle={onToggle} openItems={openItems} {...rest}>\r\n            {validChildren.map((child, index) => {\r\n                const isHighlighted = highlightSections?.includes(child.title);\r\n                return (\r\n                    <AccordionItem key={child.content.key ?? child.title} value={child.title}>\r\n                        <div className={isHighlighted ? classes.highlightDiv : undefined}>\r\n                            <AccordionHeader size={size}>\r\n                                <Subtitle2Stronger>{child.title}</Subtitle2Stronger>\r\n                            </AccordionHeader>\r\n                            <AccordionPanel>\r\n                                <div className={classes.panelDiv}>{child.content}</div>\r\n                            </AccordionPanel>\r\n                        </div>\r\n                        {index < validChildren.length - 1 && <Divider inset={true} className={size === \"small\" ? classes.dividerSmall : classes.divider} />}\r\n                    </AccordionItem>\r\n                );\r\n            })}\r\n        </StringAccordion>\r\n    );\r\n});\r\n","import type { ISettingsContext } from \"../services/settingsContext\";\r\nimport type { HorizontalLocation, VerticalLocation } from \"../services/shellService\";\r\n\r\nimport { useCallback } from \"react\";\r\nimport { useLocalStorage } from \"usehooks-ts\";\r\n\r\nimport { useObservableState } from \"./observableHooks\";\r\n\r\nconst CompactModeStorageKey = \"Babylon/Settings/IsCompactMode\";\r\nconst SidePaneDockOverridesStorageKey = \"Babylon/Settings/SidePaneDockOverrides\";\r\nconst DisableCopyStorageKey = \"Babylon/Settings/DisableCopy\";\r\n\r\nfunction useSetting<T>(storageKey: string, defaultValue: T) {\r\n    const [value, setValue, resetValue] = useLocalStorage<T>(storageKey, defaultValue);\r\n\r\n    if (!localStorage.getItem(storageKey)) {\r\n        localStorage.setItem(storageKey, JSON.stringify(value));\r\n    }\r\n\r\n    return [value, setValue, resetValue] as const;\r\n}\r\n\r\n/**\r\n * Gets the compact mode setting.\r\n * @returns A tuple containing the current compact mode value, a function to update it, and a function to reset it.\r\n */\r\nexport function useCompactMode() {\r\n    return useSetting<boolean>(CompactModeStorageKey, !matchMedia(\"(pointer: coarse)\").matches);\r\n}\r\n\r\n/**\r\n * Gets the disable copy setting.\r\n * @returns A tuple containing the current disable copy value, a function to update it, and a function to reset it.\r\n */\r\nexport function useDisableCopy() {\r\n    return useSetting<boolean>(DisableCopyStorageKey, false);\r\n}\r\n\r\n/**\r\n * Gets the side pane dock overrides configuration.\r\n * @returns A record mapping side pane IDs to their dock locations.\r\n */\r\nexport function useSidePaneDockOverrides() {\r\n    return useSetting<Record<string, Readonly<{ horizontalLocation: HorizontalLocation; verticalLocation: VerticalLocation }> | undefined>>(SidePaneDockOverridesStorageKey, {});\r\n}\r\n\r\nconst RadiansToDegrees = 180 / Math.PI;\r\n\r\nfunction WrapAngle(angle: number) {\r\n    angle %= Math.PI * 2;\r\n    if (angle < 0) {\r\n        angle += Math.PI * 2;\r\n    }\r\n    return angle;\r\n}\r\n\r\n/**\r\n * Gets functions used to convert to/from display values for angles based on the current settings.\r\n * @param settings The settings context to use for determining if angles should be displayed in degrees or radians.\r\n * @returns A tuple containing the functions to convert to and from display values.\r\n */\r\nexport function useAngleConverters(settings: ISettingsContext) {\r\n    const useDegrees = useObservableState(() => settings.useDegrees, settings.settingsChangedObservable);\r\n\r\n    const toDisplayValue = useCallback(\r\n        (angle: number, wrap = false) => {\r\n            if (wrap) {\r\n                angle = WrapAngle(angle);\r\n            }\r\n            return useDegrees ? angle * RadiansToDegrees : angle;\r\n        },\r\n        [useDegrees]\r\n    );\r\n\r\n    const fromDisplayValue = useCallback(\r\n        (angle: number, wrap = false) => {\r\n            angle = useDegrees ? angle / RadiansToDegrees : angle;\r\n            if (wrap) {\r\n                angle = WrapAngle(angle);\r\n            }\r\n            return angle;\r\n        },\r\n        [useDegrees]\r\n    );\r\n\r\n    return [toDisplayValue, fromDisplayValue, useDegrees] as const;\r\n}\r\n","import type { ContextType, FunctionComponent, PropsWithChildren } from \"react\";\r\n\r\nimport { useMemo } from \"react\";\r\n\r\nimport { ToolContext } from \"shared-ui-components/fluent/hoc/fluentToolWrapper\";\r\nimport { useCompactMode, useDisableCopy } from \"../hooks/settingsHooks\";\r\n\r\nexport const UXContextProvider: FunctionComponent<PropsWithChildren> = (props) => {\r\n    const [compactMode] = useCompactMode();\r\n    const [disableCopy] = useDisableCopy();\r\n\r\n    const toolsContext = useMemo(() => {\r\n        return {\r\n            toolName: \"\",\r\n            size: compactMode ? \"small\" : \"medium\",\r\n            disableCopy,\r\n            useFluent: true,\r\n        } satisfies ContextType<typeof ToolContext>;\r\n    }, [compactMode, disableCopy]);\r\n\r\n    return <ToolContext.Provider value={toolsContext}>{props.children}</ToolContext.Provider>;\r\n};\r\n","import type { ComponentType, PropsWithChildren, Ref } from \"react\";\r\n\r\nimport type { AccordionSectionProps } from \"shared-ui-components/fluent/primitives/accordion\";\r\n\r\nimport { makeStyles } from \"@fluentui/react-components\";\r\nimport { Children, isValidElement, useImperativeHandle, useLayoutEffect, useMemo, useState } from \"react\";\r\n\r\nimport { Accordion, AccordionSection } from \"shared-ui-components/fluent/primitives/accordion\";\r\nimport { UXContextProvider } from \"../components/uxContextProvider\";\r\n\r\nfunction AsReadonlyArray<T>(array: T[]): readonly T[] {\r\n    return array;\r\n}\r\n\r\nexport type DynamicAccordionSection = Readonly<{\r\n    /**\r\n     * A unique identity for the section, which can be referenced by section content.\r\n     */\r\n    identity: string;\r\n\r\n    /**\r\n     * An optional order for the section, relative to other sections.\r\n     * Defaults to 0.\r\n     */\r\n    order?: number;\r\n\r\n    /**\r\n     * An optional flag indicating whether the section should be collapsed by default.\r\n     * Defaults to false.\r\n     */\r\n    collapseByDefault?: boolean;\r\n}>;\r\n\r\nexport type DynamicAccordionSectionContent<ContextT> = Readonly<{\r\n    /**\r\n     * A unique key for the the content.\r\n     */\r\n    key: string;\r\n\r\n    /**\r\n     * The section this content belongs to.\r\n     */\r\n    section: string;\r\n\r\n    /**\r\n     * An optional order for the content within the section.\r\n     * Defaults to 0.\r\n     */\r\n    order?: number;\r\n\r\n    /**\r\n     * The React component that will be rendered for this content.\r\n     */\r\n    component: ComponentType<{ context: ContextT }>;\r\n}>;\r\n\r\nconst useStyles = makeStyles({\r\n    rootDiv: {\r\n        flex: 1,\r\n        overflow: \"hidden\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n    },\r\n});\r\n\r\nexport type SectionsImperativeRef = {\r\n    highlightSections: (sections: readonly string[]) => void;\r\n};\r\n\r\nexport function ExtensibleAccordion<ContextT = unknown>(\r\n    props: PropsWithChildren<{\r\n        sections: readonly DynamicAccordionSection[];\r\n        sectionContent: readonly DynamicAccordionSectionContent<ContextT>[];\r\n        context: ContextT;\r\n        sectionsRef?: Ref<SectionsImperativeRef>;\r\n    }>\r\n) {\r\n    const classes = useStyles();\r\n\r\n    const { children, sections, sectionContent, context, sectionsRef } = props;\r\n\r\n    const defaultSections = useMemo(() => {\r\n        const defaultSections: DynamicAccordionSection[] = [];\r\n        if (children) {\r\n            Children.forEach(children, (child) => {\r\n                if (isValidElement(child)) {\r\n                    const childProps = child.props as AccordionSectionProps;\r\n                    defaultSections.push({\r\n                        identity: childProps.title,\r\n                        collapseByDefault: childProps.collapseByDefault,\r\n                    });\r\n                }\r\n            });\r\n        }\r\n        return AsReadonlyArray(defaultSections);\r\n    }, [children]);\r\n\r\n    const defaultSectionContent = useMemo(() => {\r\n        const defaultSectionContent: DynamicAccordionSectionContent<ContextT>[] = [];\r\n        if (children) {\r\n            Children.forEach(children, (child, index) => {\r\n                if (isValidElement(child)) {\r\n                    const childProps = child.props as AccordionSectionProps;\r\n                    defaultSectionContent.push({\r\n                        key: child.key ?? childProps.title,\r\n                        section: defaultSections[index].identity,\r\n                        component: () => child,\r\n                    });\r\n                }\r\n            });\r\n        }\r\n        return AsReadonlyArray(defaultSectionContent);\r\n    }, [children, defaultSections]);\r\n\r\n    const mergedSectionContent = useMemo(() => {\r\n        return AsReadonlyArray(\r\n            [...defaultSectionContent, ...sectionContent].map((content, index) => {\r\n                return {\r\n                    ...content,\r\n                    key: `${content.key}-${index}`,\r\n                    order: content.order ?? index,\r\n                } as const;\r\n            })\r\n        );\r\n    }, [defaultSectionContent, sectionContent]);\r\n\r\n    const mergedSections = useMemo(() => {\r\n        const mergedSections = [...defaultSections, ...sections];\r\n\r\n        // Check for implicit sections (e.g. sections that were not explicitly defined, but referenced by content).\r\n        const implicitSections: DynamicAccordionSection[] = [];\r\n        for (const sectionContent of mergedSectionContent) {\r\n            if (!mergedSections.some((s) => s.identity === sectionContent.section) && !implicitSections.some((s) => s.identity === sectionContent.section)) {\r\n                implicitSections.push({ identity: sectionContent.section });\r\n            }\r\n        }\r\n\r\n        return AsReadonlyArray(\r\n            [...implicitSections, ...mergedSections].map((section, index) => {\r\n                return {\r\n                    ...section,\r\n                    order: section.order ?? index,\r\n                    collapseByDefault: section.collapseByDefault ?? false,\r\n                } as const;\r\n            })\r\n        );\r\n    }, [defaultSections, sections, mergedSectionContent]);\r\n\r\n    const visibleSections = useMemo(() => {\r\n        if (!context) {\r\n            return [];\r\n        }\r\n\r\n        const sortedSections = [...mergedSections].sort((a, b) => a.order - b.order);\r\n\r\n        return sortedSections\r\n            .map((section) => {\r\n                // Get a flat list of the section content, preserving the key so it can be used when each component for each section is rendered.\r\n                const contentForSection = mergedSectionContent.filter((content) => content.section === section.identity);\r\n\r\n                // If there is no content for this section, we skip it.\r\n                if (contentForSection.length === 0) {\r\n                    return null; // No content for this section\r\n                }\r\n\r\n                // Sort the content for this section by order, defaulting to 0 if not specified.\r\n                contentForSection.sort((a, b) => (a.order ?? 0) - (b.order ?? 0));\r\n\r\n                // Return the section with its identity, collapseByDefault flag, and the content components to render.\r\n                return {\r\n                    identity: section.identity,\r\n                    collapseByDefault: section.collapseByDefault ?? false,\r\n                    components: contentForSection.map((content) => <content.component key={content.key} context={context} />),\r\n                };\r\n            })\r\n            .filter((section) => section !== null);\r\n    }, [mergedSections, mergedSectionContent, context]);\r\n\r\n    const [highlightSections, setHighlightSections] = useState<readonly string[]>();\r\n\r\n    // When the context changes, clear any existing highlights.\r\n    useLayoutEffect(() => {\r\n        setHighlightSections(undefined);\r\n    }, [context]);\r\n\r\n    // This just assigns the returned object to any type of React ref, whether it is\r\n    // a mutable ref with a 'current' property or whether it is a callback, useImperativeHandle\r\n    // will deal with it.\r\n    useImperativeHandle(sectionsRef, () => {\r\n        return {\r\n            highlightSections: (sectionsToHighlight: readonly string[]) => {\r\n                if (sectionsToHighlight.length > 0) {\r\n                    setHighlightSections(sectionsToHighlight);\r\n                }\r\n            },\r\n        };\r\n    }, []);\r\n\r\n    return (\r\n        <div className={classes.rootDiv}>\r\n            {visibleSections.length > -1 && (\r\n                <UXContextProvider>\r\n                    <Accordion highlightSections={highlightSections}>\r\n                        {...visibleSections.map((section) => {\r\n                            return (\r\n                                <AccordionSection key={section.identity} title={section.identity} collapseByDefault={section.collapseByDefault}>\r\n                                    {section.components}\r\n                                </AccordionSection>\r\n                            );\r\n                        })}\r\n                    </Accordion>\r\n                </UXContextProvider>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n","import type { ComponentProps } from \"react\";\r\n\r\nimport { makeStyles, mergeClasses, tokens } from \"@fluentui/react-components\";\r\nimport { forwardRef } from \"react\";\r\n\r\nconst useStyles = makeStyles({\r\n    paneRootDiv: {\r\n        display: \"flex\",\r\n        flex: 1,\r\n        flexDirection: \"column\",\r\n        padding: `0 ${tokens.spacingHorizontalM}`,\r\n    },\r\n});\r\n\r\n/**\r\n * Used to apply common styles to panes.\r\n */\r\nexport const SidePaneContainer = forwardRef<HTMLDivElement, ComponentProps<\"div\">>((props, ref) => {\r\n    const { className, ...rest } = props;\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <div className={mergeClasses(classes.paneRootDiv, className)} ref={ref} {...rest}>\r\n            {props.children}\r\n        </div>\r\n    );\r\n});\r\n","import type { TernaryDarkMode } from \"usehooks-ts\";\r\n\r\nimport { useTernaryDarkMode } from \"usehooks-ts\";\r\n\r\nconst ThemeModeStorageKey = `Babylon/Settings/ThemeMode`;\r\n\r\n/**\r\n * Custom hook to manage the theme mode (system/dark/light).\r\n * @returns An object containing the theme mode state and helper functions.\r\n */\r\nexport function useThemeMode() {\r\n    const { isDarkMode, ternaryDarkMode, setTernaryDarkMode } = useTernaryDarkMode({\r\n        localStorageKey: ThemeModeStorageKey,\r\n    });\r\n    // Make sure there is a stored value initially, even before changing the theme.\r\n    // This way, other usages of this hook will get the correct initial value.\r\n    if (!localStorage.getItem(ThemeModeStorageKey)) {\r\n        SetThemeMode(ternaryDarkMode);\r\n    }\r\n    return { isDarkMode, themeMode: ternaryDarkMode, setThemeMode: setTernaryDarkMode };\r\n}\r\n\r\n/**\r\n * Sets the theme mode.\r\n * @param mode The desired theme mode (system/dark/light).\r\n */\r\nexport function SetThemeMode(mode: TernaryDarkMode) {\r\n    localStorage.setItem(ThemeModeStorageKey, JSON.stringify(mode));\r\n}\r\n","import type { BrandVariants, Theme } from \"@fluentui/react-components\";\r\n\r\nimport { createDarkTheme, createLightTheme, tokens } from \"@fluentui/react-components\";\r\n\r\n// Generated from https://react.fluentui.dev/?path=/docs/theme-theme-designer--docs\r\n// Key color: #3A94FC\r\n/* eslint-disable @typescript-eslint/naming-convention */\r\nconst BabylonRamp: BrandVariants = {\r\n    10: \"#020305\",\r\n    20: \"#121721\",\r\n    30: \"#1A263A\",\r\n    40: \"#1F314F\",\r\n    50: \"#243E64\",\r\n    60: \"#294B7B\",\r\n    70: \"#2D5892\",\r\n    80: \"#3166AA\",\r\n    90: \"#3473C3\",\r\n    100: \"#3782DC\",\r\n    110: \"#3990F6\",\r\n    120: \"#5A9EFD\",\r\n    130: \"#7BACFE\",\r\n    140: \"#96BAFF\",\r\n    150: \"#AFC9FF\",\r\n    160: \"#C6D8FF\",\r\n};\r\n/* eslint-enable @typescript-eslint/naming-convention */\r\n\r\nexport const LightTheme: Theme = {\r\n    ...createLightTheme(BabylonRamp),\r\n    // Reduce the max contrast between foreground and background by just replacing the most intense foreground color with the second most intense one.\r\n    colorNeutralForeground1: tokens.colorNeutralForeground2,\r\n};\r\n\r\nexport const DarkTheme: Theme = {\r\n    ...createDarkTheme(BabylonRamp),\r\n    // Reduce the max contrast between foreground and background by just replacing the most intense foreground color with the second most intense one.\r\n    colorNeutralForeground1: tokens.colorNeutralForeground2,\r\n};\r\n","import type { FluentProviderProps } from \"@fluentui/react-components\";\r\nimport type { FunctionComponent } from \"react\";\r\n\r\nimport { FluentProvider } from \"@fluentui/react-components\";\r\nimport { useThemeMode } from \"../hooks/themeHooks\";\r\nimport { DarkTheme, LightTheme } from \"../themes/babylonTheme\";\r\n\r\nexport const Theme: FunctionComponent<FluentProviderProps & { invert?: boolean }> = (props) => {\r\n    // NOTE: We do not want to applyStylesToPortals by default. If makes classes flow into portals\r\n    // (like popovers), and if those styles do things like disable overflow, they can completely\r\n    // break any UI within the portal. Therefore, default to false.\r\n    const { invert = false, applyStylesToPortals = false, ...rest } = props;\r\n    const { isDarkMode } = useThemeMode();\r\n\r\n    return (\r\n        <FluentProvider theme={isDarkMode !== invert ? DarkTheme : LightTheme} applyStylesToPortals={applyStylesToPortals} {...rest}>\r\n            {props.children}\r\n        </FluentProvider>\r\n    );\r\n};\r\n","import type { FunctionComponent } from \"react\";\r\nimport type { MakePopoverTeachingMoment } from \"../hooks/teachingMomentHooks\";\r\n\r\nimport { makeStyles, TeachingPopover, TeachingPopoverBody, TeachingPopoverHeader, TeachingPopoverSurface } from \"@fluentui/react-components\";\r\n\r\nconst useStyles = makeStyles({\r\n    extensionTeachingPopover: {\r\n        maxWidth: \"320px\",\r\n    },\r\n});\r\n\r\ntype TeachingMomentState = ReturnType<ReturnType<typeof MakePopoverTeachingMoment>>;\r\ntype TeachingMomentProps = Pick<TeachingMomentState, \"shouldDisplay\" | \"positioningRef\" | \"onOpenChange\"> & {\r\n    title: string;\r\n    description: string;\r\n};\r\n\r\n/**\r\n * A component that displays a teaching moment popover.\r\n * @param props Props for the teaching moment popover.\r\n * @returns The teaching moment popover.\r\n */\r\nexport const TeachingMoment: FunctionComponent<TeachingMomentProps> = ({ shouldDisplay, positioningRef, onOpenChange, title, description }) => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <TeachingPopover appearance=\"brand\" open={shouldDisplay} positioning={{ positioningRef }} onOpenChange={onOpenChange}>\r\n            <TeachingPopoverSurface className={classes.extensionTeachingPopover}>\r\n                <TeachingPopoverHeader>{title}</TeachingPopoverHeader>\r\n                <TeachingPopoverBody>{description}</TeachingPopoverBody>\r\n            </TeachingPopoverSurface>\r\n        </TeachingPopover>\r\n    );\r\n};\r\n","import type { IExtensionFeed, ExtensionMetadata, IExtensionMetadataQuery, ExtensionModule } from \"./extensionFeed\";\r\n\r\nexport type BuiltInExtension = ExtensionMetadata & {\r\n    /**\r\n     * Gets the extension module, typically dynamically importing the extension.\r\n     * @returns The extension module (e.g. a collection of ServiceDefinitions).\r\n     */\r\n    getExtensionModuleAsync(): Promise<ExtensionModule>;\r\n};\r\n\r\n/**\r\n * A simple extension feed implementation that provides a fixed set of \"built in\" extensions.\r\n * \"Built in\" in this context means extensions that are known at bundling time, and included\r\n * in the bundle. Each extension can be dynamically imported so they are split into separate\r\n * bundle chunks and downloaded only when first installed.\r\n */\r\nexport class BuiltInsExtensionFeed implements IExtensionFeed {\r\n    private readonly _extensions: readonly BuiltInExtension[];\r\n\r\n    public constructor(\r\n        public readonly name: string,\r\n        extensions: Iterable<BuiltInExtension>\r\n    ) {\r\n        this._extensions = Array.from(extensions);\r\n    }\r\n\r\n    public async queryExtensionsAsync(filter?: string): Promise<IExtensionMetadataQuery> {\r\n        const filteredExtensions = filter ? this._extensions.filter((extension) => extension.name.includes(filter)) : this._extensions;\r\n        return {\r\n            totalCount: filteredExtensions.length,\r\n            getExtensionMetadataAsync: async (index: number, count: number) => {\r\n                return filteredExtensions.slice(index, index + count);\r\n            },\r\n        };\r\n    }\r\n\r\n    public async getExtensionModuleAsync(name: string): Promise<ExtensionModule | undefined> {\r\n        const extension = this._extensions.find((ext) => ext.name === name);\r\n        return extension ? await extension.getExtensionModuleAsync() : undefined;\r\n    }\r\n}\r\n","import type { IReadonlyObservable } from \"core/index\";\r\n\r\nimport { Observable } from \"core/Misc/observable\";\r\nimport { useEffect, useMemo } from \"react\";\r\n\r\n/**\r\n * Creates a polling observable that notifies its observers at a specified interval.\r\n * @param delay The polling interval in milliseconds.\r\n * @returns A readonly observable that can be used to subscribe to polling notifications.\r\n */\r\nexport function usePollingObservable(delay: number): IReadonlyObservable<void> {\r\n    const observable = useMemo(() => new Observable<void>(), []);\r\n\r\n    useEffect(() => {\r\n        const intervalId = setInterval(() => {\r\n            observable.notifyObservers();\r\n        }, delay);\r\n\r\n        return () => {\r\n            clearInterval(intervalId);\r\n        };\r\n    }, [delay, observable]);\r\n\r\n    return observable;\r\n}\r\n","import type { IDisposable } from \"core/index\";\r\n\r\nimport { useRef, useEffect, useState } from \"react\";\r\n\r\n/**\r\n * Custom hook to manage a resource with automatic disposal. The resource is created once initially, and recreated\r\n * if the factory function changes. Whenever the resource is recreated, the previous instance is disposed. The final\r\n * instance is disposed when the component using this hook unmounts.\r\n * @param factory A function that creates the resource.\r\n * @returns The created resource.\r\n */\r\nexport function useResource<T extends IDisposable>(factory: () => T): T {\r\n    const resourceRef = useRef<T>();\r\n    const factoryRef = useRef(factory);\r\n\r\n    // Initialize resource synchronously on first call or when factory changes\r\n    if (!resourceRef.current || factoryRef.current !== factory) {\r\n        // Dispose old resource if it exists\r\n        resourceRef.current?.dispose();\r\n\r\n        // Create new resource\r\n        resourceRef.current = factory();\r\n    }\r\n\r\n    // Update refs to capture latest values\r\n    factoryRef.current = factory;\r\n\r\n    // Cleanup effect for component unmount\r\n    useEffect(() => {\r\n        return () => {\r\n            resourceRef.current?.dispose();\r\n            resourceRef.current = undefined;\r\n        };\r\n    }, []);\r\n\r\n    return resourceRef.current;\r\n}\r\n\r\n/**\r\n * Custom hook to manage an asynchronous resource with automatic disposal. The resource is created once initially, and recreated\r\n * if the factory function changes. Whenever the resource is recreated, the previous instance is disposed. The final\r\n * instance is disposed when the component using this hook unmounts.\r\n * @param factory A function that creates the resource.\r\n * @returns The created resource.\r\n */\r\nexport function useAsyncResource<T extends IDisposable>(factory: (abortSignal: AbortSignal) => Promise<T>): T | undefined {\r\n    const [resource, setResource] = useState<T | undefined>();\r\n    const factoryRef = useRef(factory);\r\n\r\n    // Update refs to capture latest values\r\n    factoryRef.current = factory;\r\n\r\n    useEffect(() => {\r\n        const abortController = new AbortController();\r\n\r\n        // Dispose old resource if it exists\r\n        resource?.dispose();\r\n        setResource(undefined);\r\n\r\n        // Create new resource\r\n        void (async () => {\r\n            try {\r\n                const newVal = await factory(abortController.signal);\r\n                if (!abortController.signal.aborted) {\r\n                    setResource(newVal); // This will trigger a re-render so the new resource is returned to caller\r\n                } else {\r\n                    newVal.dispose();\r\n                }\r\n            } catch (error) {\r\n                if (error instanceof Error && error.name === \"AbortError\") {\r\n                    return;\r\n                }\r\n            }\r\n        })();\r\n\r\n        return () => {\r\n            abortController.abort();\r\n            resource?.dispose();\r\n            setResource(undefined);\r\n        };\r\n    }, [factory]);\r\n\r\n    return resource;\r\n}\r\n","import type { Nullable } from \"core/index\";\r\n\r\nimport type { OnOpenChangeData, PositioningImperativeRef } from \"@fluentui/react-components\";\r\n\r\nimport { useCallback, useEffect, useRef, useState } from \"react\";\r\nimport { useLocalStorage } from \"usehooks-ts\";\r\n\r\nimport { AsyncLock } from \"core/Misc/asyncLock\";\r\nimport { Deferred } from \"core/Misc/deferred\";\r\n\r\nconst SequencerLock = new AsyncLock();\r\n\r\n/**\r\n * Creates a hook for managing teaching moment state.\r\n * @param name The unique name of the teaching moment.\r\n * @returns A hook that returns the teaching moment state.\r\n */\r\nexport function MakeTeachingMoment(name: string) {\r\n    return (suppress?: boolean) => {\r\n        const [hasDisplayed, setHasDisplayed, resetDisplayed] = useLocalStorage(`Babylon/TeachingMoments/${name}`, false);\r\n        const [shouldDisplay, setShouldDisplay] = useState(false);\r\n\r\n        const deferredRef = useRef<Deferred<void>>();\r\n\r\n        useEffect(() => {\r\n            if (!hasDisplayed && !suppress && !deferredRef.current) {\r\n                // eslint-disable-next-line @typescript-eslint/no-floating-promises\r\n                SequencerLock.lockAsync(async () => {\r\n                    deferredRef.current = new Deferred<void>();\r\n                    setShouldDisplay(true);\r\n                    // Just hold the lock until the hook cleanup, which is effectively component unmount (e.g. the teaching moment is dismissed).\r\n                    await deferredRef.current.promise;\r\n                });\r\n            }\r\n\r\n            return () => {\r\n                deferredRef.current?.resolve();\r\n            };\r\n        }, [hasDisplayed, suppress]);\r\n\r\n        const onDismissed = useCallback(() => {\r\n            setHasDisplayed(true);\r\n            deferredRef.current?.resolve();\r\n            deferredRef.current = undefined;\r\n            setShouldDisplay(false);\r\n        }, []);\r\n\r\n        return {\r\n            shouldDisplay,\r\n            onDismissed,\r\n            reset: resetDisplayed,\r\n        } as const;\r\n    };\r\n}\r\n\r\n/**\r\n * Creates a hook for managing teaching moment state for a dialog.\r\n * @param name The unique name of the teaching moment.\r\n * @returns A hook that returns the teaching moment state for a dialog.\r\n */\r\nexport function MakeDialogTeachingMoment(name: string) {\r\n    const useTeachingMoment = MakeTeachingMoment(name);\r\n\r\n    return (suppress?: boolean) => {\r\n        const { shouldDisplay, onDismissed, reset } = useTeachingMoment(suppress);\r\n\r\n        const onOpenChange = useCallback((e: unknown, data: OnOpenChangeData) => {\r\n            if (!data.open) {\r\n                onDismissed();\r\n            }\r\n        }, []);\r\n\r\n        return {\r\n            shouldDisplay,\r\n            onOpenChange,\r\n            reset,\r\n        } as const;\r\n    };\r\n}\r\n\r\n/**\r\n * Creates a hook for managing teaching moment state for a popover.\r\n * @param name The unique name of the teaching moment.\r\n * @returns A hook that returns the teaching moment state for a popover.\r\n */\r\nexport function MakePopoverTeachingMoment(name: string) {\r\n    const useDialogTeachingMoment = MakeDialogTeachingMoment(name);\r\n\r\n    return (suppress?: boolean) => {\r\n        const [target, setTarget] = useState<Nullable<HTMLElement>>(null);\r\n        const [positioningRef, setPositioningRef] = useState<Nullable<PositioningImperativeRef>>(null);\r\n\r\n        const { shouldDisplay, onOpenChange, reset } = useDialogTeachingMoment(suppress || !target || !positioningRef);\r\n\r\n        useEffect(() => {\r\n            if (target && positioningRef) {\r\n                positioningRef.setTarget(target);\r\n            }\r\n        }, [target, positioningRef]);\r\n\r\n        return {\r\n            shouldDisplay,\r\n            positioningRef: setPositioningRef,\r\n            targetRef: setTarget,\r\n            onOpenChange,\r\n            reset,\r\n        } as const;\r\n    };\r\n}\r\n","import type { IDisposable, IReadonlyObservable } from \"core/index\";\r\n\r\nimport { Observable } from \"core/Misc/observable\";\r\n\r\n/**\r\n * A collection of items that can be observed for changes.\r\n */\r\nexport class ObservableCollection<T> {\r\n    private readonly _items: T[] = [];\r\n    private readonly _keys: symbol[] = [];\r\n    private readonly _observable = new Observable<void>();\r\n\r\n    /**\r\n     * An observable that notifies observers when the collection changes.\r\n     */\r\n    public get observable(): IReadonlyObservable<void> {\r\n        return this._observable;\r\n    }\r\n\r\n    /**\r\n     * The items in the collection.\r\n     */\r\n    public get items(): readonly T[] {\r\n        return this._items;\r\n    }\r\n\r\n    /**\r\n     * Adds an item to the collection.\r\n     * @param item The item to add.\r\n     * @returns A disposable that removes the item from the collection when disposed.\r\n     */\r\n    public add(item: T): IDisposable {\r\n        const key = Symbol();\r\n        this._items.push(item);\r\n        this._keys.push(key);\r\n        this._observable.notifyObservers();\r\n\r\n        return {\r\n            dispose: () => {\r\n                const index = this._keys.indexOf(key);\r\n                this._items.splice(index, 1);\r\n                this._keys.splice(index, 1);\r\n                this._observable.notifyObservers();\r\n            },\r\n        };\r\n    }\r\n}\r\n","import type { IDisposable } from \"core/index\";\r\n\r\n/**\r\n * A helper to create a service factory function from a class constructor.\r\n * @param constructor The class to create a factory function for.\r\n * @returns A factory function that creates an instance of the class.\r\n */\r\nexport function ConstructorFactory<Class extends new (...args: any) => any>(constructor: Class): (...args: ConstructorParameters<Class>) => InstanceType<Class> {\r\n    return (...args: ConstructorParameters<Class>) => new constructor(...args);\r\n}\r\n\r\n// This allows us to map from a service contract back to a contract identity.\r\nconst Contract = Symbol();\r\n/**\r\n * This interface must be implemented by all service contracts.\r\n */\r\nexport interface IService<ContractIdentity extends symbol> {\r\n    /**\r\n     * @internal\r\n     */\r\n    readonly [Contract]?: ContractIdentity;\r\n}\r\n\r\n// This utility type extracts the service identity (unique symbol type) from a service contract. That is, it extracts T from IService<T>.\r\ntype ExtractContractIdentity<ServiceContract extends IService<symbol>> = ServiceContract extends IService<infer ContractIdentity> ? ContractIdentity : never;\r\n\r\n// This utility type extracts the contract identities from an array of service contracts. That is, it extracts [T1, T2, ...] from [IService<T1>, IService<T2>, ...].\r\ntype ExtractContractIdentities<ServiceContracts extends IService<symbol>[]> = {\r\n    [Index in keyof ServiceContracts]: ExtractContractIdentity<ServiceContracts[Index]>;\r\n};\r\n\r\n// This utility type converts a union of types into an intersection of types. That is, it converts T1 | T2 | ... into T1 & T2 & ...\r\n// This is specifically used to determine the type that a service factory function returns when it produces multiple services.\r\ntype UnionToIntersection<Union> = (Union extends any ? (k: Union) => void : never) extends (k: infer Intersection) => void ? Intersection : never;\r\n\r\ntype MaybePromise<T> = T | Promise<T>;\r\n\r\n/**\r\n * A factory function responsible for creating a service instance.\r\n * Consumed services are passed as arguments to the factory function.\r\n * The returned value must implement all produced services, and may IDisposable.\r\n * If not services are produced, the returned value may implement IDisposable, otherwise it may return void.\r\n */\r\nexport type ServiceFactory<Produces extends IService<symbol>[], Consumes extends IService<symbol>[]> = (\r\n    ...dependencies: [...Consumes, abortSignal?: AbortSignal]\r\n) => MaybePromise<Produces extends [] ? Partial<IDisposable> | void : Partial<IDisposable> & UnionToIntersection<Produces[number]>>;\r\n\r\n/**\r\n * Defines a service, which is a logical unit that consumes other services (dependencies), and optionally produces services that can be consumed by other services (dependents).\r\n */\r\nexport type ServiceDefinition<Produces extends IService<symbol>[] = [], Consumes extends IService<symbol>[] = []> = {\r\n    /**\r\n     * A human readable name for the service to help with debugging.\r\n     */\r\n    friendlyName: string;\r\n\r\n    /**\r\n     * A function that instantiates the service.\r\n     */\r\n    factory: ServiceFactory<Produces, Consumes>;\r\n} & (Produces extends []\r\n    ? {\r\n          /**\r\n           * An empty list or undefined, since the type specification has indicated no contracts are produced.\r\n           */\r\n          produces?: [];\r\n      }\r\n    : {\r\n          /**\r\n           * The list of contract identities that this service produces for consumption by other services.\r\n           */\r\n          produces: ExtractContractIdentities<Produces>;\r\n      }) &\r\n    (Consumes extends []\r\n        ? {\r\n              /**\r\n               * An empty list or undefined, since the type specification has indicated that no other services are consumed.\r\n               */\r\n              consumes?: [];\r\n          }\r\n        : {\r\n              /**\r\n               * The list of contract identities of other services that this service consumes.\r\n               */\r\n              consumes: ExtractContractIdentities<Consumes>;\r\n          });\r\n","import { Body1Strong, makeStyles, tokens } from \"@fluentui/react-components\";\r\n\r\nimport { ExtensibleAccordion } from \"../extensibleAccordion\";\r\n\r\nconst useStyles = makeStyles({\r\n    placeholderDiv: {\r\n        padding: `${tokens.spacingVerticalM} ${tokens.spacingHorizontalM}`,\r\n    },\r\n});\r\n\r\nexport const PropertiesPane: typeof ExtensibleAccordion<unknown> = (props) => {\r\n    const classes = useStyles();\r\n\r\n    const entity = props.context;\r\n\r\n    return entity != null ? (\r\n        <ExtensibleAccordion {...props} />\r\n    ) : (\r\n        <div className={classes.placeholderDiv}>\r\n            <Body1Strong italic>No entity selected.</Body1Strong>\r\n        </div>\r\n    );\r\n};\r\n","import type { IReadonlyObservable } from \"core/Misc/observable\";\r\nimport type { IService } from \"../modularity/serviceDefinition\";\r\n\r\nexport const SettingsContextIdentity = Symbol(\"SettingsContext\");\r\n\r\n/**\r\n * SettingsContext provides a set of settings used across the inspector.\r\n */\r\nexport interface ISettingsContext extends IService<typeof SettingsContextIdentity> {\r\n    /**\r\n     * Use degrees instead of radians for angles.\r\n     */\r\n    useDegrees: boolean;\r\n\r\n    /**\r\n     * Ignore backfaces when picking.\r\n     */\r\n    ignoreBackfacesForPicking: boolean;\r\n\r\n    /**\r\n     * Only show Euler angles in rotation properties.\r\n     */\r\n    useEuler: boolean;\r\n\r\n    /**\r\n     * Shows the Properties pane when an entity is selected.\r\n     */\r\n    showPropertiesOnEntitySelection: boolean;\r\n\r\n    /**\r\n     * Observable that fires whenever a setting changes.\r\n     */\r\n    readonly settingsChangedObservable: IReadonlyObservable<ISettingsContext>;\r\n}\r\n","import type { GriffelRenderer } from \"@fluentui/react-components\";\r\nimport type { FunctionComponent, PropsWithChildren, Ref } from \"react\";\r\n\r\nimport { createDOMRenderer, FluentProvider, Portal, RendererProvider } from \"@fluentui/react-components\";\r\nimport { useCallback, useEffect, useImperativeHandle, useState } from \"react\";\r\n\r\nimport { Logger } from \"core/Misc/logger\";\r\nimport { ToastProvider } from \"../primitives/toast\";\r\n\r\nfunction ToFeaturesString(options: ChildWindowOptions) {\r\n    const { defaultWidth, defaultHeight, defaultLeft, defaultTop } = options;\r\n\r\n    const features: { key: string; value: string }[] = [];\r\n\r\n    if (defaultWidth !== undefined) {\r\n        features.push({ key: \"width\", value: defaultWidth.toString() });\r\n    }\r\n    if (defaultHeight !== undefined) {\r\n        features.push({ key: \"height\", value: defaultHeight.toString() });\r\n    }\r\n    if (defaultLeft !== undefined) {\r\n        features.push({ key: \"left\", value: defaultLeft.toString() });\r\n    }\r\n    if (defaultTop !== undefined) {\r\n        features.push({ key: \"top\", value: defaultTop.toString() });\r\n    }\r\n    features.push({ key: \"location\", value: \"no\" });\r\n\r\n    return features.map((feature) => `${feature.key}=${feature.value}`).join(\",\");\r\n}\r\n\r\nexport type ChildWindowOptions = {\r\n    /**\r\n     * The default width of the child window in pixels.\r\n     * @remarks Ignored if the ChildWindow was passed an id and previous bounds were saved.\r\n     */\r\n    defaultWidth?: number;\r\n\r\n    /**\r\n     * The default height of the child window in pixels.\r\n     * @remarks Ignored if the ChildWindow was passed an id and previous bounds were saved.\r\n     */\r\n    defaultHeight?: number;\r\n\r\n    /**\r\n     * The default left position of the child window in pixels.\r\n     * @remarks Ignored if the ChildWindow was passed an id and previous bounds were saved.\r\n     */\r\n    defaultLeft?: number;\r\n\r\n    /**\r\n     * The default top position of the child window in pixels.\r\n     * @remarks Ignored if the ChildWindow was passed an id and previous bounds were saved.\r\n     */\r\n    defaultTop?: number;\r\n\r\n    /**\r\n     * The title of the child window.\r\n     * @remarks If not provided, the id will be used instead (if any).\r\n     */\r\n    title?: string;\r\n};\r\n\r\nexport type ChildWindow = {\r\n    /**\r\n     * Opens the child window.\r\n     * @param options Options for opening the child window.\r\n     */\r\n    open: (options?: ChildWindowOptions) => void;\r\n\r\n    /**\r\n     * Closes the child window.\r\n     */\r\n    close: () => void;\r\n};\r\n\r\nexport type ChildWindowProps = {\r\n    /**\r\n     * An optional unique identity for the child window.\r\n     * @remarks If provided, the child window's bounds will be saved/restored using this identity.\r\n     */\r\n    id?: string;\r\n\r\n    /**\r\n     * Called when the open state of the child window changes.\r\n     * @param isOpen Whether the child window is open.\r\n     */\r\n    onOpenChange?: (isOpen: boolean) => void;\r\n\r\n    /**\r\n     * A ref that exposes the ChildWindow imperative API.\r\n     */\r\n    imperativeRef?: Ref<ChildWindow>;\r\n};\r\n\r\n/**\r\n * Allows displaying a child window that can contain child components.\r\n * @param props Props for the child window.\r\n * @returns The child window component.\r\n */\r\nexport const ChildWindow: FunctionComponent<PropsWithChildren<ChildWindowProps>> = (props) => {\r\n    const { id, children, onOpenChange, imperativeRef: imperativeRef } = props;\r\n\r\n    const [windowState, setWindowState] = useState<{ mountNode: HTMLElement; renderer: GriffelRenderer }>();\r\n    const [childWindow, setChildWindow] = useState<Window>();\r\n\r\n    const storageKey = id ? `Babylon/Settings/ChildWindow/${id}/Bounds` : null;\r\n\r\n    // This function is just for creating the child window itself. It is a function because\r\n    // it must be called synchronously in response to a user interaction (e.g. button click),\r\n    // otherwise the browser will block it as a scripted popup.\r\n    const createWindow = useCallback(\r\n        (options: ChildWindowOptions = {}) => {\r\n            if (storageKey) {\r\n                // If we are persisting window bounds, but the window is already open, just use the existing bounds.\r\n                // Otherwise, try to load bounds from storage.\r\n                if (childWindow) {\r\n                    options.defaultLeft = childWindow.screenX;\r\n                    options.defaultTop = childWindow.screenY;\r\n                    options.defaultWidth = childWindow.innerWidth;\r\n                    options.defaultHeight = childWindow.innerHeight;\r\n                } else {\r\n                    const savedBounds = localStorage.getItem(storageKey);\r\n                    if (savedBounds) {\r\n                        try {\r\n                            const bounds = JSON.parse(savedBounds);\r\n                            options.defaultLeft = bounds.left;\r\n                            options.defaultTop = bounds.top;\r\n                            options.defaultWidth = bounds.width;\r\n                            options.defaultHeight = bounds.height;\r\n                        } catch {\r\n                            Logger.Warn(`Could not parse saved bounds for child window with key ${storageKey}`);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            // Half width by default.\r\n            if (!options.defaultWidth) {\r\n                options.defaultWidth = window.innerWidth * (2 / 3);\r\n            }\r\n            // Half height by default.\r\n            if (!options.defaultHeight) {\r\n                options.defaultHeight = window.innerHeight * (2 / 3);\r\n            }\r\n            // Horizontally centered by default.\r\n            if (!options.defaultLeft) {\r\n                options.defaultLeft = window.screenX + (window.innerWidth - options.defaultWidth) * (2 / 3);\r\n            }\r\n            // Vertically centered by default.\r\n            if (!options.defaultTop) {\r\n                options.defaultTop = window.screenY + (window.innerHeight - options.defaultHeight) * (2 / 3);\r\n            }\r\n\r\n            // Try to create the child window (can be null if popups are blocked).\r\n            const newChildWindow = window.open(\"\", \"\", ToFeaturesString(options));\r\n            if (newChildWindow) {\r\n                // Set the title if provided.\r\n                newChildWindow.document.title = options.title ?? id ?? \"\";\r\n\r\n                // Set the child window state.\r\n                setChildWindow((current) => {\r\n                    // But first close any existing child window.\r\n                    current?.close();\r\n                    return newChildWindow;\r\n                });\r\n            }\r\n        },\r\n        [childWindow, storageKey]\r\n    );\r\n\r\n    useImperativeHandle(imperativeRef, () => {\r\n        return {\r\n            open: createWindow,\r\n            close: () => setChildWindow(undefined),\r\n        };\r\n    }, [createWindow]);\r\n\r\n    // This side effect runs any time the child window instance changes. It does the rest of the child window\r\n    // setup work, including creating resources and state needed to properly render the content of the child window.\r\n    useEffect(() => {\r\n        const disposeActions: (() => void)[] = [];\r\n\r\n        if (childWindow) {\r\n            const body = childWindow.document.body;\r\n            body.style.width = \"100%\";\r\n            body.style.height = \"100%\";\r\n            body.style.margin = \"0\";\r\n            body.style.padding = \"0\";\r\n            body.style.display = \"flex\";\r\n            body.style.overflow = \"hidden\";\r\n\r\n            const applyWindowState = () => {\r\n                // Setup the window state, including creating a Fluent/Griffel \"renderer\" for managing runtime styles/classes in the child window.\r\n                setWindowState({ mountNode: body, renderer: createDOMRenderer(childWindow.document) });\r\n                onOpenChange?.(true);\r\n            };\r\n\r\n            // Once the child window document is ready, setup the window state which will trigger another effect that renders into the child window.\r\n            if (childWindow.document.readyState === \"complete\") {\r\n                applyWindowState();\r\n            } else {\r\n                const onChildWindowLoad = () => {\r\n                    applyWindowState();\r\n                };\r\n                childWindow.addEventListener(\"load\", onChildWindowLoad, { once: true });\r\n                disposeActions.push(() => childWindow.removeEventListener(\"load\", onChildWindowLoad));\r\n            }\r\n\r\n            // When the child window is closed for any reason, transition back to a closed state.\r\n            const onChildWindowUnload = () => {\r\n                setWindowState(undefined);\r\n                setChildWindow(undefined);\r\n                onOpenChange?.(false);\r\n            };\r\n            childWindow.addEventListener(\"unload\", onChildWindowUnload, { once: true });\r\n            disposeActions.push(() => childWindow.removeEventListener(\"unload\", onChildWindowUnload));\r\n\r\n            // If the main window closes, close any open child windows as well (don't leave them orphaned).\r\n            const onParentWindowUnload = () => {\r\n                childWindow.close();\r\n            };\r\n            window.addEventListener(\"unload\", onParentWindowUnload, { once: true });\r\n            disposeActions.push(() => window.removeEventListener(\"unload\", onParentWindowUnload));\r\n\r\n            // On dispose, close the child window.\r\n            disposeActions.push(() => childWindow.close());\r\n\r\n            // On dispose, save the window bounds.\r\n            disposeActions.push(() => {\r\n                if (storageKey) {\r\n                    localStorage.setItem(\r\n                        storageKey,\r\n                        JSON.stringify({\r\n                            left: childWindow.screenX,\r\n                            top: childWindow.screenY,\r\n                            width: childWindow.innerWidth,\r\n                            height: childWindow.innerHeight,\r\n                        })\r\n                    );\r\n                }\r\n            });\r\n        }\r\n\r\n        return () => {\r\n            disposeActions.reverse().forEach((dispose) => dispose());\r\n        };\r\n    }, [childWindow]);\r\n\r\n    if (!windowState) {\r\n        return null;\r\n    }\r\n\r\n    const { mountNode, renderer } = windowState;\r\n\r\n    return (\r\n        // Portal targets the body of the child window.\r\n        <Portal mountNode={mountNode}>\r\n            {/* RenderProvider manages Fluent style/class state. */}\r\n            <RendererProvider renderer={renderer} targetDocument={mountNode.ownerDocument}>\r\n                {/* Fluent Provider is needed for managing other Fluent state and applying the current theme mode. */}\r\n                <FluentProvider\r\n                    style={{\r\n                        display: \"flex\",\r\n                        flexGrow: 1,\r\n                        flexDirection: \"column\",\r\n                        overflow: \"hidden\",\r\n                    }}\r\n                    applyStylesToPortals={false}\r\n                    targetDocument={mountNode.ownerDocument}\r\n                >\r\n                    <ToastProvider>{children}</ToastProvider>\r\n                </FluentProvider>\r\n            </RendererProvider>\r\n        </Portal>\r\n    );\r\n};\r\n","// NOTE: This is basically a super simplified version of https://github.com/microsoft/fluentui-contrib/blob/main/packages/react-resize-handle/src/hooks\r\n// This version does not support keyboard interactions, absolute values, automatically clamping to the actual adjusted size, accessibility, and various other features.\r\n// We can switch back to Fluent's implementation once some known bugs are fixed:\r\n// 1. https://github.com/microsoft/fluentui-contrib/issues/523\r\n// 2. React 19 compatibility\r\n\r\nimport { useCallback, useEffect, useRef, useState } from \"react\";\r\n\r\nimport { Clamp } from \"core/Maths/math.scalar.functions\";\r\n\r\nexport type GrowDirection = \"end\" | \"start\" | \"up\" | \"down\";\r\n\r\nexport type UseResizeHandleParams = {\r\n    /**\r\n     * The direction in which the element is considered growing in size ('end', 'start', 'up', or 'down').\r\n     */\r\n    growDirection: GrowDirection;\r\n    /**\r\n     * The name of the CSS variable that will be set on the wrapper element to reflect the current size of the element.\r\n     */\r\n    variableName: string;\r\n    /**\r\n     * A callback that will be called when the element is resized.\r\n     *\r\n     * @remarks The passed function should be memoized for better performance.\r\n     */\r\n    onChange?: (value: number) => void;\r\n    /**\r\n     * The minimum change allowed (e.g. the smallest negative number allowed).\r\n     */\r\n    minValue?: number;\r\n    /**\r\n     * The maximum change allowed (e.g. the largest positive number allowed).\r\n     */\r\n    maxValue?: number;\r\n};\r\n\r\n/**\r\n * A custom hook that helps with element resizing.\r\n * @param params The parameters for the resize handle.\r\n * @returns An object containing refs and a function to set the value.\r\n */\r\nexport function useResizeHandle(params: UseResizeHandleParams) {\r\n    const { growDirection, variableName, onChange } = params;\r\n\r\n    const valueRef = useRef(0);\r\n    const [elementRef, setElementRef] = useState<HTMLElement | null>(null);\r\n    const [handleRef, setHandleRef] = useState<HTMLElement | null>(null);\r\n\r\n    const updateElementStyle = useCallback(\r\n        (value: number) => {\r\n            if (elementRef) {\r\n                elementRef.style.setProperty(variableName, `${value}px`);\r\n            }\r\n        },\r\n        [elementRef, variableName]\r\n    );\r\n\r\n    const setValue = useCallback(\r\n        (value: number) => {\r\n            valueRef.current = value;\r\n            updateElementStyle(value);\r\n            onChange?.(value);\r\n        },\r\n        [updateElementStyle, onChange]\r\n    );\r\n\r\n    useEffect(() => {\r\n        updateElementStyle(valueRef.current);\r\n    }, [updateElementStyle]);\r\n\r\n    useEffect(() => {\r\n        if (handleRef) {\r\n            let delta = 0;\r\n\r\n            const coerceDelta = (delta: number) => Clamp(delta, params.minValue ?? -Infinity, params.maxValue ?? Infinity);\r\n\r\n            const onPointerMove = (event: PointerEvent) => {\r\n                event.preventDefault();\r\n                switch (growDirection) {\r\n                    case \"up\":\r\n                        delta -= event.movementY;\r\n                        break;\r\n                    case \"down\":\r\n                        delta += event.movementY;\r\n                        break;\r\n                    case \"start\":\r\n                        delta -= event.movementX;\r\n                        break;\r\n                    case \"end\":\r\n                        delta += event.movementX;\r\n                        break;\r\n                }\r\n                setValue(coerceDelta(delta));\r\n            };\r\n\r\n            const onPointerDown = (event: PointerEvent) => {\r\n                event.preventDefault();\r\n                delta = valueRef.current;\r\n                handleRef.setPointerCapture(event.pointerId);\r\n                handleRef.addEventListener(\"pointermove\", onPointerMove);\r\n            };\r\n\r\n            const onPointerUp = (event: PointerEvent) => {\r\n                event.preventDefault();\r\n                handleRef.releasePointerCapture(event.pointerId);\r\n                handleRef.removeEventListener(\"pointermove\", onPointerMove);\r\n                valueRef.current = coerceDelta(valueRef.current);\r\n            };\r\n\r\n            handleRef.addEventListener(\"pointerdown\", onPointerDown);\r\n            handleRef.addEventListener(\"pointerup\", onPointerUp);\r\n        }\r\n    }, [handleRef, setValue]);\r\n\r\n    return {\r\n        elementRef: setElementRef,\r\n        handleRef: setHandleRef,\r\n        setValue,\r\n    };\r\n}\r\n","import type { MenuTriggerProps } from \"@fluentui/react-components\";\r\nimport type { ComponentType, FunctionComponent } from \"react\";\r\n\r\nimport type { IDisposable, Nullable } from \"core/index\";\r\nimport type { IService, ServiceDefinition } from \"../modularity/serviceDefinition\";\r\n\r\nimport {\r\n    Button,\r\n    Divider,\r\n    Toolbar as FluentToolbar,\r\n    makeStyles,\r\n    Menu,\r\n    MenuGroup,\r\n    MenuGroupHeader,\r\n    MenuItem,\r\n    MenuList,\r\n    MenuPopover,\r\n    MenuTrigger,\r\n    mergeClasses,\r\n    SplitButton,\r\n    Subtitle2Stronger,\r\n    tokens,\r\n    ToolbarRadioButton,\r\n} from \"@fluentui/react-components\";\r\nimport {\r\n    LayoutColumnTwoFocusLeftFilled,\r\n    LayoutColumnTwoFocusRightFilled,\r\n    LayoutColumnTwoSplitLeftFocusBottomLeftFilled,\r\n    LayoutColumnTwoSplitLeftFocusTopLeftFilled,\r\n    LayoutColumnTwoSplitRightFocusBottomRightFilled,\r\n    LayoutColumnTwoSplitRightFocusTopRightFilled,\r\n    MoreHorizontalRegular,\r\n    PanelLeftContractRegular,\r\n    PanelLeftExpandRegular,\r\n    PanelRightContractRegular,\r\n    PanelRightExpandRegular,\r\n    PictureInPictureEnterRegular,\r\n} from \"@fluentui/react-icons\";\r\nimport { Fade as FluentFade } from \"@fluentui/react-motion-components-preview\";\r\nimport { useCallback, useEffect, useLayoutEffect, useMemo, useRef, useState } from \"react\";\r\n\r\nimport { Observable } from \"core/Misc/observable\";\r\nimport { ChildWindow } from \"shared-ui-components/fluent/hoc/childWindow\";\r\nimport { Collapse } from \"shared-ui-components/fluent/primitives/collapse\";\r\nimport { Tooltip } from \"shared-ui-components/fluent/primitives/tooltip\";\r\nimport { ErrorBoundary } from \"../components/errorBoundary\";\r\nimport { TeachingMoment } from \"../components/teachingMoment\";\r\nimport { Theme } from \"../components/theme\";\r\nimport { useOrderedObservableCollection } from \"../hooks/observableHooks\";\r\nimport { useSidePaneDockOverrides } from \"../hooks/settingsHooks\";\r\nimport { MakePopoverTeachingMoment } from \"../hooks/teachingMomentHooks\";\r\nimport { useResizeHandle } from \"../hooks/useResizeHandle\";\r\nimport { ObservableCollection } from \"../misc/observableCollection\";\r\n\r\nexport type HorizontalLocation = \"left\" | \"right\";\r\nexport type VerticalLocation = \"top\" | \"bottom\";\r\n\r\ntype DockLocation = `${VerticalLocation}-${HorizontalLocation}` | `full-${HorizontalLocation}`;\r\n\r\n/**\r\n * Describes an item that can be added to one of the shell's toolbars.\r\n */\r\nexport type ToolbarItemDefinition = {\r\n    /**\r\n     * A unique key for the toolbar item.\r\n     */\r\n    key: string;\r\n\r\n    /**\r\n     * The component to render for the toolbar item.\r\n     */\r\n    component: ComponentType;\r\n\r\n    /**\r\n     * An optional order for the toolbar item, relative to other items.\r\n     * Defaults to 0.\r\n     */\r\n    order?: number;\r\n\r\n    /**\r\n     * The horizontal location of the toolbar item.\r\n     * Can be either \"left\" or \"right\".\r\n     * In \"compact\" toolbar mode, \"left\" and \"right\" mean the \"compact\" toolbars at the top/bottom of the left/right side panes.\r\n     * In \"full\" toolbar mode, \"left\" and \"right\" mean the left side and right side of the full width toolbars above/below the side panes.\r\n     */\r\n    horizontalLocation: HorizontalLocation;\r\n\r\n    /**\r\n     * The vertical location of the toolbar item.\r\n     * Can be either \"top\" or \"bottom\".\r\n     */\r\n    verticalLocation: VerticalLocation;\r\n\r\n    /**\r\n     * An optional display name for the toolbar item, used for teaching moments, tooltips, etc.\r\n     */\r\n    displayName?: string;\r\n\r\n    /**\r\n     * An optional flag to suppress the teaching moment for this toolbar item.\r\n     * Defaults to false.\r\n     * Teaching moments are more helpful for dynamically added items, possibly from extensions.\r\n     */\r\n    suppressTeachingMoment?: boolean;\r\n};\r\n\r\n/**\r\n * Describes a side pane that can be added to the shell's left or right side.\r\n */\r\nexport type SidePaneDefinition = {\r\n    /**\r\n     * A unique key for the side pane.\r\n     */\r\n    key: string;\r\n\r\n    /**\r\n     * An icon component to render for the pane tab.\r\n     */\r\n    icon: ComponentType;\r\n\r\n    /**\r\n     * The component to render for the side pane's content.\r\n     */\r\n    content: ComponentType;\r\n\r\n    /**\r\n     * An optional order for the side pane, relative to other panes.\r\n     * Defaults to 0.\r\n     */\r\n    order?: number;\r\n\r\n    /**\r\n     * The horizontal location of the side pane.\r\n     * Can be either \"left\" or \"right\".\r\n     */\r\n    horizontalLocation: HorizontalLocation;\r\n\r\n    /**\r\n     * The vertical location of the side pane.\r\n     * Can be either \"top\" or \"bottom\".\r\n     */\r\n    verticalLocation: VerticalLocation;\r\n\r\n    /**\r\n     * The title of the side pane, displayed as a standardized header at the top of the pane.\r\n     */\r\n    title: string;\r\n\r\n    /**\r\n     * An optional flag to suppress the teaching moment for this side pane.\r\n     * Defaults to false.\r\n     * Teaching moments are more helpful for dynamically added panes, possibly from extensions.\r\n     */\r\n    suppressTeachingMoment?: boolean;\r\n};\r\n\r\ntype RegisteredSidePane = {\r\n    readonly key: string;\r\n    select(): void;\r\n};\r\n\r\ntype SidePaneContainer = {\r\n    readonly isDocked: boolean;\r\n    dock(): void;\r\n    undock(): void;\r\n};\r\n\r\n/**\r\n * Describes content that can be added to the shell's central area (between the side panes and toolbars - e.g. the main content).\r\n */\r\nexport type CentralContentDefinition = {\r\n    /**\r\n     * A unique key for the central content.\r\n     */\r\n    key: string;\r\n\r\n    /**\r\n     * The component to render for the central content.\r\n     */\r\n    component: ComponentType;\r\n\r\n    /**\r\n     * An optional order for content, relative to other central content.\r\n     * Defaults to 0.\r\n     */\r\n    order?: number;\r\n};\r\n\r\nexport const RootComponentServiceIdentity = Symbol(\"RootComponent\");\r\n\r\n/**\r\n * Exposes a top level component that should be rendered as the React root.\r\n */\r\nexport interface IRootComponentService extends IService<typeof RootComponentServiceIdentity> {\r\n    /**\r\n     * The root component that should be rendered as the React root.\r\n     */\r\n    readonly rootComponent: ComponentType;\r\n}\r\n\r\nexport const ShellServiceIdentity = Symbol(\"ShellService\");\r\n\r\n/**\r\n * Provides a shell for the application, including toolbars, side panes, and central content.\r\n * This service allows adding toolbar items, side panes, and central content dynamically.\r\n */\r\nexport interface IShellService extends IService<typeof ShellServiceIdentity> {\r\n    /**\r\n     * Adds a new item to one of the shell's toolbars.\r\n     * @param item Defines the item to add.\r\n     */\r\n    addToolbarItem(item: Readonly<ToolbarItemDefinition>): IDisposable;\r\n\r\n    /**\r\n     * Adds a new side pane to the shell.\r\n     * @param pane Defines the side pane to add.\r\n     */\r\n    addSidePane(pane: Readonly<SidePaneDefinition>): IDisposable;\r\n\r\n    /**\r\n     * Adds new central content to the shell.\r\n     * @param content Defines the content area to add.\r\n     */\r\n    addCentralContent(content: Readonly<CentralContentDefinition>): IDisposable;\r\n\r\n    /**\r\n     * Resets the side pane layout to the default configuration.\r\n     */\r\n    resetSidePaneLayout(): void;\r\n\r\n    /**\r\n     * The left side pane container.\r\n     */\r\n    readonly leftSidePaneContainer: Nullable<SidePaneContainer>;\r\n\r\n    /**\r\n     * The right side pane container.\r\n     */\r\n    readonly rightSidePaneContainer: Nullable<SidePaneContainer>;\r\n\r\n    /**\r\n     * The side panes currently present in the shell.\r\n     */\r\n    readonly sidePanes: readonly RegisteredSidePane[];\r\n}\r\n\r\ntype ToolbarMode = \"full\" | \"compact\";\r\n\r\n/**\r\n * Options for configuring the shell service.\r\n */\r\nexport type ShellServiceOptions = {\r\n    /**\r\n     * The default width of the left side pane.\r\n     */\r\n    leftPaneDefaultWidth?: number;\r\n\r\n    /**\r\n     * The minimum width of the left side pane.\r\n     */\r\n    leftPaneMinWidth?: number;\r\n\r\n    /**\r\n     * The default width of the right side pane.\r\n     */\r\n    rightPaneDefaultWidth?: number;\r\n\r\n    /**\r\n     * The minimum width of the right side pane.\r\n     */\r\n    rightPaneMinWidth?: number;\r\n\r\n    /**\r\n     * The mode of the toolbars.\r\n     * Can be either \"full\" (default) or \"compact\".\r\n     * In \"full\" mode, toolbars are displayed above and below the side panes.\r\n     * In \"compact\" mode, toolbars are displayed at the top and bottom of the left and right side panes.\r\n     */\r\n    toolbarMode?: ToolbarMode;\r\n\r\n    /**\r\n     * A function that can remap the default location of side panes.\r\n     * @param sidePane The side pane to remap.\r\n     * @returns The new location for the side pane.\r\n     */\r\n    sidePaneRemapper?: (sidePane: Readonly<SidePaneDefinition>) => Nullable<{ horizontalLocation: HorizontalLocation; verticalLocation: VerticalLocation }>;\r\n};\r\n\r\nconst useStyles = makeStyles({\r\n    mainView: {\r\n        flex: 1,\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        overflow: \"hidden\",\r\n        backgroundColor: tokens.colorTransparentBackground,\r\n    },\r\n    verticallyCentralContent: {\r\n        flexGrow: 1,\r\n        display: \"flex\",\r\n        overflow: \"hidden\",\r\n        backgroundColor: tokens.colorTransparentBackground,\r\n    },\r\n    barDiv: {\r\n        display: \"flex\",\r\n        flexDirection: \"row\",\r\n        flex: \"0 0 auto\",\r\n        height: \"36px\",\r\n        backgroundColor: tokens.colorNeutralBackground2,\r\n        pointerEvents: \"auto\",\r\n    },\r\n    bar: {\r\n        display: \"flex\",\r\n        flex: \"1\",\r\n        height: \"32px\",\r\n        overflow: \"hidden\",\r\n        padding: `${tokens.spacingVerticalXXS} ${tokens.spacingHorizontalXXS}`,\r\n        border: `1px solid ${tokens.colorNeutralStroke2}`,\r\n        borderBottomWidth: 0,\r\n        backgroundColor: tokens.colorNeutralBackground1,\r\n    },\r\n    barTop: {\r\n        borderTopWidth: 0,\r\n    },\r\n    barLeft: {\r\n        marginRight: \"auto\",\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        flexDirection: \"row\",\r\n        columnGap: tokens.spacingHorizontalSNudge,\r\n    },\r\n    barRight: {\r\n        marginLeft: \"auto\",\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        flexDirection: \"row-reverse\",\r\n        columnGap: tokens.spacingHorizontalSNudge,\r\n    },\r\n    barItem: {\r\n        display: \"flex\",\r\n    },\r\n    paneTabListDiv: {\r\n        backgroundColor: tokens.colorNeutralBackground2,\r\n        flex: \"0 0 auto\",\r\n        display: \"flex\",\r\n    },\r\n    paneTabListDivLeft: {\r\n        flexDirection: \"row-reverse\",\r\n    },\r\n    paneTabListDivRight: {\r\n        flexDirection: \"row\",\r\n    },\r\n    paneCollapseButton: {\r\n        margin: `0 0 0 ${tokens.spacingHorizontalXS}`,\r\n    },\r\n    collapseMenuPopover: {\r\n        minWidth: 0,\r\n    },\r\n    pane: {\r\n        backgroundColor: tokens.colorNeutralBackground2,\r\n        display: \"flex\",\r\n        flex: 1,\r\n        alignItems: \"stretch\",\r\n        overflow: \"hidden\",\r\n    },\r\n    paneLeft: {\r\n        flexDirection: \"row\",\r\n    },\r\n    paneRight: {\r\n        flexDirection: \"row-reverse\",\r\n    },\r\n    paneContainer: {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        overflowX: \"hidden\",\r\n        overflowY: \"hidden\",\r\n        zIndex: 1,\r\n        pointerEvents: \"auto\",\r\n    },\r\n    paneContent: {\r\n        display: \"flex\",\r\n        flexGrow: 1,\r\n        flexDirection: \"column\",\r\n        overflow: \"hidden\",\r\n    },\r\n    unselectedPane: {\r\n        display: \"none\",\r\n    },\r\n    paneHeaderDiv: {\r\n        display: \"flex\",\r\n        flexDirection: \"row\",\r\n        alignItems: \"center\",\r\n        height: \"36px\",\r\n        backgroundColor: tokens.colorNeutralBackground1,\r\n        color: tokens.colorNeutralForeground1,\r\n        border: `1px solid ${tokens.colorNeutralStroke2}`,\r\n    },\r\n    paneHeaderText: {\r\n        flex: 1,\r\n        marginLeft: tokens.spacingHorizontalM,\r\n    },\r\n    paneHeaderButton: {\r\n        color: \"inherit\",\r\n    },\r\n    paneDivider: {\r\n        flex: \"0 0 auto\",\r\n        marginTop: tokens.spacingVerticalM,\r\n        margin: \"0\",\r\n        minHeight: tokens.spacingVerticalM,\r\n        cursor: \"ns-resize\",\r\n        alignItems: \"end\",\r\n    },\r\n    tabToolbar: {\r\n        padding: 0,\r\n    },\r\n    tab: {\r\n        display: \"flex\",\r\n        height: \"100%\",\r\n        width: \"36px\",\r\n        justifyContent: \"center\",\r\n        borderTopLeftRadius: tokens.borderRadiusMedium,\r\n        borderTopRightRadius: tokens.borderRadiusMedium,\r\n    },\r\n    selectedTab: {\r\n        backgroundColor: tokens.colorNeutralBackground1,\r\n        color: tokens.colorNeutralForeground1,\r\n        border: `1px solid ${tokens.colorNeutralStroke2}`,\r\n        borderBottom: \"none\",\r\n    },\r\n    unselectedTab: {\r\n        backgroundColor: \"transparent\",\r\n    },\r\n    tabRadioButton: {\r\n        backgroundColor: \"transparent\",\r\n    },\r\n    selectedTabIcon: {\r\n        color: \"inherit\",\r\n    },\r\n    resizer: {\r\n        width: \"8px\",\r\n        cursor: \"ew-resize\",\r\n        zIndex: 1000,\r\n    },\r\n    resizerLeft: {\r\n        marginRight: \"-8px\",\r\n        transform: \"translateX(-8px)\",\r\n    },\r\n    resizerRight: {\r\n        marginLeft: \"-8px\",\r\n        transform: \"translateX(8px)\",\r\n    },\r\n    centralContent: {\r\n        position: \"relative\",\r\n        flexGrow: 1,\r\n        display: \"flex\",\r\n        overflow: \"hidden\",\r\n        backgroundColor: tokens.colorTransparentBackground,\r\n        \"> *\": {\r\n            pointerEvents: \"auto\",\r\n        },\r\n    },\r\n    expandButtonContainer: {\r\n        position: \"absolute\",\r\n    },\r\n    expandButtonContainerLeft: {\r\n        left: 0,\r\n    },\r\n    expandButtonContainerRight: {\r\n        right: 0,\r\n    },\r\n    expandButton: {},\r\n});\r\n\r\nconst DockMenu: FunctionComponent<\r\n    Pick<MenuTriggerProps, \"children\"> & { openOnContext?: boolean; sidePaneId: string; dockOptions: Map<DockLocation, (sidePaneKey: string) => void> }\r\n> = (props) => {\r\n    const { openOnContext, sidePaneId, dockOptions, children } = props;\r\n\r\n    const dockLeft = dockOptions.get(\"full-left\");\r\n    const dockTopLeft = dockOptions.get(\"top-left\");\r\n    const dockBottomLeft = dockOptions.get(\"bottom-left\");\r\n    const dockRight = dockOptions.get(\"full-right\");\r\n    const dockTopRight = dockOptions.get(\"top-right\");\r\n    const dockBottomRight = dockOptions.get(\"bottom-right\");\r\n\r\n    return (\r\n        <Menu openOnContext={openOnContext}>\r\n            <MenuTrigger disableButtonEnhancement>{children}</MenuTrigger>\r\n            <Theme>\r\n                <MenuPopover>\r\n                    <MenuList>\r\n                        <MenuGroup>\r\n                            <MenuGroupHeader>Dock</MenuGroupHeader>\r\n                            {dockLeft && (\r\n                                <MenuItem icon={<LayoutColumnTwoFocusLeftFilled />} onClick={() => dockLeft(sidePaneId)}>\r\n                                    Left\r\n                                </MenuItem>\r\n                            )}\r\n                            {dockTopLeft && (\r\n                                <MenuItem icon={<LayoutColumnTwoSplitLeftFocusTopLeftFilled />} onClick={() => dockTopLeft(sidePaneId)}>\r\n                                    Top Left\r\n                                </MenuItem>\r\n                            )}\r\n                            {dockBottomLeft && (\r\n                                <MenuItem icon={<LayoutColumnTwoSplitLeftFocusBottomLeftFilled />} onClick={() => dockBottomLeft(sidePaneId)}>\r\n                                    Bottom Left\r\n                                </MenuItem>\r\n                            )}\r\n                            {dockRight && (\r\n                                <MenuItem icon={<LayoutColumnTwoFocusRightFilled />} onClick={() => dockRight(sidePaneId)}>\r\n                                    Right\r\n                                </MenuItem>\r\n                            )}\r\n                            {dockTopRight && (\r\n                                <MenuItem icon={<LayoutColumnTwoSplitRightFocusTopRightFilled />} onClick={() => dockTopRight(sidePaneId)}>\r\n                                    Top Right\r\n                                </MenuItem>\r\n                            )}\r\n                            {dockBottomRight && (\r\n                                <MenuItem icon={<LayoutColumnTwoSplitRightFocusBottomRightFilled />} onClick={() => dockBottomRight(sidePaneId)}>\r\n                                    Bottom Right\r\n                                </MenuItem>\r\n                            )}\r\n                        </MenuGroup>\r\n                    </MenuList>\r\n                </MenuPopover>\r\n            </Theme>\r\n        </Menu>\r\n    );\r\n};\r\n\r\nconst PaneHeader: FunctionComponent<{ id: string; title: string; dockOptions: Map<DockLocation, (sidePaneKey: string) => void> }> = (props) => {\r\n    const { id, title, dockOptions } = props;\r\n\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <div className={classes.paneHeaderDiv}>\r\n            <Subtitle2Stronger className={classes.paneHeaderText}>{title}</Subtitle2Stronger>\r\n            <DockMenu sidePaneId={id} dockOptions={dockOptions}>\r\n                <Button className={classes.paneHeaderButton} appearance=\"transparent\" icon={<MoreHorizontalRegular />} />\r\n            </DockMenu>\r\n        </div>\r\n    );\r\n};\r\n\r\n// This is a wrapper for an item in a toolbar that simply adds a teaching moment, which is useful for dynamically added items, possibly from extensions.\r\nconst ToolbarItem: FunctionComponent<{\r\n    verticalLocation: VerticalLocation;\r\n    horizontalLocation: HorizontalLocation;\r\n    id: string;\r\n    component: ComponentType;\r\n    displayName?: string;\r\n    suppressTeachingMoment?: boolean;\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n}> = ({ verticalLocation, horizontalLocation, id, component: Component, displayName: displayName, suppressTeachingMoment }) => {\r\n    const classes = useStyles();\r\n\r\n    const useTeachingMoment = useMemo(() => MakePopoverTeachingMoment(`Bar/${verticalLocation}/${horizontalLocation}/${displayName ?? id}`), [displayName, id]);\r\n    const teachingMoment = useTeachingMoment(suppressTeachingMoment);\r\n\r\n    return (\r\n        <>\r\n            <TeachingMoment\r\n                {...teachingMoment}\r\n                shouldDisplay={teachingMoment.shouldDisplay && !suppressTeachingMoment}\r\n                title={displayName ?? \"Extension\"}\r\n                description={`The \"${displayName ?? id}\" extension can be accessed here.`}\r\n            />\r\n            <div className={classes.barItem} ref={teachingMoment.targetRef}>\r\n                <Component />\r\n            </div>\r\n        </>\r\n    );\r\n};\r\n\r\n// TODO: Handle overflow, possibly via https://react.fluentui.dev/?path=/docs/components-overflow--docs with priority.\r\n// This component just renders a toolbar with left aligned toolbar items on the left and right aligned toolbar items on the right.\r\nconst Toolbar: FunctionComponent<{ location: VerticalLocation; components: Readonly<ToolbarItemDefinition[]> }> = ({ location, components }) => {\r\n    const classes = useStyles();\r\n\r\n    const leftComponents = useMemo(() => components.filter((entry) => entry.horizontalLocation === \"left\"), [components]);\r\n    const rightComponents = useMemo(() => components.filter((entry) => entry.horizontalLocation === \"right\"), [components]);\r\n\r\n    return (\r\n        <>\r\n            {components.length > 0 && (\r\n                <div className={`${classes.bar} ${location === \"top\" ? classes.barTop : null}`}>\r\n                    <div className={classes.barLeft}>\r\n                        {leftComponents.map((entry) => (\r\n                            <ToolbarItem\r\n                                key={entry.key}\r\n                                verticalLocation={location}\r\n                                horizontalLocation={entry.horizontalLocation}\r\n                                id={entry.key}\r\n                                component={entry.component}\r\n                                displayName={entry.displayName}\r\n                                suppressTeachingMoment={entry.suppressTeachingMoment}\r\n                            />\r\n                        ))}\r\n                    </div>\r\n                    <div className={classes.barRight}>\r\n                        {rightComponents.map((entry) => (\r\n                            <ToolbarItem\r\n                                key={entry.key}\r\n                                verticalLocation={location}\r\n                                horizontalLocation={entry.horizontalLocation}\r\n                                id={entry.key}\r\n                                component={entry.component}\r\n                                displayName={entry.displayName}\r\n                                suppressTeachingMoment={entry.suppressTeachingMoment}\r\n                            />\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </>\r\n    );\r\n};\r\n\r\n// This is a wrapper for a tab in a side pane that simply adds a teaching moment, which is useful for dynamically added items, possibly from extensions.\r\nconst SidePaneTab: FunctionComponent<\r\n    { location: HorizontalLocation; id: string; isSelected: boolean; dockOptions: Map<DockLocation, (sidePaneKey: string) => void> } & Pick<\r\n        Readonly<SidePaneDefinition>,\r\n        \"title\" | \"icon\" | \"suppressTeachingMoment\"\r\n    >\r\n> = (props) => {\r\n    const {\r\n        location,\r\n        id,\r\n        isSelected,\r\n        dockOptions,\r\n        // eslint-disable-next-line @typescript-eslint/naming-convention\r\n        icon: Icon,\r\n        title,\r\n        suppressTeachingMoment,\r\n    } = props;\r\n    const classes = useStyles();\r\n    const useTeachingMoment = useMemo(() => MakePopoverTeachingMoment(`Pane/${location}/${title ?? id}`), [title, id]);\r\n    const teachingMoment = useTeachingMoment(suppressTeachingMoment);\r\n\r\n    const tabClass = mergeClasses(classes.tab, isSelected ? classes.selectedTab : classes.unselectedTab);\r\n\r\n    return (\r\n        <>\r\n            <TeachingMoment\r\n                {...teachingMoment}\r\n                shouldDisplay={teachingMoment.shouldDisplay && !suppressTeachingMoment}\r\n                title={title ?? \"Extension\"}\r\n                description={`The \"${title ?? id}\" extension can be accessed here.`}\r\n            />\r\n            <div className={tabClass}>\r\n                <DockMenu openOnContext sidePaneId={id} dockOptions={dockOptions}>\r\n                    <Tooltip content={title ?? id}>\r\n                        <ToolbarRadioButton\r\n                            ref={teachingMoment.targetRef}\r\n                            appearance=\"transparent\"\r\n                            className={classes.tabRadioButton}\r\n                            name=\"selectedTab\"\r\n                            value={id}\r\n                            icon={{\r\n                                className: isSelected ? classes.selectedTabIcon : undefined,\r\n                                children: <Icon />,\r\n                            }}\r\n                        />\r\n                    </Tooltip>\r\n                </DockMenu>\r\n            </div>\r\n        </>\r\n    );\r\n};\r\n\r\n// This hook provides a side pane container and the tab list.\r\n// In \"compact\" mode, the tab list is integrated into the pane itself.\r\n// In \"full\" mode, the returned tab list is later injected into the toolbar.\r\nfunction usePane(\r\n    location: HorizontalLocation,\r\n    defaultWidth: number,\r\n    minWidth: number,\r\n    sidePanes: SidePaneDefinition[],\r\n    onSelectSidePane: Observable<string>,\r\n    dockOperations: Map<DockLocation, (sidePaneKey: string) => void>,\r\n    toolbarMode: ToolbarMode,\r\n    topBarItems: Readonly<ToolbarItemDefinition[]>,\r\n    bottomBarItems: Readonly<ToolbarItemDefinition[]>\r\n) {\r\n    const classes = useStyles();\r\n\r\n    const [topSelectedTab, setTopSelectedTab] = useState<SidePaneDefinition>();\r\n    const [bottomSelectedTab, setBottomSelectedTab] = useState<SidePaneDefinition>();\r\n    const [collapsed, setCollapsed] = useState(false);\r\n    const childWindow = useRef<ChildWindow>(null);\r\n    const [isChildWindowOpen, setIsChildWindowOpen] = useState(false);\r\n    const paneContainerRef = useRef<HTMLDivElement>(null);\r\n\r\n    const onExpandCollapseClick = useCallback(() => {\r\n        setCollapsed((collapsed) => !collapsed);\r\n    }, []);\r\n\r\n    const widthStorageKey = `Babylon/Settings/${location}Pane/WidthAdjust`;\r\n    const heightStorageKey = `Babylon/Settings/${location}Pane/HeightAdjust`;\r\n\r\n    const currentSidePanes = useMemo(() => sidePanes.filter((entry) => entry.horizontalLocation === location), [sidePanes, location]);\r\n    const topPanes = useMemo(() => currentSidePanes.filter((entry) => entry.verticalLocation === \"top\"), [currentSidePanes]);\r\n    const bottomPanes = useMemo(() => currentSidePanes.filter((entry) => entry.verticalLocation === \"bottom\"), [currentSidePanes]);\r\n\r\n    const getValidDockOperations = useCallback(\r\n        (verticalLocation: VerticalLocation) => {\r\n            const validDockOperations = new Map(dockOperations);\r\n\r\n            // Can't re-dock to the current location.\r\n            validDockOperations.delete(`${verticalLocation}-${location}`);\r\n\r\n            // Full would mean there are no bottom panes, so this is also re-docking to the current location.\r\n            validDockOperations.delete(`full-${location}`);\r\n\r\n            // If there is only one pane left, it can't be docked to the bottom (as this would leave no top panes).\r\n            if (currentSidePanes.length === 1) {\r\n                validDockOperations.delete(`bottom-${location}`);\r\n            }\r\n\r\n            return validDockOperations;\r\n        },\r\n        [location, dockOperations, currentSidePanes]\r\n    );\r\n\r\n    const validTopDockOptions = useMemo(() => getValidDockOperations(\"top\"), [getValidDockOperations]);\r\n    const validBottomDockOptions = useMemo(() => getValidDockOperations(\"bottom\"), [getValidDockOperations]);\r\n\r\n    // Selects a default top tab (during initialization or if the selected tab is removed).\r\n    useEffect(() => {\r\n        if ((topSelectedTab && !topPanes.includes(topSelectedTab)) || (!topSelectedTab && topPanes.length > 0)) {\r\n            setTopSelectedTab(topPanes[0]);\r\n        } else if (topSelectedTab && topPanes.length === 0) {\r\n            setTopSelectedTab(undefined);\r\n        }\r\n    }, [topSelectedTab, topPanes]);\r\n\r\n    // Selects a default bottom tab (during initialization or if the selected tab is removed).\r\n    useEffect(() => {\r\n        if ((bottomSelectedTab && !bottomPanes.includes(bottomSelectedTab)) || (!bottomSelectedTab && bottomPanes.length > 0)) {\r\n            setBottomSelectedTab(bottomPanes[0]);\r\n        } else if (bottomSelectedTab && bottomPanes.length === 0) {\r\n            setBottomSelectedTab(undefined);\r\n        }\r\n    }, [bottomSelectedTab, bottomPanes]);\r\n\r\n    // Selects a tab when explicitly requested.\r\n    useEffect(() => {\r\n        const observer = onSelectSidePane.add((key) => {\r\n            const topPane = topPanes.find((entry) => entry.key === key);\r\n            if (topPane) {\r\n                setTopSelectedTab(topPane);\r\n                setCollapsed(false);\r\n            }\r\n\r\n            const bottomPane = bottomPanes.find((entry) => entry.key === key);\r\n            if (bottomPane) {\r\n                setBottomSelectedTab(bottomPane);\r\n                setCollapsed(false);\r\n            }\r\n        });\r\n\r\n        return () => observer.remove();\r\n    }, [topPanes, bottomPanes, onSelectSidePane]);\r\n\r\n    const setUndocked = useCallback(\r\n        (undocked: boolean) => {\r\n            if (!undocked) {\r\n                childWindow.current?.close();\r\n            } else {\r\n                const paneContainer = paneContainerRef.current;\r\n                if (!paneContainer) {\r\n                    // It shouldn't be possible to get here and have this ref be null, but just in case,\r\n                    // bail out of the undock operation.\r\n                    childWindow.current?.close();\r\n                } else {\r\n                    // This is the extra buffer needed on top of minWidth to account for window chrome to avoid a horizontal scrollbar.\r\n                    const widthBuffer = 4;\r\n                    // This offsets the window's top position to account for window chrome/title bar.\r\n                    const topOffset = 100;\r\n\r\n                    // Create the child window with approximately the same location and size as the side pane.\r\n                    const bounds = paneContainer.getBoundingClientRect();\r\n\r\n                    childWindow.current?.open({\r\n                        defaultWidth: Math.max(bounds.width, minWidth + widthBuffer),\r\n                        defaultHeight: bounds.height - topOffset,\r\n                        defaultTop: bounds.top + window.screenY + topOffset,\r\n                        defaultLeft: bounds.left + window.screenX,\r\n                        title: location === \"left\" ? \"Left\" : \"Right\",\r\n                    });\r\n                }\r\n            }\r\n        },\r\n        [childWindow, location]\r\n    );\r\n\r\n    const expandCollapseButton = useMemo(() => {\r\n        const expandCollapseIcon =\r\n            location === \"left\" ? collapsed ? <PanelLeftExpandRegular /> : <PanelLeftContractRegular /> : collapsed ? <PanelRightExpandRegular /> : <PanelRightContractRegular />;\r\n\r\n        return (\r\n            <Menu positioning=\"below-end\">\r\n                <MenuTrigger disableButtonEnhancement={true}>\r\n                    {(triggerProps) => (\r\n                        <Tooltip content={collapsed ? \"Show Side Pane\" : \"Hide Side Pane\"}>\r\n                            <SplitButton\r\n                                className={classes.paneCollapseButton}\r\n                                menuButton={triggerProps}\r\n                                primaryActionButton={{ onClick: onExpandCollapseClick }}\r\n                                size=\"small\"\r\n                                appearance=\"transparent\"\r\n                                icon={expandCollapseIcon}\r\n                            />\r\n                        </Tooltip>\r\n                    )}\r\n                </MenuTrigger>\r\n                <MenuPopover className={classes.collapseMenuPopover}>\r\n                    <MenuList>\r\n                        <MenuItem icon={<PictureInPictureEnterRegular />} onClick={() => setUndocked(true)}>\r\n                            Undock\r\n                        </MenuItem>\r\n                    </MenuList>\r\n                </MenuPopover>\r\n            </Menu>\r\n        );\r\n    }, [collapsed, onExpandCollapseClick, location]);\r\n\r\n    const createPaneTabList = useCallback(\r\n        (\r\n            paneComponents: SidePaneDefinition[],\r\n            toolbarMode: \"full\" | \"compact\",\r\n            selectedTab: SidePaneDefinition | undefined,\r\n            setSelectedTab: (tab: SidePaneDefinition | undefined) => void,\r\n            dockOptions: Map<DockLocation, (sidePaneKey: string) => void>\r\n        ) => {\r\n            return (\r\n                <>\r\n                    {paneComponents.length > 0 && (\r\n                        <div className={`${classes.paneTabListDiv} ${location === \"left\" || toolbarMode === \"compact\" ? classes.paneTabListDivLeft : classes.paneTabListDivRight}`}>\r\n                            {/* Only render the tab list if there is more than tab. It's kind of pointless to show a tab list with just one tab. */}\r\n                            {paneComponents.length > 1 && (\r\n                                <>\r\n                                    <FluentToolbar\r\n                                        className={classes.tabToolbar}\r\n                                        checkedValues={{ selectedTab: [selectedTab?.key ?? \"\"] }}\r\n                                        onCheckedValueChange={(event, data) => {\r\n                                            const tab = paneComponents.find((entry) => entry.key === data.checkedItems[0]);\r\n                                            setSelectedTab(tab);\r\n                                            setCollapsed(false);\r\n                                        }}\r\n                                    >\r\n                                        {paneComponents.map((entry) => {\r\n                                            const isSelected = selectedTab?.key === entry.key;\r\n                                            return (\r\n                                                <SidePaneTab\r\n                                                    key={entry.key}\r\n                                                    location={location}\r\n                                                    id={entry.key}\r\n                                                    title={entry.title}\r\n                                                    icon={entry.icon}\r\n                                                    suppressTeachingMoment={entry.suppressTeachingMoment}\r\n                                                    isSelected={isSelected && !collapsed}\r\n                                                    dockOptions={dockOptions}\r\n                                                />\r\n                                            );\r\n                                        })}\r\n                                    </FluentToolbar>\r\n                                </>\r\n                            )}\r\n\r\n                            {/* When the toolbar mode is \"full\", we add an extra button that allows the side panes to be collapsed. */}\r\n                            {toolbarMode === \"full\" && (\r\n                                <>\r\n                                    {paneComponents.length > 1 && (\r\n                                        <>\r\n                                            <Divider vertical inset style={{ minHeight: 0 }} />{\" \"}\r\n                                        </>\r\n                                    )}\r\n                                    <Collapse visible={!isChildWindowOpen} orientation=\"horizontal\">\r\n                                        {expandCollapseButton}\r\n                                    </Collapse>\r\n                                </>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n                </>\r\n            );\r\n        },\r\n        [location, collapsed, isChildWindowOpen, expandCollapseButton]\r\n    );\r\n\r\n    // This memos the TabList to make it easy for the JSX to be inserted at the top of the pane (in \"compact\" mode) or returned to the caller to be used in the toolbar (in \"full\" mode).\r\n    const topPaneTabList = useMemo(\r\n        () => createPaneTabList(topPanes, toolbarMode, topSelectedTab, setTopSelectedTab, validTopDockOptions),\r\n        [createPaneTabList, topPanes, toolbarMode, topSelectedTab]\r\n    );\r\n    const bottomPaneTabList = useMemo(\r\n        () => createPaneTabList(bottomPanes, \"compact\", bottomSelectedTab, setBottomSelectedTab, validBottomDockOptions),\r\n        [createPaneTabList, bottomPanes, bottomSelectedTab]\r\n    );\r\n\r\n    // This manages the CSS variable that controls the width of the side pane.\r\n    const paneWidthAdjustCSSVar = \"--pane-width-adjust\";\r\n    const {\r\n        elementRef: paneHorizontalResizeElementRef,\r\n        handleRef: paneHorizontalResizeHandleRef,\r\n        setValue: setPaneWidthAdjust,\r\n    } = useResizeHandle({\r\n        growDirection: location === \"left\" ? \"end\" : \"start\",\r\n        variableName: paneWidthAdjustCSSVar,\r\n        minValue: minWidth - defaultWidth,\r\n        onChange: (value) => {\r\n            // Whenever the width is adjusted, store the value.\r\n            localStorage.setItem(widthStorageKey, value.toString());\r\n        },\r\n    });\r\n\r\n    // This manages the CSS variable that controls the height of the bottom pane.\r\n    const paneHeightAdjustCSSVar = \"--pane-height-adjust\";\r\n    const {\r\n        elementRef: paneVerticalResizeElementRef,\r\n        handleRef: paneVerticalResizeHandleRef,\r\n        setValue: setPaneHeightAdjust,\r\n    } = useResizeHandle({\r\n        growDirection: \"up\",\r\n        variableName: paneHeightAdjustCSSVar,\r\n        onChange: (value) => {\r\n            // Whenever the height is adjusted, store the value.\r\n            localStorage.setItem(heightStorageKey, value.toString());\r\n        },\r\n    });\r\n\r\n    // This ensures that when the component is first rendered, the CSS variable is set from storage.\r\n    useLayoutEffect(() => {\r\n        const storedPaneWidthAdjust = localStorage.getItem(widthStorageKey);\r\n        if (storedPaneWidthAdjust) {\r\n            setPaneWidthAdjust(Number.parseInt(storedPaneWidthAdjust));\r\n        }\r\n\r\n        const storedPaneHeightAdjust = localStorage.getItem(heightStorageKey);\r\n        if (storedPaneHeightAdjust) {\r\n            setPaneHeightAdjust(Number.parseInt(storedPaneHeightAdjust));\r\n        }\r\n    }, []);\r\n\r\n    // This effect closes the window if all panes have been removed.\r\n    useEffect(() => {\r\n        if (isChildWindowOpen && topPanes.length === 0 && bottomPanes.length === 0) {\r\n            childWindow.current?.close();\r\n        }\r\n    }, [childWindow, isChildWindowOpen, topPanes, bottomPanes]);\r\n\r\n    // This memoizes the pane itself, which may or may not include the tab list, depending on the toolbar mode.\r\n    const corePane = useMemo(() => {\r\n        return (\r\n            <>\r\n                {/* If toolbar mode is \"compact\" then the top toolbar is embedded at the top of the pane. */}\r\n                {toolbarMode === \"compact\" && (topPanes.length > 1 || topBarItems.length > 0) && (\r\n                    <>\r\n                        <div className={classes.barDiv}>\r\n                            {/* The tablist gets merged in with the toolbar. */}\r\n                            {!isChildWindowOpen && location === \"left\" && expandCollapseButton}\r\n                            {topPaneTabList}\r\n                            <Toolbar location=\"top\" components={topBarItems} />\r\n                            {!isChildWindowOpen && location === \"right\" && expandCollapseButton}\r\n                        </div>\r\n                    </>\r\n                )}\r\n\r\n                {/* Render the top pane content. */}\r\n                {topPanes.length > 0 && (\r\n                    <div className={classes.paneContent}>\r\n                        {topSelectedTab && (\r\n                            <>\r\n                                <PaneHeader id={topSelectedTab.key} title={topSelectedTab.title} dockOptions={validTopDockOptions} />\r\n                                {/* Render all panes to retain their state even when they are not selected, but only display the selected pane. */}\r\n                                {topPanes.map((pane) => (\r\n                                    <div key={pane.key} className={mergeClasses(classes.paneContent, pane.key !== topSelectedTab.key ? classes.unselectedPane : undefined)}>\r\n                                        <ErrorBoundary name={pane.title}>\r\n                                            <pane.content />\r\n                                        </ErrorBoundary>\r\n                                    </div>\r\n                                ))}\r\n                            </>\r\n                        )}\r\n                    </div>\r\n                )}\r\n\r\n                {/* If we have both top and bottom panes, show a divider. This divider is also the resizer for the bottom pane. */}\r\n                {topPanes.length > 0 && bottomPanes.length > 0 && <Divider ref={paneVerticalResizeHandleRef} className={classes.paneDivider} />}\r\n\r\n                {/* Render the bottom pane tablist. */}\r\n                {bottomPanes.length > 1 && (\r\n                    <>\r\n                        <div className={classes.barDiv}>{bottomPaneTabList}</div>\r\n                    </>\r\n                )}\r\n\r\n                {/* Render the bottom pane content. This is the element that can be resized vertically. */}\r\n                {bottomPanes.length > 0 && (\r\n                    <div\r\n                        ref={paneVerticalResizeElementRef}\r\n                        className={classes.paneContent}\r\n                        style={{ height: `clamp(200px, calc(45% + var(${paneHeightAdjustCSSVar}, 0px)), 100% - 300px)`, flex: \"0 0 auto\" }}\r\n                    >\r\n                        {bottomSelectedTab && (\r\n                            <>\r\n                                <PaneHeader id={bottomSelectedTab.key} title={bottomSelectedTab.title} dockOptions={validBottomDockOptions} />\r\n                                {/* Render all panes to retain their state even when they are not selected, but only display the selected pane. */}\r\n                                {bottomPanes.map((pane) => (\r\n                                    <div key={pane.key} className={mergeClasses(classes.paneContent, pane.key !== bottomSelectedTab.key ? classes.unselectedPane : undefined)}>\r\n                                        <ErrorBoundary name={pane.title}>\r\n                                            <pane.content />\r\n                                        </ErrorBoundary>\r\n                                    </div>\r\n                                ))}\r\n                            </>\r\n                        )}\r\n                    </div>\r\n                )}\r\n\r\n                {/* If toolbar mode is \"compact\" then the bottom toolbar is embedded at the bottom of the pane. */}\r\n                {toolbarMode === \"compact\" && bottomBarItems.length > 0 && (\r\n                    <>\r\n                        <div className={classes.barDiv}>\r\n                            <Toolbar location=\"bottom\" components={bottomBarItems} />\r\n                        </div>\r\n                    </>\r\n                )}\r\n            </>\r\n        );\r\n    }, [\r\n        topPanes,\r\n        topSelectedTab,\r\n        validTopDockOptions,\r\n        bottomPanes,\r\n        bottomSelectedTab,\r\n        validBottomDockOptions,\r\n        topBarItems,\r\n        bottomBarItems,\r\n        topPaneTabList,\r\n        bottomPaneTabList,\r\n        isChildWindowOpen,\r\n    ]);\r\n\r\n    // This deals with docked vs undocked state, where undocked is rendered into a separate window via a portal.\r\n    const pane = useMemo(() => {\r\n        return (\r\n            <>\r\n                {/* If there is no window state, then we are docked, so render the resizable div and the collapse container. */}\r\n                {!isChildWindowOpen && (\r\n                    <div ref={paneContainerRef} className={classes.paneContainer}>\r\n                        {(topPanes.length > 0 || bottomPanes.length > 0) && (\r\n                            <div className={`${classes.pane} ${location === \"left\" ? classes.paneLeft : classes.paneRight}`}>\r\n                                <Collapse orientation=\"horizontal\" visible={!collapsed}>\r\n                                    <div\r\n                                        ref={paneHorizontalResizeElementRef}\r\n                                        className={classes.paneContainer}\r\n                                        style={{ width: `clamp(${minWidth}px, calc(${defaultWidth}px + var(${paneWidthAdjustCSSVar}, 0px)), 1000px)` }}\r\n                                    >\r\n                                        {corePane}\r\n                                    </div>\r\n                                </Collapse>\r\n                                {/* This is the resizer (width) for the pane container. */}\r\n                                <div\r\n                                    ref={paneHorizontalResizeHandleRef}\r\n                                    className={`${classes.resizer} ${location === \"left\" ? classes.resizerLeft : classes.resizerRight}`}\r\n                                    style={{ pointerEvents: `${collapsed ? \"none\" : \"auto\"}` }}\r\n                                />\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                )}\r\n                <ChildWindow imperativeRef={childWindow} onOpenChange={(isOpen) => setIsChildWindowOpen(isOpen)}>\r\n                    {corePane}\r\n                </ChildWindow>\r\n            </>\r\n        );\r\n    }, [collapsed, corePane]);\r\n\r\n    return [topPaneTabList, pane, collapsed, setCollapsed, isChildWindowOpen, setUndocked] as const;\r\n}\r\n\r\nexport function MakeShellServiceDefinition({\r\n    leftPaneDefaultWidth = 350,\r\n    leftPaneMinWidth = 350,\r\n    rightPaneDefaultWidth = 350,\r\n    rightPaneMinWidth = 350,\r\n    toolbarMode = \"full\",\r\n    sidePaneRemapper = undefined,\r\n}: ShellServiceOptions = {}): ServiceDefinition<[IShellService, IRootComponentService], []> {\r\n    return {\r\n        friendlyName: \"MainView\",\r\n        produces: [ShellServiceIdentity, RootComponentServiceIdentity],\r\n        factory: () => {\r\n            const toolbarItemCollection = new ObservableCollection<Readonly<ToolbarItemDefinition>>();\r\n            const sidePaneCollection = new ObservableCollection<Readonly<SidePaneDefinition>>();\r\n            const centralContentCollection = new ObservableCollection<Readonly<CentralContentDefinition>>();\r\n\r\n            const onSelectSidePane = new Observable<string>(undefined, true);\r\n\r\n            const onDockChanged = new Observable<{ location: HorizontalLocation; dock: boolean }>(undefined, true);\r\n            const leftSidePaneContainerState = {\r\n                isPresent: false,\r\n                isDocked: true,\r\n                dock: () => onDockChanged.notifyObservers({ location: \"left\", dock: true }),\r\n                undock: () => onDockChanged.notifyObservers({ location: \"left\", dock: false }),\r\n            };\r\n            const rightSidePaneContainerState = {\r\n                isPresent: false,\r\n                isDocked: true,\r\n                dock: () => onDockChanged.notifyObservers({ location: \"right\", dock: true }),\r\n                undock: () => onDockChanged.notifyObservers({ location: \"right\", dock: false }),\r\n            };\r\n\r\n            const rootComponent: FunctionComponent = () => {\r\n                const classes = useStyles();\r\n\r\n                const [sidePaneDockOverrides, setSidePaneDockOverrides] = useSidePaneDockOverrides();\r\n\r\n                // This function returns a promise that resolves after the dock change takes effect so that\r\n                // we can then select the re-docked pane.\r\n                const pendingPaneReselects = useRef<string[]>([]);\r\n                const updateSidePaneDockOverride = useCallback(\r\n                    (key: string, horizontalLocation: HorizontalLocation, verticalLocation: VerticalLocation) => {\r\n                        setSidePaneDockOverrides((current) => ({\r\n                            ...current,\r\n                            [key]: { horizontalLocation, verticalLocation },\r\n                        }));\r\n\r\n                        pendingPaneReselects.current.push(key);\r\n                    },\r\n                    [setSidePaneDockOverrides]\r\n                );\r\n\r\n                const toolbarItems = useOrderedObservableCollection(toolbarItemCollection);\r\n\r\n                const sidePanes = useOrderedObservableCollection(sidePaneCollection);\r\n                const coercedSidePaneCache = useRef(new Map<string, SidePaneDefinition>());\r\n                const coercedSidePanes = useMemo(() => {\r\n                    // First pass - apply overrides and respect the side pane mode.\r\n                    const coercedSidePanes = sidePanes\r\n                        .map((sidePaneDefinition) => {\r\n                            let coercedSidePane = coercedSidePaneCache.current.get(sidePaneDefinition.key);\r\n                            if (!coercedSidePane) {\r\n                                coercedSidePane = { ...sidePaneDefinition };\r\n                                coercedSidePaneCache.current.set(sidePaneDefinition.key, coercedSidePane);\r\n                            }\r\n\r\n                            const override = sidePaneDockOverrides[sidePaneDefinition.key];\r\n                            if (override) {\r\n                                // Override (user manually re-docked) has the highest priority.\r\n                                coercedSidePane.horizontalLocation = override.horizontalLocation;\r\n                                coercedSidePane.verticalLocation = override.verticalLocation;\r\n                            } else if (sidePaneRemapper) {\r\n                                // A side pane remapper has the next highest priority.\r\n                                const remapping = sidePaneRemapper(sidePaneDefinition);\r\n                                if (!remapping) {\r\n                                    coercedSidePane = undefined;\r\n                                } else {\r\n                                    coercedSidePane.horizontalLocation = remapping.horizontalLocation;\r\n                                    coercedSidePane.verticalLocation = remapping.verticalLocation;\r\n                                }\r\n                            } else {\r\n                                // Otherwise use the default defined location.\r\n                                coercedSidePane.horizontalLocation = sidePaneDefinition.horizontalLocation;\r\n                                coercedSidePane.verticalLocation = sidePaneDefinition.verticalLocation;\r\n                            }\r\n\r\n                            return coercedSidePane;\r\n                        })\r\n                        .filter((sidePane): sidePane is SidePaneDefinition => !!sidePane);\r\n\r\n                    // Second pass - correct any invalid state, specifically if there are only bottom panes, force them to be top panes.\r\n                    for (const side of [\"left\", \"right\"] as const) {\r\n                        const topPanes = coercedSidePanes.filter((entry) => entry.horizontalLocation === side && entry.verticalLocation === \"top\");\r\n                        const bottomPanes = coercedSidePanes.filter((entry) => entry.horizontalLocation === side && entry.verticalLocation === \"bottom\");\r\n                        if (bottomPanes.length > 0 && topPanes.length === 0) {\r\n                            for (const pane of bottomPanes) {\r\n                                pane.verticalLocation = \"top\";\r\n                                updateSidePaneDockOverride(pane.key, side, \"top\");\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    // Cleanup any cached panes that are no longer present.\r\n                    for (const key of coercedSidePaneCache.current.keys()) {\r\n                        if (!coercedSidePanes.some((entry) => entry.key === key)) {\r\n                            coercedSidePaneCache.current.delete(key);\r\n                        }\r\n                    }\r\n\r\n                    return coercedSidePanes;\r\n                }, [sidePanes, sidePaneDockOverrides, updateSidePaneDockOverride, sidePaneRemapper]);\r\n\r\n                useEffect(() => {\r\n                    for (const paneKey of pendingPaneReselects.current.splice(0)) {\r\n                        onSelectSidePane.notifyObservers(paneKey);\r\n                    }\r\n                }, [coercedSidePanes]);\r\n\r\n                const sidePaneDockOperations = useMemo(() => {\r\n                    const sidePaneDockOperations = new Map<DockLocation, (sidePaneKey: string) => void>();\r\n                    for (const side of [\"left\", \"right\"] as const) {\r\n                        const currentSidePanes = coercedSidePanes.filter((entry) => entry.horizontalLocation === side);\r\n\r\n                        const dockTop = (sidePaneKey: string) => {\r\n                            updateSidePaneDockOverride(sidePaneKey, side, \"top\");\r\n                        };\r\n                        const dockBottom = (sidePaneKey: string) => {\r\n                            updateSidePaneDockOverride(sidePaneKey, side, \"bottom\");\r\n                        };\r\n\r\n                        if (currentSidePanes.some((entry) => entry.verticalLocation === \"bottom\")) {\r\n                            // If there are bottom panes, there must also be top panes, and so top and bottom are valid locations.\r\n                            sidePaneDockOperations.set(`top-${side}`, dockTop);\r\n                            sidePaneDockOperations.set(`bottom-${side}`, dockBottom);\r\n                        } else if (currentSidePanes.length > 0) {\r\n                            // If there are only top panes, then full and bottom are valid locations.\r\n                            sidePaneDockOperations.set(`full-${side}`, dockTop);\r\n                            sidePaneDockOperations.set(`bottom-${side}`, dockBottom);\r\n                        } else {\r\n                            // If there are no panes, then only full is a valid location.\r\n                            sidePaneDockOperations.set(`full-${side}`, dockTop);\r\n                        }\r\n                    }\r\n                    return sidePaneDockOperations;\r\n                }, [coercedSidePanes]);\r\n\r\n                const hasLeftPanes = coercedSidePanes.some((entry) => entry.horizontalLocation === \"left\");\r\n                const hasRightPanes = coercedSidePanes.some((entry) => entry.horizontalLocation === \"right\");\r\n\r\n                useEffect(() => {\r\n                    leftSidePaneContainerState.isPresent = hasLeftPanes;\r\n                    rightSidePaneContainerState.isPresent = hasRightPanes;\r\n\r\n                    return () => {\r\n                        leftSidePaneContainerState.isPresent = false;\r\n                        rightSidePaneContainerState.isPresent = false;\r\n                    };\r\n                }, [hasLeftPanes, hasRightPanes]);\r\n\r\n                // If we are in compact toolbar mode, we may need to move toolbar items from the left to the right or vice versa,\r\n                // depending on whether there are any side panes on that side.\r\n                const coerceToolBarItemHorizontalLocation = useMemo(\r\n                    () => (item: Readonly<ToolbarItemDefinition>) => {\r\n                        let horizontalLocation = item.horizontalLocation;\r\n                        // Coercion is only needed in compact toolbar mode since there might not be a left or right pane.\r\n                        if (toolbarMode === \"compact\") {\r\n                            if (horizontalLocation === \"left\" && !hasLeftPanes) {\r\n                                horizontalLocation = \"right\";\r\n                            }\r\n                            if (horizontalLocation === \"right\" && !hasRightPanes) {\r\n                                horizontalLocation = \"left\";\r\n                            }\r\n                        }\r\n                        return horizontalLocation;\r\n                    },\r\n                    [toolbarMode, hasLeftPanes, hasRightPanes]\r\n                );\r\n\r\n                const topToolBarItems = useMemo(() => toolbarItems.filter((entry) => entry.verticalLocation === \"top\"), [toolbarItems]);\r\n                const bottomToolBarItems = useMemo(() => toolbarItems.filter((entry) => entry.verticalLocation === \"bottom\"), [toolbarItems]);\r\n\r\n                const topBarLeftItems = useMemo(\r\n                    () => topToolBarItems.filter((entry) => coerceToolBarItemHorizontalLocation(entry) === \"left\"),\r\n                    [topToolBarItems, coerceToolBarItemHorizontalLocation]\r\n                );\r\n                const topBarRightItems = useMemo(\r\n                    () => topToolBarItems.filter((entry) => coerceToolBarItemHorizontalLocation(entry) === \"right\"),\r\n                    [topToolBarItems, coerceToolBarItemHorizontalLocation]\r\n                );\r\n                const bottomBarLeftItems = useMemo(\r\n                    () => bottomToolBarItems.filter((entry) => coerceToolBarItemHorizontalLocation(entry) === \"left\"),\r\n                    [bottomToolBarItems, coerceToolBarItemHorizontalLocation]\r\n                );\r\n                const bottomBarRightItems = useMemo(\r\n                    () => bottomToolBarItems.filter((entry) => coerceToolBarItemHorizontalLocation(entry) === \"right\"),\r\n                    [bottomToolBarItems, coerceToolBarItemHorizontalLocation]\r\n                );\r\n\r\n                const centralContents = useOrderedObservableCollection(centralContentCollection);\r\n\r\n                const [leftPaneTabList, leftPane, leftPaneCollapsed, setLeftPaneCollapsed, leftPaneUndocked, setLeftPaneUndocked] = usePane(\r\n                    \"left\",\r\n                    leftPaneDefaultWidth,\r\n                    leftPaneMinWidth,\r\n                    coercedSidePanes,\r\n                    onSelectSidePane,\r\n                    sidePaneDockOperations,\r\n                    toolbarMode,\r\n                    topBarLeftItems,\r\n                    bottomBarLeftItems\r\n                );\r\n\r\n                useEffect(() => {\r\n                    // Propagate shorter lived React component state out to longer lived service state.\r\n                    leftSidePaneContainerState.isDocked = !leftPaneUndocked;\r\n                }, [leftPaneUndocked]);\r\n\r\n                const [rightPaneTabList, rightPane, rightPaneCollapsed, setRightPaneCollapsed, rightPaneUndocked, setRightPaneUndocked] = usePane(\r\n                    \"right\",\r\n                    rightPaneDefaultWidth,\r\n                    rightPaneMinWidth,\r\n                    coercedSidePanes,\r\n                    onSelectSidePane,\r\n                    sidePaneDockOperations,\r\n                    toolbarMode,\r\n                    topBarRightItems,\r\n                    bottomBarRightItems\r\n                );\r\n\r\n                useEffect(() => {\r\n                    // Propagate shorter lived React component state out to longer lived service state.\r\n                    rightSidePaneContainerState.isDocked = !rightPaneUndocked;\r\n                }, [rightPaneUndocked]);\r\n\r\n                useEffect(() => {\r\n                    // If at the service level dock state change is requested, propagate to the React component state.\r\n                    const observer = onDockChanged.add(({ location, dock }) => {\r\n                        if (location === \"left\") {\r\n                            setLeftPaneUndocked(!dock);\r\n                        } else {\r\n                            setRightPaneUndocked(!dock);\r\n                        }\r\n                    });\r\n\r\n                    return () => {\r\n                        observer.remove();\r\n                        leftSidePaneContainerState.isDocked = true;\r\n                        rightSidePaneContainerState.isDocked = true;\r\n                    };\r\n                }, [setLeftPaneUndocked, setRightPaneUndocked]);\r\n\r\n                return (\r\n                    <div className={classes.mainView}>\r\n                        {/* Only render the top toolbar if the toolbar mode is \"full\". Otherwise it will be embedded at the top of the side panes. */}\r\n                        {toolbarMode === \"full\" && (\r\n                            <>\r\n                                <div className={classes.barDiv}>\r\n                                    {leftPaneTabList}\r\n                                    <Toolbar location=\"top\" components={topToolBarItems} />\r\n                                    {rightPaneTabList}\r\n                                </div>\r\n                            </>\r\n                        )}\r\n\r\n                        {/* This renders the side panes and the main/central content. */}\r\n                        <div className={classes.verticallyCentralContent}>\r\n                            {/* Render the left pane container. */}\r\n                            {leftPane}\r\n\r\n                            {/* Render the main/central content. */}\r\n                            <div className={classes.centralContent}>\r\n                                {centralContents.map((entry) => (\r\n                                    <ErrorBoundary key={entry.key} name={entry.key}>\r\n                                        <entry.component />\r\n                                    </ErrorBoundary>\r\n                                ))}\r\n                                {toolbarMode === \"compact\" && (\r\n                                    <>\r\n                                        <FluentFade visible={leftPaneCollapsed} delay={50} duration={100} unmountOnExit>\r\n                                            <div className={mergeClasses(classes.expandButtonContainer, classes.expandButtonContainerLeft)}>\r\n                                                <Tooltip content=\"Show Side Pane\">\r\n                                                    <Button className={classes.expandButton} icon={<PanelLeftExpandRegular />} onClick={() => setLeftPaneCollapsed(false)} />\r\n                                                </Tooltip>\r\n                                            </div>\r\n                                        </FluentFade>\r\n                                        <FluentFade visible={rightPaneCollapsed} delay={50} duration={100} unmountOnExit>\r\n                                            <div className={mergeClasses(classes.expandButtonContainer, classes.expandButtonContainerRight)}>\r\n                                                <Tooltip content=\"Show Side Pane\">\r\n                                                    <Button className={classes.expandButton} icon={<PanelRightExpandRegular />} onClick={() => setRightPaneCollapsed(false)} />\r\n                                                </Tooltip>\r\n                                            </div>\r\n                                        </FluentFade>\r\n                                    </>\r\n                                )}\r\n                            </div>\r\n\r\n                            {/* Render the right pane container. */}\r\n                            {rightPane}\r\n                        </div>\r\n\r\n                        {/* Only render the bottom toolbar if the toolbar mode is \"full\". Otherwise it will be embedded at the bottom of the side panes. */}\r\n                        {toolbarMode === \"full\" && (\r\n                            <>\r\n                                <div className={classes.barDiv}>\r\n                                    <Toolbar location=\"bottom\" components={bottomToolBarItems} />\r\n                                </div>\r\n                            </>\r\n                        )}\r\n                    </div>\r\n                );\r\n            };\r\n            rootComponent.displayName = \"Shell Service Root\";\r\n\r\n            return {\r\n                addToolbarItem: (entry) => {\r\n                    if (!entry.component.displayName) {\r\n                        entry.component.displayName = `${entry.key} | ${entry.verticalLocation} ${entry.horizontalLocation} bar item`;\r\n                    }\r\n\r\n                    return toolbarItemCollection.add(entry);\r\n                },\r\n                addSidePane: (entry) => {\r\n                    if (!entry.content.displayName) {\r\n                        entry.content.displayName = `${entry.key} | ${entry.horizontalLocation} pane`;\r\n                    }\r\n\r\n                    return sidePaneCollection.add(entry);\r\n                },\r\n                addCentralContent: (entry) => centralContentCollection.add(entry),\r\n                resetSidePaneLayout: () => localStorage.removeItem(\"Babylon/Settings/SidePaneDockOverrides\"),\r\n                get leftSidePaneContainer() {\r\n                    return leftSidePaneContainerState.isPresent ? leftSidePaneContainerState : null;\r\n                },\r\n                get rightSidePaneContainer() {\r\n                    return rightSidePaneContainerState.isPresent ? rightSidePaneContainerState : null;\r\n                },\r\n                onDockChanged,\r\n                get sidePanes() {\r\n                    return [...sidePaneCollection.items].map((sidePaneDefinition) => {\r\n                        return {\r\n                            key: sidePaneDefinition.key,\r\n                            select: () => onSelectSidePane.notifyObservers(sidePaneDefinition.key),\r\n                        };\r\n                    });\r\n                },\r\n                rootComponent,\r\n            };\r\n        },\r\n    };\r\n}\r\n","import type { IDisposable, IReadonlyObservable, Nullable } from \"core/index\";\r\nimport type { IService, ServiceDefinition } from \"../modularity/serviceDefinition\";\r\nimport type { ISettingsContext } from \"./settingsContext\";\r\nimport type { IShellService } from \"./shellService\";\r\n\r\nimport { Observable } from \"core/Misc/observable\";\r\nimport { InterceptFunction } from \"../instrumentation/functionInstrumentation\";\r\nimport { SettingsContextIdentity } from \"./settingsContext\";\r\nimport { ShellServiceIdentity } from \"./shellService\";\r\n\r\nexport const SelectionServiceIdentity = Symbol(\"PropertiesService\");\r\n\r\n/**\r\n * Tracks the currently selected entity.\r\n */\r\nexport interface ISelectionService extends IService<typeof SelectionServiceIdentity> {\r\n    /**\r\n     * Gets or sets the currently selected entity.\r\n     */\r\n    selectedEntity: Nullable<unknown>;\r\n\r\n    /**\r\n     * An observable that notifies when the selected entity changes.\r\n     */\r\n    readonly onSelectedEntityChanged: IReadonlyObservable<void>;\r\n}\r\n\r\nexport const SelectionServiceDefinition: ServiceDefinition<[ISelectionService], [IShellService, ISettingsContext]> = {\r\n    friendlyName: \"Selection Service\",\r\n    produces: [SelectionServiceIdentity],\r\n    consumes: [ShellServiceIdentity, SettingsContextIdentity],\r\n    factory: (shellService, settingsContext) => {\r\n        let selectedEntityState: Nullable<unknown> = null;\r\n        const selectedEntityObservable = new Observable<void>();\r\n        let disposedHook: Nullable<IDisposable> = null;\r\n\r\n        const setSelectedItem = (item: Nullable<unknown>) => {\r\n            if (item !== selectedEntityState) {\r\n                disposedHook?.dispose();\r\n                disposedHook = null;\r\n\r\n                selectedEntityState = item;\r\n                selectedEntityObservable.notifyObservers();\r\n\r\n                if (item) {\r\n                    const disposable = item as Partial<IDisposable>;\r\n                    if (disposable.dispose) {\r\n                        disposedHook = InterceptFunction(disposable, \"dispose\", { afterCall: () => setSelectedItem(null) });\r\n                    }\r\n                }\r\n\r\n                // Expose the selected entity through a global variable. This is an Inspector v1 feature that people have found useful.\r\n                (globalThis as any).debugNode = item;\r\n\r\n                // Automatically open the properties pane when an entity is selected.\r\n                if (item && settingsContext.showPropertiesOnEntitySelection) {\r\n                    shellService.sidePanes.find((pane) => pane.key === \"Properties\")?.select();\r\n                }\r\n            }\r\n        };\r\n\r\n        return {\r\n            get selectedEntity() {\r\n                return selectedEntityState;\r\n            },\r\n            set selectedEntity(item: Nullable<unknown>) {\r\n                setSelectedItem(item);\r\n            },\r\n            onSelectedEntityChanged: selectedEntityObservable,\r\n            dispose: () => selectedEntityObservable.clear(),\r\n        };\r\n    },\r\n};\r\n","import type { IDisposable, IReadonlyObservable } from \"core/index\";\r\nimport type { SectionsImperativeRef, DynamicAccordionSection, DynamicAccordionSectionContent } from \"../../../components/extensibleAccordion\";\r\nimport type { PropertyChangeInfo } from \"../../../contexts/propertyContext\";\r\nimport type { IService, ServiceDefinition } from \"../../../modularity/serviceDefinition\";\r\nimport type { ISelectionService } from \"../../selectionService\";\r\nimport type { IShellService } from \"../../shellService\";\r\n\r\nimport { DocumentTextRegular } from \"@fluentui/react-icons\";\r\nimport { useEffect, useMemo, useRef, useState } from \"react\";\r\n\r\nimport { Observable } from \"core/Misc/observable\";\r\nimport { PropertiesPane } from \"../../../components/properties/propertiesPane\";\r\nimport { PropertyContext } from \"../../../contexts/propertyContext\";\r\nimport { useObservableCollection, useObservableState, useOrderedObservableCollection } from \"../../../hooks/observableHooks\";\r\nimport { ObservableCollection } from \"../../../misc/observableCollection\";\r\nimport { SelectionServiceIdentity } from \"../../selectionService\";\r\nimport { ShellServiceIdentity } from \"../../shellService\";\r\n\r\nexport const PropertiesServiceIdentity = Symbol(\"PropertiesService\");\r\n\r\ntype PropertiesSectionContent<EntityT> = {\r\n    /**\r\n     * A unique key for the the content.\r\n     */\r\n    key: string;\r\n\r\n    /**\r\n     * A predicate function to determine if the content applies to the given entity.\r\n     */\r\n    predicate: (entity: unknown) => entity is EntityT;\r\n} & {\r\n    content: readonly Omit<DynamicAccordionSectionContent<EntityT>, \"key\">[];\r\n};\r\n\r\n/**\r\n * Allows new sections or content to be added to the properties pane.\r\n */\r\nexport interface IPropertiesService extends IService<typeof PropertiesServiceIdentity> {\r\n    /**\r\n     * Adds a new section (e.g. \"General\", \"Transforms\", etc.).\r\n     * @param section A description of the section to add.\r\n     */\r\n    addSection(section: DynamicAccordionSection): IDisposable;\r\n\r\n    /**\r\n     * Adds content to one or more sections.\r\n     * @param content A description of the content to add.\r\n     */\r\n    addSectionContent<EntityT>(content: PropertiesSectionContent<EntityT>): IDisposable;\r\n\r\n    /**\r\n     * Highlights the specified sections temporarily to draw the user's attention to them.\r\n     * @remarks All other sections are collapsed (but can be expanded by the user) until a different entity is selected.\r\n     * @param sectionIds The identities of the sections to highlight.\r\n     */\r\n    highlightSections(sectionIds: readonly string[]): void;\r\n\r\n    /**\r\n     * An observable that notifies when a property has been changed by the user.\r\n     * @remarks This observable only fires for changes made through the properties pane.\r\n     */\r\n    readonly onPropertyChanged: IReadonlyObservable<PropertyChangeInfo>;\r\n}\r\n\r\n/**\r\n * Provides a properties pane that enables displaying and editing properties of an entity such as a mesh or a texture.\r\n */\r\nexport const PropertiesServiceDefinition: ServiceDefinition<[IPropertiesService], [IShellService, ISelectionService]> = {\r\n    friendlyName: \"Properties Editor\",\r\n    produces: [PropertiesServiceIdentity],\r\n    consumes: [ShellServiceIdentity, SelectionServiceIdentity],\r\n    factory: (shellService, selectionService) => {\r\n        const sectionsCollection = new ObservableCollection<DynamicAccordionSection>();\r\n        const sectionContentCollection = new ObservableCollection<PropertiesSectionContent<unknown>>();\r\n        const onPropertyChanged = new Observable<PropertyChangeInfo>();\r\n        const onHighlightSectionsRequested = new Observable<readonly string[]>();\r\n\r\n        const registration = shellService.addSidePane({\r\n            key: \"Properties\",\r\n            title: \"Properties\",\r\n            icon: DocumentTextRegular,\r\n            horizontalLocation: \"right\",\r\n            verticalLocation: \"top\",\r\n            order: 100,\r\n            suppressTeachingMoment: true,\r\n            content: () => {\r\n                const sections = useOrderedObservableCollection(sectionsCollection);\r\n                const sectionContent = useObservableCollection(sectionContentCollection);\r\n                const entity = useObservableState(() => selectionService.selectedEntity, selectionService.onSelectedEntityChanged);\r\n                const applicableContent = useMemo(\r\n                    () =>\r\n                        entity\r\n                            ? sectionContent\r\n                                  .filter((section) => section.predicate(entity))\r\n                                  .flatMap((section) => {\r\n                                      return section.content.map((content) => {\r\n                                          return {\r\n                                              key: section.key,\r\n                                              section: content.section,\r\n                                              order: content.order,\r\n                                              component: content.component,\r\n                                          };\r\n                                      });\r\n                                  })\r\n                            : [],\r\n                    [sectionContent, entity]\r\n                );\r\n\r\n                const sectionsRef = useRef<SectionsImperativeRef>(null);\r\n\r\n                // The selected entity may be set at the same time as a highlight is requested.\r\n                // To account for this, we need to wait for one React render to complete before\r\n                // requesting the section highlight.\r\n                const [pendingHighlight, setPendingHighlight] = useState<readonly string[]>();\r\n\r\n                useEffect(() => {\r\n                    const observer = onHighlightSectionsRequested.add(setPendingHighlight);\r\n                    return () => observer.remove();\r\n                }, []);\r\n\r\n                useEffect(() => {\r\n                    if (pendingHighlight && sectionsRef.current) {\r\n                        sectionsRef.current.highlightSections(pendingHighlight);\r\n                        setPendingHighlight(undefined);\r\n                    }\r\n                }, [pendingHighlight]);\r\n\r\n                return (\r\n                    <PropertyContext.Provider value={{ onPropertyChanged }}>\r\n                        <PropertiesPane sections={sections} sectionContent={applicableContent} context={entity} sectionsRef={sectionsRef} />\r\n                    </PropertyContext.Provider>\r\n                );\r\n            },\r\n        });\r\n\r\n        return {\r\n            addSection: (section) => sectionsCollection.add(section),\r\n            addSectionContent: (content) => sectionContentCollection.add(content as PropertiesSectionContent<unknown>),\r\n            onPropertyChanged,\r\n            highlightSections: (sectionIds: readonly string[]) => onHighlightSectionsRequested.notifyObservers(sectionIds),\r\n            dispose: () => registration.dispose(),\r\n        };\r\n    },\r\n};\r\n","/**\r\n * Performs a topological sort on a graph.\r\n * @param graph The set of nodes that make up the graph.\r\n * @param getAdjacentNodes A function that returns the adjacent nodes for a given node.\r\n * @param onSortedNode A function that is called for each node in the sorted order.\r\n * @remarks\r\n * This function allocates. Do not use it in the hot path. Instead use an instance of GraphUtils.\r\n */\r\nexport function SortGraph<NodeT>(graph: Iterable<NodeT>, getAdjacentNodes: (node: NodeT) => Iterable<NodeT>, onSortedNode: (node: NodeT) => void) {\r\n    const sorter = new GraphUtils<NodeT>();\r\n    sorter.sort(graph, getAdjacentNodes, onSortedNode);\r\n}\r\n\r\n/**\r\n * Traverses a graph.\r\n * @param graph The set of nodes that make up the graph.\r\n * @param getAdjacentNodes A function that returns the adjacent nodes for a given node.\r\n * @param onBeforeTraverse A function that is called before traversing each node.\r\n * @param onAfterTraverse A function that is called after traversing each node.\r\n * @remarks\r\n * This function allocates. Do not use it in the hot path. Instead use an instance of GraphUtils.\r\n */\r\nexport function TraverseGraph<NodeT>(\r\n    graph: Iterable<NodeT>,\r\n    getAdjacentNodes: (node: NodeT) => Iterable<NodeT> | null | undefined,\r\n    onBeforeTraverse?: (node: NodeT) => void,\r\n    onAfterTraverse?: (node: NodeT) => void\r\n) {\r\n    const traverser = new GraphUtils<NodeT>();\r\n    traverser.traverse(graph, getAdjacentNodes, onBeforeTraverse, onAfterTraverse);\r\n}\r\n\r\n/**\r\n * A utility class for performing graph operations.\r\n * @remarks\r\n * The class allocates new objects, but each operation (e.g. sort, traverse) is allocation free. This is useful when used in the hot path.\r\n */\r\nexport class GraphUtils<DefaultNodeT = unknown> {\r\n    // Tracks three states:\r\n    // 1. No entry for the node - this means the node has not been encountered yet during any traversal\r\n    // 2. Entry with value false - this means the node is currently being traversed (needed to detect cycles)\r\n    // 3. Entry with value true - this means the node has already been fully traversed (and cycles were not detected)\r\n    private readonly _traversalState = new Map<DefaultNodeT, boolean>();\r\n    private _isTraversing = false;\r\n\r\n    /**\r\n     * Performs a topological sort on a graph.\r\n     * @param graph The set of nodes that make up the graph.\r\n     * @param getAdjacentNodes A function that returns the adjacent nodes for a given node.\r\n     * @param onSortedNode A function that is called for each node in the sorted order.\r\n     */\r\n    public sort<NodeT extends DefaultNodeT>(graph: Iterable<NodeT>, getAdjacentNodes: (node: NodeT) => Iterable<NodeT>, onSortedNode: (node: NodeT) => void) {\r\n        this.traverse(graph, getAdjacentNodes, undefined, onSortedNode);\r\n    }\r\n\r\n    /**\r\n     * Traverses a graph.\r\n     * @param graph The set of nodes that make up the graph.\r\n     * @param getAdjacentNodes A function that returns the adjacent nodes for a given node.\r\n     * @param onBeforeTraverse A function that is called before traversing each node.\r\n     * @param onAfterTraverse A function that is called after traversing each node.\r\n     */\r\n    public traverse<NodeT extends DefaultNodeT>(\r\n        graph: Iterable<NodeT>,\r\n        getAdjacentNodes: (node: NodeT) => Iterable<NodeT> | null | undefined,\r\n        onBeforeTraverse?: (node: NodeT) => void,\r\n        onAfterTraverse?: (node: NodeT) => void\r\n    ) {\r\n        // Since the traversal state is re-used, disallow re-entrancy through the getAdjacentNodes or onBeforeTraverse or onAfterTraverse callbacks.\r\n        if (this._isTraversing) {\r\n            throw new Error(\"This TopologicalSorter instance is already traversing.\");\r\n        }\r\n\r\n        this._isTraversing = true;\r\n\r\n        try {\r\n            for (const node of graph) {\r\n                this._traverseCore(node, getAdjacentNodes, onBeforeTraverse, onAfterTraverse);\r\n            }\r\n        } finally {\r\n            this._isTraversing = false;\r\n            this._traversalState.clear();\r\n        }\r\n    }\r\n\r\n    private _traverseCore<NodeT extends DefaultNodeT>(\r\n        node: NodeT,\r\n        getAdjacentNodes: (node: NodeT) => Iterable<NodeT> | null | undefined,\r\n        onBeforeTraverse?: (node: NodeT) => void,\r\n        onAfterTraverse?: (node: NodeT) => void\r\n    ) {\r\n        if (this._traversalState.get(node) !== true) {\r\n            if (this._traversalState.get(node) === false) {\r\n                throw new Error(\"Graph has cycle.\");\r\n            }\r\n\r\n            this._traversalState.set(node, false);\r\n            onBeforeTraverse?.(node);\r\n\r\n            const adjacentNodes = getAdjacentNodes(node);\r\n            if (adjacentNodes) {\r\n                for (const adjacentNode of adjacentNodes) {\r\n                    this._traverseCore(adjacentNode, getAdjacentNodes, onBeforeTraverse, onAfterTraverse);\r\n                }\r\n            }\r\n\r\n            this._traversalState.set(node, true);\r\n            onAfterTraverse?.(node);\r\n        }\r\n    }\r\n}\r\n","import type { ScrollToInterface } from \"@fluentui-contrib/react-virtualizer\";\r\nimport type { MenuCheckedValueChangeData, MenuCheckedValueChangeEvent, TreeItemValue, TreeOpenChangeData, TreeOpenChangeEvent } from \"@fluentui/react-components\";\r\nimport type { FluentIcon } from \"@fluentui/react-icons\";\r\nimport type { ComponentType, FunctionComponent } from \"react\";\r\n\r\nimport type { IDisposable, IReadonlyObservable, Nullable, Scene } from \"core/index\";\r\n\r\nimport { VirtualizerScrollView } from \"@fluentui-contrib/react-virtualizer\";\r\nimport {\r\n    Body1,\r\n    Body1Strong,\r\n    Button,\r\n    FlatTree,\r\n    FlatTreeItem,\r\n    makeStyles,\r\n    Menu,\r\n    MenuDivider,\r\n    MenuItem,\r\n    MenuItemCheckbox,\r\n    MenuList,\r\n    MenuPopover,\r\n    MenuTrigger,\r\n    mergeClasses,\r\n    SearchBox,\r\n    tokens,\r\n    Tooltip,\r\n    TreeItemLayout,\r\n    treeItemLevelToken,\r\n} from \"@fluentui/react-components\";\r\nimport { ArrowCollapseAllRegular, ArrowExpandAllRegular, createFluentIcon, FilterRegular, GlobeRegular, TextSortAscendingRegular } from \"@fluentui/react-icons\";\r\nimport { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\r\nimport { useLocalStorage } from \"usehooks-ts\";\r\n\r\nimport { UniqueIdGenerator } from \"core/Misc/uniqueIdGenerator\";\r\nimport { ToggleButton } from \"shared-ui-components/fluent/primitives/toggleButton\";\r\nimport { CustomTokens } from \"shared-ui-components/fluent/primitives/utils\";\r\nimport { useObservableState } from \"../../hooks/observableHooks\";\r\nimport { useResource } from \"../../hooks/resourceHooks\";\r\nimport { useCompactMode } from \"../../hooks/settingsHooks\";\r\nimport { TraverseGraph } from \"../../misc/graphUtils\";\r\n\r\ntype EntityBase = Readonly<{\r\n    uniqueId?: number;\r\n    reservedDataStore?: Record<PropertyKey, unknown>;\r\n}>;\r\n\r\nconst SyntheticUniqueIds = new WeakMap<EntityBase, number>();\r\nfunction GetEntityId(entity: EntityBase): number {\r\n    if (entity.uniqueId !== undefined) {\r\n        return entity.uniqueId;\r\n    }\r\n\r\n    let id = SyntheticUniqueIds.get(entity);\r\n    if (!id) {\r\n        SyntheticUniqueIds.set(entity, (id = UniqueIdGenerator.UniqueId));\r\n    }\r\n    return id;\r\n}\r\n\r\nexport type EntityDisplayInfo = Partial<IDisposable> &\r\n    Readonly<{\r\n        /**\r\n         * The name of the entity to display in the Scene Explorer tree.\r\n         */\r\n        name: string;\r\n\r\n        /**\r\n         * An observable that notifies when the display info (such as the name) changes.\r\n         */\r\n        onChange?: IReadonlyObservable<void>;\r\n    }>;\r\n\r\nexport type SceneExplorerSection<T> = Readonly<{\r\n    /**\r\n     * The display name of the section (e.g. \"Nodes\", \"Materials\", etc.).\r\n     */\r\n    displayName: string;\r\n\r\n    /**\r\n     * An optional order for the section, relative to other sections.\r\n     * Defaults to 0.\r\n     */\r\n    order?: number;\r\n\r\n    /**\r\n     * A function that returns the root entities for this section.\r\n     */\r\n    getRootEntities: () => readonly T[];\r\n\r\n    /**\r\n     * An optional function that returns the children of a given entity.\r\n     */\r\n    getEntityChildren?: (entity: T) => readonly T[];\r\n\r\n    /**\r\n     * Gets the display information for a given entity.\r\n     * This is ideally \"live\" display info (e.g. updates to the display info are taken into account and communicated via the observable).\r\n     * This means in many cases the display info will need to be disposed when it is no longer needed so observable registrations can be removed.\r\n     */\r\n    getEntityDisplayInfo: (entity: T) => EntityDisplayInfo;\r\n\r\n    /**\r\n     * An optional icon component to render for the entity.\r\n     */\r\n    entityIcon?: ComponentType<{ entity: T }>;\r\n\r\n    /**\r\n     * A function that returns an array of observables for when entities are added to the scene.\r\n     */\r\n    getEntityAddedObservables: () => readonly IReadonlyObservable<T>[];\r\n\r\n    /**\r\n     * A function that returns an array of observables for when entities are removed from the scene.\r\n     */\r\n    getEntityRemovedObservables: () => readonly IReadonlyObservable<T>[];\r\n\r\n    /**\r\n     * A function that returns an array of observables for when entities are moved (e.g. re-parented) within the scene.\r\n     */\r\n    getEntityMovedObservables?: () => readonly IReadonlyObservable<T>[];\r\n}>;\r\n\r\ntype InlineCommand = {\r\n    /**\r\n     * An icon component to render for the command. Required for inline commands.\r\n     */\r\n    icon: ComponentType;\r\n\r\n    /**\r\n     * The mode of the command. Inline commands are shown directly in the tree item layout. Inline by default.\r\n     */\r\n    mode?: \"inline\";\r\n};\r\n\r\ntype ContextMenuCommand = {\r\n    /**\r\n     * An icon component to render for the command. Optional for context menu commands.\r\n     */\r\n    icon?: ComponentType;\r\n\r\n    /**\r\n     * The mode of the command. Context menu commands are shown in the context menu for the tree item.\r\n     */\r\n    mode: \"contextMenu\";\r\n};\r\n\r\ntype CommandMode = NonNullable<(InlineCommand | ContextMenuCommand)[\"mode\"]>;\r\n\r\ntype ActionCommand = {\r\n    readonly type: \"action\";\r\n\r\n    /**\r\n     * The function that executes the command.\r\n     */\r\n    execute(): void;\r\n};\r\n\r\ntype ToggleCommand = {\r\n    readonly type: \"toggle\";\r\n\r\n    /**\r\n     * A boolean indicating if the command is enabled.\r\n     */\r\n    isEnabled: boolean;\r\n};\r\n\r\ntype CommandType = (ActionCommand | ToggleCommand)[\"type\"];\r\n\r\nexport type SceneExplorerCommand<ModeT extends CommandMode = CommandMode, TypeT extends CommandType = CommandType> = Partial<IDisposable> &\r\n    Readonly<{\r\n        /**\r\n         * The display name of the command (e.g. \"Delete\", \"Rename\", etc.).\r\n         */\r\n        displayName: string;\r\n\r\n        /**\r\n         * An observable that notifies when the command state changes.\r\n         */\r\n        onChange?: IReadonlyObservable<unknown>;\r\n    }> &\r\n    (ModeT extends \"inline\" ? InlineCommand : ContextMenuCommand) &\r\n    (TypeT extends \"action\" ? ActionCommand : ToggleCommand);\r\n\r\nexport type SceneExplorerCommandProvider<ContextT, ModeT extends CommandMode = CommandMode, TypeT extends CommandType = CommandType> = Readonly<{\r\n    /**\r\n     * An optional order for the section, relative to other commands.\r\n     * Defaults to 0.\r\n     */\r\n    order?: number;\r\n\r\n    /**\r\n     * A predicate function that determines if the command is applicable to the given context.\r\n     */\r\n    predicate: (context: unknown) => context is ContextT;\r\n\r\n    /**\r\n     * Gets the command information for the given context.\r\n     */\r\n    getCommand: (context: ContextT) => SceneExplorerCommand<ModeT, TypeT>;\r\n}>;\r\n\r\ntype SceneTreeItemData = { type: \"scene\"; scene: Scene };\r\n\r\ntype SectionTreeItemData = {\r\n    type: \"section\";\r\n    sectionName: string;\r\n    children: EntityTreeItemData[];\r\n};\r\n\r\ntype EntityTreeItemData = {\r\n    type: \"entity\";\r\n    entity: EntityBase;\r\n    depth: number;\r\n    parent: SectionTreeItemData | EntityTreeItemData;\r\n    children?: EntityTreeItemData[];\r\n    icon?: ComponentType<{ entity: unknown }>;\r\n    getDisplayInfo: () => EntityDisplayInfo;\r\n};\r\n\r\ntype TreeItemData = SceneTreeItemData | SectionTreeItemData | EntityTreeItemData;\r\n\r\nfunction ExpandOrCollapseAll(treeItem: SectionTreeItemData | EntityTreeItemData, open: boolean, openItems: Set<TreeItemValue>) {\r\n    const addOrRemove = open ? openItems.add.bind(openItems) : openItems.delete.bind(openItems);\r\n    TraverseGraph(\r\n        [treeItem],\r\n        (treeItem) => treeItem.children,\r\n        (treeItem) => addOrRemove(treeItem.type === \"entity\" ? GetEntityId(treeItem.entity) : treeItem.sectionName)\r\n    );\r\n}\r\n\r\nfunction useCommandContextMenuState(commands: readonly SceneExplorerCommand<\"contextMenu\">[]) {\r\n    const [checkedContextMenuItems, setCheckedContextMenuItems] = useState({ toggleCommands: [] as string[] });\r\n\r\n    useEffect(() => {\r\n        const updateCheckedItems = () => {\r\n            const checkedItems: string[] = [];\r\n            for (const command of commands) {\r\n                if (command.type === \"toggle\" && command.isEnabled) {\r\n                    checkedItems.push(command.displayName);\r\n                }\r\n            }\r\n            setCheckedContextMenuItems({ toggleCommands: checkedItems });\r\n        };\r\n\r\n        updateCheckedItems();\r\n\r\n        const observers = commands\r\n            .map((command) => command.onChange)\r\n            .filter((onChange) => !!onChange)\r\n            .map((onChange) => onChange.add(updateCheckedItems));\r\n\r\n        return () => {\r\n            for (const observer of observers) {\r\n                observer.remove();\r\n            }\r\n        };\r\n    }, [commands]);\r\n\r\n    const onContextMenuCheckedValueChange = useCallback(\r\n        (e: MenuCheckedValueChangeEvent, data: MenuCheckedValueChangeData) => {\r\n            for (const command of commands) {\r\n                if (command.type === \"toggle\") {\r\n                    command.isEnabled = data.checkedItems.includes(command.displayName);\r\n                }\r\n            }\r\n        },\r\n        [commands]\r\n    );\r\n\r\n    const contextMenuItems = commands.map((command) =>\r\n        command.type === \"action\" ? (\r\n            <MenuItem key={command.displayName} icon={command.icon ? <command.icon /> : undefined} onClick={() => command.execute()}>\r\n                {command.displayName}\r\n            </MenuItem>\r\n        ) : (\r\n            <MenuItemCheckbox\r\n                key={command.displayName}\r\n                // Don't show both a checkmark and an icon. null means no checkmark, undefined means default (checkmark).\r\n                checkmark={command.icon ? null : undefined}\r\n                icon={command.icon ? <command.icon /> : undefined}\r\n                name=\"toggleCommands\"\r\n                value={command.displayName}\r\n            >\r\n                {command.displayName}\r\n            </MenuItemCheckbox>\r\n        )\r\n    );\r\n\r\n    return [checkedContextMenuItems, onContextMenuCheckedValueChange, contextMenuItems] as const;\r\n}\r\n\r\nfunction CoerceEntityArray(entities: EntityTreeItemData[], sort: boolean): readonly EntityTreeItemData[] {\r\n    // If sorting is requested, create a copy of the array and sort it by display name.\r\n    if (sort) {\r\n        entities = [...entities];\r\n        entities.sort((left, right) => {\r\n            const leftDisplayInfo = left.getDisplayInfo();\r\n            const rightDisplayInfo = right.getDisplayInfo();\r\n            const comparison = leftDisplayInfo.name.localeCompare(rightDisplayInfo.name);\r\n            leftDisplayInfo.dispose?.();\r\n            rightDisplayInfo.dispose?.();\r\n            return comparison;\r\n        });\r\n    }\r\n\r\n    return entities;\r\n}\r\n\r\nconst useStyles = makeStyles({\r\n    rootDiv: {\r\n        flex: 1,\r\n        overflow: \"hidden\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n    },\r\n    toolbarDiv: {\r\n        display: \"flex\",\r\n        flexDirection: \"row\",\r\n        paddingLeft: tokens.spacingHorizontalM,\r\n        paddingRight: tokens.spacingHorizontalM,\r\n    },\r\n    searchBox: {\r\n        flex: 1,\r\n        padding: 0,\r\n    },\r\n    tree: {\r\n        rowGap: 0,\r\n        overflow: \"hidden\",\r\n        flex: 1,\r\n        paddingLeft: tokens.spacingHorizontalM,\r\n        paddingRight: tokens.spacingHorizontalM,\r\n    },\r\n    scrollView: {\r\n        overflowX: \"hidden\",\r\n        // Create a little padding and negative margin to keep correct alignment but make\r\n        // room for the focus ring so it doesn't get clipped.\r\n        paddingLeft: tokens.spacingHorizontalXXS,\r\n        paddingRight: tokens.spacingHorizontalXXS,\r\n        marginLeft: `calc(-1 * ${tokens.spacingHorizontalXXS})`,\r\n        marginRight: `calc(-1 * ${tokens.spacingHorizontalXXS})`,\r\n    },\r\n    treeItem: {\r\n        // Ensure focused items render their focus ring above adjacent selected/hovered items\r\n        \"&:focus\": {\r\n            zIndex: 1,\r\n        },\r\n    },\r\n    sceneTreeItemLayout: {\r\n        padding: 0,\r\n    },\r\n    treeItemLayoutAside: {\r\n        gap: 0,\r\n        paddingLeft: tokens.spacingHorizontalS,\r\n        paddingRight: tokens.spacingHorizontalS,\r\n    },\r\n    treeItemLayoutMain: {\r\n        flex: \"1 1 0\",\r\n        overflow: \"hidden\",\r\n        textOverflow: \"ellipsis\",\r\n    },\r\n    treeItemLayoutCompact: {\r\n        minHeight: CustomTokens.lineHeightSmall,\r\n        maxHeight: CustomTokens.lineHeightSmall,\r\n    },\r\n    // Use tighter indentation than the default (16px instead of 24px per level)\r\n    treeItemLayoutBranch: {\r\n        paddingLeft: `calc((var(${treeItemLevelToken}, 1) - 1) * ${tokens.spacingHorizontalL})`,\r\n    },\r\n    treeItemLayoutLeaf: {\r\n        paddingLeft: `calc(var(${treeItemLevelToken}, 1) * ${tokens.spacingHorizontalL} + ${tokens.spacingHorizontalS})`,\r\n    },\r\n});\r\n\r\nconst ActionCommand: FunctionComponent<{ command: SceneExplorerCommand<\"inline\", \"action\"> }> = (props) => {\r\n    const { command } = props;\r\n\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    const [displayName, Icon, execute] = useObservableState(\r\n        useCallback(() => [command.displayName, command.icon, command.execute] as const, [command]),\r\n        command.onChange\r\n    );\r\n\r\n    return (\r\n        <Tooltip content={displayName} relationship=\"label\" positioning={\"after\"}>\r\n            <Button icon={<Icon />} appearance=\"subtle\" onClick={() => execute()} />\r\n        </Tooltip>\r\n    );\r\n};\r\n\r\nconst ToggleCommand: FunctionComponent<{ command: SceneExplorerCommand<\"inline\", \"toggle\"> }> = (props) => {\r\n    const { command } = props;\r\n\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    const [displayName, Icon, isEnabled] = useObservableState(\r\n        useCallback(() => [command.displayName, command.icon, command.isEnabled] as const, [command]),\r\n        command.onChange\r\n    );\r\n\r\n    // TODO-iv2: Consolidate icon prop passing approach for inspector and shared components\r\n    return <ToggleButton appearance=\"transparent\" title={displayName} checkedIcon={Icon as FluentIcon} value={isEnabled} onChange={(val: boolean) => (command.isEnabled = val)} />;\r\n};\r\n\r\n// This \"placeholder\" command has a blank icon and is a no-op. It is used for aside\r\n// alignment when some toggle commands are enabled. See more details on the commands\r\n// for setting the aside state.\r\nconst PlaceHolderCommand: SceneExplorerCommand<\"inline\", \"action\"> = {\r\n    type: \"action\",\r\n    displayName: \"\",\r\n    icon: createFluentIcon(\"Placeholder\", \"1em\", \"\"),\r\n    execute: () => {\r\n        /* No-op */\r\n    },\r\n};\r\n\r\nfunction MakeInlineCommandElement(command: SceneExplorerCommand<\"inline\">, isPlaceholder: boolean): JSX.Element {\r\n    if (isPlaceholder) {\r\n        // Placeholders are not visible and not interacted with, so they are always ActionCommand\r\n        // components, just to ensure the exact right amount of space is taken up.\r\n        return <ActionCommand key={command.displayName} command={PlaceHolderCommand} />;\r\n    }\r\n\r\n    return command.type === \"action\" ? <ActionCommand key={command.displayName} command={command} /> : <ToggleCommand key={command.displayName} command={command} />;\r\n}\r\n\r\nconst SceneTreeItem: FunctionComponent<{\r\n    scene: Scene;\r\n    isSelected: boolean;\r\n    select: () => void;\r\n    isFiltering: boolean;\r\n}> = (props) => {\r\n    const { isSelected, select } = props;\r\n\r\n    const classes = useStyles();\r\n    const [compactMode] = useCompactMode();\r\n    const treeItemLayoutClass = mergeClasses(classes.sceneTreeItemLayout, compactMode ? classes.treeItemLayoutCompact : undefined);\r\n\r\n    return (\r\n        <FlatTreeItem\r\n            className={classes.treeItem}\r\n            key=\"scene\"\r\n            value=\"scene\"\r\n            itemType=\"leaf\"\r\n            parentValue={undefined}\r\n            aria-level={1}\r\n            aria-setsize={1}\r\n            aria-posinset={1}\r\n            onClick={select}\r\n        >\r\n            <TreeItemLayout\r\n                iconBefore={<GlobeRegular />}\r\n                className={treeItemLayoutClass}\r\n                style={isSelected ? { backgroundColor: tokens.colorNeutralBackground1Selected } : undefined}\r\n            >\r\n                <Body1Strong wrap={false} truncate>\r\n                    Scene\r\n                </Body1Strong>\r\n            </TreeItemLayout>\r\n        </FlatTreeItem>\r\n    );\r\n};\r\n\r\nconst SectionTreeItem: FunctionComponent<{\r\n    scene: Scene;\r\n    section: SectionTreeItemData;\r\n    isFiltering: boolean;\r\n    commandProviders: readonly SceneExplorerCommandProvider<string, \"contextMenu\">[];\r\n    expandAll: () => void;\r\n    collapseAll: () => void;\r\n}> = (props) => {\r\n    const { section, isFiltering, commandProviders, expandAll, collapseAll } = props;\r\n\r\n    const classes = useStyles();\r\n    const [compactMode] = useCompactMode();\r\n\r\n    // Get the commands that apply to this section.\r\n    const commands = useResource(\r\n        useCallback(() => {\r\n            const commands = [...commandProviders].filter((provider) => provider.predicate(section.sectionName)).map((provider) => provider.getCommand(section.sectionName));\r\n\r\n            return Object.assign(commands, {\r\n                dispose: () => commands.forEach((command) => command.dispose?.()),\r\n            });\r\n        }, [section.sectionName, commandProviders])\r\n    );\r\n\r\n    const hasChildren = section.children.length > 0;\r\n\r\n    const [checkedContextMenuItems, onContextMenuCheckedValueChange, contextMenuItems] = useCommandContextMenuState(commands);\r\n\r\n    return (\r\n        <Menu openOnContext checkedValues={checkedContextMenuItems} onCheckedValueChange={onContextMenuCheckedValueChange}>\r\n            <MenuTrigger disableButtonEnhancement>\r\n                <FlatTreeItem\r\n                    className={classes.treeItem}\r\n                    key={section.sectionName}\r\n                    value={section.sectionName}\r\n                    // Disable manual expand/collapse when a filter is active.\r\n                    itemType={!isFiltering && section.children.length > 0 ? \"branch\" : \"leaf\"}\r\n                    parentValue={undefined}\r\n                    aria-level={1}\r\n                    aria-setsize={1}\r\n                    aria-posinset={1}\r\n                >\r\n                    <TreeItemLayout className={mergeClasses(classes.treeItemLayoutBranch, compactMode ? classes.treeItemLayoutCompact : undefined)}>\r\n                        <Body1Strong wrap={false} truncate>\r\n                            {section.sectionName.substring(0, 100)}\r\n                        </Body1Strong>\r\n                    </TreeItemLayout>\r\n                </FlatTreeItem>\r\n            </MenuTrigger>\r\n            <MenuPopover hidden={!hasChildren && commands.length === 0}>\r\n                <MenuList>\r\n                    {hasChildren && (\r\n                        <>\r\n                            <MenuItem onClick={expandAll}>\r\n                                <Body1>Expand All</Body1>\r\n                            </MenuItem>\r\n                            <MenuItem onClick={collapseAll}>\r\n                                <Body1>Collapse All</Body1>\r\n                            </MenuItem>\r\n                        </>\r\n                    )}\r\n                    {hasChildren && commands.length > 0 && <MenuDivider />}\r\n                    {contextMenuItems}\r\n                </MenuList>\r\n            </MenuPopover>\r\n        </Menu>\r\n    );\r\n};\r\n\r\nconst EntityTreeItem: FunctionComponent<{\r\n    scene: Scene;\r\n    entityItem: EntityTreeItemData;\r\n    isSelected: boolean;\r\n    select: () => void;\r\n    isFiltering: boolean;\r\n    commandProviders: readonly SceneExplorerCommandProvider<EntityBase>[];\r\n    expandAll: () => void;\r\n    collapseAll: () => void;\r\n}> = (props) => {\r\n    const { entityItem, isSelected, select, isFiltering, commandProviders, expandAll, collapseAll } = props;\r\n\r\n    const classes = useStyles();\r\n    const [compactMode] = useCompactMode();\r\n\r\n    const hasChildren = !!entityItem.children?.length;\r\n\r\n    const displayInfo = useResource(\r\n        useCallback(() => {\r\n            const displayInfo = entityItem.getDisplayInfo();\r\n            if (!displayInfo.dispose) {\r\n                displayInfo.dispose = () => {\r\n                    /* No-op */\r\n                };\r\n            }\r\n            return displayInfo as typeof displayInfo & IDisposable;\r\n        }, [entityItem])\r\n    );\r\n\r\n    const name = useObservableState(() => displayInfo.name, displayInfo.onChange);\r\n\r\n    // Get the commands that apply to this entity.\r\n    const commands = useResource(\r\n        useCallback(() => {\r\n            const commands: readonly SceneExplorerCommand[] = [...commandProviders]\r\n                .filter((provider) => provider.predicate(entityItem.entity))\r\n                .map((provider) => {\r\n                    return {\r\n                        order: provider.order,\r\n                        command: provider.getCommand(entityItem.entity),\r\n                    };\r\n                })\r\n                .sort((a, b) => {\r\n                    // Action commands always come before toggle commands, because toggle commands will remain\r\n                    // visible when they are enabled, even when the pointer is not hovering the item, and we\r\n                    // don't want a bunch of blank space.\r\n                    if (a.command.type !== b.command.type) {\r\n                        return a.command.type === \"action\" ? -1 : 1;\r\n                    }\r\n\r\n                    // Within each group of command types, sort by order (default 0) ascending.\r\n                    return (a.order ?? 0) - (b.order ?? 0);\r\n                })\r\n                .map((entry) => entry.command);\r\n\r\n            return Object.assign(commands, {\r\n                dispose: () => commands.forEach((command) => command.dispose?.()),\r\n            });\r\n        }, [entityItem.entity, commandProviders])\r\n    );\r\n\r\n    const inlineCommands = useMemo(() => commands.filter((command): command is SceneExplorerCommand<\"inline\"> => command.mode !== \"contextMenu\"), [commands]);\r\n\r\n    // TreeItemLayout actions (totally unrelated to \"Action\" type commands) are only visible when the item is focused or has pointer hover.\r\n    const actions = useMemo(() => {\r\n        const defaultCommands: SceneExplorerCommand<\"inline\">[] = [];\r\n        if (hasChildren) {\r\n            defaultCommands.push({\r\n                type: \"action\",\r\n                displayName: \"Expand All\",\r\n                icon: () => <ArrowExpandAllRegular />,\r\n                execute: () => expandAll(),\r\n            });\r\n        }\r\n\r\n        return [...defaultCommands, ...inlineCommands].map((command) => MakeInlineCommandElement(command, false));\r\n    }, [inlineCommands, hasChildren, expandAll]);\r\n\r\n    // TreeItemLayout asides are always visible.\r\n    const [aside, setAside] = useState<readonly JSX.Element[]>([]);\r\n\r\n    // This useEffect keeps the aside up-to-date. What should always show is any enabled toggle command, along with\r\n    // placeholders to the right to keep the position of the actions consistent.\r\n    useEffect(() => {\r\n        const updateAside = () => {\r\n            let isAnyCommandEnabled = false;\r\n            const aside: JSX.Element[] = [];\r\n            for (const command of inlineCommands) {\r\n                isAnyCommandEnabled ||= command.type === \"toggle\" && command.isEnabled;\r\n                if (isAnyCommandEnabled) {\r\n                    aside.push(MakeInlineCommandElement(command, command.type !== \"toggle\" || !command.isEnabled));\r\n                }\r\n            }\r\n            setAside(aside);\r\n        };\r\n\r\n        updateAside();\r\n\r\n        const observers = inlineCommands\r\n            .map((command) => command.onChange)\r\n            .filter((onChange) => !!onChange)\r\n            .map((onChange) => onChange.add(updateAside));\r\n\r\n        return () => {\r\n            for (const observer of observers) {\r\n                observer.remove();\r\n            }\r\n        };\r\n    }, [inlineCommands]);\r\n\r\n    const contextMenuCommands = useMemo(() => commands.filter((command): command is SceneExplorerCommand<\"contextMenu\"> => command.mode === \"contextMenu\"), [commands]);\r\n\r\n    const [checkedContextMenuItems, onContextMenuCheckedValueChange, contextMenuItems] = useCommandContextMenuState(contextMenuCommands);\r\n\r\n    return (\r\n        <Menu openOnContext checkedValues={checkedContextMenuItems} onCheckedValueChange={onContextMenuCheckedValueChange}>\r\n            <MenuTrigger disableButtonEnhancement>\r\n                <FlatTreeItem\r\n                    className={classes.treeItem}\r\n                    key={GetEntityId(entityItem.entity)}\r\n                    value={GetEntityId(entityItem.entity)}\r\n                    // Disable manual expand/collapse when a filter is active.\r\n                    itemType={!isFiltering && hasChildren ? \"branch\" : \"leaf\"}\r\n                    parentValue={entityItem.parent.type === \"section\" ? entityItem.parent.sectionName : GetEntityId(entityItem.entity)}\r\n                    aria-level={entityItem.depth}\r\n                    aria-setsize={1}\r\n                    aria-posinset={1}\r\n                    onClick={select}\r\n                    style={{ [treeItemLevelToken]: entityItem.depth }}\r\n                >\r\n                    <TreeItemLayout\r\n                        iconBefore={entityItem.icon ? <entityItem.icon entity={entityItem.entity} /> : null}\r\n                        className={mergeClasses(hasChildren ? classes.treeItemLayoutBranch : classes.treeItemLayoutLeaf, compactMode ? classes.treeItemLayoutCompact : undefined)}\r\n                        style={isSelected ? { backgroundColor: tokens.colorNeutralBackground1Selected } : undefined}\r\n                        actions={actions}\r\n                        aside={{\r\n                            // Match the gap and padding of the actions.\r\n                            className: classes.treeItemLayoutAside,\r\n                            children: aside,\r\n                        }}\r\n                        main={{\r\n                            // Prevent the \"main\" content (the Body1 below) from growing too large and pushing the actions/aside out of view.\r\n                            className: classes.treeItemLayoutMain,\r\n                        }}\r\n                    >\r\n                        <Body1 wrap={false} truncate>\r\n                            {name}\r\n                        </Body1>\r\n                    </TreeItemLayout>\r\n                </FlatTreeItem>\r\n            </MenuTrigger>\r\n            <MenuPopover hidden={!hasChildren && contextMenuCommands.length === 0}>\r\n                <MenuList>\r\n                    {hasChildren && (\r\n                        <>\r\n                            <MenuItem icon={<ArrowExpandAllRegular />} onClick={expandAll}>\r\n                                <Body1>Expand All</Body1>\r\n                            </MenuItem>\r\n                            <MenuItem icon={<ArrowCollapseAllRegular />} onClick={collapseAll}>\r\n                                <Body1>Collapse All</Body1>\r\n                            </MenuItem>\r\n                        </>\r\n                    )}\r\n                    {hasChildren && contextMenuCommands.length > 0 && <MenuDivider />}\r\n                    {contextMenuItems}\r\n                </MenuList>\r\n            </MenuPopover>\r\n        </Menu>\r\n    );\r\n};\r\n\r\nexport const SceneExplorer: FunctionComponent<{\r\n    sections: readonly SceneExplorerSection<unknown>[];\r\n    entityCommandProviders: readonly SceneExplorerCommandProvider<unknown>[];\r\n    sectionCommandProviders: readonly SceneExplorerCommandProvider<string, \"contextMenu\">[];\r\n    scene: Scene;\r\n    selectedEntity?: unknown;\r\n    setSelectedEntity?: (entity: unknown) => void;\r\n}> = (props) => {\r\n    const classes = useStyles();\r\n\r\n    const { sections, entityCommandProviders, sectionCommandProviders, scene, selectedEntity } = props;\r\n\r\n    const [openItems, setOpenItems] = useState(new Set<TreeItemValue>());\r\n    const [sceneVersion, setSceneVersion] = useState(0);\r\n    const scrollViewRef = useRef<ScrollToInterface>(null);\r\n    // We only want to scroll to the selected item if it was externally selected (outside of SceneExplorer).\r\n    const previousSelectedEntity = useRef(selectedEntity);\r\n    const setSelectedEntity = (entity: unknown) => {\r\n        previousSelectedEntity.current = entity;\r\n        props.setSelectedEntity?.(entity);\r\n    };\r\n\r\n    const [itemsFilter, setItemsFilter] = useState(\"\");\r\n    const [isSorted, setIsSorted] = useLocalStorage(\"Babylon/Settings/SceneExplorer/IsSorted\", false);\r\n\r\n    useEffect(() => {\r\n        setSceneVersion((version) => version + 1);\r\n    }, [scene]);\r\n\r\n    useEffect(() => {\r\n        const onSceneItemAdded = () => {\r\n            setSceneVersion((version) => version + 1);\r\n        };\r\n\r\n        const onSceneItemRemoved = (item: unknown) => {\r\n            setSceneVersion((version) => version + 1);\r\n\r\n            if (openItems.delete(GetEntityId(item as EntityBase))) {\r\n                setOpenItems(new Set(openItems));\r\n            }\r\n\r\n            if (item === selectedEntity) {\r\n                setSelectedEntity?.(null);\r\n            }\r\n        };\r\n\r\n        const addObservers = sections.flatMap((section) => section.getEntityAddedObservables().map((observable) => observable.add(onSceneItemAdded)));\r\n        const removeObservers = sections.flatMap((section) => section.getEntityRemovedObservables().map((observable) => observable.add(onSceneItemRemoved)));\r\n        const moveObservers = sections\r\n            .map((section) => section.getEntityMovedObservables)\r\n            .filter((getEntityMovedObservable) => !!getEntityMovedObservable)\r\n            .flatMap((getEntityMovedObservable) => getEntityMovedObservable().map((observable) => observable.add(onSceneItemAdded)));\r\n\r\n        return () => {\r\n            for (const observer of addObservers) {\r\n                observer.remove();\r\n            }\r\n            for (const observer of removeObservers) {\r\n                observer.remove();\r\n            }\r\n            for (const observer of moveObservers) {\r\n                observer.remove();\r\n            }\r\n        };\r\n    }, [sections, openItems]);\r\n\r\n    const [sceneTreeItem, sectionTreeItems, allTreeItems] = useMemo(() => {\r\n        const sectionTreeItems: SectionTreeItemData[] = [];\r\n        const allTreeItems = new Map<TreeItemValue, SectionTreeItemData | EntityTreeItemData>();\r\n\r\n        const sceneTreeItem: SceneTreeItemData = {\r\n            type: \"scene\",\r\n            scene: scene,\r\n        };\r\n\r\n        for (const section of sections) {\r\n            const rootEntities = section.getRootEntities();\r\n\r\n            const sectionTreeItem = {\r\n                type: \"section\",\r\n                sectionName: section.displayName,\r\n                children: [],\r\n            } as const satisfies SectionTreeItemData;\r\n\r\n            sectionTreeItems.push(sectionTreeItem);\r\n            allTreeItems.set(sectionTreeItem.sectionName, sectionTreeItem);\r\n\r\n            let depth = 2;\r\n            const createEntityTreeItemData = (entity: EntityBase, parent: SectionTreeItemData | EntityTreeItemData) => {\r\n                const treeItemData = {\r\n                    type: \"entity\",\r\n                    entity,\r\n                    depth,\r\n                    parent,\r\n                    icon: section.entityIcon,\r\n                    getDisplayInfo: () => section.getEntityDisplayInfo(entity),\r\n                } as const satisfies EntityTreeItemData;\r\n\r\n                if (!parent.children) {\r\n                    parent.children = [];\r\n                }\r\n                parent.children.push(treeItemData);\r\n\r\n                allTreeItems.set(GetEntityId(entity), treeItemData);\r\n                return treeItemData;\r\n            };\r\n\r\n            const rootEntityTreeItems = rootEntities.map((entity) => createEntityTreeItemData(entity as EntityBase, sectionTreeItem));\r\n\r\n            TraverseGraph(\r\n                rootEntityTreeItems,\r\n                // Get children\r\n                (treeItem) => {\r\n                    if (section.getEntityChildren) {\r\n                        const children = section.getEntityChildren(treeItem.entity) as EntityBase[];\r\n                        return children.filter((child) => !child.reservedDataStore?.hidden).map((child) => createEntityTreeItemData(child, treeItem));\r\n                    }\r\n                    return null;\r\n                },\r\n                // Before traverse\r\n                () => {\r\n                    depth++;\r\n                },\r\n                // After traverse\r\n                () => {\r\n                    depth--;\r\n                }\r\n            );\r\n        }\r\n\r\n        return [sceneTreeItem, sectionTreeItems, allTreeItems] as const;\r\n    }, [scene, sceneVersion, sections]);\r\n\r\n    const visibleItems = useMemo(() => {\r\n        // This will track the items in the order they were traversed (which is what the flat tree expects).\r\n        const traversedItems: TreeItemData[] = [];\r\n        // This will track the items that are visible based on either the open state or the filter.\r\n        const visibleItems = new Set<TreeItemData>();\r\n        const filter = itemsFilter.toLocaleLowerCase();\r\n\r\n        traversedItems.push(sceneTreeItem);\r\n        // The scene tree item is always visible.\r\n        visibleItems.add(sceneTreeItem);\r\n\r\n        for (const sectionTreeItem of sectionTreeItems) {\r\n            traversedItems.push(sectionTreeItem);\r\n            const children = CoerceEntityArray(sectionTreeItem.children, isSorted);\r\n            if (!children.length) {\r\n                continue;\r\n            }\r\n\r\n            // Section tree items are always visible when not filtering.\r\n            if (!filter) {\r\n                visibleItems.add(sectionTreeItem);\r\n            }\r\n\r\n            // When an item filter is present, always traverse the full scene graph (e.g. ignore the open item state).\r\n            if (filter || openItems.has(sectionTreeItem.sectionName)) {\r\n                TraverseGraph(\r\n                    children,\r\n                    // Get children\r\n                    (treeItem) => {\r\n                        if (filter || openItems.has(GetEntityId(treeItem.entity))) {\r\n                            if (!treeItem.children) {\r\n                                return null;\r\n                            }\r\n                            return CoerceEntityArray(treeItem.children, isSorted);\r\n                        }\r\n                        return null;\r\n                    },\r\n                    // Before traverse\r\n                    (treeItem) => {\r\n                        traversedItems.push(treeItem);\r\n                        if (treeItem.entity.reservedDataStore?.hidden) {\r\n                            return; // Don't display the treeItem or its children if reservedDataStore.hidden is true\r\n                        }\r\n                        if (!filter) {\r\n                            // If there is no filter and we made it this far, then the item's parent is in an open state and this item is visible.\r\n                            visibleItems.add(treeItem);\r\n                        } else {\r\n                            // Otherwise we have an item filter and we need to check for a match.\r\n                            const displayInfo = treeItem.getDisplayInfo();\r\n                            if (displayInfo.name.toLocaleLowerCase().includes(filter)) {\r\n                                // The item is a match, add it to the set.\r\n                                visibleItems.add(treeItem);\r\n\r\n                                // Also add all ancestors as a match since we want to be able to see the tree structure up to the matched item.\r\n                                let currentItem: Nullable<SectionTreeItemData | EntityTreeItemData> = treeItem.parent;\r\n                                while (currentItem) {\r\n                                    // If this item is already in the matched set, then all its ancestors must also already be in the set.\r\n                                    if (visibleItems.has(currentItem)) {\r\n                                        break;\r\n                                    }\r\n\r\n                                    visibleItems.add(currentItem);\r\n\r\n                                    // If the parent is the section, then there are no more parents to traverse.\r\n                                    if (currentItem.type === \"section\") {\r\n                                        currentItem = null;\r\n                                    } else {\r\n                                        currentItem = currentItem.parent;\r\n                                    }\r\n                                }\r\n                            }\r\n                            displayInfo.dispose?.();\r\n                        }\r\n                    }\r\n                );\r\n            }\r\n        }\r\n\r\n        // Filter the traversal ordered items by those that should actually be visible.\r\n        return traversedItems.filter((item) => visibleItems.has(item));\r\n    }, [sceneTreeItem, sectionTreeItems, allTreeItems, openItems, itemsFilter, isSorted]);\r\n\r\n    const getParentStack = useCallback(\r\n        (entity: EntityBase) => {\r\n            const parentStack: TreeItemValue[] = [];\r\n            for (let treeItem = allTreeItems.get(GetEntityId(entity)); treeItem; treeItem = treeItem?.type === \"entity\" ? treeItem.parent : undefined) {\r\n                parentStack.push(treeItem.type === \"entity\" ? GetEntityId(treeItem.entity) : treeItem.sectionName);\r\n            }\r\n            // The first item will be the entity itself, so just remove it.\r\n            parentStack.shift();\r\n            return parentStack;\r\n        },\r\n        [allTreeItems]\r\n    );\r\n\r\n    const selectEntity = useCallback(\r\n        (selectedEntity: unknown) => {\r\n            const entity = selectedEntity as Nullable<EntityBase>;\r\n            if (entity && entity.uniqueId != undefined) {\r\n                const parentStack = getParentStack(entity);\r\n                if (parentStack.length > 0) {\r\n                    const newOpenItems = new Set<TreeItemValue>(openItems);\r\n                    for (const parent of parentStack) {\r\n                        newOpenItems.add(parent);\r\n                    }\r\n                    setOpenItems(newOpenItems);\r\n                    setIsScrollToPending(true);\r\n                }\r\n            }\r\n\r\n            previousSelectedEntity.current = selectedEntity;\r\n        },\r\n        [getParentStack, openItems]\r\n    );\r\n\r\n    const [isScrollToPending, setIsScrollToPending] = useState(false);\r\n\r\n    useEffect(() => {\r\n        if (selectedEntity && selectedEntity !== previousSelectedEntity.current) {\r\n            selectEntity(selectedEntity);\r\n        }\r\n    }, [selectedEntity, selectEntity]);\r\n\r\n    useEffect(() => {\r\n        // When the component first mounts, select the currently selected entity to ensure it is visible.\r\n        selectEntity(selectedEntity);\r\n    }, []);\r\n\r\n    // We need to wait for a render to complete before we can scroll to the item, hence the isScrollToPending.\r\n    useEffect(() => {\r\n        if (isScrollToPending) {\r\n            const selectedItemIndex = visibleItems.findIndex((item) => item.type === \"entity\" && item.entity === selectedEntity);\r\n            if (selectedItemIndex >= 0 && scrollViewRef.current) {\r\n                scrollViewRef.current.scrollTo(selectedItemIndex, \"smooth\");\r\n                setIsScrollToPending(false);\r\n            }\r\n        }\r\n    }, [isScrollToPending, selectedEntity, visibleItems]);\r\n\r\n    const onOpenChange = useCallback(\r\n        (event: TreeOpenChangeEvent, data: TreeOpenChangeData) => {\r\n            // This makes it so we only consider a click on the chevron to be expanding/collapsing an item, not clicking anywhere on the item.\r\n            if (data.type !== \"Click\" && data.type !== \"Enter\") {\r\n                // Shift or Ctrl mean expand/collapse all descendants.\r\n                if (event.shiftKey || event.ctrlKey) {\r\n                    const treeItem = allTreeItems.get(data.value);\r\n                    if (treeItem) {\r\n                        ExpandOrCollapseAll(treeItem, data.open, data.openItems);\r\n                    }\r\n                }\r\n                setOpenItems(data.openItems);\r\n            }\r\n        },\r\n        [setOpenItems, allTreeItems]\r\n    );\r\n\r\n    const expandAll = (treeItem: SectionTreeItemData | EntityTreeItemData) => {\r\n        ExpandOrCollapseAll(treeItem, true, openItems);\r\n        setOpenItems(new Set(openItems));\r\n    };\r\n\r\n    const collapseAll = (treeItem: SectionTreeItemData | EntityTreeItemData) => {\r\n        ExpandOrCollapseAll(treeItem, false, openItems);\r\n        setOpenItems(new Set(openItems));\r\n    };\r\n\r\n    return (\r\n        <div className={classes.rootDiv}>\r\n            <div className={classes.toolbarDiv}>\r\n                <SearchBox\r\n                    className={classes.searchBox}\r\n                    appearance=\"underline\"\r\n                    contentBefore={<FilterRegular />}\r\n                    placeholder=\"Filter\"\r\n                    value={itemsFilter}\r\n                    onChange={(_, data) => setItemsFilter(data.value)}\r\n                />\r\n                <ToggleButton\r\n                    title=\"Sort Entities Alphabetically\"\r\n                    appearance=\"transparent\"\r\n                    checkedIcon={TextSortAscendingRegular}\r\n                    value={isSorted}\r\n                    onChange={() => setIsSorted((isSorted) => !isSorted)}\r\n                />\r\n            </div>\r\n            <FlatTree className={classes.tree} openItems={openItems} onOpenChange={onOpenChange} aria-label=\"Scene Explorer Tree\">\r\n                <VirtualizerScrollView imperativeRef={scrollViewRef} numItems={visibleItems.length} itemSize={32} container={{ className: classes.scrollView }}>\r\n                    {(index: number) => {\r\n                        const item = visibleItems[index];\r\n\r\n                        if (item.type === \"scene\") {\r\n                            return (\r\n                                <SceneTreeItem\r\n                                    key=\"scene\"\r\n                                    scene={scene}\r\n                                    isSelected={selectedEntity === scene}\r\n                                    select={() => setSelectedEntity?.(scene)}\r\n                                    isFiltering={!!itemsFilter}\r\n                                />\r\n                            );\r\n                        } else if (item.type === \"section\") {\r\n                            return (\r\n                                <SectionTreeItem\r\n                                    key={item.sectionName}\r\n                                    scene={scene}\r\n                                    section={item}\r\n                                    isFiltering={!!itemsFilter}\r\n                                    commandProviders={sectionCommandProviders}\r\n                                    expandAll={() => expandAll(item)}\r\n                                    collapseAll={() => collapseAll(item)}\r\n                                />\r\n                            );\r\n                        } else {\r\n                            return (\r\n                                <EntityTreeItem\r\n                                    key={item.entity.uniqueId}\r\n                                    scene={scene}\r\n                                    entityItem={item}\r\n                                    isSelected={selectedEntity === item.entity}\r\n                                    select={() => setSelectedEntity?.(item.entity)}\r\n                                    isFiltering={!!itemsFilter}\r\n                                    commandProviders={entityCommandProviders as SceneExplorerCommandProvider<EntityBase>[]}\r\n                                    expandAll={() => expandAll(item)}\r\n                                    collapseAll={() => collapseAll(item)}\r\n                                />\r\n                            );\r\n                        }\r\n                    }}\r\n                </VirtualizerScrollView>\r\n            </FlatTree>\r\n        </div>\r\n    );\r\n};\r\n","import type { IReadonlyObservable, Nullable, Scene } from \"core/index\";\r\n\r\nimport type { IService } from \"../modularity/serviceDefinition\";\r\n\r\nexport const SceneContextIdentity = Symbol(\"SceneScontext\");\r\n\r\n/**\r\n * SceneContext provides the current scene, but could have different implementations depending on the context (e.g. inspector, sandbox, etc.)\r\n */\r\nexport interface ISceneContext extends IService<typeof SceneContextIdentity> {\r\n    /**\r\n     * Gets the current scene.\r\n     */\r\n    readonly currentScene: Nullable<Scene>;\r\n\r\n    /**\r\n     * Observable that fires whenever the current scene changes.\r\n     */\r\n    readonly currentSceneObservable: IReadonlyObservable<Nullable<Scene>>;\r\n}\r\n","import type { IDisposable } from \"core/index\";\r\n\r\nimport type { SceneExplorerCommandProvider, SceneExplorerSection } from \"../../../components/scene/sceneExplorer\";\r\nimport type { IService, ServiceDefinition } from \"../../../modularity/serviceDefinition\";\r\nimport type { ISceneContext } from \"../../sceneContext\";\r\nimport type { ISelectionService } from \"../../selectionService\";\r\nimport type { IShellService } from \"../../shellService\";\r\n\r\nimport { CubeTreeRegular } from \"@fluentui/react-icons\";\r\n\r\nimport { SceneExplorer } from \"../../../components/scene/sceneExplorer\";\r\nimport { useObservableState, useOrderedObservableCollection } from \"../../../hooks/observableHooks\";\r\nimport { ObservableCollection } from \"../../../misc/observableCollection\";\r\nimport { SceneContextIdentity } from \"../../sceneContext\";\r\nimport { SelectionServiceIdentity } from \"../../selectionService\";\r\nimport { ShellServiceIdentity } from \"../../shellService\";\r\n\r\nexport const SceneExplorerServiceIdentity = Symbol(\"SceneExplorer\");\r\n\r\n/**\r\n * Allows new sections or commands to be added to the scene explorer pane.\r\n */\r\nexport interface ISceneExplorerService extends IService<typeof SceneExplorerServiceIdentity> {\r\n    /**\r\n     * Adds a new section (e.g. \"Nodes\", \"Materials\", etc.) (this includes all descendants within the scene graph).\r\n     * @param section A description of the section to add.\r\n     */\r\n    addSection<T>(section: SceneExplorerSection<T>): IDisposable;\r\n\r\n    /**\r\n     * Adds a new command (e.g. \"Delete\", \"Rename\", etc.) that can be executed on entities in the scene explorer.\r\n     * @param command A description of the command to add.\r\n     */\r\n    addEntityCommand<T>(command: SceneExplorerCommandProvider<T>): IDisposable;\r\n\r\n    /**\r\n     * Adds a new command that can be executed on sections in the scene explorer.\r\n     * @param command A description of the command to add.\r\n     */\r\n    addSectionCommand<T extends string>(command: SceneExplorerCommandProvider<T, \"contextMenu\">): IDisposable;\r\n}\r\n\r\n/**\r\n * Provides a scene explorer pane that enables browsing the scene graph and executing commands on entities.\r\n */\r\nexport const SceneExplorerServiceDefinition: ServiceDefinition<[ISceneExplorerService], [ISceneContext, IShellService, ISelectionService]> = {\r\n    friendlyName: \"Scene Explorer\",\r\n    produces: [SceneExplorerServiceIdentity],\r\n    consumes: [SceneContextIdentity, ShellServiceIdentity, SelectionServiceIdentity],\r\n    factory: (sceneContext, shellService, selectionService) => {\r\n        const sectionsCollection = new ObservableCollection<SceneExplorerSection<unknown>>();\r\n        const entityCommandsCollection = new ObservableCollection<SceneExplorerCommandProvider<unknown>>();\r\n        const sectionCommandsCollection = new ObservableCollection<SceneExplorerCommandProvider<string, \"contextMenu\">>();\r\n\r\n        const registration = shellService.addSidePane({\r\n            key: \"Scene Explorer\",\r\n            title: \"Scene Explorer\",\r\n            icon: CubeTreeRegular,\r\n            horizontalLocation: \"left\",\r\n            verticalLocation: \"top\",\r\n            suppressTeachingMoment: true,\r\n            content: () => {\r\n                const sections = useOrderedObservableCollection(sectionsCollection);\r\n                const entityCommands = useOrderedObservableCollection(entityCommandsCollection);\r\n                const sectionCommands = useOrderedObservableCollection(sectionCommandsCollection);\r\n                const scene = useObservableState(() => sceneContext.currentScene, sceneContext.currentSceneObservable);\r\n                const entity = useObservableState(() => selectionService.selectedEntity, selectionService.onSelectedEntityChanged);\r\n\r\n                return (\r\n                    <>\r\n                        {scene && (\r\n                            <SceneExplorer\r\n                                sections={sections}\r\n                                entityCommandProviders={entityCommands}\r\n                                sectionCommandProviders={sectionCommands}\r\n                                scene={scene}\r\n                                selectedEntity={entity}\r\n                                setSelectedEntity={(entity) => (selectionService.selectedEntity = entity)}\r\n                            />\r\n                        )}\r\n                    </>\r\n                );\r\n            },\r\n        });\r\n\r\n        return {\r\n            addSection: (section) => sectionsCollection.add(section as SceneExplorerSection<unknown>),\r\n            addEntityCommand: (command) => entityCommandsCollection.add(command as SceneExplorerCommandProvider<unknown>),\r\n            addSectionCommand: (command) => sectionCommandsCollection.add(command as unknown as SceneExplorerCommandProvider<string, \"contextMenu\">),\r\n            dispose: () => registration.dispose(),\r\n        };\r\n    },\r\n};\r\n","import type { SwitchOnChangeData } from \"@fluentui/react-components\";\r\nimport type { ChangeEvent, FunctionComponent } from \"react\";\r\nimport type { PrimitiveProps } from \"./primitive\";\r\n\r\nimport { makeStyles, Switch as FluentSwitch, mergeClasses } from \"@fluentui/react-components\";\r\nimport { useContext, useEffect, useState } from \"react\";\r\nimport { ToolContext } from \"../hoc/fluentToolWrapper\";\r\n\r\nconst useSwitchStyles = makeStyles({\r\n    switch: {\r\n        marginLeft: \"auto\",\r\n    },\r\n    switchSmall: {\r\n        transform: `scale(.85)`, // workaround since we cannot resize fluent switch\r\n        transformOrigin: \"right\",\r\n    },\r\n    indicator: {\r\n        margin: 0, // Remove the default right margin so the switch aligns well on the right side inside panels like the properties pane.\r\n    },\r\n});\r\n\r\nexport type SwitchProps = PrimitiveProps<boolean>;\r\n\r\n/**\r\n * This is a primitive fluent boolean switch component whose only knowledge is the shared styling across all tools\r\n * @param props\r\n * @returns Switch component\r\n */\r\nexport const Switch: FunctionComponent<SwitchProps> = (props) => {\r\n    Switch.displayName = \"Switch\";\r\n    const { size } = useContext(ToolContext);\r\n    const classes = useSwitchStyles();\r\n    const [checked, setChecked] = useState(() => props.value ?? false);\r\n\r\n    useEffect(() => {\r\n        if (props.value != undefined) {\r\n            setChecked(props.value); // Update local state when props.checked changes\r\n        }\r\n    }, [props.value]);\r\n\r\n    const onChange = (event: ChangeEvent<HTMLInputElement>, _: SwitchOnChangeData) => {\r\n        props.onChange && props.onChange(event.target.checked);\r\n        setChecked(event.target.checked);\r\n    };\r\n\r\n    return (\r\n        <FluentSwitch\r\n            className={mergeClasses(classes.switch, size === \"small\" && classes.switchSmall)}\r\n            indicator={{ className: classes.indicator }}\r\n            checked={checked}\r\n            disabled={props.disabled}\r\n            onChange={onChange}\r\n        />\r\n    );\r\n};\r\n","import { PropertyLine } from \"./propertyLine\";\r\nimport type { PropertyLineProps } from \"./propertyLine\";\r\nimport type { FunctionComponent } from \"react\";\r\nimport { Switch } from \"../../primitives/switch\";\r\nimport type { SwitchProps } from \"../../primitives/switch\";\r\n\r\n/**\r\n * Wraps a switch in a property line\r\n * @param props - The properties for the switch and property line\r\n * @returns A React element representing the property line with a switch\r\n */\r\nexport const SwitchPropertyLine: FunctionComponent<PropertyLineProps<boolean> & SwitchProps> = (props) => {\r\n    SwitchPropertyLine.displayName = \"SwitchPropertyLine\";\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    const { label, ...switchProps } = props;\r\n    // Ensure the label gets passed to the PropertyLine component and not to the underlying switch\r\n    return (\r\n        <PropertyLine {...props}>\r\n            <Switch {...switchProps} />\r\n        </PropertyLine>\r\n    );\r\n};\r\n","import type { AbstractMesh, Mesh, Scene } from \"core/index\";\r\n\r\nimport { FontAsset } from \"addons/msdfText/fontAsset\";\r\nimport { TextRenderer } from \"addons/msdfText/textRenderer\";\r\nimport { PhysicsViewer } from \"core/Debug/physicsViewer\";\r\nimport { Texture } from \"core/Materials/Textures/texture\";\r\nimport { MaterialFlags } from \"core/Materials/materialFlags\";\r\nimport { StandardMaterial } from \"core/Materials/standardMaterial\";\r\nimport { Color3 } from \"core/Maths/math.color\";\r\nimport { Matrix } from \"core/Maths/math.vector\";\r\nimport { CreateGround } from \"core/Meshes/Builders/groundBuilder\";\r\nimport { Tools } from \"core/Misc/tools\";\r\nimport { UtilityLayerRenderer } from \"core/Rendering/utilityLayerRenderer\";\r\nimport { GridMaterial } from \"materials/grid/gridMaterial\";\r\nimport { SwitchPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/switchPropertyLine\";\r\nimport { AccordionSection } from \"shared-ui-components/fluent/primitives/accordion\";\r\nimport { ExtensibleAccordion } from \"../extensibleAccordion\";\r\nimport { BoundProperty } from \"../properties/boundProperty\";\r\n\r\nexport const HelpersDebugSectionIdentity = Symbol(\"Helpers\");\r\nexport const TextureChannelsDebugSectionIdentity = Symbol(\"Texture Channels\");\r\nexport const FeaturesDebugSectionIdentity = Symbol(\"Features\");\r\n\r\nconst SwitchGrid = function (renderScene: Scene) {\r\n    const scene = UtilityLayerRenderer.DefaultKeepDepthUtilityLayer.utilityLayerScene;\r\n\r\n    if (!renderScene.reservedDataStore.gridMesh) {\r\n        const extend = renderScene.getWorldExtends();\r\n        const width = (extend.max.x - extend.min.x) * 5.0;\r\n        const depth = (extend.max.z - extend.min.z) * 5.0;\r\n\r\n        renderScene.reservedDataStore.gridMesh = CreateGround(\"grid\", { width: 1.0, height: 1.0, subdivisions: 1 }, scene);\r\n        const gridMesh = renderScene.reservedDataStore.gridMesh as AbstractMesh;\r\n        if (!gridMesh.reservedDataStore) {\r\n            gridMesh.reservedDataStore = {};\r\n        }\r\n        gridMesh.scaling.x = Math.max(width, depth);\r\n        gridMesh.scaling.z = gridMesh.scaling.x;\r\n        gridMesh.reservedDataStore.isInspectorGrid = true;\r\n        gridMesh.isPickable = false;\r\n\r\n        const groundMaterial = new GridMaterial(\"GridMaterial\", scene);\r\n        groundMaterial.majorUnitFrequency = 10;\r\n        groundMaterial.minorUnitVisibility = 0.3;\r\n        groundMaterial.gridRatio = 0.01;\r\n        groundMaterial.backFaceCulling = false;\r\n        groundMaterial.mainColor = new Color3(1, 1, 1);\r\n        groundMaterial.lineColor = new Color3(1.0, 1.0, 1.0);\r\n        groundMaterial.opacity = 0.8;\r\n        groundMaterial.zOffset = 1.0;\r\n        const textureUrl = Tools.GetAssetUrl(\"https://assets.babylonjs.com/core/environments/backgroundGround.png\");\r\n        groundMaterial.opacityTexture = new Texture(textureUrl, scene);\r\n\r\n        gridMesh.material = groundMaterial;\r\n        return;\r\n    }\r\n    const gridMesh = renderScene.reservedDataStore.gridMesh as AbstractMesh;\r\n    gridMesh.dispose(true, true);\r\n    renderScene.reservedDataStore.gridMesh = null;\r\n};\r\n\r\nconst SwitchPhysicsViewers = function (scene: Scene) {\r\n    if (!scene.reservedDataStore.physicsViewer) {\r\n        const physicsViewer = new PhysicsViewer(scene);\r\n        scene.reservedDataStore.physicsViewer = physicsViewer;\r\n\r\n        for (const mesh of scene.meshes) {\r\n            if (mesh.physicsImpostor) {\r\n                const debugMesh = physicsViewer.showImpostor(mesh.physicsImpostor, mesh as Mesh);\r\n\r\n                if (debugMesh) {\r\n                    debugMesh.reservedDataStore = { hidden: true };\r\n                    debugMesh.material!.reservedDataStore = { hidden: true };\r\n                }\r\n            } else if (mesh.physicsBody) {\r\n                const debugMesh = physicsViewer.showBody(mesh.physicsBody);\r\n\r\n                if (debugMesh) {\r\n                    debugMesh.reservedDataStore = { hidden: true };\r\n                    debugMesh.material!.reservedDataStore = { hidden: true };\r\n                }\r\n            }\r\n        }\r\n\r\n        for (const transformNode of scene.transformNodes) {\r\n            if (transformNode.physicsBody) {\r\n                const debugMesh = physicsViewer.showBody(transformNode.physicsBody);\r\n\r\n                if (debugMesh) {\r\n                    debugMesh.reservedDataStore = { hidden: true };\r\n                    debugMesh.material!.reservedDataStore = { hidden: true };\r\n                }\r\n            }\r\n        }\r\n    } else {\r\n        scene.reservedDataStore.physicsViewer.dispose();\r\n        scene.reservedDataStore.physicsViewer = null;\r\n    }\r\n};\r\n\r\nconst SwitchNameViewerAsync = async function (scene: Scene) {\r\n    if (!scene.reservedDataStore.textRenderersHook) {\r\n        scene.reservedDataStore.textRenderers = [];\r\n        if (!scene.reservedDataStore.fontAsset) {\r\n            const sdfFontDefinition = await (await fetch(\"https://assets.babylonjs.com/fonts/roboto-regular.json\")).text();\r\n            // eslint-disable-next-line require-atomic-updates\r\n            scene.reservedDataStore.fontAsset = new FontAsset(sdfFontDefinition, \"https://assets.babylonjs.com/fonts/roboto-regular.png\");\r\n        }\r\n\r\n        const textRendererPromises = scene.meshes.map(async (mesh) => {\r\n            const textRenderer = await TextRenderer.CreateTextRendererAsync(scene.reservedDataStore.fontAsset!, scene.getEngine());\r\n\r\n            textRenderer.addParagraph(mesh.name);\r\n            textRenderer.isBillboard = true;\r\n            textRenderer.isBillboardScreenProjected = true;\r\n            textRenderer.parent = mesh;\r\n            textRenderer.ignoreDepthBuffer = true;\r\n            textRenderer.transformMatrix = Matrix.Scaling(0.02, 0.02, 0.02);\r\n\r\n            scene.reservedDataStore.textRenderers.push(textRenderer);\r\n        });\r\n\r\n        await Promise.all(textRendererPromises);\r\n\r\n        scene.reservedDataStore.textRenderersHook = scene.onAfterRenderObservable.add(() => {\r\n            for (const textRenderer of scene.reservedDataStore.textRenderers) {\r\n                if (!textRenderer.parent.isVisible || !textRenderer.parent.isEnabled()) {\r\n                    continue;\r\n                }\r\n                textRenderer.render(scene.getViewMatrix(), scene.getProjectionMatrix());\r\n            }\r\n        });\r\n    } else {\r\n        scene.onAfterRenderObservable.remove(scene.reservedDataStore.textRenderersHook);\r\n        for (const textRenderer of scene.reservedDataStore.textRenderers) {\r\n            textRenderer.dispose();\r\n        }\r\n        scene.reservedDataStore.textRenderersHook = null;\r\n        scene.reservedDataStore.textRenderers = null;\r\n    }\r\n};\r\n\r\nexport const DebugPane: typeof ExtensibleAccordion<Scene> = (props) => {\r\n    const scene = props.context;\r\n\r\n    if (!scene.reservedDataStore) {\r\n        scene.reservedDataStore = {};\r\n    }\r\n\r\n    // Making sure we clean up when the scene is disposed\r\n    scene.onDisposeObservable.addOnce(() => {\r\n        if (scene.reservedDataStore.physicsViewer) {\r\n            SwitchPhysicsViewers(scene);\r\n        }\r\n\r\n        if (scene.reservedDataStore.textRenderersHook) {\r\n            void SwitchNameViewerAsync(scene);\r\n            scene.reservedDataStore.fontAsset?.dispose();\r\n        }\r\n\r\n        if (scene.reservedDataStore.gridMesh) {\r\n            SwitchGrid(scene);\r\n        }\r\n    });\r\n\r\n    return (\r\n        <ExtensibleAccordion {...props}>\r\n            <AccordionSection title=\"Helpers\">\r\n                <SwitchPropertyLine label=\"Grid\" description=\"Display a ground grid.\" value={!!scene.reservedDataStore.gridMesh} onChange={() => SwitchGrid(scene)} />\r\n                <SwitchPropertyLine\r\n                    label=\"Physics\"\r\n                    description=\"Display physic debug info.\"\r\n                    value={!!scene.reservedDataStore.physicsViewer}\r\n                    onChange={() => SwitchPhysicsViewers(scene)}\r\n                />\r\n                <SwitchPropertyLine\r\n                    label=\"Names\"\r\n                    description=\"Display mesh names.\"\r\n                    value={!!scene.reservedDataStore.textRenderersHook}\r\n                    onChange={() => void SwitchNameViewerAsync(scene)}\r\n                />\r\n            </AccordionSection>\r\n            <AccordionSection title=\"Texture Channels\">\r\n                <BoundProperty component={SwitchPropertyLine} key=\"Diffuse\" label=\"Diffuse\" target={StandardMaterial} propertyKey=\"DiffuseTextureEnabled\" />\r\n                <BoundProperty component={SwitchPropertyLine} key=\"Ambient\" label=\"Ambient\" target={StandardMaterial} propertyKey=\"AmbientTextureEnabled\" />\r\n                <BoundProperty component={SwitchPropertyLine} key=\"Specular\" label=\"Specular\" target={StandardMaterial} propertyKey=\"SpecularTextureEnabled\" />\r\n                <BoundProperty component={SwitchPropertyLine} key=\"Emissive\" label=\"Emissive\" target={StandardMaterial} propertyKey=\"EmissiveTextureEnabled\" />\r\n                <BoundProperty component={SwitchPropertyLine} key=\"Bump\" label=\"Bump\" target={StandardMaterial} propertyKey=\"BumpTextureEnabled\" />\r\n                <BoundProperty component={SwitchPropertyLine} key=\"Opacity\" label=\"Opacity\" target={StandardMaterial} propertyKey=\"OpacityTextureEnabled\" />\r\n                <BoundProperty component={SwitchPropertyLine} key=\"Reflection\" label=\"Reflection\" target={StandardMaterial} propertyKey=\"ReflectionTextureEnabled\" />\r\n                <BoundProperty component={SwitchPropertyLine} key=\"Refraction\" label=\"Refraction\" target={StandardMaterial} propertyKey=\"RefractionTextureEnabled\" />\r\n                <BoundProperty component={SwitchPropertyLine} key=\"ColorGrading\" label=\"Color Grading\" target={StandardMaterial} propertyKey=\"ColorGradingTextureEnabled\" />\r\n                <BoundProperty component={SwitchPropertyLine} key=\"Lightmap\" label=\"Lightmap\" target={StandardMaterial} propertyKey=\"LightmapTextureEnabled\" />\r\n                <BoundProperty component={SwitchPropertyLine} key=\"Fresnel\" label=\"Fresnel\" target={StandardMaterial} propertyKey=\"FresnelEnabled\" />\r\n                <BoundProperty component={SwitchPropertyLine} key=\"Detail\" label=\"Detail\" target={MaterialFlags} propertyKey=\"DetailTextureEnabled\" />\r\n                <BoundProperty component={SwitchPropertyLine} key=\"Decal\" label=\"Decal\" target={MaterialFlags} propertyKey=\"DecalMapEnabled\" />\r\n            </AccordionSection>\r\n            <AccordionSection title=\"Features\">\r\n                <BoundProperty component={SwitchPropertyLine} key=\"Animations\" label=\"Animations\" target={scene} propertyKey=\"animationsEnabled\" />\r\n                <BoundProperty component={SwitchPropertyLine} key=\"Physics\" label=\"Physics\" target={scene} propertyKey=\"physicsEnabled\" />\r\n                <BoundProperty component={SwitchPropertyLine} key=\"Collisions\" label=\"Collisions\" target={scene} propertyKey=\"collisionsEnabled\" />\r\n                <BoundProperty component={SwitchPropertyLine} key=\"Fog\" label=\"Fog\" target={scene} propertyKey=\"fogEnabled\" />\r\n                <BoundProperty component={SwitchPropertyLine} key=\"Lens flares\" label=\"Lens Flares\" target={scene} propertyKey=\"lensFlaresEnabled\" />\r\n                <BoundProperty component={SwitchPropertyLine} key=\"Lights\" label=\"Lights\" target={scene} propertyKey=\"lightsEnabled\" />\r\n                <BoundProperty component={SwitchPropertyLine} key=\"Particles\" label=\"Particles\" target={scene} propertyKey=\"particlesEnabled\" />\r\n                <BoundProperty component={SwitchPropertyLine} key=\"Post-processes\" label=\"Post-processes\" target={scene} propertyKey=\"postProcessesEnabled\" />\r\n                <BoundProperty component={SwitchPropertyLine} key=\"Probes\" label=\"Probes\" target={scene} propertyKey=\"probesEnabled\" />\r\n                <BoundProperty component={SwitchPropertyLine} key=\"Textures\" label=\"Textures\" target={scene} propertyKey=\"texturesEnabled\" />\r\n                <BoundProperty component={SwitchPropertyLine} key=\"Procedural textures\" label=\"Procedural Textures\" target={scene} propertyKey=\"proceduralTexturesEnabled\" />\r\n                <BoundProperty component={SwitchPropertyLine} key=\"Render targets\" label=\"Render Targets\" target={scene} propertyKey=\"renderTargetsEnabled\" />\r\n                <BoundProperty component={SwitchPropertyLine} key=\"Shadows\" label=\"Shadows\" target={scene} propertyKey=\"shadowsEnabled\" />\r\n                <BoundProperty component={SwitchPropertyLine} key=\"Skeletons\" label=\"Skeletons\" target={scene} propertyKey=\"skeletonsEnabled\" />\r\n                <BoundProperty component={SwitchPropertyLine} key=\"Sprites\" label=\"Sprites\" target={scene} propertyKey=\"spritesEnabled\" />\r\n            </AccordionSection>\r\n        </ExtensibleAccordion>\r\n    );\r\n};\r\n","import type { IDisposable, Scene } from \"core/index\";\r\n\r\nimport type { DynamicAccordionSection, DynamicAccordionSectionContent } from \"../../components/extensibleAccordion\";\r\nimport type { IService, ServiceDefinition } from \"../../modularity/serviceDefinition\";\r\nimport type { ISceneContext } from \"../sceneContext\";\r\nimport type { IShellService } from \"../shellService\";\r\n\r\nimport { BugRegular } from \"@fluentui/react-icons\";\r\n\r\nimport { DebugPane } from \"../../components/debug/debugPane\";\r\nimport { useObservableCollection, useObservableState, useOrderedObservableCollection } from \"../../hooks/observableHooks\";\r\nimport { ObservableCollection } from \"../../misc/observableCollection\";\r\nimport { SceneContextIdentity } from \"../sceneContext\";\r\nimport { ShellServiceIdentity } from \"../shellService\";\r\n\r\nexport const DebugServiceIdentity = Symbol(\"DebugService\");\r\n\r\n/**\r\n * Allows new sections or content to be added to the debug pane.\r\n */\r\nexport interface IDebugService extends IService<typeof DebugServiceIdentity> {\r\n    /**\r\n     * Adds a new section.\r\n     * @param section A description of the section to add.\r\n     */\r\n    addSection(section: DynamicAccordionSection): IDisposable;\r\n\r\n    /**\r\n     * Adds content to one or more sections.\r\n     * @param content A description of the content to add.\r\n     */\r\n    addSectionContent(content: DynamicAccordionSectionContent<Scene>): IDisposable;\r\n}\r\n\r\nexport const DebugServiceDefinition: ServiceDefinition<[IDebugService], [IShellService, ISceneContext]> = {\r\n    friendlyName: \"Debug\",\r\n    produces: [DebugServiceIdentity],\r\n    consumes: [ShellServiceIdentity, SceneContextIdentity],\r\n    factory: (shellService, sceneContext) => {\r\n        const sectionsCollection = new ObservableCollection<DynamicAccordionSection>();\r\n        const sectionContentCollection = new ObservableCollection<DynamicAccordionSectionContent<Scene>>();\r\n\r\n        const registration = shellService.addSidePane({\r\n            key: \"Debug\",\r\n            title: \"Debug\",\r\n            icon: BugRegular,\r\n            horizontalLocation: \"right\",\r\n            verticalLocation: \"top\",\r\n            order: 200,\r\n            suppressTeachingMoment: true,\r\n            content: () => {\r\n                const sections = useOrderedObservableCollection(sectionsCollection);\r\n                const sectionContent = useObservableCollection(sectionContentCollection);\r\n                const scene = useObservableState(() => sceneContext.currentScene, sceneContext.currentSceneObservable);\r\n                return <>{scene && <DebugPane sections={sections} sectionContent={sectionContent} context={scene} />}</>;\r\n            },\r\n        });\r\n\r\n        return {\r\n            addSection: (section) => sectionsCollection.add(section),\r\n            addSectionContent: (content) => sectionContentCollection.add(content),\r\n            dispose: () => registration.dispose(),\r\n        };\r\n    },\r\n};\r\n","import { LineContainer } from \"./propertyLines/propertyLine\";\r\nimport type { FunctionComponent } from \"react\";\r\nimport { Button } from \"../primitives/button\";\r\nimport type { ButtonProps } from \"../primitives/button\";\r\n\r\ntype ButtonLineProps = Omit<ButtonProps, \"label\"> & { label: string }; // Require a label when button is the entire line (by default, label is optional on a button)\r\n\r\n/**\r\n * Wraps a button with a label in a line container\r\n * @param props Button props plus a label\r\n * @returns A button inside a line\r\n */\r\nexport const ButtonLine: FunctionComponent<ButtonLineProps> = (props) => {\r\n    ButtonLine.displayName = \"ButtonLine\";\r\n\r\n    return (\r\n        <LineContainer>\r\n            <Button {...props} />\r\n        </LineContainer>\r\n    );\r\n};\r\n","import type { IDisposable, Scene } from \"core/index\";\r\nimport type { DynamicAccordionSection, DynamicAccordionSectionContent } from \"../../components/extensibleAccordion\";\r\nimport type { IService, ServiceDefinition } from \"../../modularity/serviceDefinition\";\r\nimport type { ISceneContext } from \"../sceneContext\";\r\nimport type { ISettingsContext } from \"../settingsContext\";\r\nimport type { IShellService } from \"../shellService\";\r\n\r\nimport { SettingsRegular } from \"@fluentui/react-icons\";\r\n\r\nimport { DataStorage } from \"core/Misc/dataStorage\";\r\nimport { Observable } from \"core/Misc/observable\";\r\nimport { ButtonLine } from \"shared-ui-components/fluent/hoc/buttonLine\";\r\nimport { SwitchPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/switchPropertyLine\";\r\nimport { AccordionSection } from \"shared-ui-components/fluent/primitives/accordion\";\r\nimport { ExtensibleAccordion } from \"../../components/extensibleAccordion\";\r\nimport { useObservableCollection, useObservableState, useOrderedObservableCollection } from \"../../hooks/observableHooks\";\r\nimport { useCompactMode, useSidePaneDockOverrides, useDisableCopy } from \"../../hooks/settingsHooks\";\r\nimport { ObservableCollection } from \"../../misc/observableCollection\";\r\nimport { SceneContextIdentity } from \"../sceneContext\";\r\nimport { SettingsContextIdentity } from \"../settingsContext\";\r\nimport { ShellServiceIdentity } from \"../shellService\";\r\n\r\nexport const SettingsServiceIdentity = Symbol(\"SettingsService\");\r\n\r\n/**\r\n * Allows new sections or content to be added to the Settings pane.\r\n */\r\nexport interface ISettingsService extends IService<typeof SettingsServiceIdentity> {\r\n    /**\r\n     * Adds a new section.\r\n     * @param section A description of the section to add.\r\n     */\r\n    addSection(section: DynamicAccordionSection): IDisposable;\r\n\r\n    /**\r\n     * Adds content to one or more sections.\r\n     * @param content A description of the content to add.\r\n     */\r\n    addSectionContent(content: DynamicAccordionSectionContent<Scene>): IDisposable;\r\n}\r\n\r\nexport const SettingsServiceDefinition: ServiceDefinition<[ISettingsContext, ISettingsService], [IShellService, ISceneContext]> = {\r\n    friendlyName: \"Settings\",\r\n    consumes: [ShellServiceIdentity, SceneContextIdentity],\r\n    produces: [SettingsContextIdentity, SettingsServiceIdentity],\r\n    factory: (shellService, sceneContext) => {\r\n        const sectionsCollection = new ObservableCollection<DynamicAccordionSection>();\r\n        const sectionContentCollection = new ObservableCollection<DynamicAccordionSectionContent<Scene>>();\r\n\r\n        let useDegrees = DataStorage.ReadBoolean(\"Babylon/Settings/UseDegrees\", false);\r\n        let useEuler = DataStorage.ReadBoolean(\"Babylon/Settings/UseEuler\", false);\r\n        let ignoreBackfacesForPicking = DataStorage.ReadBoolean(\"Babylon/Settings/IgnoreBackfacesForPicking\", false);\r\n        let showPropertiesOnEntitySelection = DataStorage.ReadBoolean(\"Babylon/Settings/ShowPropertiesOnEntitySelection\", true);\r\n\r\n        const settings = {\r\n            get useDegrees() {\r\n                return useDegrees;\r\n            },\r\n            set useDegrees(value: boolean) {\r\n                if (useDegrees === value) {\r\n                    return; // No change, no need to notify\r\n                }\r\n                useDegrees = value;\r\n\r\n                DataStorage.WriteBoolean(\"Babylon/Settings/UseDegrees\", useDegrees);\r\n\r\n                this.settingsChangedObservable.notifyObservers(this);\r\n            },\r\n            get ignoreBackfacesForPicking() {\r\n                return ignoreBackfacesForPicking;\r\n            },\r\n            set ignoreBackfacesForPicking(value: boolean) {\r\n                if (ignoreBackfacesForPicking === value) {\r\n                    return; // No change, no need to notify\r\n                }\r\n                ignoreBackfacesForPicking = value;\r\n\r\n                DataStorage.WriteBoolean(\"Babylon/Settings/IgnoreBackfacesForPicking\", ignoreBackfacesForPicking);\r\n                this.settingsChangedObservable.notifyObservers(this);\r\n            },\r\n            get useEuler() {\r\n                return useEuler;\r\n            },\r\n            set useEuler(value: boolean) {\r\n                if (useEuler === value) {\r\n                    return; // No change, no need to notify\r\n                }\r\n                useEuler = value;\r\n\r\n                DataStorage.WriteBoolean(\"Babylon/Settings/UseEuler\", useEuler);\r\n                this.settingsChangedObservable.notifyObservers(this);\r\n            },\r\n            get showPropertiesOnEntitySelection() {\r\n                return showPropertiesOnEntitySelection;\r\n            },\r\n            set showPropertiesOnEntitySelection(value: boolean) {\r\n                if (showPropertiesOnEntitySelection === value) {\r\n                    return; // No change, no need to notify\r\n                }\r\n                showPropertiesOnEntitySelection = value;\r\n\r\n                DataStorage.WriteBoolean(\"Babylon/Settings/ShowPropertiesOnEntitySelection\", showPropertiesOnEntitySelection);\r\n                this.settingsChangedObservable.notifyObservers(this);\r\n            },\r\n            settingsChangedObservable: new Observable<ISettingsContext>(),\r\n            addSection: (section: DynamicAccordionSection) => sectionsCollection.add(section),\r\n            addSectionContent: (content: DynamicAccordionSectionContent<Scene>) => sectionContentCollection.add(content),\r\n            dispose: () => {},\r\n        };\r\n\r\n        const registration = shellService.addSidePane({\r\n            key: \"Settings\",\r\n            title: \"Settings\",\r\n            icon: SettingsRegular,\r\n            horizontalLocation: \"right\",\r\n            verticalLocation: \"top\",\r\n            order: 500,\r\n            suppressTeachingMoment: true,\r\n            content: () => {\r\n                const sections = useOrderedObservableCollection(sectionsCollection);\r\n                const sectionContent = useObservableCollection(sectionContentCollection);\r\n                const scene = useObservableState(() => sceneContext.currentScene, sceneContext.currentSceneObservable);\r\n\r\n                const [compactMode, setCompactMode] = useCompactMode();\r\n                const [disableCopy, setDisableCopy] = useDisableCopy();\r\n                const [, , resetSidePaneLayout] = useSidePaneDockOverrides();\r\n\r\n                return (\r\n                    <>\r\n                        {scene && (\r\n                            <ExtensibleAccordion sections={sections} sectionContent={sectionContent} context={scene}>\r\n                                <AccordionSection title=\"UI\">\r\n                                    <SwitchPropertyLine\r\n                                        label=\"Compact Mode\"\r\n                                        description=\"Use a more compact UI with less spacing.\"\r\n                                        value={compactMode}\r\n                                        onChange={(checked) => {\r\n                                            setCompactMode(checked);\r\n                                        }}\r\n                                    />\r\n                                    <SwitchPropertyLine\r\n                                        label=\"Use Degrees\"\r\n                                        description=\"Using degrees instead of radians.\"\r\n                                        value={settings.useDegrees}\r\n                                        onChange={(checked) => {\r\n                                            settings.useDegrees = checked;\r\n                                        }}\r\n                                    />\r\n                                    <SwitchPropertyLine\r\n                                        label=\"Only Show Euler Angles\"\r\n                                        description=\"Only show Euler angles in rotation properties, rather than quaternions.\"\r\n                                        value={settings.useEuler}\r\n                                        onChange={(checked) => {\r\n                                            settings.useEuler = checked;\r\n                                        }}\r\n                                    />\r\n                                    <SwitchPropertyLine\r\n                                        label=\"Ignore Backfaces for Picking\"\r\n                                        description=\"Ignore backfaces when picking.\"\r\n                                        value={settings.ignoreBackfacesForPicking}\r\n                                        onChange={(checked) => {\r\n                                            settings.ignoreBackfacesForPicking = checked;\r\n                                        }}\r\n                                    />\r\n                                    <SwitchPropertyLine\r\n                                        label=\"Show Properties on Selection\"\r\n                                        description=\"Shows the Properties pane when an entity is selected.\"\r\n                                        value={settings.showPropertiesOnEntitySelection}\r\n                                        onChange={(checked) => {\r\n                                            settings.showPropertiesOnEntitySelection = checked;\r\n                                        }}\r\n                                    />\r\n                                    <SwitchPropertyLine\r\n                                        label=\"Disable Copy Button\"\r\n                                        description=\"Disables the copy to clipboard button on property lines. You can still Ctrl+Click on the label to copy.\"\r\n                                        value={disableCopy}\r\n                                        onChange={(checked) => {\r\n                                            setDisableCopy(checked);\r\n                                        }}\r\n                                    />\r\n                                    <ButtonLine label=\"Reset Layout\" onClick={resetSidePaneLayout} />\r\n                                </AccordionSection>\r\n                            </ExtensibleAccordion>\r\n                        )}\r\n                    </>\r\n                );\r\n            },\r\n        });\r\n\r\n        settings.dispose = () => registration.dispose();\r\n\r\n        return settings;\r\n    },\r\n};\r\n","import type { ImmutablePrimitiveProps } from \"../../primitives/primitive\";\r\nimport type { PropertyLineProps } from \"./propertyLine\";\r\nimport { PropertyLine } from \"./propertyLine\";\r\nimport type { FunctionComponent } from \"react\";\r\nimport { Body1 } from \"@fluentui/react-components\";\r\n\r\ntype StringifiedPropertyLineProps = PropertyLineProps<number> &\r\n    ImmutablePrimitiveProps<number> & {\r\n        precision?: number;\r\n        units?: string;\r\n    };\r\n\r\n/**\r\n * Expects a numerical value and converts it toFixed(if precision is supplied) or toLocaleString\r\n * Can pass optional units to be appending to the end of the string\r\n * @param props\r\n * @returns\r\n */\r\nexport const StringifiedPropertyLine: FunctionComponent<StringifiedPropertyLineProps> = (props) => {\r\n    StringifiedPropertyLine.displayName = \"StringifiedPropertyLine\";\r\n    const value = props.precision !== undefined ? props.value?.toFixed(props.precision) : props.value?.toLocaleString();\r\n    const withUnits = props.units ? `${value} ${props.units}` : value;\r\n    return (\r\n        <PropertyLine {...props}>\r\n            <Body1 title={props.title}>{withUnits ?? \"\"}</Body1>\r\n        </PropertyLine>\r\n    );\r\n};\r\n","import type { FunctionComponent } from \"react\";\r\n\r\nimport type { Scene } from \"core/index\";\r\n\r\nimport { useObservableState } from \"../../hooks/observableHooks\";\r\nimport { usePollingObservable } from \"../../hooks/pollingHooks\";\r\nimport { StringifiedPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/stringifiedPropertyLine\";\r\n\r\nexport const CountStats: FunctionComponent<{ context: Scene }> = ({ context: scene }) => {\r\n    const pollingObservable = usePollingObservable(1000);\r\n\r\n    const totalMeshes = useObservableState(() => scene.meshes.length, scene.onNewMeshAddedObservable, scene.onMeshRemovedObservable);\r\n    const activeMeshes = useObservableState(() => {\r\n        let activeMeshesCount = scene.getActiveMeshes().length;\r\n        for (const objectRenderer of scene.objectRenderers) {\r\n            activeMeshesCount += objectRenderer.getActiveMeshes().length;\r\n        }\r\n        return activeMeshesCount;\r\n    }, pollingObservable);\r\n    const activeIndices = useObservableState(() => scene.getActiveIndices(), pollingObservable);\r\n    const activeBones = useObservableState(() => scene.getActiveBones(), pollingObservable);\r\n    const activeParticles = useObservableState(() => scene.getActiveParticles(), pollingObservable);\r\n    const drawCalls = useObservableState(() => scene.getEngine()._drawCalls.current, pollingObservable);\r\n    const totalLights = useObservableState(() => scene.lights.length, pollingObservable);\r\n    const totalVertices = useObservableState(() => scene.getTotalVertices(), pollingObservable);\r\n    const totalMaterials = useObservableState(() => scene.materials.length, pollingObservable);\r\n    const totalTextures = useObservableState(() => scene.textures.length, pollingObservable);\r\n\r\n    return (\r\n        <>\r\n            <StringifiedPropertyLine key=\"TotalMeshes\" label=\"Total Meshes\" value={totalMeshes} />\r\n            <StringifiedPropertyLine key=\"ActiveMeshes\" label=\"Active Meshes\" value={activeMeshes} />\r\n            <StringifiedPropertyLine key=\"ActiveIndices\" label=\"Active Indices\" value={activeIndices} />\r\n            <StringifiedPropertyLine key=\"ActiveFaces\" label=\"Active Faces\" value={activeIndices / 3} />\r\n            <StringifiedPropertyLine key=\"ActiveBones\" label=\"Active Bones\" value={activeBones} />\r\n            <StringifiedPropertyLine key=\"ActiveParticles\" label=\"Active Particles\" value={activeParticles} />\r\n            <StringifiedPropertyLine key=\"DrawCalls\" label=\"Draw Calls\" value={drawCalls} />\r\n            <StringifiedPropertyLine key=\"TotalLights\" label=\"Total Lights\" value={totalLights} />\r\n            <StringifiedPropertyLine key=\"TotalVertices\" label=\"Total Vertices\" value={totalVertices} />\r\n            <StringifiedPropertyLine key=\"TotalMaterials\" label=\"Total Materials\" value={totalMaterials} />\r\n            <StringifiedPropertyLine key=\"TotalTextures\" label=\"Total Textures\" value={totalTextures} />\r\n        </>\r\n    );\r\n};\r\n","import type { Scene } from \"core/index\";\r\n\r\nimport type { FunctionComponent } from \"react\";\r\n\r\nimport { useCallback } from \"react\";\r\n\r\nimport { EngineInstrumentation } from \"core/Instrumentation/engineInstrumentation\";\r\nimport { SceneInstrumentation } from \"core/Instrumentation/sceneInstrumentation\";\r\n\r\nimport { useObservableState } from \"../../hooks/observableHooks\";\r\nimport { usePollingObservable } from \"../../hooks/pollingHooks\";\r\nimport { useResource } from \"../../hooks/resourceHooks\";\r\n\r\n// TODO: Dynamically import the right engine.query module based on the type of engine?\r\nimport \"core/Engines/AbstractEngine/abstractEngine.timeQuery\";\r\nimport \"core/Engines/Extensions/engine.query\";\r\nimport \"core/Engines/WebGPU/Extensions/engine.query\";\r\nimport { StringifiedPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/stringifiedPropertyLine\";\r\n\r\nexport const FrameStepsStats: FunctionComponent<{ context: Scene }> = ({ context: scene }) => {\r\n    const pollingObservable = usePollingObservable(1000);\r\n\r\n    const sceneInstrumentation = useResource(\r\n        useCallback(() => {\r\n            const sceneInstrumentation = new SceneInstrumentation(scene);\r\n            sceneInstrumentation.captureActiveMeshesEvaluationTime = true;\r\n            sceneInstrumentation.captureRenderTargetsRenderTime = true;\r\n            sceneInstrumentation.captureFrameTime = true;\r\n            sceneInstrumentation.captureRenderTime = true;\r\n            sceneInstrumentation.captureInterFrameTime = true;\r\n            sceneInstrumentation.captureParticlesRenderTime = true;\r\n            sceneInstrumentation.captureSpritesRenderTime = true;\r\n            sceneInstrumentation.capturePhysicsTime = true;\r\n            sceneInstrumentation.captureAnimationsTime = true;\r\n            return sceneInstrumentation;\r\n        }, [scene])\r\n    );\r\n\r\n    const engineInstrumentation = useResource(\r\n        useCallback(() => {\r\n            const engineInstrumentation = new EngineInstrumentation(scene.getEngine());\r\n            engineInstrumentation.captureGPUFrameTime = true;\r\n            return engineInstrumentation;\r\n        }, [scene.getEngine()])\r\n    );\r\n\r\n    const absoluteFPS = useObservableState(() => Math.floor(1000.0 / sceneInstrumentation.frameTimeCounter.lastSecAverage), pollingObservable);\r\n    const meshesSelection = useObservableState(() => sceneInstrumentation.activeMeshesEvaluationTimeCounter.lastSecAverage, pollingObservable);\r\n    const renderTargets = useObservableState(() => sceneInstrumentation.renderTargetsRenderTimeCounter.lastSecAverage, pollingObservable);\r\n    const particles = useObservableState(() => sceneInstrumentation.particlesRenderTimeCounter.lastSecAverage, pollingObservable);\r\n    const sprites = useObservableState(() => sceneInstrumentation.spritesRenderTimeCounter.lastSecAverage, pollingObservable);\r\n    const animations = useObservableState(() => sceneInstrumentation.animationsTimeCounter.lastSecAverage, pollingObservable);\r\n    const physics = useObservableState(() => sceneInstrumentation.physicsTimeCounter.lastSecAverage, pollingObservable);\r\n    const interFrameTime = useObservableState(() => sceneInstrumentation.interFrameTimeCounter.lastSecAverage, pollingObservable);\r\n    const gpuFrameTime = useObservableState(() => engineInstrumentation.gpuFrameTimeCounter.lastSecAverage * 0.000001, pollingObservable);\r\n    const gpuFrameTimeAverage = useObservableState(() => engineInstrumentation.gpuFrameTimeCounter.average * 0.000001, pollingObservable);\r\n\r\n    return (\r\n        <>\r\n            <StringifiedPropertyLine key=\"AbsoluteFPS\" label=\"Absolute FPS\" value={absoluteFPS} />\r\n            <StringifiedPropertyLine key=\"MeshesSelection\" label=\"Meshes Selection\" value={meshesSelection} precision={2} units=\"ms\" />\r\n            <StringifiedPropertyLine key=\"RenderTargets\" label=\"Render Targets\" value={renderTargets} precision={2} units=\"ms\" />\r\n            <StringifiedPropertyLine key=\"Particles\" label=\"Particles\" value={particles} precision={2} units=\"ms\" />\r\n            <StringifiedPropertyLine key=\"Sprites\" label=\"Sprites\" value={sprites} precision={2} units=\"ms\" />\r\n            <StringifiedPropertyLine key=\"Animations\" label=\"Animations\" value={animations} precision={2} units=\"ms\" />\r\n            <StringifiedPropertyLine key=\"Physics\" label=\"Physics\" value={physics} precision={2} units=\"ms\" />\r\n            <StringifiedPropertyLine key=\"Render\" label=\"Render\" value={sceneInstrumentation.renderTimeCounter.lastSecAverage} precision={2} units=\"ms\" />\r\n            <StringifiedPropertyLine key=\"Frame\" label=\"Frame\" value={sceneInstrumentation.frameTimeCounter.lastSecAverage} precision={2} units=\"ms\" />\r\n            <StringifiedPropertyLine key=\"InterFrameTime\" label=\"Inter-Frame Time\" value={interFrameTime} precision={2} units=\"ms\" />\r\n            <StringifiedPropertyLine key=\"GPUFrameTime\" label=\"GPU Frame Time\" value={gpuFrameTime} precision={2} units=\"ms\" />\r\n            <StringifiedPropertyLine key=\"GPUFrameTimeAverage\" label=\"GPU Frame Time (Average)\" value={gpuFrameTimeAverage} precision={2} units=\"ms\" />\r\n        </>\r\n    );\r\n};\r\n","import type { FunctionComponent } from \"react\";\r\nimport { useRef } from \"react\";\r\nimport { ArrowUploadRegular } from \"@fluentui/react-icons\";\r\nimport { Button } from \"./button\";\r\nimport type { ButtonProps } from \"./button\";\r\n\r\ntype UploadButtonProps = Omit<ButtonProps, \"onClick\" | \"icon\"> & {\r\n    /**\r\n     * Callback when files are selected\r\n     */\r\n    onUpload: (files: FileList) => void;\r\n    /**\r\n     * File types to accept (e.g., \".jpg, .png, .dds\")\r\n     */\r\n    accept?: string;\r\n    /**\r\n     * Text label to display on the button (optional)\r\n     */\r\n    label?: string;\r\n};\r\n\r\n/**\r\n * A button that triggers a file upload dialog.\r\n * Combines a Button with a hidden file input.\r\n * @param props UploadButtonProps\r\n * @returns UploadButton component\r\n */\r\nexport const UploadButton: FunctionComponent<UploadButtonProps> = (props) => {\r\n    const { onUpload, accept, label, ...buttonProps } = props;\r\n    UploadButton.displayName = \"UploadButton\";\r\n    const inputRef = useRef<HTMLInputElement>(null);\r\n\r\n    const handleClick = () => {\r\n        inputRef.current?.click();\r\n    };\r\n\r\n    const handleChange = (evt: React.ChangeEvent<HTMLInputElement>) => {\r\n        const files = evt.target.files;\r\n        if (files && files.length) {\r\n            onUpload(files);\r\n        }\r\n        evt.target.value = \"\";\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Button icon={ArrowUploadRegular} title={label ?? \"Upload\"} label={label} onClick={handleClick} {...buttonProps} />\r\n            <input ref={inputRef} type=\"file\" accept={accept} style={{ display: \"none\" }} onChange={handleChange} />\r\n        </>\r\n    );\r\n};\r\n","import type { FunctionComponent } from \"react\";\r\nimport { LineContainer } from \"./propertyLines/propertyLine\";\r\nimport { UploadButton } from \"../primitives/uploadButton\";\r\nimport type { ButtonProps } from \"../primitives/button\";\r\n\r\ntype FileUploadLineProps = Omit<ButtonProps, \"onClick\" | \"label\"> & {\r\n    onClick: (files: FileList) => void;\r\n    label: string; // Require a label when button is the entire line (by default, label is optional on an UploadButton\r\n    accept: string;\r\n};\r\n\r\n/**\r\n * A full-width line with an upload button.\r\n * For just the button without the line wrapper, use UploadButton directly.\r\n * @returns An UploadButton wrapped in a LineContainer\r\n */\r\nexport const FileUploadLine: FunctionComponent<FileUploadLineProps> = ({ onClick, label, accept, ...buttonProps }) => {\r\n    FileUploadLine.displayName = \"FileUploadLine\";\r\n\r\n    return (\r\n        <LineContainer>\r\n            <UploadButton onUpload={onClick} accept={accept} label={label} {...buttonProps} />\r\n        </LineContainer>\r\n    );\r\n};\r\n","import type { IPerfDatasets } from \"core/Misc/interfaces/iPerfViewer\";\r\nimport type { Observable } from \"core/Misc/observable\";\r\n\r\n/**\r\n * Defines a structure to hold max, min and a optional current.\r\n */\r\nexport type PerfMinMax = {\r\n    min: number;\r\n    max: number;\r\n    current?: number;\r\n};\r\n\r\n/**\r\n * Defines structure of the object which contains information related to panning.\r\n */\r\nexport type PerfMousePanningPosition = {\r\n    xPos: number;\r\n    delta: number;\r\n};\r\n\r\n/**\r\n * Defines structure of the object which contains information regarding the bounds of each dataset we want to consider.\r\n */\r\nexport type PerfIndexBounds = {\r\n    start: number;\r\n    end: number;\r\n};\r\n\r\nexport type PerfLayoutSize = {\r\n    width: number;\r\n    height: number;\r\n};\r\n\r\n/**\r\n * Defines the structure of the meta object for the tooltip that appears when hovering over a performance graph!\r\n */\r\nexport type PerfTooltip = {\r\n    text: string;\r\n    color: string;\r\n};\r\n\r\n/**\r\n * Defines the structure of a cache object used to store the result of measureText().\r\n */\r\nexport type PerfTextMeasureCache = {\r\n    text: string;\r\n    width: number;\r\n};\r\n\r\n/**\r\n * Defines a structure defining the available space in a drawable area.\r\n */\r\nexport type GraphDrawableArea = {\r\n    top: number;\r\n    left: number;\r\n    bottom: number;\r\n    right: number;\r\n};\r\n\r\n/**\r\n * Defines the structure representing necessary ticker information.\r\n */\r\nexport type PerfTicker = PerfMinMax & {\r\n    id: string;\r\n    text: string;\r\n};\r\n\r\nexport type VisibleRangeChangedObservableProps = {\r\n    valueMap: Map<string, PerfMinMax>;\r\n};\r\n\r\n/**\r\n * Defines what settings our canvas graphing service accepts\r\n */\r\nexport type CanvasGraphServiceSettings = {\r\n    datasets: IPerfDatasets;\r\n    onVisibleRangeChangedObservable?: Observable<VisibleRangeChangedObservableProps>;\r\n};\r\n\r\n/**\r\n * Defines the structure representing the preprocessable tooltip information.\r\n */\r\nexport type TooltipPreprocessedInformation = {\r\n    xForActualTimestamp: number;\r\n    numberOfTooltipItems: number;\r\n    longestText: string;\r\n    focusedId: string;\r\n};\r\n\r\nexport type PerfTooltipHoverPosition = {\r\n    xPos: number;\r\n    yPos: number;\r\n};\r\n\r\n/**\r\n * Defines the supported timestamp units.\r\n */\r\nexport enum TimestampUnit {\r\n    Milliseconds = 0,\r\n    Seconds = 1,\r\n    Minutes = 2,\r\n    Hours = 3,\r\n}\r\n","import type {\r\n    CanvasGraphServiceSettings,\r\n    PerfMinMax,\r\n    GraphDrawableArea,\r\n    PerfMousePanningPosition,\r\n    PerfIndexBounds,\r\n    PerfTooltip,\r\n    PerfTextMeasureCache,\r\n    PerfLayoutSize,\r\n    PerfTicker,\r\n    TooltipPreprocessedInformation,\r\n    PerfTooltipHoverPosition,\r\n    VisibleRangeChangedObservableProps,\r\n} from \"./graphSupportingTypes\";\r\nimport { TimestampUnit } from \"./graphSupportingTypes\";\r\nimport type { IPerfDatasets, IPerfMetadata } from \"core/Misc/interfaces/iPerfViewer\";\r\nimport { Scalar } from \"core/Maths/math.scalar\";\r\nimport { PerformanceViewerCollector } from \"core/Misc/PerformanceViewer/performanceViewerCollector\";\r\nimport type { Observable } from \"core/Misc/observable\";\r\n\r\nconst DefaultColor = \"#000\";\r\nconst AxisColor = \"#c0c4c8\";\r\nconst FutureBoxColor = \"#dfe9ed\";\r\nconst DividerColor = \"#0a3066\";\r\nconst PlayheadColor = \"#b9dbef\";\r\n\r\nconst PositionIndicatorColor = \"#4d5960\";\r\nconst TooltipBackgroundColor = \"#566268\";\r\nconst TooltipForegroundColor = \"#fbfbfb\";\r\n\r\nconst TopOfGraphY = 0;\r\n\r\nconst DefaultAlpha = 1;\r\nconst TooltipBackgroundAlpha = 0.8;\r\nconst BackgroundLineAlpha = 0.2;\r\n\r\nconst MaxDistanceForHover = 10;\r\n\r\nconst TooltipHorizontalPadding = 10;\r\nconst SpaceBetweenTextAndBox = 5;\r\nconst TooltipPaddingFromBottom = 20;\r\n\r\n// height of indicator triangle\r\nconst TriangleHeight = 10;\r\n// width of indicator triangle\r\nconst TriangleWidth = 20;\r\n// padding to indicate how far below the axis line the triangle should be.\r\nconst TrianglePaddingFromAxisLine = 3;\r\n\r\nconst TickerHorizontalPadding = 10;\r\n\r\n// pixels to pad the top and bottom of data so that it doesn't get cut off by the margins.\r\nconst DataPadding = 2;\r\n\r\nconst PlayheadSize = 8;\r\nconst DividerSize = 2;\r\n\r\nconst AxisLineLength = 10;\r\nconst AxisPadding = 10;\r\n\r\n// Currently the scale factor is a constant but when we add panning this may become formula based.\r\nconst ScaleFactor = 0.8;\r\n\r\n// This controls the scale factor at which we stop drawing the playhead. Below this value there tends to be flickering of the playhead as data comes in.\r\nconst StopDrawingPlayheadThreshold = 0.95;\r\n\r\n// Threshold for the ratio at which we go from panning mode to live mode.\r\nconst ReturnToLiveThreshold = 0.998;\r\n\r\n// Font to use on the addons such as tooltips and tickers!\r\nconst GraphAddonFont = \"12px Arial\";\r\n\r\n// A string containing the alphabet, used in line height calculation for the font.\r\nconst Alphabet = \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\";\r\n\r\n// Arbitrary maximum used to make some GC optimizations.\r\nconst MaximumDatasetsAllowed = 64;\r\n\r\nconst MsInSecond = 1000;\r\nconst MsInMinute = MsInSecond * 60;\r\nconst MsInHour = MsInMinute * 60;\r\n\r\n// time in ms to wait between tooltip draws inside the mouse move.\r\nconst TooltipDebounceTime = 32;\r\n\r\n// time in ms to wait between draws\r\nconst DrawThrottleTime = 15;\r\n\r\n// What distance percentage in the x axis between two points makes us break the line and draw a \"no data\" box instead\r\nconst MaxXDistancePercBetweenLinePoints = 0.1;\r\n\r\n// Color used to draw the rectangle that indicates no collection of data\r\nconst NoDataRectangleColor = \"#aaaaaa\";\r\n\r\nconst SmoothingFactor = 0.2; // factor to smooth the graph with\r\nconst RangeMargin = 0.1; // extra margin to expand the min/max range on the graph\r\n\r\n/**\r\n * This function will debounce calls to functions.\r\n *\r\n * @param callback callback to call.\r\n * @param time time to wait between calls in ms.\r\n * @returns a function that will call the callback after the time has passed.\r\n */\r\nfunction Debounce<T extends (...args: never[]) => void>(callback: T, time: number): T {\r\n    let timerId: ReturnType<typeof setTimeout>;\r\n    return function (...args: Parameters<T>) {\r\n        clearTimeout(timerId);\r\n        timerId = setTimeout(() => callback(...args), time);\r\n    } as T;\r\n}\r\n\r\n/**\r\n * This function will throttle calls to functions.\r\n *\r\n * @param callback callback to call.\r\n * @param time time to wait between calls in ms.\r\n * @returns a function that will call the callback after the time has passed.\r\n */\r\nfunction Throttle<T extends (...args: never[]) => void>(callback: T, time: number): T {\r\n    let lastCalledTime: number = 0;\r\n    return function (...args: Parameters<T>) {\r\n        const now = Date.now();\r\n        if (now - lastCalledTime < time) {\r\n            return;\r\n        }\r\n        lastCalledTime = now;\r\n        callback(...args);\r\n    } as T;\r\n}\r\n\r\n/**\r\n * This class acts as the main API for graphing. Here is where you will find methods to let the service know new data needs to be drawn,\r\n * let it know something has been resized, etc!\r\n */\r\nexport class CanvasGraphService {\r\n    private _ctx: CanvasRenderingContext2D | null;\r\n    private _width: number;\r\n    private _height: number;\r\n    private _sizeOfWindow: number = 300;\r\n    private _ticks: number[];\r\n    private _panPosition: PerfMousePanningPosition | null;\r\n    private _position: number | null;\r\n    private _datasetBounds: PerfIndexBounds;\r\n    private _globalTimeMinMax: PerfMinMax;\r\n    private _hoverPosition: PerfTooltipHoverPosition | null;\r\n    private _drawableArea: GraphDrawableArea;\r\n    private _axisHeight: number;\r\n    private _tooltipItems: PerfTooltip[];\r\n    private _tooltipTextCache: PerfTextMeasureCache;\r\n    private _tickerTextCache: PerfTextMeasureCache;\r\n    private _tickerItems: PerfTicker[];\r\n    private _preprocessedTooltipInfo: TooltipPreprocessedInformation;\r\n    private _numberOfTickers: number;\r\n    private _onVisibleRangeChangedObservable?: Observable<VisibleRangeChangedObservableProps>;\r\n\r\n    private readonly _addonFontLineHeight: number;\r\n    private readonly _defaultLineHeight: number;\r\n\r\n    /**\r\n     * The datasets to render.\r\n     */\r\n    public readonly datasets: IPerfDatasets;\r\n\r\n    /**\r\n     * Metadata for each dataset.\r\n     */\r\n    public metadata: Map<string, IPerfMetadata>;\r\n\r\n    /**\r\n     * Creates an instance of CanvasGraphService.\r\n     *\r\n     * @param canvas a pointer to the canvas dom element we would like to write to.\r\n     * @param settings settings for our service.\r\n     */\r\n    constructor(canvas: HTMLCanvasElement, settings: CanvasGraphServiceSettings) {\r\n        this._ctx = canvas.getContext && canvas.getContext(\"2d\");\r\n        this._width = canvas.width;\r\n        this._height = canvas.height;\r\n        this._ticks = [];\r\n        this._panPosition = null;\r\n        this._hoverPosition = null;\r\n        this._position = null;\r\n        this._datasetBounds = { start: 0, end: 0 };\r\n        this._globalTimeMinMax = { min: Infinity, max: 0 };\r\n        this._drawableArea = { top: 0, left: 0, right: 0, bottom: 0 };\r\n        this._tooltipTextCache = { text: \"\", width: 0 };\r\n        this._tickerTextCache = { text: \"\", width: 0 };\r\n        this._tooltipItems = [];\r\n        this._tickerItems = [];\r\n        this._preprocessedTooltipInfo = { focusedId: \"\", longestText: \"\", numberOfTooltipItems: 0, xForActualTimestamp: 0 };\r\n        this._numberOfTickers = 0;\r\n        this._onVisibleRangeChangedObservable = settings.onVisibleRangeChangedObservable;\r\n\r\n        for (let i = 0; i < MaximumDatasetsAllowed; i++) {\r\n            this._tooltipItems.push({ text: \"\", color: \"\" });\r\n            this._tickerItems.push({ text: \"\", id: \"\", max: 0, min: 0 });\r\n        }\r\n\r\n        if (!this._ctx) {\r\n            throw Error(\"No canvas context accessible\");\r\n        }\r\n\r\n        const defaultMetrics = this._ctx.measureText(Alphabet);\r\n        this._defaultLineHeight = defaultMetrics.actualBoundingBoxAscent + defaultMetrics.actualBoundingBoxDescent;\r\n        this._axisHeight = AxisLineLength + AxisPadding + this._defaultLineHeight + AxisPadding;\r\n\r\n        this._ctx.save();\r\n        this._ctx.font = GraphAddonFont;\r\n        const fontMetrics = this._ctx.measureText(Alphabet);\r\n        this._addonFontLineHeight = fontMetrics.actualBoundingBoxAscent + fontMetrics.actualBoundingBoxDescent;\r\n        this._ctx.restore();\r\n\r\n        this.datasets = settings.datasets;\r\n        this.metadata = new Map<string, IPerfMetadata>();\r\n\r\n        this._attachEventListeners(canvas);\r\n    }\r\n\r\n    /**\r\n     * This method lets the service know it should get ready to update what it is displaying.\r\n     */\r\n    public update = Throttle(() => this._draw(), DrawThrottleTime);\r\n\r\n    /**\r\n     * Update the canvas graph service with the new height and width of the canvas.\r\n     * @param size The new size of the canvas.\r\n     */\r\n    public resize(size: PerfLayoutSize) {\r\n        const { _ctx: ctx } = this;\r\n        const { width, height } = size;\r\n\r\n        if (!ctx || !ctx.canvas) {\r\n            return;\r\n        }\r\n\r\n        this._width = width;\r\n        this._height = height;\r\n\r\n        ctx.canvas.width = width;\r\n        ctx.canvas.height = height;\r\n\r\n        this.update();\r\n    }\r\n\r\n    /**\r\n     * Force resets the position in the data, effectively returning to the most current data.\r\n     */\r\n    public resetDataPosition() {\r\n        this._position = null;\r\n    }\r\n\r\n    private _prevPointById: Map<string, [number, number]> = new Map<string, [number, number]>();\r\n    private _prevValueById: Map<string, number> = new Map<string, number>();\r\n\r\n    /**\r\n     * This method draws the data and sets up the appropriate scales.\r\n     */\r\n    private _draw() {\r\n        const { _ctx: ctx } = this;\r\n        if (!ctx) {\r\n            return;\r\n        }\r\n\r\n        const numSlices = this._getNumberOfSlices();\r\n\r\n        if (numSlices === 0) {\r\n            return;\r\n        }\r\n\r\n        // First we clear the canvas so we can draw our data!\r\n        this.clear();\r\n\r\n        // Get global min max of time axis (across all datasets).\r\n        this._globalTimeMinMax.min = Infinity;\r\n        this._globalTimeMinMax.max = 0;\r\n\r\n        // First we must get the end positions of our view port.\r\n        const pos = this._position ?? numSlices - 1;\r\n        let start = pos - Math.ceil(this._sizeOfWindow * ScaleFactor);\r\n        let startOverflow = 0;\r\n\r\n        // account for overflow from start.\r\n        if (start < 0) {\r\n            startOverflow = 0 - start;\r\n            start = 0;\r\n        }\r\n\r\n        let end = Math.ceil(pos + this._sizeOfWindow * (1 - ScaleFactor) + startOverflow);\r\n\r\n        // account for overflow from end.\r\n        if (end > numSlices) {\r\n            const endOverflow = end - numSlices;\r\n            end = numSlices;\r\n\r\n            start = Math.max(start - endOverflow, 0);\r\n        }\r\n\r\n        // update the bounds\r\n        this._datasetBounds.start = start;\r\n        this._datasetBounds.end = end;\r\n\r\n        // next we must find the min and max timestamp in bounds. (Timestamps are sorted)\r\n        this._globalTimeMinMax.min = this.datasets.data.at(this.datasets.startingIndices.at(this._datasetBounds.start));\r\n        this._globalTimeMinMax.max = this.datasets.data.at(this.datasets.startingIndices.at(this._datasetBounds.end - 1));\r\n\r\n        // set the buffer region maximum by rescaling the max timestamp in bounds.\r\n        const bufferMaximum = Math.ceil((this._globalTimeMinMax.max - this._globalTimeMinMax.min) / ScaleFactor + this._globalTimeMinMax.min);\r\n\r\n        // we then need to update the end position based on the maximum for the buffer region\r\n        // binary search to get closest point to the buffer maximum.\r\n        this._datasetBounds.end = this._getClosestPointToTimestamp(bufferMaximum) + 1;\r\n\r\n        // keep track of largest timestamp value in view!\r\n        this._globalTimeMinMax.max = Math.max(this.datasets.data.at(this.datasets.startingIndices.at(this._datasetBounds.end - 1)), this._globalTimeMinMax.max);\r\n\r\n        const updatedScaleFactor = Scalar.Clamp((this._globalTimeMinMax.max - this._globalTimeMinMax.min) / (bufferMaximum - this._globalTimeMinMax.min), ScaleFactor, 1);\r\n\r\n        // we will now set the global maximum to the maximum of the buffer.\r\n        this._globalTimeMinMax.max = bufferMaximum;\r\n\r\n        this._drawableArea.top = 0;\r\n        this._drawableArea.left = 0;\r\n        this._drawableArea.bottom = this._height;\r\n        this._drawableArea.right = this._width;\r\n\r\n        this._drawTickers(this._drawableArea, this._datasetBounds);\r\n        this._drawTimeAxis(this._globalTimeMinMax, this._drawableArea);\r\n        this._drawPlayheadRegion(this._drawableArea, updatedScaleFactor);\r\n        this._drawableArea.top += DataPadding;\r\n        this._drawableArea.bottom -= DataPadding;\r\n\r\n        // pre-process tooltip info so we can use it in determining opacity of lines.\r\n        this._preprocessTooltip(this._hoverPosition, this._drawableArea);\r\n\r\n        const { left, right, bottom, top } = this._drawableArea;\r\n        // process, and then draw our points\r\n        for (let idOffset = 0; idOffset < this.datasets.ids.length; idOffset++) {\r\n            const id = this.datasets.ids[idOffset];\r\n\r\n            let valueMinMax: PerfMinMax | undefined;\r\n            let prevPoint = this._prevPointById.get(id);\r\n            let prevValue = this._prevValueById.get(id);\r\n            let ticker = false;\r\n\r\n            for (let i = 0; i < this._numberOfTickers; i++) {\r\n                if (this._tickerItems[i].id === id) {\r\n                    ticker = true;\r\n                }\r\n            }\r\n            if (!ticker) {\r\n                continue;\r\n            }\r\n\r\n            ctx.beginPath();\r\n            ctx.strokeStyle = this.metadata.get(id)?.color ?? DefaultColor;\r\n            // if we are focused on a line and not in live mode handle the opacities appropriately.\r\n            if (this._preprocessedTooltipInfo.focusedId === id) {\r\n                ctx.globalAlpha = DefaultAlpha;\r\n            } else if (this._preprocessedTooltipInfo.focusedId !== \"\") {\r\n                ctx.globalAlpha = BackgroundLineAlpha;\r\n            }\r\n\r\n            const values = new Array(this._datasetBounds.end - this._datasetBounds.start);\r\n\r\n            for (let pointIndex = this._datasetBounds.start; pointIndex < this._datasetBounds.end; pointIndex++) {\r\n                const numPoints = this.datasets.data.at(this.datasets.startingIndices.at(pointIndex) + PerformanceViewerCollector.NumberOfPointsOffset);\r\n\r\n                if (idOffset >= numPoints) {\r\n                    continue;\r\n                }\r\n\r\n                const valueIndex = this.datasets.startingIndices.at(pointIndex) + PerformanceViewerCollector.SliceDataOffset + idOffset;\r\n                const value = this.datasets.data.at(valueIndex);\r\n\r\n                if (prevValue === undefined) {\r\n                    prevValue = value;\r\n                    this._prevValueById.set(id, prevValue);\r\n                }\r\n\r\n                // perform smoothing\r\n                const smoothedValue = SmoothingFactor * value + (1 - SmoothingFactor) * prevValue;\r\n                values[pointIndex - this._datasetBounds.start] = smoothedValue;\r\n\r\n                if (!valueMinMax) {\r\n                    valueMinMax = {\r\n                        min: smoothedValue,\r\n                        max: smoothedValue,\r\n                    };\r\n                }\r\n\r\n                this._prevValueById.set(id, smoothedValue);\r\n                valueMinMax.min = Math.min(valueMinMax.min, smoothedValue);\r\n                valueMinMax.max = Math.max(valueMinMax.max, smoothedValue);\r\n            }\r\n\r\n            const delta = valueMinMax!.max - valueMinMax!.min;\r\n            valueMinMax!.min -= RangeMargin * delta;\r\n            valueMinMax!.max += RangeMargin * delta;\r\n\r\n            for (let pointIndex = this._datasetBounds.start; pointIndex < this._datasetBounds.end; pointIndex++) {\r\n                const timestamp = this.datasets.data.at(this.datasets.startingIndices.at(pointIndex));\r\n                const smoothedValue = values[pointIndex - this._datasetBounds.start];\r\n\r\n                const drawableTime = this._getPixelForNumber(timestamp, this._globalTimeMinMax, left, right - left, false);\r\n                const drawableValue = this._getPixelForNumber(smoothedValue, valueMinMax!, top, bottom - top, true);\r\n\r\n                if (prevPoint === undefined) {\r\n                    prevPoint = [drawableTime, drawableValue];\r\n                    this._prevPointById.set(id, prevPoint);\r\n                }\r\n\r\n                const xDifference = drawableTime - prevPoint[0];\r\n                const skipLine = xDifference > MaxXDistancePercBetweenLinePoints * (right - left);\r\n                if (skipLine) {\r\n                    ctx.fillStyle = NoDataRectangleColor;\r\n                    ctx.fillRect(prevPoint[0], top, xDifference, bottom - top);\r\n                } else {\r\n                    if (prevPoint[0] < drawableTime) {\r\n                        ctx.moveTo(prevPoint[0], prevPoint[1]);\r\n                        ctx.lineTo(drawableTime, drawableValue);\r\n                    }\r\n                }\r\n                prevPoint[0] = drawableTime;\r\n                prevPoint[1] = drawableValue;\r\n            }\r\n\r\n            ctx.stroke();\r\n        }\r\n\r\n        ctx.globalAlpha = DefaultAlpha;\r\n\r\n        // then draw the tooltip.\r\n        this._drawTooltip(this._hoverPosition, this._drawableArea);\r\n    }\r\n\r\n    private _drawTickers(drawableArea: GraphDrawableArea, bounds: PerfIndexBounds) {\r\n        const { _ctx: ctx } = this;\r\n\r\n        if (!ctx) {\r\n            return;\r\n        }\r\n\r\n        // create the ticker objects for each of the non hidden items.\r\n        let longestText: string = \"\";\r\n        this._numberOfTickers = 0;\r\n        const valueMap = new Map<string, PerfMinMax>();\r\n        for (let idOffset = 0; idOffset < this.datasets.ids.length; idOffset++) {\r\n            const id = this.datasets.ids[idOffset];\r\n            if (this.metadata.get(id)?.hidden) {\r\n                continue;\r\n            }\r\n\r\n            const valueMinMax = this._getMinMax(bounds, idOffset);\r\n            const latestValue = this.datasets.data.at(this.datasets.startingIndices.at(bounds.end - 1) + PerformanceViewerCollector.SliceDataOffset + idOffset);\r\n            const text = `${id}: ${latestValue.toFixed(2)} (max: ${valueMinMax.max.toFixed(2)}, min: ${valueMinMax.min.toFixed(2)})`;\r\n            valueMap.set(id, {\r\n                min: valueMinMax.min,\r\n                max: valueMinMax.max,\r\n                current: latestValue,\r\n            });\r\n            if (text.length > longestText.length) {\r\n                longestText = text;\r\n            }\r\n            this._tickerItems[this._numberOfTickers].id = id;\r\n            this._tickerItems[this._numberOfTickers].max = valueMinMax.max;\r\n            this._tickerItems[this._numberOfTickers].min = valueMinMax.min;\r\n            this._tickerItems[this._numberOfTickers].text = text;\r\n            this._numberOfTickers++;\r\n        }\r\n        this._onVisibleRangeChangedObservable?.notifyObservers({ valueMap });\r\n\r\n        ctx.save();\r\n        ctx.font = GraphAddonFont;\r\n        ctx.textBaseline = \"middle\";\r\n        ctx.textAlign = \"left\";\r\n\r\n        let width: number;\r\n        // if the lengths are the same the estimate should be good enough given the padding.\r\n        if (this._tickerTextCache.text.length === longestText.length) {\r\n            width = this._tickerTextCache.width;\r\n        } else {\r\n            width = ctx.measureText(longestText).width + 2 * TickerHorizontalPadding;\r\n            this._tickerTextCache.text = longestText;\r\n            this._tickerTextCache.width = width;\r\n        }\r\n\r\n        ctx.restore();\r\n    }\r\n\r\n    /**\r\n     * Returns the index of the closest time for the datasets.\r\n     * Uses a modified binary search to get value.\r\n     *\r\n     * @param targetTime the time we want to get close to.\r\n     * @returns index of the item with the closest time to the targetTime\r\n     */\r\n    private _getClosestPointToTimestamp(targetTime: number): number {\r\n        let low = 0;\r\n        let high = this._getNumberOfSlices() - 1;\r\n        let closestIndex = 0;\r\n\r\n        while (low <= high) {\r\n            const middle = Math.trunc((low + high) / 2);\r\n            const middleTimestamp = this.datasets.data.at(this.datasets.startingIndices.at(middle));\r\n\r\n            if (Math.abs(middleTimestamp - targetTime) < Math.abs(this.datasets.data.at(this.datasets.startingIndices.at(closestIndex)) - targetTime)) {\r\n                closestIndex = middle;\r\n            }\r\n\r\n            if (middleTimestamp < targetTime) {\r\n                low = middle + 1;\r\n            } else if (middleTimestamp > targetTime) {\r\n                high = middle - 1;\r\n            } else {\r\n                break;\r\n            }\r\n        }\r\n\r\n        return closestIndex;\r\n    }\r\n\r\n    /**\r\n     * This is a convenience method to get the number of collected slices.\r\n     * @returns the total number of collected slices.\r\n     */\r\n    private _getNumberOfSlices() {\r\n        return this.datasets.startingIndices.itemLength;\r\n    }\r\n\r\n    /**\r\n     * Draws the time axis, adjusts the drawable area for the graph.\r\n     *\r\n     * @param timeMinMax the minimum and maximum for the time axis.\r\n     * @param drawableArea the current allocated drawable area.\r\n     */\r\n    private _drawTimeAxis(timeMinMax: PerfMinMax, drawableArea: GraphDrawableArea) {\r\n        const { _ctx: ctx } = this;\r\n\r\n        if (!ctx) {\r\n            return;\r\n        }\r\n        const spaceAvailable = drawableArea.right - drawableArea.left;\r\n\r\n        this._generateTicks(timeMinMax, spaceAvailable);\r\n\r\n        // remove the height of the axis from the available drawable area.\r\n        drawableArea.bottom -= this._axisHeight;\r\n\r\n        // draw axis box.\r\n        ctx.save();\r\n        ctx.fillStyle = AxisColor;\r\n        ctx.fillRect(drawableArea.left, drawableArea.bottom, spaceAvailable, this._axisHeight);\r\n        // draw time axis line\r\n        ctx.beginPath();\r\n        ctx.strokeStyle = DefaultColor;\r\n        ctx.moveTo(drawableArea.left, drawableArea.bottom);\r\n        ctx.lineTo(drawableArea.right, drawableArea.bottom);\r\n\r\n        // draw ticks and text.\r\n        ctx.fillStyle = DefaultColor;\r\n        ctx.textAlign = \"center\";\r\n        ctx.textBaseline = \"middle\";\r\n\r\n        const timestampUnit: TimestampUnit = this._getTimestampUnit(this._ticks[this._ticks.length - 1]);\r\n\r\n        for (const tick of this._ticks) {\r\n            let position = this._getPixelForNumber(tick, timeMinMax, drawableArea.left, spaceAvailable, false);\r\n            if (position > spaceAvailable) {\r\n                position = spaceAvailable;\r\n            }\r\n            ctx.moveTo(position, drawableArea.bottom);\r\n            ctx.lineTo(position, drawableArea.bottom + 10);\r\n            ctx.fillText(this._parseTimestamp(tick, timestampUnit), position, drawableArea.bottom + 20);\r\n        }\r\n        ctx.stroke();\r\n        ctx.restore();\r\n    }\r\n\r\n    /**\r\n     * Given a timestamp (should be the maximum timestamp in view), this function returns the maximum unit the timestamp contains.\r\n     * This information can be used for formatting purposes.\r\n     * @param timestamp the maximum timestamp to find the maximum timestamp unit for.\r\n     * @returns The maximum unit the timestamp has.\r\n     */\r\n    private _getTimestampUnit(timestamp: number): TimestampUnit {\r\n        if (timestamp / MsInHour > 1) {\r\n            return TimestampUnit.Hours;\r\n        } else if (timestamp / MsInMinute > 1) {\r\n            return TimestampUnit.Minutes;\r\n        } else if (timestamp / MsInSecond > 1) {\r\n            return TimestampUnit.Seconds;\r\n        } else {\r\n            return TimestampUnit.Milliseconds;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Given a timestamp and the interval unit, this function will parse the timestamp to the appropriate format.\r\n     * @param timestamp The timestamp to parse\r\n     * @param intervalUnit The maximum unit of the maximum timestamp in an interval.\r\n     * @returns a string representing the parsed timestamp.\r\n     */\r\n    private _parseTimestamp(timestamp: number, intervalUnit: TimestampUnit): string {\r\n        let parsedTimestamp = \"\";\r\n\r\n        if (intervalUnit >= TimestampUnit.Hours) {\r\n            const numHours = Math.floor(timestamp / MsInHour);\r\n            timestamp -= numHours * MsInHour;\r\n            parsedTimestamp += `${numHours.toString().padStart(intervalUnit > TimestampUnit.Hours ? 2 : 1, \"0\")}:`;\r\n        }\r\n\r\n        if (intervalUnit >= TimestampUnit.Minutes) {\r\n            const numMinutes = Math.floor(timestamp / MsInMinute);\r\n            timestamp -= numMinutes * MsInMinute;\r\n            parsedTimestamp += `${numMinutes.toString().padStart(intervalUnit > TimestampUnit.Minutes ? 2 : 1, \"0\")}:`;\r\n        }\r\n\r\n        const numSeconds = Math.floor(timestamp / MsInSecond);\r\n        timestamp -= numSeconds * MsInSecond;\r\n        parsedTimestamp += numSeconds.toString().padStart(intervalUnit > TimestampUnit.Seconds ? 2 : 1, \"0\");\r\n\r\n        if (timestamp > 0) {\r\n            if (parsedTimestamp.length > 0) {\r\n                parsedTimestamp += \".\";\r\n            }\r\n            parsedTimestamp += Math.round(timestamp).toString().padStart(3, \"0\");\r\n        }\r\n\r\n        return parsedTimestamp;\r\n    }\r\n\r\n    /**\r\n     * Generates a list of ticks given the min and max of the axis, and the space available in the axis.\r\n     *\r\n     * @param minMax the minimum and maximum values of the axis\r\n     * @param spaceAvailable the total amount of space we have allocated to our axis\r\n     */\r\n    private _generateTicks(minMax: PerfMinMax, spaceAvailable: number) {\r\n        const { min, max } = minMax;\r\n        const minTickSpacing = 40;\r\n\r\n        this._ticks.length = 0;\r\n\r\n        const maxTickCount = Math.ceil(spaceAvailable / minTickSpacing);\r\n        const range = this._niceNumber(max - min, false);\r\n        const spacing = this._niceNumber(range / (maxTickCount - 1), true);\r\n        const niceMin = Math.floor(min / spacing) * spacing;\r\n        const niceMax = Math.floor(max / spacing) * spacing;\r\n\r\n        for (let i = niceMin; i <= niceMax + 0.5 * spacing; i += spacing) {\r\n            this._ticks.push(i);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Nice number algorithm based on psueudo code defined in \"Graphics Gems\" by Andrew S. Glassner.\r\n     * This will find a \"nice\" number approximately equal to num.\r\n     *\r\n     * @param num The number we want to get close to.\r\n     * @param shouldRound if true we will round the number, otherwise we will get the ceiling.\r\n     * @returns a \"nice\" number approximately equal to num.\r\n     */\r\n    private _niceNumber(num: number, shouldRound: boolean) {\r\n        const exp = Math.floor(Math.log10(num));\r\n        const fraction = num / Math.pow(10, exp);\r\n        let niceFraction: number;\r\n        if (shouldRound) {\r\n            if (fraction < 1.5) {\r\n                niceFraction = 1;\r\n            } else if (fraction < 3) {\r\n                niceFraction = 2;\r\n            } else if (fraction < 7) {\r\n                niceFraction = 5;\r\n            } else {\r\n                niceFraction = 10;\r\n            }\r\n        } else {\r\n            if (fraction <= 1) {\r\n                niceFraction = 1;\r\n            } else if (fraction <= 2) {\r\n                niceFraction = 2;\r\n            } else if (fraction <= 5) {\r\n                niceFraction = 5;\r\n            } else {\r\n                niceFraction = 10;\r\n            }\r\n        }\r\n\r\n        return niceFraction * Math.pow(10, exp);\r\n    }\r\n\r\n    /**\r\n     * Gets the min and max as a single object from an array of numbers.\r\n     * @param bounds\r\n     * @param offset\r\n     * @returns the min and max of the array.\r\n     */\r\n    private _getMinMax(bounds: PerfIndexBounds, offset: number): PerfMinMax {\r\n        let min = Infinity,\r\n            max = 0;\r\n\r\n        for (let i = bounds.start; i < bounds.end; i++) {\r\n            const numPoints = this.datasets.data.at(this.datasets.startingIndices.at(i) + PerformanceViewerCollector.NumberOfPointsOffset);\r\n\r\n            if (offset >= numPoints) {\r\n                continue;\r\n            }\r\n\r\n            const itemIndex = this.datasets.startingIndices.at(i) + PerformanceViewerCollector.SliceDataOffset + offset;\r\n            const item = this.datasets.data.at(itemIndex);\r\n\r\n            if (item < min) {\r\n                min = item;\r\n            }\r\n\r\n            if (item > max) {\r\n                max = item;\r\n            }\r\n        }\r\n\r\n        return {\r\n            min,\r\n            max,\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Converts a single number to a pixel coordinate in a single axis by normalizing the data to a [0, 1] scale using the minimum and maximum values.\r\n     *\r\n     * @param num the number we want to get the pixel coordinate for\r\n     * @param minMax the min and max of the dataset in the axis we want the pixel coordinate for.\r\n     * @param startingPixel the starting pixel coordinate (this means it takes account for any offset).\r\n     * @param spaceAvailable the total space available in this axis.\r\n     * @param shouldFlipValue if we should use a [1, 0] scale instead of a [0, 1] scale.\r\n     * @returns the pixel coordinate of the value in a single axis.\r\n     */\r\n    private _getPixelForNumber(num: number, minMax: PerfMinMax, startingPixel: number, spaceAvailable: number, shouldFlipValue: boolean) {\r\n        const { min, max } = minMax;\r\n        // Perform a min-max normalization to rescale the value onto a [0, 1] scale given the min and max of the dataset.\r\n        let normalizedValue = Math.abs(max - min) > 0.001 ? (num - min) / (max - min) : 0.5;\r\n\r\n        // if we should make this a [1, 0] range instead (higher numbers = smaller pixel value)\r\n        if (shouldFlipValue) {\r\n            normalizedValue = 1 - normalizedValue;\r\n        }\r\n\r\n        return startingPixel + normalizedValue * spaceAvailable;\r\n    }\r\n\r\n    /**\r\n     * Add in any necessary event listeners.\r\n     *\r\n     * @param canvas The canvas we want to attach listeners to.\r\n     */\r\n    private _attachEventListeners(canvas: HTMLCanvasElement) {\r\n        canvas.addEventListener(\"wheel\", this._handleZoom);\r\n        canvas.addEventListener(\"mousemove\", this._handleDataHover);\r\n        canvas.addEventListener(\"mousedown\", this._handlePanStart);\r\n        canvas.addEventListener(\"mouseleave\", this._handleStopHover);\r\n        // The user may stop panning outside of the canvas size so we should add the event listener to the document.\r\n        canvas.ownerDocument.addEventListener(\"mouseup\", this._handlePanStop);\r\n    }\r\n\r\n    /**\r\n     * We remove all event listeners we added.\r\n     *\r\n     * @param canvas The canvas we want to remove listeners from.\r\n     */\r\n    private _removeEventListeners(canvas: HTMLCanvasElement) {\r\n        canvas.removeEventListener(\"wheel\", this._handleZoom);\r\n        canvas.removeEventListener(\"mousemove\", this._handleDataHover);\r\n        canvas.removeEventListener(\"mousedown\", this._handlePanStart);\r\n        canvas.removeEventListener(\"mouseleave\", this._handleStopHover);\r\n        canvas.ownerDocument.removeEventListener(\"mouseup\", this._handlePanStop);\r\n    }\r\n\r\n    /**\r\n     * Handles what to do when we are hovering over the canvas and not panning.\r\n     *\r\n     * @param event A reference to the event to be handled.\r\n     */\r\n    private _handleDataHover = (event: MouseEvent) => {\r\n        if (this._panPosition) {\r\n            // we don't want to do anything if we are in the middle of panning\r\n            return;\r\n        }\r\n\r\n        this._hoverPosition = { xPos: event.clientX, yPos: event.clientY };\r\n\r\n        // process and draw the tooltip.\r\n        this._debouncedTooltip(this._hoverPosition, this._drawableArea);\r\n    };\r\n\r\n    /**\r\n     * Debounced processing and drawing of tooltip.\r\n     */\r\n    private _debouncedTooltip = Debounce((pos: PerfTooltipHoverPosition | null, drawableArea: GraphDrawableArea) => {\r\n        this._preprocessTooltip(pos, drawableArea);\r\n        this._drawTooltip(pos, drawableArea);\r\n    }, TooltipDebounceTime);\r\n\r\n    /**\r\n     * Handles what to do when we stop hovering over the canvas.\r\n     */\r\n    private _handleStopHover = () => {\r\n        this._hoverPosition = null;\r\n    };\r\n\r\n    /**\r\n     * Given a line defined by P1: (x1, y1) and P2: (x2, y2) get the distance of P0 (x0, y0) from the line.\r\n     * https://en.wikipedia.org/wiki/Distance_from_a_point_to_a_line#Line_defined_by_two_points\r\n     * @param x1 x position of point P1\r\n     * @param y1 y position of point P1\r\n     * @param x2 x position of point P2\r\n     * @param y2 y position of point P2\r\n     * @param x0 x position of point P0\r\n     * @param y0 y position of point P0\r\n     * @returns distance of P0 from the line defined by P1 and P2\r\n     */\r\n    private _getDistanceFromLine(x1: number, y1: number, x2: number, y2: number, x0: number, y0: number): number {\r\n        // if P1 and P2 are the same we just get the distance between P1 and P0\r\n        if (x1 === x2 && y1 === y2) {\r\n            return Math.sqrt(Math.pow(x1 - x0, 2) + Math.pow(y1 - y0, 2));\r\n        }\r\n\r\n        // next we want to handle the case where our point is beyond the y position of our line\r\n        let topX = 0;\r\n        let topY = 0;\r\n        let bottomX = 0;\r\n        let bottomY = 0;\r\n        if (y1 >= y2) {\r\n            topX = x1;\r\n            topY = y1;\r\n            bottomX = x2;\r\n            bottomY = y2;\r\n        } else {\r\n            topX = x2;\r\n            topY = y2;\r\n            bottomX = x1;\r\n            bottomY = y1;\r\n        }\r\n\r\n        if (y0 < bottomY) {\r\n            return Math.sqrt(Math.pow(bottomX - x0, 2) + Math.pow(bottomY - y0, 2));\r\n        }\r\n\r\n        if (y0 > topY) {\r\n            return Math.sqrt(Math.pow(topX - x0, 2) + Math.pow(topY - y0, 2));\r\n        }\r\n\r\n        // the general case!\r\n        const numerator = Math.abs((x2 - x1) * (y1 - y0) - (x1 - x0) * (y2 - y1));\r\n        const denominator = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));\r\n        return numerator / denominator;\r\n    }\r\n\r\n    /**\r\n     * This method does preprocessing calculations for the tooltip.\r\n     * @param pos the position of our mouse.\r\n     * @param drawableArea the remaining drawable area.\r\n     */\r\n    private _preprocessTooltip(pos: PerfTooltipHoverPosition | null, drawableArea: GraphDrawableArea) {\r\n        const { _ctx: ctx } = this;\r\n\r\n        if (pos === null || !ctx || !ctx.canvas || this._getNumberOfSlices() === 0) {\r\n            return;\r\n        }\r\n\r\n        const { left, top } = ctx.canvas.getBoundingClientRect();\r\n        const adjustedYPos = pos.yPos - top;\r\n        let adjustedXPos = pos.xPos - left;\r\n        if (adjustedXPos > drawableArea.right) {\r\n            adjustedXPos = drawableArea.right;\r\n        }\r\n\r\n        // convert the mouse x position in pixels to a timestamp.\r\n        const inferredTimestamp = this._getNumberFromPixel(adjustedXPos, this._globalTimeMinMax, drawableArea.left, drawableArea.right, false);\r\n\r\n        let longestText: string = \"\";\r\n        let numberOfTooltipItems = 0;\r\n\r\n        // get the closest timestamps to the target timestamp, and store the appropriate meta object.\r\n        const closestIndex = this._getClosestPointToTimestamp(inferredTimestamp);\r\n        let actualTimestamp: number = 0;\r\n        let closestLineId: string = \"\";\r\n        let closestLineValueMinMax: PerfMinMax = { min: 0, max: 0 };\r\n        let closestLineDistance: number = Number.POSITIVE_INFINITY;\r\n\r\n        for (let idOffset = 0; idOffset < this.datasets.ids.length; idOffset++) {\r\n            const id = this.datasets.ids[idOffset];\r\n            if (this.metadata.get(id)?.hidden) {\r\n                continue;\r\n            }\r\n\r\n            const numPoints = this.datasets.data.at(this.datasets.startingIndices.at(closestIndex) + PerformanceViewerCollector.NumberOfPointsOffset);\r\n\r\n            if (idOffset >= numPoints) {\r\n                continue;\r\n            }\r\n\r\n            const valueAtClosestPointIndex = this.datasets.startingIndices.at(closestIndex) + PerformanceViewerCollector.SliceDataOffset + idOffset;\r\n            const valueAtClosestPoint = this.datasets.data.at(valueAtClosestPointIndex);\r\n\r\n            let valueMinMax: PerfMinMax | undefined;\r\n\r\n            // we would have already calculated  the min and max while getting the tickers, so use those, and get first one.\r\n            for (let i = 0; i < this._numberOfTickers; i++) {\r\n                if (this._tickerItems[i].id === id) {\r\n                    valueMinMax = this._tickerItems[i];\r\n                }\r\n            }\r\n\r\n            if (!valueMinMax) {\r\n                continue;\r\n            }\r\n\r\n            actualTimestamp = this.datasets.data.at(this.datasets.startingIndices.at(closestIndex));\r\n            const valueAtClosestPointYPos = this._getPixelForNumber(valueAtClosestPoint, valueMinMax, drawableArea.top, drawableArea.bottom - drawableArea.top, true);\r\n            const xForActualTimestamp = this._getPixelForNumber(actualTimestamp, this._globalTimeMinMax, drawableArea.left, drawableArea.right - drawableArea.left, false);\r\n\r\n            const text = `${id}: ${valueAtClosestPoint.toFixed(2)}`;\r\n\r\n            if (text.length > longestText.length) {\r\n                longestText = text;\r\n            }\r\n\r\n            this._tooltipItems[numberOfTooltipItems].text = text;\r\n            this._tooltipItems[numberOfTooltipItems].color = this.metadata.get(id)?.color ?? DefaultColor;\r\n            numberOfTooltipItems++;\r\n            // don't process rest if we aren't panned.\r\n            if (!this._position) {\r\n                continue;\r\n            }\r\n\r\n            // initially distance between closest data point and mouse point.\r\n            let distance: number = this._getDistanceFromLine(\r\n                xForActualTimestamp,\r\n                valueAtClosestPointYPos,\r\n                xForActualTimestamp,\r\n                valueAtClosestPointYPos,\r\n                pos.xPos - left,\r\n                adjustedYPos\r\n            );\r\n\r\n            // get the shortest distance between the point and the line segment infront, and line segment behind, store the shorter distance (if shorter than distance between closest data point and mouse).\r\n            if (\r\n                closestIndex + 1 < this.datasets.data.itemLength &&\r\n                this.datasets.data.at(this.datasets.startingIndices.at(closestIndex + 1) + PerformanceViewerCollector.NumberOfPointsOffset) > idOffset\r\n            ) {\r\n                const secondPointTimestamp = this.datasets.data.at(this.datasets.startingIndices.at(closestIndex + 1));\r\n                const secondPointX = this._getPixelForNumber(secondPointTimestamp, this._globalTimeMinMax, drawableArea.left, drawableArea.right - drawableArea.left, false);\r\n                const secondPointValue = this.datasets.data.at(this.datasets.startingIndices.at(closestIndex + 1) + PerformanceViewerCollector.SliceDataOffset + idOffset);\r\n                const secondPointY = this._getPixelForNumber(secondPointValue, valueMinMax, drawableArea.top, drawableArea.bottom - drawableArea.top, true);\r\n                distance = Math.min(this._getDistanceFromLine(xForActualTimestamp, valueAtClosestPointYPos, secondPointX, secondPointY, pos.xPos - left, adjustedYPos), distance);\r\n            }\r\n\r\n            if (closestIndex - 1 >= 0 && this.datasets.data.at(this.datasets.startingIndices.at(closestIndex + 1) + PerformanceViewerCollector.NumberOfPointsOffset) > idOffset) {\r\n                const secondPointTimestamp = this.datasets.data.at(this.datasets.startingIndices.at(closestIndex - 1));\r\n                const secondPointX = this._getPixelForNumber(secondPointTimestamp, this._globalTimeMinMax, drawableArea.left, drawableArea.right - drawableArea.left, false);\r\n                const secondPointValue = this.datasets.data.at(this.datasets.startingIndices.at(closestIndex - 1) + PerformanceViewerCollector.SliceDataOffset + idOffset);\r\n                const secondPointY = this._getPixelForNumber(secondPointValue, valueMinMax, drawableArea.top, drawableArea.bottom - drawableArea.top, true);\r\n                distance = Math.min(this._getDistanceFromLine(xForActualTimestamp, valueAtClosestPointYPos, secondPointX, secondPointY, pos.xPos - left, adjustedYPos), distance);\r\n            }\r\n\r\n            if (distance < closestLineDistance) {\r\n                closestLineId = id;\r\n                closestLineDistance = distance;\r\n                closestLineValueMinMax = valueMinMax;\r\n            }\r\n        }\r\n\r\n        const xForActualTimestamp = this._getPixelForNumber(actualTimestamp, this._globalTimeMinMax, drawableArea.left, drawableArea.right - drawableArea.left, false);\r\n\r\n        this._preprocessedTooltipInfo.xForActualTimestamp = xForActualTimestamp;\r\n        // check if hover is within a certain distance, if so it is our only item in our tooltip.\r\n        if (closestLineDistance <= MaxDistanceForHover && this._position) {\r\n            this._preprocessedTooltipInfo.focusedId = closestLineId;\r\n            const inferredValue = this._getNumberFromPixel(adjustedYPos, closestLineValueMinMax, drawableArea.top, drawableArea.bottom, true);\r\n            const closestLineText = `${closestLineId}: ${inferredValue.toFixed(2)}`;\r\n            this._preprocessedTooltipInfo.longestText = closestLineText;\r\n            this._preprocessedTooltipInfo.numberOfTooltipItems = 1;\r\n            this._tooltipItems[0].text = closestLineText;\r\n            this._tooltipItems[0].color = this.metadata.get(closestLineId)?.color ?? DefaultColor;\r\n        } else {\r\n            this._preprocessedTooltipInfo.focusedId = \"\";\r\n            this._preprocessedTooltipInfo.longestText = longestText;\r\n            this._preprocessedTooltipInfo.numberOfTooltipItems = numberOfTooltipItems;\r\n        }\r\n    }\r\n    /**\r\n     * Draws the tooltip given the area it is allowed to draw in and the current pixel position.\r\n     *\r\n     * @param pos the position of the mouse cursor in pixels (x, y).\r\n     * @param drawableArea  the available area we can draw in.\r\n     */\r\n    private _drawTooltip(pos: PerfTooltipHoverPosition | null, drawableArea: GraphDrawableArea) {\r\n        const { _ctx: ctx } = this;\r\n\r\n        if (pos === null || !ctx || !ctx.canvas || this._getNumberOfSlices() === 0) {\r\n            return;\r\n        }\r\n\r\n        const { left, top } = ctx.canvas.getBoundingClientRect();\r\n        const { numberOfTooltipItems, xForActualTimestamp, longestText } = this._preprocessedTooltipInfo;\r\n\r\n        ctx.save();\r\n\r\n        // draw pointer triangle\r\n        ctx.fillStyle = PositionIndicatorColor;\r\n        const yTriangle = drawableArea.bottom + TrianglePaddingFromAxisLine;\r\n        ctx.beginPath();\r\n        ctx.moveTo(xForActualTimestamp, yTriangle);\r\n        ctx.lineTo(xForActualTimestamp + TriangleWidth / 2, yTriangle + TriangleHeight);\r\n        ctx.lineTo(xForActualTimestamp - TriangleWidth / 2, yTriangle + TriangleHeight);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n\r\n        ctx.strokeStyle = PositionIndicatorColor;\r\n        ctx.beginPath();\r\n        // draw vertical or horizontal line depending on if focused on a point on the line.\r\n        if (this._preprocessedTooltipInfo.focusedId === \"\") {\r\n            ctx.moveTo(xForActualTimestamp, drawableArea.bottom);\r\n            ctx.lineTo(xForActualTimestamp, TopOfGraphY);\r\n        } else {\r\n            const lineY = pos.yPos - top;\r\n            ctx.moveTo(drawableArea.left, lineY);\r\n            ctx.lineTo(drawableArea.right, lineY);\r\n        }\r\n        ctx.stroke();\r\n\r\n        // draw the actual tooltip\r\n        ctx.font = GraphAddonFont;\r\n        ctx.textBaseline = \"middle\";\r\n        ctx.textAlign = \"left\";\r\n\r\n        const boxLength = this._addonFontLineHeight;\r\n        const textHeight = this._addonFontLineHeight + Math.floor(TooltipHorizontalPadding / 2);\r\n\r\n        // initialize width with cached value or measure width of longest text and update cache.\r\n        let width: number;\r\n        if (longestText === this._tooltipTextCache.text) {\r\n            width = this._tooltipTextCache.width;\r\n        } else {\r\n            width = ctx.measureText(longestText).width + boxLength + 2 * TooltipHorizontalPadding + SpaceBetweenTextAndBox;\r\n            this._tooltipTextCache.text = longestText;\r\n            this._tooltipTextCache.width = width;\r\n        }\r\n\r\n        const tooltipHeight = textHeight * (numberOfTooltipItems + 1);\r\n        let x = pos.xPos - left;\r\n        let y = drawableArea.bottom - TooltipPaddingFromBottom - tooltipHeight;\r\n\r\n        // We want the tool tip to always be inside the canvas so we adjust which way it is drawn.\r\n        if (x + width > this._width) {\r\n            x -= width;\r\n        }\r\n\r\n        ctx.globalAlpha = TooltipBackgroundAlpha;\r\n        ctx.fillStyle = TooltipBackgroundColor;\r\n\r\n        ctx.fillRect(x, y, width, tooltipHeight);\r\n\r\n        ctx.globalAlpha = DefaultAlpha;\r\n\r\n        x += TooltipHorizontalPadding;\r\n        y += textHeight;\r\n\r\n        for (let i = 0; i < numberOfTooltipItems; i++) {\r\n            const tooltipItem = this._tooltipItems[i];\r\n\r\n            ctx.fillStyle = tooltipItem.color;\r\n            ctx.fillRect(x, y - Math.floor(boxLength / 2), boxLength, boxLength);\r\n            ctx.fillStyle = TooltipForegroundColor;\r\n            ctx.fillText(tooltipItem.text, x + boxLength + SpaceBetweenTextAndBox, y);\r\n            y += textHeight;\r\n        }\r\n\r\n        ctx.restore();\r\n    }\r\n\r\n    /**\r\n     * Gets the number from a pixel position given the minimum and maximum value in range, and the starting pixel and the ending pixel.\r\n     *\r\n     * @param pixel current pixel position we want to get the number for.\r\n     * @param minMax the minimum and maximum number in the range.\r\n     * @param startingPixel position of the starting pixel in range.\r\n     * @param endingPixel position of ending pixel in range.\r\n     * @param shouldFlip if we should use a [1, 0] scale instead of a [0, 1] scale.\r\n     * @returns number corresponding to pixel position\r\n     */\r\n    private _getNumberFromPixel(pixel: number, minMax: PerfMinMax, startingPixel: number, endingPixel: number, shouldFlip: boolean): number {\r\n        // normalize pixel to range [0, 1].\r\n        let normalizedPixelPosition = (pixel - startingPixel) / (endingPixel - startingPixel);\r\n\r\n        // we should use a [1, 0] scale instead.\r\n        if (shouldFlip) {\r\n            normalizedPixelPosition = 1 - normalizedPixelPosition;\r\n        }\r\n\r\n        return minMax.min + normalizedPixelPosition * (minMax.max - minMax.min);\r\n    }\r\n\r\n    /**\r\n     * The handler for when we want to zoom in and out of the graph.\r\n     *\r\n     * @param event a mouse wheel event.\r\n     */\r\n    private _handleZoom = (event: WheelEvent) => {\r\n        event.preventDefault();\r\n\r\n        if (!event.deltaY) {\r\n            return;\r\n        }\r\n\r\n        const amount = ((event.deltaY * -0.01) | 0) * 100;\r\n        const minZoom = 60;\r\n\r\n        // The max zoom is the number of slices.\r\n        const maxZoom = this._getNumberOfSlices();\r\n\r\n        if (this._shouldBecomeRealtime()) {\r\n            this._position = null;\r\n        }\r\n        // Bind the zoom between [minZoom, maxZoom]\r\n        this._sizeOfWindow = Scalar.Clamp(this._sizeOfWindow - amount, minZoom, maxZoom);\r\n    };\r\n\r\n    /**\r\n     * Initializes the panning object and attaches appropriate listener.\r\n     *\r\n     * @param event the mouse event containing positional information.\r\n     */\r\n    private _handlePanStart = (event: MouseEvent) => {\r\n        const { _ctx: ctx } = this;\r\n        if (!ctx || !ctx.canvas) {\r\n            return;\r\n        }\r\n        const canvas = ctx.canvas;\r\n\r\n        this._panPosition = {\r\n            xPos: event.clientX,\r\n            delta: 0,\r\n        };\r\n        this._hoverPosition = null;\r\n        canvas.addEventListener(\"mousemove\", this._handlePan);\r\n    };\r\n\r\n    /**\r\n     * While panning this event will keep track of the delta and update the \"positions\".\r\n     *\r\n     * @param event The mouse event that contains positional information.\r\n     */\r\n    private _handlePan = (event: MouseEvent) => {\r\n        if (!this._panPosition || this._getNumberOfSlices() === 0) {\r\n            return;\r\n        }\r\n\r\n        const pixelDelta = this._panPosition.delta + event.clientX - this._panPosition.xPos;\r\n        const pixelsPerItem = (this._drawableArea.right - this._drawableArea.left) / this._sizeOfWindow;\r\n        const itemsDelta = (pixelDelta / pixelsPerItem) | 0;\r\n        const pos = this._position ?? this._getNumberOfSlices() - 1;\r\n\r\n        // update our position without allowing the user to pan more than they need to (approximation)\r\n        this._position = Scalar.Clamp(\r\n            pos - itemsDelta,\r\n            Math.floor(this._sizeOfWindow * ScaleFactor),\r\n            this._getNumberOfSlices() - Math.floor(this._sizeOfWindow * (1 - ScaleFactor))\r\n        );\r\n\r\n        if (itemsDelta === 0) {\r\n            this._panPosition.delta += pixelDelta;\r\n        } else {\r\n            this._panPosition.delta = 0;\r\n        }\r\n\r\n        this._panPosition.xPos = event.clientX;\r\n        this._prevPointById.clear();\r\n        this._prevValueById.clear();\r\n    };\r\n\r\n    /**\r\n     * Clears the panning object and removes the appropriate listener.\r\n     */\r\n    private _handlePanStop = () => {\r\n        const { _ctx: ctx } = this;\r\n        if (!ctx || !ctx.canvas) {\r\n            return;\r\n        }\r\n\r\n        // check if we should return to realtime.\r\n        if (this._shouldBecomeRealtime()) {\r\n            this._position = null;\r\n        }\r\n\r\n        const canvas = ctx.canvas;\r\n        canvas.removeEventListener(\"mousemove\", this._handlePan);\r\n        this._panPosition = null;\r\n    };\r\n\r\n    /**\r\n     * Method which returns true if the data should become realtime, false otherwise.\r\n     *\r\n     * @returns if the data should become realtime or not.\r\n     */\r\n    private _shouldBecomeRealtime(): boolean {\r\n        if (this._getNumberOfSlices() === 0) {\r\n            return false;\r\n        }\r\n\r\n        // we need to compare our current slice to the latest slice to see if we should return to realtime mode.\r\n        const pos = this._position;\r\n        const latestSlicePos = this._getNumberOfSlices() - 1;\r\n\r\n        if (pos === null) {\r\n            return false;\r\n        }\r\n\r\n        // account for overflow on the left side only as it will be the one determining if we have sufficiently caught up to the realtime data.\r\n        const overflow = Math.max(0 - (pos - Math.ceil(this._sizeOfWindow * ScaleFactor)), 0);\r\n        const rightmostPos = Math.min(overflow + pos + Math.ceil(this._sizeOfWindow * (1 - ScaleFactor)), latestSlicePos);\r\n\r\n        return (\r\n            this.datasets.data.at(this.datasets.startingIndices.at(rightmostPos)) / this.datasets.data.at(this.datasets.startingIndices.at(latestSlicePos)) > ReturnToLiveThreshold\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Will generate a playhead with a futurebox that takes up (1-scalefactor)*100% of the canvas.\r\n     *\r\n     * @param drawableArea The remaining drawable area.\r\n     * @param scaleFactor The Percentage between 0.0 and 1.0 of the canvas the data gets drawn on.\r\n     */\r\n    private _drawPlayheadRegion(drawableArea: GraphDrawableArea, scaleFactor: number) {\r\n        const { _ctx: ctx } = this;\r\n\r\n        if (!ctx || scaleFactor >= StopDrawingPlayheadThreshold) {\r\n            return;\r\n        }\r\n\r\n        const dividerXPos = Math.ceil(drawableArea.right * scaleFactor);\r\n        const playheadPos = dividerXPos - PlayheadSize;\r\n        const futureBoxPos = dividerXPos + DividerSize;\r\n\r\n        const rectangleHeight = drawableArea.bottom - drawableArea.top - 1;\r\n\r\n        ctx.save();\r\n\r\n        ctx.fillStyle = FutureBoxColor;\r\n        ctx.fillRect(futureBoxPos, drawableArea.top, drawableArea.right - futureBoxPos, rectangleHeight);\r\n\r\n        ctx.fillStyle = DividerColor;\r\n        ctx.fillRect(dividerXPos, drawableArea.top, DividerSize, rectangleHeight);\r\n\r\n        ctx.fillStyle = PlayheadColor;\r\n        ctx.fillRect(playheadPos, drawableArea.top, PlayheadSize, rectangleHeight);\r\n\r\n        ctx.restore();\r\n    }\r\n\r\n    /**\r\n     *  Method to do cleanup when the object is done being used.\r\n     *\r\n     */\r\n    public destroy() {\r\n        if (!this._ctx || !this._ctx.canvas) {\r\n            return;\r\n        }\r\n\r\n        this._removeEventListeners(this._ctx.canvas);\r\n        this._ctx = null;\r\n    }\r\n\r\n    /**\r\n     * This method clears the canvas\r\n     */\r\n    public clear() {\r\n        const { _ctx: ctx, _width, _height } = this;\r\n\r\n        // If we do not have a context we can't really do much here!\r\n        if (!ctx) {\r\n            return;\r\n        }\r\n\r\n        // save the transformation matrix, clear the canvas then restore.\r\n        ctx.save();\r\n        ctx.resetTransform();\r\n        ctx.clearRect(0, 0, _width, _height);\r\n        ctx.restore();\r\n    }\r\n}\r\n","import type { PerformanceViewerCollector } from \"core/Misc/PerformanceViewer/performanceViewerCollector\";\r\nimport type { Observable } from \"core/Misc/observable\";\r\nimport type { FunctionComponent } from \"react\";\r\nimport type { PerfLayoutSize, VisibleRangeChangedObservableProps } from \"./graphSupportingTypes\";\r\nimport type { IPerfMetadata } from \"core/Misc/interfaces/iPerfViewer\";\r\nimport type { Scene } from \"core/scene\";\r\nimport type { Vector2 } from \"core/Maths/math.vector\";\r\n\r\nimport { makeStyles } from \"@fluentui/react-components\";\r\nimport { useEffect, useRef } from \"react\";\r\n\r\nimport { CanvasGraphService } from \"./canvasGraphService\";\r\nimport { Logger } from \"core/Misc/logger\";\r\n\r\nconst useStyles = makeStyles({\r\n    canvas: {\r\n        flexGrow: 1,\r\n        width: \"100%\",\r\n        height: \"100%\",\r\n    },\r\n});\r\n\r\ntype CanvasGraphProps = {\r\n    scene: Scene;\r\n    collector: PerformanceViewerCollector;\r\n    layoutObservable?: Observable<PerfLayoutSize>;\r\n    returnToPlayheadObservable?: Observable<void>;\r\n    onVisibleRangeChangedObservable?: Observable<VisibleRangeChangedObservableProps>;\r\n    initialGraphSize?: Vector2;\r\n};\r\n\r\nexport const CanvasGraph: FunctionComponent<CanvasGraphProps> = (props) => {\r\n    const { collector, scene, layoutObservable, returnToPlayheadObservable, onVisibleRangeChangedObservable, initialGraphSize } = props;\r\n    const classes = useStyles();\r\n    const canvasRef = useRef<HTMLCanvasElement | null>(null);\r\n\r\n    useEffect(() => {\r\n        if (!canvasRef.current) {\r\n            return;\r\n        }\r\n\r\n        if (initialGraphSize) {\r\n            canvasRef.current.width = initialGraphSize.x;\r\n            canvasRef.current.height = initialGraphSize.y;\r\n        }\r\n\r\n        let cs: CanvasGraphService | undefined;\r\n\r\n        try {\r\n            cs = new CanvasGraphService(canvasRef.current, { datasets: collector.datasets, onVisibleRangeChangedObservable });\r\n        } catch (error) {\r\n            Logger.Error(error as string);\r\n            return;\r\n        }\r\n\r\n        const layoutUpdated = (newSize: PerfLayoutSize) => {\r\n            if (!canvasRef.current) {\r\n                return;\r\n            }\r\n            const { left, top } = canvasRef.current.getBoundingClientRect();\r\n            newSize.width = newSize.width - left;\r\n            newSize.height = newSize.height - top;\r\n            cs?.resize(newSize);\r\n        };\r\n\r\n        const dataUpdated = () => {\r\n            cs?.update();\r\n        };\r\n\r\n        const metaUpdated = (meta: Map<string, IPerfMetadata>) => {\r\n            if (!cs) {\r\n                return;\r\n            }\r\n            cs.metadata = meta;\r\n            cs.update();\r\n        };\r\n\r\n        const resetDataPosition = () => {\r\n            cs?.resetDataPosition();\r\n        };\r\n\r\n        scene.onAfterRenderObservable.add(dataUpdated);\r\n        collector.metadataObservable.add(metaUpdated);\r\n\r\n        layoutObservable?.add(layoutUpdated);\r\n        returnToPlayheadObservable?.add(resetDataPosition);\r\n        return () => {\r\n            cs?.destroy();\r\n            layoutObservable?.removeCallback(layoutUpdated);\r\n            scene.onAfterRenderObservable.removeCallback(dataUpdated);\r\n            collector.metadataObservable.removeCallback(metaUpdated);\r\n        };\r\n    }, [canvasRef, collector, scene, layoutObservable, returnToPlayheadObservable, onVisibleRangeChangedObservable, initialGraphSize]);\r\n\r\n    return <canvas className={classes.canvas} ref={canvasRef}></canvas>;\r\n};\r\n","import { SpinButton as FluentSpinButton, mergeClasses, useId } from \"@fluentui/react-components\";\r\nimport type { SpinButtonOnChangeData, SpinButtonChangeEvent } from \"@fluentui/react-components\";\r\nimport type { KeyboardEvent } from \"react\";\r\nimport { forwardRef, useEffect, useState, useRef, useContext } from \"react\";\r\nimport type { PrimitiveProps } from \"./primitive\";\r\nimport { InfoLabel } from \"./infoLabel\";\r\nimport { CalculatePrecision, HandleKeyDown, HandleOnBlur, useInputStyles } from \"./utils\";\r\nimport { ToolContext } from \"../hoc/fluentToolWrapper\";\r\n\r\nexport type SpinButtonProps = PrimitiveProps<number> & {\r\n    min?: number;\r\n    max?: number;\r\n    /** Determines how much the spinbutton increments with the arrow keys. Note this also determines the precision value (# of decimals in display value)\r\n     * i.e. if step = 1, precision = 0. step = 0.0089, precision = 4. step = 300, precision = 2. step = 23.00, precision = 2. */\r\n    step?: number;\r\n    unit?: string;\r\n    forceInt?: boolean;\r\n    validator?: (value: number) => boolean;\r\n    /** Optional className for the input element */\r\n    inputClassName?: string;\r\n};\r\n\r\nexport const SpinButton = forwardRef<HTMLInputElement, SpinButtonProps>((props, ref) => {\r\n    SpinButton.displayName = \"SpinButton\";\r\n    const classes = useInputStyles();\r\n    const { size } = useContext(ToolContext);\r\n\r\n    const { min, max } = props;\r\n\r\n    const [value, setValue] = useState(props.value);\r\n    const lastCommittedValue = useRef(props.value);\r\n    // step and forceInt are not mutually exclusive since there could be cases where you want to forceInt but have spinButton jump >1 int per spin\r\n    const step = props.step != undefined ? props.step : props.forceInt ? 1 : undefined;\r\n    const precision = Math.min(4, step !== undefined ? Math.max(0, CalculatePrecision(step)) : 2); // If no step, set precision to 2. Regardless, cap precision at 4 to avoid wild numbers\r\n\r\n    useEffect(() => {\r\n        if (props.value !== lastCommittedValue.current) {\r\n            lastCommittedValue.current = props.value;\r\n            setValue(props.value); // Update local state when props.value changes\r\n        }\r\n    }, [props.value]);\r\n\r\n    const validateValue = (numericValue: number): boolean => {\r\n        const outOfBounds = (min !== undefined && numericValue < min) || (max !== undefined && numericValue > max);\r\n        const failsValidator = props.validator && !props.validator(numericValue);\r\n        const failsIntCheck = props.forceInt ? !Number.isInteger(numericValue) : false;\r\n        const invalid = !!outOfBounds || !!failsValidator || isNaN(numericValue) || !!failsIntCheck;\r\n        return !invalid;\r\n    };\r\n\r\n    const tryCommitValue = (currVal: number) => {\r\n        // Only commit if valid and different from last committed value\r\n        if (validateValue(currVal) && currVal !== lastCommittedValue.current) {\r\n            lastCommittedValue.current = currVal;\r\n            props.onChange(currVal);\r\n        }\r\n    };\r\n\r\n    const handleChange = (event: SpinButtonChangeEvent, data: SpinButtonOnChangeData) => {\r\n        event.stopPropagation(); // Prevent event propagation\r\n        if (data.value != null && !Number.isNaN(data.value)) {\r\n            setValue(data.value);\r\n            tryCommitValue(data.value);\r\n        }\r\n    };\r\n\r\n    const handleKeyUp = (event: KeyboardEvent<HTMLInputElement>) => {\r\n        event.stopPropagation(); // Prevent event propagation\r\n\r\n        if (event.key !== \"Enter\") {\r\n            const currVal = parseFloat((event.target as any).value); // Cannot use currentTarget.value as it won't have the most recently typed value\r\n            setValue(currVal);\r\n            tryCommitValue(currVal);\r\n        }\r\n    };\r\n\r\n    const id = useId(\"spin-button\");\r\n    const mergedClassName = mergeClasses(classes.input, !validateValue(value) ? classes.invalid : \"\", props.className);\r\n\r\n    // Build input slot from inputClassName\r\n    const inputSlot = {\r\n        className: mergeClasses(classes.inputSlot, props.inputClassName),\r\n    };\r\n\r\n    const spinButton = (\r\n        <FluentSpinButton\r\n            ref={ref}\r\n            {...props}\r\n            appearance=\"outline\"\r\n            input={inputSlot}\r\n            step={step}\r\n            id={id}\r\n            size={size}\r\n            precision={precision}\r\n            displayValue={`${value.toFixed(precision)}${props.unit ? \" \" + props.unit : \"\"}`}\r\n            value={value}\r\n            onChange={handleChange}\r\n            onKeyUp={handleKeyUp}\r\n            onKeyDown={HandleKeyDown}\r\n            onBlur={HandleOnBlur}\r\n            className={mergedClassName}\r\n        />\r\n    );\r\n\r\n    return props.infoLabel ? (\r\n        <div className={classes.container}>\r\n            <InfoLabel {...props.infoLabel} htmlFor={id} />\r\n            {spinButton}\r\n        </div>\r\n    ) : (\r\n        spinButton\r\n    );\r\n});\r\n","import type { FunctionComponent, KeyboardEvent, ChangeEvent, FocusEvent } from \"react\";\r\nimport { useContext, useEffect, useRef, useState } from \"react\";\r\nimport type { InputOnChangeData } from \"@fluentui/react-components\";\r\nimport { Input as FluentInput, mergeClasses, useId } from \"@fluentui/react-components\";\r\nimport type { PrimitiveProps } from \"./primitive\";\r\nimport { InfoLabel } from \"./infoLabel\";\r\nimport { HandleKeyDown, HandleOnBlur, useInputStyles } from \"./utils\";\r\nimport { ToolContext } from \"../hoc/fluentToolWrapper\";\r\n\r\nexport type TextInputProps = PrimitiveProps<string> & {\r\n    validator?: (value: string) => boolean;\r\n    validateOnlyOnBlur?: boolean;\r\n};\r\n\r\nexport const TextInput: FunctionComponent<TextInputProps> = (props) => {\r\n    TextInput.displayName = \"TextInput\";\r\n    const classes = useInputStyles();\r\n    const [value, setValue] = useState(props.value);\r\n    const lastCommittedValue = useRef(props.value);\r\n    const { size } = useContext(ToolContext);\r\n    useEffect(() => {\r\n        if (props.value !== lastCommittedValue.current) {\r\n            setValue(props.value); // Update local state when props.value changes\r\n            lastCommittedValue.current = props.value;\r\n        }\r\n    }, [props.value]);\r\n\r\n    const validateValue = (val: string): boolean => {\r\n        const failsValidator = props.validator && !props.validator(val);\r\n        return !failsValidator;\r\n    };\r\n\r\n    const tryCommitValue = (currVal: string) => {\r\n        // Only commit if valid and different from last committed value\r\n        if (validateValue(currVal) && currVal !== lastCommittedValue.current) {\r\n            lastCommittedValue.current = currVal;\r\n            props.onChange(currVal);\r\n        }\r\n    };\r\n\r\n    const handleChange = (event: ChangeEvent<HTMLInputElement>, data: InputOnChangeData) => {\r\n        event.stopPropagation();\r\n        setValue(data.value);\r\n        if (!props.validateOnlyOnBlur) {\r\n            tryCommitValue(data.value);\r\n        }\r\n    };\r\n\r\n    const handleKeyUp = (event: KeyboardEvent<HTMLInputElement>) => {\r\n        event.stopPropagation();\r\n        if (!props.validateOnlyOnBlur) {\r\n            tryCommitValue(event.currentTarget.value);\r\n        }\r\n    };\r\n    const handleBlur = (event: FocusEvent<HTMLInputElement>) => {\r\n        HandleOnBlur(event);\r\n        if (props.validateOnlyOnBlur) {\r\n            tryCommitValue(event.currentTarget.value);\r\n        }\r\n    };\r\n\r\n    const mergedClassName = mergeClasses(classes.input, !validateValue(value) ? classes.invalid : \"\", props.className);\r\n\r\n    const id = useId(\"input-button\");\r\n    return (\r\n        <div className={classes.container}>\r\n            {props.infoLabel && <InfoLabel {...props.infoLabel} htmlFor={id} />}\r\n            <FluentInput\r\n                {...props}\r\n                input={{ className: classes.inputSlot }}\r\n                id={id}\r\n                size={size}\r\n                value={value}\r\n                onChange={handleChange}\r\n                onKeyUp={handleKeyUp}\r\n                onKeyDown={HandleKeyDown}\r\n                onBlur={handleBlur}\r\n                className={mergedClassName}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n","import { Dropdown as FluentDropdown, makeStyles, mergeClasses, Option, useId } from \"@fluentui/react-components\";\r\nimport { useContext, useEffect, useState } from \"react\";\r\nimport type { FunctionComponent } from \"react\";\r\nimport type { PrimitiveProps } from \"./primitive\";\r\nimport { InfoLabel } from \"./infoLabel\";\r\nimport { ToolContext } from \"../hoc/fluentToolWrapper\";\r\n\r\nconst useDropdownStyles = makeStyles({\r\n    dropdown: {\r\n        minWidth: 0,\r\n        width: \"100%\",\r\n    },\r\n    container: {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        justifyContent: \"center\", // align items vertically\r\n    },\r\n    dropdownText: { textAlign: \"end\", textOverflow: \"ellipsis\", whiteSpace: \"nowrap\", overflowX: \"hidden\" },\r\n});\r\n\r\nexport type AcceptedDropdownValue = string | number;\r\nexport type DropdownOption<T extends AcceptedDropdownValue> = {\r\n    /**\r\n     * Defines the visible part of the option\r\n     */\r\n    label: string;\r\n    /**\r\n     * Defines the value part of the option\r\n     */\r\n    value: T;\r\n};\r\n\r\nexport type DropdownProps<V extends AcceptedDropdownValue> = PrimitiveProps<V> & {\r\n    options: readonly DropdownOption<V>[];\r\n};\r\n\r\n/**\r\n * Renders a fluent UI dropdown component for the options passed in, and an additional 'Not Defined' option if null is set to true\r\n * This component can handle both null and undefined values\r\n * @param props\r\n * @returns dropdown component\r\n */\r\nexport const Dropdown: FunctionComponent<DropdownProps<AcceptedDropdownValue>> = (props) => {\r\n    Dropdown.displayName = \"Dropdown\";\r\n    const classes = useDropdownStyles();\r\n    const { options, value } = props;\r\n    const [defaultVal, setDefaultVal] = useState(props.value);\r\n    const { size } = useContext(ToolContext);\r\n\r\n    useEffect(() => {\r\n        setDefaultVal(value);\r\n    }, [props.value]);\r\n    const id = useId(\"dropdown\");\r\n\r\n    const mergedClassName = mergeClasses(classes.container, props.className);\r\n\r\n    const optionLabel = options.find((o) => o.value === defaultVal)?.label;\r\n\r\n    return (\r\n        <div className={mergedClassName}>\r\n            {props.infoLabel && <InfoLabel {...props.infoLabel} htmlFor={id} />}\r\n            <FluentDropdown\r\n                id={id}\r\n                disabled={props.disabled}\r\n                size={size}\r\n                className={classes.dropdown}\r\n                button={<span className={classes.dropdownText}>{optionLabel}</span>}\r\n                onOptionSelect={(evt, data) => {\r\n                    const value = typeof props.value === \"number\" ? Number(data.optionValue) : data.optionValue;\r\n                    if (value !== undefined) {\r\n                        setDefaultVal(value);\r\n                        props.onChange(value);\r\n                    }\r\n                }}\r\n                selectedOptions={[defaultVal.toString()]}\r\n                value={optionLabel}\r\n            >\r\n                {options.map((option: DropdownOption<AcceptedDropdownValue>) => (\r\n                    <Option key={option.label} value={option.value.toString()} disabled={false}>\r\n                        {option.label}\r\n                    </Option>\r\n                ))}\r\n            </FluentDropdown>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport const NumberDropdown = Dropdown as FunctionComponent<DropdownProps<number>>;\r\nexport const StringDropdown = Dropdown as FunctionComponent<DropdownProps<string>>;\r\n","import type { PropsWithChildren, ReactElement } from \"react\";\r\nimport { forwardRef, useState } from \"react\";\r\nimport { Popover as FluentPopover, PopoverTrigger, PopoverSurface, makeStyles, tokens } from \"@fluentui/react-components\";\r\nimport type { PositioningShorthand } from \"@fluentui/react-components\";\r\nimport type { FluentIcon } from \"@fluentui/react-icons\";\r\nimport { Button } from \"shared-ui-components/fluent/primitives/button\";\r\n\r\nconst useStyles = makeStyles({\r\n    surface: {\r\n        maxWidth: \"400px\",\r\n    },\r\n    content: {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        gap: tokens.spacingVerticalM,\r\n        padding: tokens.spacingHorizontalL,\r\n        minWidth: \"300px\",\r\n    },\r\n});\r\n\r\ntype PopoverWithIconProps = {\r\n    icon: FluentIcon;\r\n    trigger?: never;\r\n};\r\n\r\ntype PopoverWithTriggerProps = {\r\n    icon?: never;\r\n    trigger: ReactElement;\r\n};\r\n\r\ntype PopoverBaseProps = {\r\n    /** Controlled open state */\r\n    open?: boolean;\r\n    /** Callback when open state changes */\r\n    onOpenChange?: (open: boolean) => void;\r\n    /** Positioning of the popover */\r\n    positioning?: PositioningShorthand;\r\n    /** Custom class for the surface */\r\n    surfaceClassName?: string;\r\n};\r\n\r\ntype PopoverProps = PopoverBaseProps & (PopoverWithIconProps | PopoverWithTriggerProps);\r\n\r\nexport const Popover = forwardRef<HTMLButtonElement, PropsWithChildren<PopoverProps>>((props, ref) => {\r\n    const { children, open: controlledOpen, onOpenChange, positioning, surfaceClassName } = props;\r\n    const [internalOpen, setInternalOpen] = useState(false);\r\n    const classes = useStyles();\r\n\r\n    const isControlled = controlledOpen !== undefined;\r\n    const popoverOpen = isControlled ? controlledOpen : internalOpen;\r\n\r\n    const handleOpenChange = (_: unknown, data: { open: boolean }) => {\r\n        if (!isControlled) {\r\n            setInternalOpen(data.open);\r\n        }\r\n        onOpenChange?.(data.open);\r\n    };\r\n\r\n    return (\r\n        <FluentPopover\r\n            open={popoverOpen}\r\n            onOpenChange={handleOpenChange}\r\n            positioning={\r\n                positioning ?? {\r\n                    align: \"start\",\r\n                    overflowBoundary: document.body,\r\n                    autoSize: true,\r\n                }\r\n            }\r\n        >\r\n            <PopoverTrigger disableButtonEnhancement>\r\n                {props.trigger ?? <Button ref={ref} icon={props.icon} onClick={() => handleOpenChange(null, { open: true })} />}\r\n            </PopoverTrigger>\r\n            <PopoverSurface className={surfaceClassName ?? classes.surface}>\r\n                <div className={classes.content}>{children}</div>\r\n            </PopoverSurface>\r\n        </FluentPopover>\r\n    );\r\n});\r\n\r\nPopover.displayName = \"Popover\";\r\n","/* eslint-disable jsdoc/require-returns */\r\n/* eslint-disable @typescript-eslint/naming-convention */\r\nimport { forwardRef, useState, useEffect, useCallback, useContext } from \"react\";\r\nimport type { FunctionComponent } from \"react\";\r\nimport { ColorPicker as FluentColorPicker, ColorSlider, ColorArea, AlphaSlider, makeStyles, tokens, Body1Strong, ColorSwatch, Body1 } from \"@fluentui/react-components\";\r\nimport type { ColorPickerProps as FluentColorPickerProps } from \"@fluentui/react-components\";\r\nimport { Color3, Color4 } from \"core/Maths/math.color\";\r\nimport type { PrimitiveProps } from \"./primitive\";\r\nimport { SpinButton } from \"./spinButton\";\r\nimport { TextInput } from \"./textInput\";\r\nimport { NumberDropdown } from \"./dropdown\";\r\nimport { ValidateColorHex } from \"./utils\";\r\nimport { Link } from \"./link\";\r\nimport { ToolContext } from \"../hoc/fluentToolWrapper\";\r\nimport { Popover } from \"./popover\";\r\n\r\nconst useColorPickerStyles = makeStyles({\r\n    container: {\r\n        width: \"350px\",\r\n        display: \"flex\", // becomes a flexbox\r\n        flexDirection: \"column\", // with children in a column\r\n        alignItems: \"center\", // centers children horizontally\r\n        justifyContent: \"center\", // centers children vertically (if height is set)\r\n        gap: tokens.spacingVerticalM,\r\n        overflow: \"visible\",\r\n    },\r\n    row: {\r\n        flex: 1, // is a row in the container's flex column\r\n        display: \"flex\", // becomes its own flexbox\r\n        flexDirection: \"row\", // with children in a row\r\n        gap: tokens.spacingHorizontalXL,\r\n        alignItems: \"center\", // align items vertically\r\n        width: \"100%\",\r\n    },\r\n    colorPicker: {\r\n        flex: 1,\r\n        width: \"350px\",\r\n        height: \"350px\",\r\n    },\r\n    previewColor: {\r\n        width: \"60px\",\r\n        height: \"60px\",\r\n        borderRadius: tokens.borderRadiusMedium, // 4px?\r\n        border: `${tokens.spacingVerticalXXS} solid ${tokens.colorNeutralShadowKeyLighter}`,\r\n        \"@media (forced-colors: active)\": {\r\n            forcedColorAdjust: \"none\", // ensures elmement maintains color in high constrast mode\r\n        },\r\n    },\r\n    inputRow: {\r\n        display: \"flex\",\r\n        flexDirection: \"row\",\r\n        flex: 1, // grow and fill available space\r\n        justifyContent: \"center\",\r\n        gap: \"10px\",\r\n        width: \"100%\",\r\n    },\r\n    inputField: {\r\n        flex: 1, // grow and fill available space\r\n        width: \"auto\",\r\n        minWidth: 0,\r\n        gap: tokens.spacingVerticalSNudge, // 6px\r\n    },\r\n    trigger: {\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n    },\r\n});\r\n\r\nexport type ColorPickerProps<C extends Color3 | Color4> = {\r\n    isLinearMode?: boolean;\r\n} & PrimitiveProps<C>;\r\n\r\nexport const ColorPickerPopup = forwardRef<HTMLButtonElement, ColorPickerProps<Color3 | Color4>>((props, ref) => {\r\n    ColorPickerPopup.displayName = \"ColorPickerPopup\";\r\n    const { value, onChange, isLinearMode, ...rest } = props;\r\n    const classes = useColorPickerStyles();\r\n    const [color, setColor] = useState(value);\r\n    const [isLinear, setIsLinear] = useState(isLinearMode ?? false);\r\n    const [isFloat, setFloat] = useState(false);\r\n    const { size } = useContext(ToolContext);\r\n    useEffect(() => {\r\n        setColor(value); // Ensures the trigger color updates when props.value changes\r\n    }, [value]);\r\n\r\n    const handleColorPickerChange: FluentColorPickerProps[\"onColorChange\"] = (_, data) => {\r\n        let color: Color3 | Color4 = Color3.FromHSV(data.color.h, data.color.s, data.color.v);\r\n        if (value instanceof Color4) {\r\n            color = Color4.FromColor3(color, data.color.a ?? 1);\r\n        }\r\n        handleChange(color);\r\n    };\r\n\r\n    const handleChange = (newColor: Color3 | Color4) => {\r\n        setColor(newColor);\r\n        onChange(newColor); // Ensures the parent is notified when color changes from within colorPicker\r\n    };\r\n\r\n    return (\r\n        <Popover\r\n            trigger={\r\n                <ColorSwatch\r\n                    className={classes.trigger}\r\n                    ref={ref}\r\n                    {...rest}\r\n                    borderColor={tokens.colorNeutralShadowKeyDarker}\r\n                    size={size === \"small\" ? \"extra-small\" : \"small\"}\r\n                    shape=\"rounded\"\r\n                    color={color.toHexString()}\r\n                    value={color.toHexString().slice(1)}\r\n                />\r\n            }\r\n        >\r\n            <div className={classes.container}>\r\n                <FluentColorPicker className={classes.colorPicker} color={rgbaToHsv(color)} onColorChange={handleColorPickerChange}>\r\n                    <ColorArea inputX={{ \"aria-label\": \"Saturation\" }} inputY={{ \"aria-label\": \"Brightness\" }} />\r\n                    <ColorSlider aria-label=\"Hue\" />\r\n                    {color instanceof Color4 && <AlphaSlider aria-label=\"Alpha\" />}\r\n                </FluentColorPicker>\r\n                {/* Top Row: Preview, Gamma Hex, Linear Hex */}\r\n                <div className={classes.row}>\r\n                    <div className={classes.previewColor} style={{ backgroundColor: color.toHexString() }} />\r\n                    <NumberDropdown\r\n                        className={classes.inputField}\r\n                        infoLabel={{\r\n                            label: \"Color Space\",\r\n                            info: <Body1>Today this is not mutable as the color space is determined by the entity. Soon we will allow swapping</Body1>,\r\n                        }}\r\n                        options={[\r\n                            { label: \"Gamma\", value: 0 },\r\n                            { label: \"Linear\", value: 1 },\r\n                        ]}\r\n                        disabled={true}\r\n                        value={isLinear ? 1 : 0}\r\n                        onChange={(val: number) => setIsLinear(val === 1)}\r\n                    />\r\n                    <NumberDropdown\r\n                        className={classes.inputField}\r\n                        infoLabel={{\r\n                            label: \"Data Type\",\r\n                            info: <Body1>We will introduce this functionality soon!</Body1>,\r\n                        }}\r\n                        options={[\r\n                            { label: \"Int\", value: 0 },\r\n                            { label: \"Float\", value: 1 },\r\n                        ]}\r\n                        disabled={true}\r\n                        value={isFloat ? 1 : 0}\r\n                        onChange={(val: number) => setFloat(val === 1)}\r\n                    />\r\n                </div>\r\n\r\n                {/* Middle Row: Red, Green, Blue, Alpha */}\r\n                <div className={classes.inputRow}>\r\n                    <InputRgbField title=\"Red\" value={color} rgbKey=\"r\" onChange={handleChange} />\r\n                    <InputRgbField title=\"Green\" value={color} rgbKey=\"g\" onChange={handleChange} />\r\n                    <InputRgbField title=\"Blue\" value={color} rgbKey=\"b\" onChange={handleChange} />\r\n                    <InputAlphaField color={color} onChange={handleChange} />\r\n                </div>\r\n\r\n                {/* Bottom Row: Hue, Saturation, Value */}\r\n                <div className={classes.inputRow}>\r\n                    <InputHsvField title=\"Hue\" value={color} hsvKey=\"h\" max={360} onChange={handleChange} />\r\n                    <InputHsvField title=\"Saturation\" value={color} hsvKey=\"s\" max={100} scale={100} onChange={handleChange} />\r\n                    <InputHsvField title=\"Value\" value={color} hsvKey=\"v\" max={100} scale={100} onChange={handleChange} />\r\n                </div>\r\n\r\n                <div className={classes.inputRow}>\r\n                    <InputHexField title=\"Hexadecimal\" linearHex={isLinear} isLinearMode={isLinear} value={color} onChange={handleChange} />\r\n                </div>\r\n            </div>\r\n        </Popover>\r\n    );\r\n});\r\n\r\nexport type InputHexProps = PrimitiveProps<Color3 | Color4> & {\r\n    linearHex?: boolean;\r\n    isLinearMode?: boolean;\r\n};\r\n/**\r\n * Component which displays the passed in color's HEX value, either in linearSpace (if linearHex is true) or in gamma space\r\n * When the hex color is changed by user, component calculates the new Color3/4 value and calls onChange\r\n *\r\n * Component uses the isLinearMode boolean to display an informative label regarding linear / gamma space\r\n * @param props - The properties for the InputHexField component.\r\n * @returns\r\n */\r\nexport const InputHexField: FunctionComponent<InputHexProps> = (props) => {\r\n    const classes = useColorPickerStyles();\r\n    const { title, value, onChange, linearHex, isLinearMode } = props;\r\n\r\n    return (\r\n        <TextInput\r\n            disabled={linearHex ? !isLinearMode : false}\r\n            className={classes.inputField}\r\n            value={linearHex ? value.toLinearSpace().toHexString() : value.toHexString()}\r\n            validator={ValidateColorHex}\r\n            onChange={(val) => (linearHex ? onChange(Color3.FromHexString(val).toGammaSpace()) : onChange(Color3.FromHexString(val)))}\r\n            infoLabel={\r\n                title\r\n                    ? {\r\n                          label: title,\r\n                          // If not representing a linearHex, no info is needed.\r\n                          info: !props.linearHex ? undefined : !isLinearMode ? ( // If representing a linear hex but we are in gammaMode, simple message explaining why linearHex is disabled\r\n                              <> This color picker is attached to an entity whose color is stored in gamma space, so we are showing linear hex in disabled view </>\r\n                          ) : (\r\n                              // If representing a linear hex and we are in linearMode, give information about how to use these hex values\r\n                              <>\r\n                                  This color picker is attached to an entity whose color is stored in linear space (ex: PBR Material), and Babylon converts the color to gamma space\r\n                                  before rendering on screen because the human eye is best at processing colors in gamma space. We thus also want to display the color picker in\r\n                                  gamma space so that the color chosen here will match the color seen in your entity.\r\n                                  <br />\r\n                                  If you want to copy/paste the HEX into your code, you can either use\r\n                                  <Body1Strong>Color3.FromHexString(LINEAR_HEX)</Body1Strong>\r\n                                  <br />\r\n                                  or\r\n                                  <br />\r\n                                  <Body1Strong>Color3.FromHexString(GAMMA_HEX).toLinearSpace()</Body1Strong>\r\n                                  <br />\r\n                                  <br />\r\n                                  <Link url=\"https://doc.babylonjs.com/preparingArtForBabylon/controllingColorSpace/\" value=\"Read more in our docs!\" />\r\n                              </>\r\n                          ),\r\n                      }\r\n                    : undefined\r\n            }\r\n        />\r\n    );\r\n};\r\n\r\ntype RgbKey = \"r\" | \"g\" | \"b\";\r\ntype InputRgbFieldProps = PrimitiveProps<Color3 | Color4> & {\r\n    rgbKey: RgbKey;\r\n};\r\n\r\nconst InputRgbField: FunctionComponent<InputRgbFieldProps> = (props) => {\r\n    const { value, onChange, title, rgbKey } = props;\r\n    const classes = useColorPickerStyles();\r\n\r\n    const handleChange = useCallback(\r\n        (val: number) => {\r\n            const newColor = value.clone();\r\n            newColor[rgbKey] = val / 255.0; // Convert to 0-1 range\r\n            onChange(newColor);\r\n        },\r\n        [value, onChange, rgbKey]\r\n    );\r\n\r\n    return (\r\n        <SpinButton\r\n            infoLabel={title ? { label: title } : undefined}\r\n            className={classes.inputField}\r\n            min={0}\r\n            max={255}\r\n            value={Math.round(value[rgbKey] * 255)}\r\n            forceInt\r\n            onChange={handleChange}\r\n        />\r\n    );\r\n};\r\n\r\nfunction rgbaToHsv(color: { r: number; g: number; b: number; a?: number }): { h: number; s: number; v: number; a?: number } {\r\n    const c = new Color3(color.r, color.g, color.b);\r\n    const hsv = c.toHSV();\r\n    return { h: hsv.r, s: hsv.g, v: hsv.b, a: color.a };\r\n}\r\n\r\ntype HsvKey = \"h\" | \"s\" | \"v\";\r\ntype InputHsvFieldProps = PrimitiveProps<Color3 | Color4> & {\r\n    hsvKey: HsvKey;\r\n    max: number;\r\n    scale?: number;\r\n};\r\n\r\n/**\r\n * In the HSV (Hue, Saturation, Value) color model, Hue (H) ranges from 0 to 360 degrees, representing the color's position on the color wheel.\r\n * Saturation (S) ranges from 0 to 100%, indicating the intensity or purity of the color, with 0 being shades of gray and 100 being a fully saturated color.\r\n * Value (V) ranges from 0 to 100%, representing the brightness of the color, with 0 being black and 100 being the brightest.\r\n * @param props - The properties for the InputHsvField component.\r\n */\r\nexport const InputHsvField: FunctionComponent<InputHsvFieldProps> = (props) => {\r\n    const { value, title, hsvKey, max, onChange, scale = 1 } = props;\r\n\r\n    const classes = useColorPickerStyles();\r\n\r\n    const handleChange = useCallback(\r\n        (val: number) => {\r\n            // Convert current color to HSV, update the new hsv value, then call onChange prop\r\n            const hsv = rgbaToHsv(value);\r\n            hsv[hsvKey] = val / scale;\r\n            let newColor: Color3 | Color4 = Color3.FromHSV(hsv.h, hsv.s, hsv.v);\r\n            if (value instanceof Color4) {\r\n                newColor = Color4.FromColor3(newColor, value.a ?? 1);\r\n            }\r\n            props.onChange(newColor);\r\n        },\r\n        [value, onChange, hsvKey, scale]\r\n    );\r\n\r\n    return (\r\n        <SpinButton\r\n            infoLabel={title ? { label: title } : undefined}\r\n            className={classes.inputField}\r\n            min={0}\r\n            max={max}\r\n            value={Math.round(rgbaToHsv(value)[hsvKey] * scale)}\r\n            forceInt\r\n            onChange={handleChange}\r\n        />\r\n    );\r\n};\r\n\r\ntype InputAlphaProps = {\r\n    color: Color3 | Color4;\r\n    onChange: (color: Color4) => void;\r\n};\r\n\r\n/**\r\n * Displays the alpha value of a color, either in the disabled state (if color is Color3) or as a spin button (if color is Color4).\r\n * @param props\r\n * @returns\r\n */\r\nconst InputAlphaField: FunctionComponent<InputAlphaProps> = (props) => {\r\n    const classes = useColorPickerStyles();\r\n    const { color, onChange } = props;\r\n\r\n    const handleChange = useCallback(\r\n        (value: number) => {\r\n            if (Number.isNaN(value) || value < 0 || value > 1) {\r\n                return;\r\n            }\r\n\r\n            if (color instanceof Color4) {\r\n                const newColor = color.clone();\r\n                newColor.a = value;\r\n                return newColor;\r\n            } else {\r\n                return Color4.FromColor3(color, value);\r\n            }\r\n        },\r\n        [onChange]\r\n    );\r\n\r\n    return (\r\n        <SpinButton\r\n            disabled={color instanceof Color3}\r\n            min={0}\r\n            max={1}\r\n            className={classes.inputField}\r\n            value={color instanceof Color3 ? 1 : color.a}\r\n            step={0.01}\r\n            onChange={handleChange}\r\n            infoLabel={{\r\n                label: \"Alpha\",\r\n                info:\r\n                    color instanceof Color3 ? (\r\n                        <>\r\n                            Because this color picker is representing a Color3, we do not permit modifying alpha from the color picker. You can however modify the entity's alpha\r\n                            property directly, either in code via entity.alpha OR via inspector's transparency section.\r\n                        </>\r\n                    ) : undefined,\r\n            }}\r\n        />\r\n    );\r\n};\r\n","import type { FunctionComponent } from \"react\";\r\n\r\nimport type { Color4 } from \"core/Maths/math.color\";\r\nimport type { IPerfMetadata } from \"core/Misc/interfaces/iPerfViewer\";\r\nimport type { Observable } from \"core/Misc/observable\";\r\nimport type { PerformanceViewerCollector } from \"core/Misc/PerformanceViewer/performanceViewerCollector\";\r\nimport type { PerfMinMax, VisibleRangeChangedObservableProps } from \"./graphSupportingTypes\";\r\n\r\nimport { Body1, makeStyles, mergeClasses, Subtitle2Stronger, tokens } from \"@fluentui/react-components\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\nimport { Color3 } from \"core/Maths/math.color\";\r\nimport { ColorPickerPopup } from \"shared-ui-components/fluent/primitives/colorPicker\";\r\nimport { Switch } from \"shared-ui-components/fluent/primitives/switch\";\r\n\r\nconst useStyles = makeStyles({\r\n    sidebar: {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        width: \"280px\",\r\n        minWidth: \"280px\",\r\n        overflowY: \"auto\",\r\n        overflowX: \"hidden\",\r\n        borderRight: `1px solid ${tokens.colorNeutralStroke1}`,\r\n        backgroundColor: tokens.colorNeutralBackground1,\r\n    },\r\n    sidebarItem: {\r\n        display: \"grid\",\r\n        width: \"100%\",\r\n        minHeight: \"30px\",\r\n        padding: `${tokens.spacingVerticalXXS} 0`,\r\n        alignItems: \"center\",\r\n    },\r\n    header: {\r\n        color: tokens.colorNeutralForeground1,\r\n        backgroundColor: tokens.colorBrandBackground,\r\n        gridTemplateColumns: \"10px 9fr 1fr 8px\",\r\n    },\r\n    categoryHeader: {\r\n        backgroundColor: tokens.colorNeutralBackground4,\r\n        minHeight: \"30px\",\r\n    },\r\n    categoryColumn2: {\r\n        gridColumn: \"2\",\r\n    },\r\n    categoryColumn3: {\r\n        gridColumn: \"3\",\r\n        display: \"flex\",\r\n        justifyContent: \"end\",\r\n    },\r\n    measure: {\r\n        color: tokens.colorNeutralForeground1,\r\n        gridTemplateColumns: \"4px 6fr 1fr 10px\",\r\n    },\r\n    measureOdd: {\r\n        backgroundColor: tokens.colorNeutralBackground2,\r\n    },\r\n    measureEven: {\r\n        backgroundColor: tokens.colorNeutralBackground1,\r\n    },\r\n    measureCategory: {\r\n        display: \"grid\",\r\n        gridTemplateColumns: \"auto 7px 18px 10px 1fr\",\r\n        gridColumn: \"2\",\r\n        alignItems: \"center\",\r\n    },\r\n    measureColorPicker: {\r\n        gridColumn: \"3\",\r\n    },\r\n    measureLabel: {\r\n        gridColumn: \"5\",\r\n    },\r\n    measureValue: {\r\n        gridColumn: \"3\",\r\n        textAlign: \"right\",\r\n    },\r\n});\r\n\r\ninterface IPerformanceSidebarProps {\r\n    collector: PerformanceViewerCollector;\r\n    onVisibleRangeChangedObservable?: Observable<VisibleRangeChangedObservableProps>;\r\n}\r\n\r\nexport const PerformanceSidebar: FunctionComponent<IPerformanceSidebarProps> = (props) => {\r\n    const { collector, onVisibleRangeChangedObservable } = props;\r\n    const classes = useStyles();\r\n\r\n    // Map from id to IPerfMetadata information\r\n    const [metadataMap, setMetadataMap] = useState<Map<string, IPerfMetadata>>();\r\n    // Map from category to all the ids belonging to that category\r\n    const [metadataCategoryId, setMetadataCategoryId] = useState<Map<string, string[]>>();\r\n    // Count how many elements are checked for that category\r\n    const [metadataCategoryChecked, setMetadataCategoryChecked] = useState<Map<string, number>>();\r\n    // List of ordered categories\r\n    const [metadataCategories, setMetadataCategories] = useState<string[]>();\r\n    // Min/Max/Current values of the ids\r\n    const [valueMap, setValueMap] = useState<Map<string, PerfMinMax>>();\r\n\r\n    useEffect(() => {\r\n        if (!onVisibleRangeChangedObservable) {\r\n            return;\r\n        }\r\n        const observer = (observedProps: VisibleRangeChangedObservableProps) => {\r\n            setValueMap(observedProps.valueMap);\r\n        };\r\n        onVisibleRangeChangedObservable.add(observer);\r\n        return () => {\r\n            onVisibleRangeChangedObservable.removeCallback(observer);\r\n        };\r\n    }, [onVisibleRangeChangedObservable]);\r\n\r\n    useEffect(() => {\r\n        const onUpdateMetadata = (metadata: Map<string, IPerfMetadata>) => {\r\n            const newCategoryIdMap = new Map<string, string[]>();\r\n            const newCategoryCheckedMap = new Map<string, number>();\r\n\r\n            metadata.forEach((value: IPerfMetadata, id: string) => {\r\n                const currentCategory = value.category ?? \"\";\r\n                const currentIds: string[] = newCategoryIdMap.get(currentCategory) ?? [];\r\n                let currentChecked: number = newCategoryCheckedMap.get(currentCategory) ?? 0;\r\n\r\n                currentIds.push(id);\r\n                newCategoryIdMap.set(currentCategory, currentIds);\r\n\r\n                if (!value.hidden) {\r\n                    currentChecked += 1;\r\n                }\r\n                newCategoryCheckedMap.set(currentCategory, currentChecked);\r\n            });\r\n            const orderedCategories = Array.from(newCategoryIdMap.keys());\r\n            orderedCategories.sort();\r\n\r\n            setMetadataCategoryId(newCategoryIdMap);\r\n            setMetadataCategoryChecked(newCategoryCheckedMap);\r\n            setMetadataMap(metadata);\r\n            setMetadataCategories(orderedCategories);\r\n        };\r\n\r\n        collector.metadataObservable.add(onUpdateMetadata);\r\n        return () => {\r\n            collector.metadataObservable.removeCallback(onUpdateMetadata);\r\n        };\r\n    }, [collector]);\r\n\r\n    const onCheckChange = (id: string) => (selected: boolean) => {\r\n        collector.updateMetadata(id, \"hidden\", !selected);\r\n    };\r\n\r\n    const onCheckAllChange = (category: string) => (selected: boolean) => {\r\n        const categoryIds = metadataCategoryId?.get(category);\r\n        if (!categoryIds) {\r\n            return;\r\n        }\r\n        for (const id of categoryIds) {\r\n            collector.updateMetadata(id, \"hidden\", !selected);\r\n        }\r\n    };\r\n\r\n    const onColorChange = (id: string) => (color: Color3 | Color4) => {\r\n        collector.updateMetadata(id, \"color\", color.toHexString());\r\n    };\r\n\r\n    return (\r\n        <div className={classes.sidebar}>\r\n            {metadataCategories &&\r\n                metadataCategories.map((category) => (\r\n                    <div key={`category-${category || \"version\"}`}>\r\n                        {category ? (\r\n                            <div className={mergeClasses(classes.sidebarItem, classes.header, classes.categoryHeader)} key={`header-${category}`}>\r\n                                <Subtitle2Stronger className={classes.categoryColumn2}>{category}</Subtitle2Stronger>\r\n                                <div className={classes.categoryColumn3}>\r\n                                    <Switch value={metadataCategoryChecked?.get(category) === metadataCategoryId?.get(category)?.length} onChange={onCheckAllChange(category)} />\r\n                                </div>\r\n                            </div>\r\n                        ) : null}\r\n                        {metadataCategoryId?.get(category)?.map((id, index) => {\r\n                            const metadata = metadataMap?.get(id);\r\n                            const range = valueMap?.get(id);\r\n                            return (\r\n                                metadata && (\r\n                                    <div\r\n                                        key={`perf-sidebar-item-${id}`}\r\n                                        className={mergeClasses(classes.sidebarItem, classes.measure, index % 2 === 0 ? classes.measureEven : classes.measureOdd)}\r\n                                    >\r\n                                        <div className={classes.measureCategory}>\r\n                                            <Switch value={!metadata.hidden} onChange={onCheckChange(id)} />\r\n                                            <div className={classes.measureColorPicker}>\r\n                                                <ColorPickerPopup value={Color3.FromHexString(metadata.color ?? \"#000\")} onChange={onColorChange(id)} />\r\n                                            </div>\r\n                                            <Body1 className={classes.measureLabel}>{id}</Body1>\r\n                                        </div>\r\n                                        {range && <div className={classes.measureValue}> {((range.min + range.max) / 2).toFixed(2)} </div>}\r\n                                    </div>\r\n                                )\r\n                            );\r\n                        })}\r\n                    </div>\r\n                ))}\r\n        </div>\r\n    );\r\n};\r\n","import type { PerformanceViewerCollector } from \"core/Misc/PerformanceViewer/performanceViewerCollector\";\r\nimport type { Observable } from \"core/Misc/observable\";\r\nimport type { Scene } from \"core/scene\";\r\nimport type { FunctionComponent } from \"react\";\r\nimport type { PerfLayoutSize, VisibleRangeChangedObservableProps } from \"./graphSupportingTypes\";\r\nimport type { Vector2 } from \"core/Maths/math.vector\";\r\n\r\nimport { makeStyles, tokens } from \"@fluentui/react-components\";\r\nimport { useState } from \"react\";\r\n\r\nimport { Observable as BabylonObservable } from \"core/Misc/observable\";\r\nimport { Button } from \"shared-ui-components/fluent/primitives/button\";\r\nimport { CanvasGraph } from \"./canvasGraph\";\r\nimport { PerformanceSidebar } from \"./performanceSidebar\";\r\n\r\nconst useStyles = makeStyles({\r\n    container: {\r\n        display: \"flex\",\r\n        flexDirection: \"row\",\r\n        height: \"100%\",\r\n        width: \"100%\",\r\n        fontFamily: \"system-ui, -apple-system, sans-serif\",\r\n        overflow: \"hidden\",\r\n    },\r\n    returnButton: {\r\n        position: \"absolute\",\r\n        top: \"10px\",\r\n        right: \"10px\",\r\n        zIndex: 10,\r\n    },\r\n    sidebar: {\r\n        flex: \"0 0 auto\",\r\n        overflowY: \"auto\",\r\n        overflowX: \"hidden\",\r\n    },\r\n    graph: {\r\n        flex: \"1 1 auto\",\r\n        position: \"relative\",\r\n        backgroundColor: tokens.colorNeutralBackground1,\r\n        overflow: \"hidden\",\r\n    },\r\n});\r\n\r\ntype PerformanceViewerProps = {\r\n    scene: Scene;\r\n    layoutObservable: Observable<PerfLayoutSize>;\r\n    returnToLiveObservable: Observable<void>;\r\n    performanceCollector: PerformanceViewerCollector;\r\n    initialGraphSize?: Vector2;\r\n};\r\n\r\nexport const PerformanceViewer: FunctionComponent<PerformanceViewerProps> = (props) => {\r\n    const { scene, layoutObservable, returnToLiveObservable, performanceCollector, initialGraphSize } = props;\r\n    const classes = useStyles();\r\n    const [onVisibleRangeChangedObservable] = useState(() => new BabylonObservable<VisibleRangeChangedObservableProps>());\r\n\r\n    const onReturnToPlayheadClick = () => {\r\n        returnToLiveObservable.notifyObservers();\r\n    };\r\n\r\n    return (\r\n        <div className={classes.container}>\r\n            <Button className={classes.returnButton} onClick={onReturnToPlayheadClick} label=\"Return\" title=\"Return to Playhead\" />\r\n            <div className={classes.sidebar}>\r\n                <PerformanceSidebar collector={performanceCollector} onVisibleRangeChangedObservable={onVisibleRangeChangedObservable} />\r\n            </div>\r\n            <div className={classes.graph}>\r\n                <CanvasGraph\r\n                    returnToPlayheadObservable={returnToLiveObservable}\r\n                    layoutObservable={layoutObservable}\r\n                    scene={scene}\r\n                    collector={performanceCollector}\r\n                    onVisibleRangeChangedObservable={onVisibleRangeChangedObservable}\r\n                    initialGraphSize={initialGraphSize}\r\n                />\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","import type { FunctionComponent } from \"react\";\r\n\r\nimport type { PerformanceViewerCollector, Scene } from \"core/index\";\r\n\r\nimport { ArrowDownloadRegular, RecordRegular, StopRegular } from \"@fluentui/react-icons\";\r\nimport { useCallback, useEffect, useRef, useState } from \"react\";\r\n\r\nimport { Vector2 } from \"core/Maths/math.vector\";\r\nimport { Observable } from \"core/Misc/observable\";\r\nimport { PerfCollectionStrategy } from \"core/Misc/PerformanceViewer/performanceViewerCollectionStrategies\";\r\nimport \"core/Misc/PerformanceViewer/performanceViewerSceneExtension\";\r\nimport { PressureObserverWrapper } from \"core/Misc/pressureObserverWrapper\";\r\nimport { Tools } from \"core/Misc/tools\";\r\nimport { ButtonLine } from \"shared-ui-components/fluent/hoc/buttonLine\";\r\nimport { ChildWindow } from \"shared-ui-components/fluent/hoc/childWindow\";\r\nimport { FileUploadLine } from \"shared-ui-components/fluent/hoc/fileUploadLine\";\r\nimport type { PerfLayoutSize } from \"../performanceViewer/graphSupportingTypes\";\r\nimport { PerformanceViewer } from \"../performanceViewer/performanceViewer\";\r\n\r\nfunction AddStrategies(perfCollector: PerformanceViewerCollector) {\r\n    perfCollector.addCollectionStrategies(...DefaultStrategiesList);\r\n    if (PressureObserverWrapper.IsAvailable) {\r\n        // Do not enable for now as the Pressure API does not\r\n        // report factors at the moment.\r\n        // perfCollector.addCollectionStrategies({\r\n        //     strategyCallback: PerfCollectionStrategy.ThermalStrategy(),\r\n        //     category: IPerfMetadataCategory.FrameSteps,\r\n        //     hidden: true,\r\n        // });\r\n        // perfCollector.addCollectionStrategies({\r\n        //     strategyCallback: PerfCollectionStrategy.PowerSupplyStrategy(),\r\n        //     category: IPerfMetadataCategory.FrameSteps,\r\n        //     hidden: true,\r\n        // });\r\n        perfCollector.addCollectionStrategies({\r\n            strategyCallback: PerfCollectionStrategy.PressureStrategy(),\r\n            category: PerfMetadataCategory.FrameSteps,\r\n            hidden: true,\r\n        });\r\n    }\r\n}\r\n\r\nconst enum PerfMetadataCategory {\r\n    Count = \"Count\",\r\n    FrameSteps = \"Frame Steps Duration\",\r\n}\r\n\r\n// list of strategies to add to perf graph automatically.\r\nconst DefaultStrategiesList = [\r\n    { strategyCallback: PerfCollectionStrategy.FpsStrategy() },\r\n    { strategyCallback: PerfCollectionStrategy.TotalMeshesStrategy(), category: PerfMetadataCategory.Count, hidden: true },\r\n    { strategyCallback: PerfCollectionStrategy.ActiveMeshesStrategy(), category: PerfMetadataCategory.Count, hidden: true },\r\n    { strategyCallback: PerfCollectionStrategy.ActiveIndicesStrategy(), category: PerfMetadataCategory.Count, hidden: true },\r\n    { strategyCallback: PerfCollectionStrategy.ActiveBonesStrategy(), category: PerfMetadataCategory.Count, hidden: true },\r\n    { strategyCallback: PerfCollectionStrategy.ActiveParticlesStrategy(), category: PerfMetadataCategory.Count, hidden: true },\r\n    { strategyCallback: PerfCollectionStrategy.DrawCallsStrategy(), category: PerfMetadataCategory.Count, hidden: true },\r\n    { strategyCallback: PerfCollectionStrategy.TotalLightsStrategy(), category: PerfMetadataCategory.Count, hidden: true },\r\n    { strategyCallback: PerfCollectionStrategy.TotalVerticesStrategy(), category: PerfMetadataCategory.Count, hidden: true },\r\n    { strategyCallback: PerfCollectionStrategy.TotalMaterialsStrategy(), category: PerfMetadataCategory.Count, hidden: true },\r\n    { strategyCallback: PerfCollectionStrategy.TotalTexturesStrategy(), category: PerfMetadataCategory.Count, hidden: true },\r\n    { strategyCallback: PerfCollectionStrategy.AbsoluteFpsStrategy(), category: PerfMetadataCategory.FrameSteps, hidden: true },\r\n    { strategyCallback: PerfCollectionStrategy.MeshesSelectionStrategy(), category: PerfMetadataCategory.FrameSteps, hidden: true },\r\n    { strategyCallback: PerfCollectionStrategy.RenderTargetsStrategy(), category: PerfMetadataCategory.FrameSteps, hidden: true },\r\n    { strategyCallback: PerfCollectionStrategy.ParticlesStrategy(), category: PerfMetadataCategory.FrameSteps, hidden: true },\r\n    { strategyCallback: PerfCollectionStrategy.SpritesStrategy(), category: PerfMetadataCategory.FrameSteps, hidden: true },\r\n    { strategyCallback: PerfCollectionStrategy.AnimationsStrategy(), category: PerfMetadataCategory.FrameSteps, hidden: true },\r\n    { strategyCallback: PerfCollectionStrategy.PhysicsStrategy(), category: PerfMetadataCategory.FrameSteps, hidden: true },\r\n    { strategyCallback: PerfCollectionStrategy.RenderStrategy(), category: PerfMetadataCategory.FrameSteps, hidden: true },\r\n    { strategyCallback: PerfCollectionStrategy.FrameTotalStrategy(), category: PerfMetadataCategory.FrameSteps, hidden: true },\r\n    { strategyCallback: PerfCollectionStrategy.InterFrameStrategy(), category: PerfMetadataCategory.FrameSteps, hidden: true },\r\n    { strategyCallback: PerfCollectionStrategy.GpuFrameTimeStrategy(), category: PerfMetadataCategory.FrameSteps, hidden: true },\r\n] as const;\r\n\r\n// arbitrary window size\r\nconst InitialWindowSize = { width: 1024, height: 512 };\r\nconst InitialGraphSize = new Vector2(724, 512);\r\n\r\nexport const PerformanceStats: FunctionComponent<{ context: Scene }> = ({ context: scene }) => {\r\n    const [isOpen, setIsOpen] = useState(false);\r\n    const [isRecording, setIsRecording] = useState(false);\r\n    const [isLoadedFromCsv, setIsLoadedFromCsv] = useState(false);\r\n    const [performanceCollector, setPerformanceCollector] = useState<PerformanceViewerCollector | undefined>();\r\n    const [layoutObservable] = useState(() => new Observable<PerfLayoutSize>());\r\n    const [returnToLiveObservable] = useState(() => new Observable<void>());\r\n    const childWindowRef = useRef<ChildWindow>(null);\r\n\r\n    useEffect(() => {\r\n        if (!isLoadedFromCsv) {\r\n            if (performanceCollector) {\r\n                setIsRecording(false);\r\n                performanceCollector.stop();\r\n                performanceCollector.clear(false);\r\n                AddStrategies(performanceCollector);\r\n            }\r\n        }\r\n    }, [isLoadedFromCsv, performanceCollector]);\r\n\r\n    const onClosePerformanceViewer = useCallback(() => {\r\n        setIsLoadedFromCsv(false);\r\n        setIsOpen(false);\r\n    }, []);\r\n\r\n    const onResize = useCallback(\r\n        (childWindow: Window) => {\r\n            const width = childWindow?.innerWidth ?? 0;\r\n            const height = childWindow?.innerHeight ?? 0;\r\n            layoutObservable.notifyObservers({ width, height });\r\n        },\r\n        [layoutObservable]\r\n    );\r\n\r\n    const startPerformanceViewerPopup = useCallback(() => {\r\n        if (performanceCollector && childWindowRef.current) {\r\n            childWindowRef.current.open({\r\n                defaultWidth: InitialWindowSize.width,\r\n                defaultHeight: InitialWindowSize.height,\r\n                title: \"Realtime Performance Viewer\",\r\n            });\r\n        }\r\n    }, [performanceCollector]);\r\n\r\n    const onPerformanceButtonClick = () => {\r\n        setIsOpen(true);\r\n        setIsRecording(true);\r\n        performanceCollector?.start(true);\r\n        startPerformanceViewerPopup();\r\n    };\r\n\r\n    const onLoadClick = (fileList: FileList) => {\r\n        Tools.ReadFile(fileList[0], (data: string) => {\r\n            // reopen window and load data!\r\n            setIsOpen(false);\r\n            setIsLoadedFromCsv(true);\r\n            setIsRecording(false);\r\n            performanceCollector?.stop();\r\n            const isValid = performanceCollector?.loadFromFileData(data);\r\n            if (!isValid) {\r\n                // if our data isn't valid we close the window.\r\n                setIsOpen(false);\r\n                setIsRecording(true);\r\n                performanceCollector?.start(true);\r\n            } else {\r\n                startPerformanceViewerPopup();\r\n            }\r\n        });\r\n    };\r\n\r\n    const onExportClick = () => {\r\n        performanceCollector?.exportDataToCsv();\r\n    };\r\n\r\n    const onToggleRecording = () => {\r\n        if (performanceCollector) {\r\n            if (!performanceCollector.isStarted) {\r\n                setIsRecording(true);\r\n                performanceCollector.start(true);\r\n            } else {\r\n                setIsRecording(false);\r\n                performanceCollector.stop();\r\n            }\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        const perfCollector = scene.getPerfCollector();\r\n        AddStrategies(perfCollector);\r\n        setPerformanceCollector(perfCollector);\r\n    }, [scene]);\r\n\r\n    // Handle child window resize\r\n    useEffect(() => {\r\n        const handleResize = () => {\r\n            const win = window;\r\n            if (win) {\r\n                onResize(win);\r\n            }\r\n        };\r\n        window.addEventListener(\"resize\", handleResize);\r\n        return () => window.removeEventListener(\"resize\", handleResize);\r\n    }, [onResize]);\r\n\r\n    return (\r\n        <>\r\n            {!isOpen && <ButtonLine label=\"Open Realtime Perf Viewer\" onClick={onPerformanceButtonClick} />}\r\n            {!isOpen && <FileUploadLine label=\"Load Perf Viewer using CSV\" accept=\".csv\" onClick={onLoadClick} />}\r\n            <ButtonLine label=\"Export Perf to CSV\" icon={ArrowDownloadRegular} onClick={onExportClick} />\r\n            {!isOpen && <ButtonLine label={isRecording ? \"Stop Recording\" : \"Begin Recording\"} icon={isRecording ? StopRegular : RecordRegular} onClick={onToggleRecording} />}\r\n            <ChildWindow id=\"performance-viewer\" imperativeRef={childWindowRef} onOpenChange={(open) => !open && onClosePerformanceViewer()}>\r\n                {performanceCollector && (\r\n                    <PerformanceViewer\r\n                        scene={scene}\r\n                        layoutObservable={layoutObservable}\r\n                        returnToLiveObservable={returnToLiveObservable}\r\n                        performanceCollector={performanceCollector}\r\n                        initialGraphSize={InitialGraphSize}\r\n                    />\r\n                )}\r\n            </ChildWindow>\r\n        </>\r\n    );\r\n};\r\n","import { Body1 } from \"@fluentui/react-components\";\r\nimport { PropertyLine } from \"./propertyLine\";\r\nimport type { ImmutablePrimitiveProps } from \"../../primitives/primitive\";\r\nimport type { PropertyLineProps } from \"./propertyLine\";\r\nimport type { FunctionComponent } from \"react\";\r\n\r\n/**\r\n * Wraps text in a property line\r\n * @param props - PropertyLineProps and TextProps\r\n * @returns property-line wrapped text\r\n */\r\nexport const TextPropertyLine: FunctionComponent<PropertyLineProps<string> & ImmutablePrimitiveProps<string>> = (props) => {\r\n    TextPropertyLine.displayName = \"TextPropertyLine\";\r\n    const { value, title } = props;\r\n    return (\r\n        <PropertyLine {...props}>\r\n            <Body1 title={title}>{value ?? \"\"}</Body1>\r\n        </PropertyLine>\r\n    );\r\n};\r\n","import type { Scene } from \"core/index\";\r\n\r\nimport { makeStyles, tokens } from \"@fluentui/react-components\";\r\n\r\nimport { AbstractEngine } from \"core/Engines/abstractEngine\";\r\nimport { TextPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/textPropertyLine\";\r\nimport { StringifiedPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/stringifiedPropertyLine\";\r\nimport { useObservableState } from \"../../hooks/observableHooks\";\r\nimport { ExtensibleAccordion } from \"../extensibleAccordion\";\r\nimport { SidePaneContainer } from \"../pane\";\r\n\r\nconst useStyles = makeStyles({\r\n    pinnedStatsPane: {\r\n        flex: \"0 1 auto\",\r\n        paddingBottom: tokens.spacingHorizontalM,\r\n    },\r\n});\r\n\r\nexport const StatsPane: typeof ExtensibleAccordion<Scene> = (props) => {\r\n    const classes = useStyles();\r\n\r\n    const scene = props.context;\r\n    const engine = scene.getEngine();\r\n    const fps = useObservableState(() => Math.round(engine.getFps()), engine.onBeginFrameObservable);\r\n\r\n    return (\r\n        <>\r\n            <SidePaneContainer className={classes.pinnedStatsPane}>\r\n                <TextPropertyLine key=\"EngineVersion\" label=\"Version\" description=\"The Babylon.js engine version.\" value={AbstractEngine.Version} />\r\n                <StringifiedPropertyLine key=\"FPS\" label=\"FPS:\" description=\"The current framerate\" value={fps} />\r\n            </SidePaneContainer>\r\n            <ExtensibleAccordion {...props} />\r\n        </>\r\n    );\r\n};\r\n","import { PresenceBadge } from \"@fluentui/react-components\";\r\nimport type { FunctionComponent } from \"react\";\r\nimport { PropertyLine } from \"./propertyLine\";\r\nimport type { ImmutablePrimitiveProps } from \"../../primitives/primitive\";\r\nimport type { PropertyLineProps } from \"./propertyLine\";\r\n/**\r\n * Displays an icon indicating enabled (green check) or disabled (red cross) state\r\n * @param props - The properties for the PropertyLine, including the boolean value to display.\r\n * @returns A PropertyLine component with a PresenceBadge indicating the boolean state.\r\n */\r\nexport const BooleanBadgePropertyLine: FunctionComponent<PropertyLineProps<boolean> & ImmutablePrimitiveProps<boolean>> = (props) => {\r\n    BooleanBadgePropertyLine.displayName = \"BooleanBadgePropertyLine\";\r\n    // For now assume BooleanBadge is used for readonly properties and disable copy. In future we could enable with a different copy string\r\n    return (\r\n        <PropertyLine {...props} onCopy={undefined}>\r\n            <PresenceBadge status={props.value ? \"available\" : \"do-not-disturb\"} outOfOffice={true} />\r\n        </PropertyLine>\r\n    );\r\n};\r\n","import type { Scene } from \"core/index\";\r\n\r\nimport type { FunctionComponent } from \"react\";\r\n\r\nimport { BooleanBadgePropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/booleanBadgePropertyLine\";\r\nimport { TextPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/textPropertyLine\";\r\nimport { StringifiedPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/stringifiedPropertyLine\";\r\nimport { useObservableState } from \"../../hooks/observableHooks\";\r\n\r\nexport const SystemStats: FunctionComponent<{ context: Scene }> = ({ context: scene }) => {\r\n    const engine = scene.getEngine();\r\n    const caps = engine.getCaps();\r\n    const resolution = useObservableState(() => `${engine.getRenderWidth()} x ${engine.getRenderHeight()}`, engine.onResizeObservable);\r\n    const hardwareScalingLevel = useObservableState(() => engine.getHardwareScalingLevel(), engine.onResizeObservable);\r\n\r\n    return (\r\n        <>\r\n            <TextPropertyLine key=\"Resolution\" label=\"Resolution\" value={resolution} />\r\n            <StringifiedPropertyLine key=\"HardwareScalingLevel\" label=\"Hardware Scaling Level\" value={hardwareScalingLevel} />\r\n            <TextPropertyLine key=\"Engine\" label=\"Engine\" value={engine.description} />\r\n            <BooleanBadgePropertyLine key=\"StdDerivatives\" label=\"StdDerivatives\" value={caps.standardDerivatives} />\r\n            <BooleanBadgePropertyLine key=\"CompressedTextures\" label=\"Compressed Textures\" value={caps.s3tc !== undefined} />\r\n            <BooleanBadgePropertyLine key=\"HardwareInstances\" label=\"Hardware Instances\" value={caps.instancedArrays} />\r\n            <BooleanBadgePropertyLine key=\"TextureFloat\" label=\"Texture Float\" value={caps.textureFloat} />\r\n            <BooleanBadgePropertyLine key=\"TextureHalfFloat\" label=\"Texture Half Float\" value={caps.textureHalfFloat} />\r\n            <BooleanBadgePropertyLine key=\"RenderToTextureFloat\" label=\"Render to Texture Float\" value={caps.textureFloatRender} />\r\n            <BooleanBadgePropertyLine key=\"RenderToTextureHalfFloat\" label=\"Render to Texture Half Float\" value={caps.textureHalfFloatRender} />\r\n            <BooleanBadgePropertyLine key=\"32bitsIndices\" label=\"32bits Indices\" value={caps.uintIndices} />\r\n            <BooleanBadgePropertyLine key=\"FragmentDepth\" label=\"Fragment Depth\" value={caps.fragmentDepthSupported} />\r\n            <BooleanBadgePropertyLine key=\"HighPrecisionShaders\" label=\"High Precision Shaders\" value={caps.highPrecisionShaderSupported} />\r\n            <BooleanBadgePropertyLine key=\"DrawBuffers\" label=\"Draw Buffers\" value={caps.drawBuffersExtension} />\r\n            <BooleanBadgePropertyLine key=\"VertexArrayObject\" label=\"Vertex Array Object\" value={caps.vertexArrayObject} />\r\n            <BooleanBadgePropertyLine key=\"TimerQuery\" label=\"Timer Query\" value={caps.timerQuery !== undefined} />\r\n            <BooleanBadgePropertyLine key=\"Stencil\" label=\"Stencil\" value={engine.isStencilEnable} />\r\n            <BooleanBadgePropertyLine key=\"ParallelShaderCompilation\" label=\"Parallel Shader Compilation\" value={caps.parallelShaderCompile != null} />\r\n            <StringifiedPropertyLine key=\"MaxTexturesUnits\" label=\"Max Textures Units\" value={caps.maxTexturesImageUnits} />\r\n            <StringifiedPropertyLine key=\"MaxTexturesSize\" label=\"Max Textures Size\" value={caps.maxTextureSize} />\r\n            <StringifiedPropertyLine key=\"MaxAnisotropy\" label=\"Max Anisotropy\" value={caps.maxAnisotropy} />\r\n            <TextPropertyLine key=\"Driver\" label=\"Driver\" value={engine.extractDriverInfo()} />\r\n        </>\r\n    );\r\n};\r\n","import type { IDisposable, Scene } from \"core/index\";\r\n\r\nimport type { DynamicAccordionSection, DynamicAccordionSectionContent } from \"../../components/extensibleAccordion\";\r\nimport type { IService, ServiceDefinition } from \"../../modularity/serviceDefinition\";\r\nimport type { ISceneContext } from \"../sceneContext\";\r\nimport type { IShellService } from \"../shellService\";\r\n\r\nimport { DataBarHorizontalRegular } from \"@fluentui/react-icons\";\r\n\r\nimport { CountStats } from \"../../components/stats/countStats\";\r\nimport { FrameStepsStats } from \"../../components/stats/frameStepStats\";\r\nimport { PerformanceStats } from \"../../components/stats/performanceStats\";\r\nimport { StatsPane } from \"../../components/stats/statsPane\";\r\nimport { SystemStats } from \"../../components/stats/systemStats\";\r\nimport { useObservableCollection, useObservableState, useOrderedObservableCollection } from \"../../hooks/observableHooks\";\r\nimport { ObservableCollection } from \"../../misc/observableCollection\";\r\nimport { SceneContextIdentity } from \"../sceneContext\";\r\nimport { ShellServiceIdentity } from \"../shellService\";\r\n\r\nexport const StatsServiceIdentity = Symbol(\"StatsService\");\r\n\r\n/**\r\n * Allows new sections or content to be added to the stats pane.\r\n */\r\nexport interface IStatsService extends IService<typeof StatsServiceIdentity> {\r\n    /**\r\n     * Adds a new section (e.g. \"Count\", \"Frame Steps Duration\", etc.).\r\n     * @param section A description of the section to add.\r\n     */\r\n    addSection(section: DynamicAccordionSection): IDisposable;\r\n\r\n    /**\r\n     * Adds content to one or more sections.\r\n     * @param content A description of the content to add.\r\n     */\r\n    addSectionContent(content: DynamicAccordionSectionContent<Scene>): IDisposable;\r\n}\r\n\r\n/**\r\n * Provides a scene stats pane.\r\n */\r\nexport const StatsServiceDefinition: ServiceDefinition<[IStatsService], [IShellService, ISceneContext]> = {\r\n    friendlyName: \"Stats\",\r\n    produces: [StatsServiceIdentity],\r\n    consumes: [ShellServiceIdentity, SceneContextIdentity],\r\n    factory: (shellService, sceneContext) => {\r\n        const sectionsCollection = new ObservableCollection<DynamicAccordionSection>();\r\n        const sectionContentCollection = new ObservableCollection<DynamicAccordionSectionContent<Scene>>();\r\n\r\n        const registration = shellService.addSidePane({\r\n            key: \"Statistics\",\r\n            title: \"Statistics\",\r\n            icon: DataBarHorizontalRegular,\r\n            horizontalLocation: \"right\",\r\n            verticalLocation: \"top\",\r\n            order: 300,\r\n            suppressTeachingMoment: true,\r\n            content: () => {\r\n                const sections = useOrderedObservableCollection(sectionsCollection);\r\n                const sectionContent = useObservableCollection(sectionContentCollection);\r\n                const scene = useObservableState(() => sceneContext.currentScene, sceneContext.currentSceneObservable);\r\n\r\n                return <>{scene && <StatsPane sections={sections} sectionContent={sectionContent} context={scene} />}</>;\r\n            },\r\n        });\r\n\r\n        // Default/built-in sections.\r\n        sectionsCollection.add({\r\n            identity: \"Performance\",\r\n            order: 0,\r\n        });\r\n\r\n        sectionsCollection.add({\r\n            identity: \"Count\",\r\n            order: 1,\r\n        });\r\n\r\n        sectionsCollection.add({\r\n            identity: \"Frame Steps Duration\",\r\n            order: 2,\r\n        });\r\n\r\n        sectionsCollection.add({\r\n            identity: \"System Info\",\r\n            order: 3,\r\n        });\r\n\r\n        // Default/built-in content.\r\n        sectionContentCollection.add({\r\n            key: \"DefaultPerfStats\",\r\n            section: \"Performance\",\r\n            order: 0,\r\n            component: PerformanceStats,\r\n        });\r\n\r\n        sectionContentCollection.add({\r\n            key: \"DefaultCountStats\",\r\n            section: \"Count\",\r\n            order: 1,\r\n            component: CountStats,\r\n        });\r\n\r\n        sectionContentCollection.add({\r\n            key: \"DefaultFrameStats\",\r\n            section: \"Frame Steps Duration\",\r\n            order: 2,\r\n            component: FrameStepsStats,\r\n        });\r\n\r\n        sectionContentCollection.add({\r\n            key: \"DefaultSystemStats\",\r\n            section: \"System Info\",\r\n            order: 3,\r\n            component: SystemStats,\r\n        });\r\n\r\n        return {\r\n            addSection: (section) => sectionsCollection.add(section),\r\n            addSectionContent: (content) => sectionContentCollection.add(content as DynamicAccordionSectionContent<Scene>),\r\n            dispose: () => registration.dispose(),\r\n        };\r\n    },\r\n};\r\n","import { ExtensibleAccordion } from \"../extensibleAccordion\";\r\nimport type { Scene } from \"core/scene\";\r\n\r\nexport const ToolsPane: typeof ExtensibleAccordion<Scene> = (props) => {\r\n    return <ExtensibleAccordion {...props} />;\r\n};\r\n","import type { Nullable } from \"core/types\";\r\nimport type { IDisposable, Scene } from \"core/scene\";\r\nimport type { IService, ServiceDefinition } from \"../../modularity/serviceDefinition\";\r\nimport type { IShellService } from \"../shellService\";\r\nimport type { DynamicAccordionSection, DynamicAccordionSectionContent } from \"../../components/extensibleAccordion\";\r\nimport { WrenchRegular } from \"@fluentui/react-icons\";\r\nimport { useObservableCollection, useObservableState, useOrderedObservableCollection } from \"../../hooks/observableHooks\";\r\nimport { ObservableCollection } from \"../../misc/observableCollection\";\r\nimport { ShellServiceIdentity } from \"../shellService\";\r\nimport { ToolsPane } from \"../../components/tools/toolsPane\";\r\nimport { SceneContextIdentity } from \"../sceneContext\";\r\nimport type { ISceneContext } from \"../sceneContext\";\r\n\r\nexport const ToolsServiceIdentity = Symbol(\"ToolsService\");\r\n\r\n/**\r\n * A service that provides tools for the user to generate artifacts or perform actions on entities.\r\n */\r\nexport interface IToolsService extends IService<typeof ToolsServiceIdentity> {\r\n    /**\r\n     * Adds a new section (e.g. \"Export\", \"Capture\", etc.).\r\n     * @param section A description of the section to add.\r\n     */\r\n    addSection(section: DynamicAccordionSection): IDisposable;\r\n\r\n    /**\r\n     * Adds content to one or more sections.\r\n     * @param content A description of the content to add.\r\n     */\r\n    addSectionContent(content: DynamicAccordionSectionContent<Scene>): IDisposable;\r\n}\r\n\r\n/**\r\n * A collection of usually optional, dynamic extensions.\r\n * Common examples includes importing/exporting, or other general creation tools.\r\n */\r\nexport const ToolsServiceDefinition: ServiceDefinition<[IToolsService], [IShellService, ISceneContext]> = {\r\n    friendlyName: \"Tools Editor\",\r\n    produces: [ToolsServiceIdentity],\r\n    consumes: [ShellServiceIdentity, SceneContextIdentity],\r\n    factory: (shellService, sceneContext) => {\r\n        const sectionsCollection = new ObservableCollection<DynamicAccordionSection>();\r\n        const sectionContentCollection = new ObservableCollection<DynamicAccordionSectionContent<Scene>>();\r\n\r\n        // Only show the Tools pane if some tool content has been added.\r\n        let toolsPaneRegistration: Nullable<IDisposable> = null;\r\n        sectionContentCollection.observable.add(() => {\r\n            if (sectionContentCollection.items.length === 0) {\r\n                toolsPaneRegistration?.dispose();\r\n                toolsPaneRegistration = null;\r\n            } else if (!toolsPaneRegistration) {\r\n                toolsPaneRegistration = shellService.addSidePane({\r\n                    key: \"Tools\",\r\n                    title: \"Tools\",\r\n                    icon: WrenchRegular,\r\n                    horizontalLocation: \"right\",\r\n                    verticalLocation: \"top\",\r\n                    order: 400,\r\n                    suppressTeachingMoment: true,\r\n                    content: () => {\r\n                        const sections = useOrderedObservableCollection(sectionsCollection);\r\n                        const sectionContent = useObservableCollection(sectionContentCollection);\r\n                        const scene = useObservableState(() => sceneContext.currentScene, sceneContext.currentSceneObservable);\r\n\r\n                        return scene && <ToolsPane sections={sections} sectionContent={sectionContent} context={scene} />;\r\n                    },\r\n                });\r\n            }\r\n        });\r\n\r\n        return {\r\n            addSection: (section) => sectionsCollection.add(section),\r\n            addSectionContent: (content) => sectionContentCollection.add(content),\r\n            dispose: () => toolsPaneRegistration?.dispose(),\r\n        };\r\n    },\r\n};\r\n","import type { ExtensionMetadata } from \"./extensionFeed\";\r\n\r\nimport { BuiltInsExtensionFeed } from \"./builtInsExtensionFeed\";\r\n\r\nconst BabylonWebResources = {\r\n    homepage: \"https://www.babylonjs.com\",\r\n    repository: \"https://github.com/BabylonJS/Babylon.js\",\r\n    bugs: \"https://github.com/BabylonJS/Babylon.js/issues\",\r\n} as const satisfies Partial<ExtensionMetadata>;\r\n\r\n/**\r\n * Well-known default built in extensions for the Inspector.\r\n */\r\nexport const DefaultInspectorExtensionFeed = new BuiltInsExtensionFeed(\"Inspector\", [\r\n    {\r\n        name: \"Quick Creation Tools (Preview)\",\r\n        description: \"Adds a new panel for easy creation of various Babylon assets. This is a WIP extension...expect changes!\",\r\n        keywords: [\"creation\", \"tools\"],\r\n        ...BabylonWebResources,\r\n        author: { name: \"Babylon.js\", forumUserName: \"\" },\r\n        getExtensionModuleAsync: async () => await import(\"../extensions/quickCreate/quickCreateToolsService\"),\r\n    },\r\n    {\r\n        name: \"Reflector\",\r\n        description: \"Connects to the Reflector Bridge for real-time scene synchronization with the Babylon.js Sandbox.\",\r\n        keywords: [\"reflector\", \"bridge\", \"sync\", \"sandbox\", \"tools\"],\r\n        ...BabylonWebResources,\r\n        author: { name: \"Babylon.js\", forumUserName: \"\" },\r\n        getExtensionModuleAsync: async () => await import(\"../services/panes/tools/reflectorService\"),\r\n    },\r\n]);\r\n","import type { SliderOnChangeData } from \"@fluentui/react-components\";\r\nimport { makeStyles, Slider } from \"@fluentui/react-components\";\r\nimport { SpinButton } from \"./spinButton\";\r\nimport type { ChangeEvent, FunctionComponent } from \"react\";\r\nimport { useEffect, useState, useRef, useContext } from \"react\";\r\nimport type { PrimitiveProps } from \"./primitive\";\r\nimport { InfoLabel } from \"./infoLabel\";\r\nimport { ToolContext } from \"../hoc/fluentToolWrapper\";\r\n\r\nconst useSyncedSliderStyles = makeStyles({\r\n    container: { display: \"flex\", minWidth: 0 },\r\n    syncedSlider: {\r\n        flex: \"1 1 0\",\r\n        flexDirection: \"row\",\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        minWidth: 0,\r\n    },\r\n    slider: {\r\n        flex: \"1 1 auto\",\r\n        minWidth: \"75px\",\r\n        maxWidth: \"75px\",\r\n    },\r\n    compactSlider: {\r\n        flex: \"1 1 auto\",\r\n        minWidth: \"50px\", // Allow shrinking for compact mode\r\n        maxWidth: \"75px\",\r\n    },\r\n    growSlider: {\r\n        flex: \"1 1 auto\",\r\n        minWidth: \"50px\",\r\n        // No maxWidth - slider grows to fill available space\r\n    },\r\n    compactSpinButton: {\r\n        width: \"65px\",\r\n        minWidth: \"65px\",\r\n        maxWidth: \"65px\",\r\n    },\r\n    compactSpinButtonInput: {\r\n        minWidth: \"0\",\r\n    },\r\n});\r\n\r\nexport type SyncedSliderProps = PrimitiveProps<number> & {\r\n    /** Minimum value for the slider */\r\n    min?: number;\r\n    /** Maximum value for the slider */\r\n    max?: number;\r\n    /** Step size for the slider */\r\n    step?: number;\r\n    /** Displayed in the ux to indicate unit of measurement */\r\n    unit?: string;\r\n    /** When true, onChange is only called when the user releases the slider, not during drag */\r\n    notifyOnlyOnRelease?: boolean;\r\n    /** When true, slider grows to fill space and SpinButton is fixed at 65px */\r\n    compact?: boolean;\r\n    /** When true, slider grows to fill all available space (no maxWidth constraint) */\r\n    growSlider?: boolean;\r\n};\r\n\r\n/**\r\n * Component which synchronizes a slider and an input field, allowing the user to change the value using either control\r\n * @param props\r\n * @returns SyncedSlider component\r\n */\r\nexport const SyncedSliderInput: FunctionComponent<SyncedSliderProps> = (props) => {\r\n    SyncedSliderInput.displayName = \"SyncedSliderInput\";\r\n    const { infoLabel, ...passthroughProps } = props;\r\n    const classes = useSyncedSliderStyles();\r\n    const { size } = useContext(ToolContext);\r\n    const [value, setValue] = useState<number>(props.value ?? 0);\r\n    const pendingValueRef = useRef<number>(undefined);\r\n    const isDraggingRef = useRef(false);\r\n\r\n    // NOTE: The Fluent slider will add tick marks if the step prop is anything other than undefined.\r\n    // To avoid this, we scale the min/max based on the step so we can always make step undefined.\r\n    // The actual step size in the Fluent slider is 1 when it is ste to undefined.\r\n    const min = props.min ?? 0;\r\n    const max = props.max ?? 100;\r\n    const step = props.step ?? 1;\r\n\r\n    useEffect(() => {\r\n        !isDraggingRef.current && setValue(props.value ?? 0); // Update local state when props.value changes as long as user is not actively dragging\r\n    }, [props.value]);\r\n\r\n    const handleSliderChange = (_: ChangeEvent<HTMLInputElement>, data: SliderOnChangeData) => {\r\n        const newValue = data.value * step;\r\n        setValue(newValue);\r\n\r\n        if (props.notifyOnlyOnRelease) {\r\n            // Store the value but don't notify parent yet\r\n            pendingValueRef.current = newValue;\r\n        } else {\r\n            // Notify parent as slider changes\r\n            props.onChange(newValue);\r\n        }\r\n    };\r\n\r\n    const handleSliderPointerDown = () => {\r\n        isDraggingRef.current = true;\r\n    };\r\n\r\n    const handleSliderPointerUp = () => {\r\n        if (props.notifyOnlyOnRelease && isDraggingRef.current && pendingValueRef.current !== undefined) {\r\n            props.onChange(pendingValueRef.current);\r\n            pendingValueRef.current = undefined;\r\n        }\r\n        isDraggingRef.current = false;\r\n    };\r\n\r\n    const handleInputChange = (value: number) => {\r\n        setValue(value);\r\n        props.onChange(value); // Input always updates immediately\r\n    };\r\n\r\n    const hasSlider = props.min !== undefined && props.max !== undefined;\r\n\r\n    // Determine Slider className based on props\r\n    const getSliderClassName = () => {\r\n        if (props.growSlider) {\r\n            return classes.growSlider;\r\n        }\r\n        if (props.compact) {\r\n            return classes.compactSlider;\r\n        }\r\n        return classes.slider;\r\n    };\r\n\r\n    return (\r\n        <div className={classes.container}>\r\n            {infoLabel && <InfoLabel {...infoLabel} htmlFor={\"syncedSlider\"} />}\r\n            <div id=\"syncedSlider\" className={classes.syncedSlider}>\r\n                {hasSlider && (\r\n                    <Slider\r\n                        {...passthroughProps}\r\n                        className={getSliderClassName()}\r\n                        size={size}\r\n                        min={min / step}\r\n                        max={max / step}\r\n                        step={undefined}\r\n                        value={value / step}\r\n                        onChange={handleSliderChange}\r\n                        onPointerDown={handleSliderPointerDown}\r\n                        onPointerUp={handleSliderPointerUp}\r\n                    />\r\n                )}\r\n                <SpinButton\r\n                    {...passthroughProps}\r\n                    className={hasSlider || props.compact ? classes.compactSpinButton : undefined}\r\n                    inputClassName={hasSlider || props.compact ? classes.compactSpinButtonInput : undefined}\r\n                    value={value}\r\n                    onChange={handleInputChange}\r\n                    step={props.step}\r\n                />\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","import { PropertyLine } from \"./propertyLine\";\r\nimport type { PropertyLineProps } from \"./propertyLine\";\r\nimport { SyncedSliderInput } from \"../../primitives/syncedSlider\";\r\nimport type { SyncedSliderProps } from \"../../primitives/syncedSlider\";\r\nimport { forwardRef } from \"react\";\r\n\r\ntype SyncedSliderPropertyProps = SyncedSliderProps & PropertyLineProps<number>;\r\n/**\r\n * Renders a simple wrapper around the SyncedSliderInput\r\n * @param props\r\n * @returns\r\n */\r\nexport const SyncedSliderPropertyLine = forwardRef<HTMLDivElement, SyncedSliderPropertyProps>((props, ref): React.ReactElement => {\r\n    SyncedSliderPropertyLine.displayName = \"SyncedSliderPropertyLine\";\r\n    const { label, description, ...sliderProps } = props;\r\n    return (\r\n        <PropertyLine ref={ref} {...props}>\r\n            <SyncedSliderInput {...sliderProps} />\r\n        </PropertyLine>\r\n    );\r\n});\r\n","import type { FunctionComponent } from \"react\";\r\nimport { forwardRef, useEffect, useState } from \"react\";\r\n\r\nimport type { PropertyLineProps } from \"./propertyLine\";\r\nimport { PropertyLine } from \"./propertyLine\";\r\nimport { SyncedSliderPropertyLine } from \"./syncedSliderPropertyLine\";\r\n\r\nimport type { Color3 } from \"core/Maths/math.color\";\r\nimport { Color4 } from \"core/Maths/math.color\";\r\nimport { ColorPickerPopup } from \"../../primitives/colorPicker\";\r\nimport type { ColorPickerProps } from \"../../primitives/colorPicker\";\r\n\r\nexport type ColorPropertyLineProps = ColorPickerProps<Color3 | Color4> & PropertyLineProps<Color3 | Color4>;\r\n\r\n/**\r\n * Reusable component which renders a color property line containing a label, colorPicker popout, and expandable RGBA values\r\n * The expandable RGBA values are synced sliders that allow the user to modify the color's RGBA values directly\r\n * @param props - PropertyLine props, replacing children with a color object so that we can properly display the color\r\n * @returns Component wrapping a colorPicker component with a property line\r\n */\r\nconst ColorPropertyLine = forwardRef<HTMLDivElement, ColorPropertyLineProps>((props, ref) => {\r\n    ColorPropertyLine.displayName = \"ColorPropertyLine\";\r\n    const [color, setColor] = useState(props.value);\r\n\r\n    useEffect(() => {\r\n        setColor(props.value);\r\n    }, [props.value]);\r\n\r\n    const onSliderChange = (value: number, key: \"r\" | \"g\" | \"b\" | \"a\") => {\r\n        let newColor: Color3 | Color4;\r\n        if (key === \"a\") {\r\n            newColor = Color4.FromColor3(color, value);\r\n        } else {\r\n            newColor = color.clone();\r\n            newColor[key] = value / 255;\r\n        }\r\n\r\n        setColor(newColor); // Create a new object to trigger re-render\r\n        props.onChange(newColor);\r\n    };\r\n\r\n    const onColorPickerChange = (newColor: Color3 | Color4) => {\r\n        setColor(newColor);\r\n        props.onChange(newColor);\r\n    };\r\n\r\n    return (\r\n        <PropertyLine ref={ref} {...props} expandedContent={color ? <ColorSliders color={color} onSliderChange={onSliderChange} /> : undefined}>\r\n            <ColorPickerPopup {...props} onChange={onColorPickerChange} value={color} />\r\n        </PropertyLine>\r\n    );\r\n});\r\n\r\ntype ColorSlidersProps = {\r\n    color: Color3 | Color4;\r\n    onSliderChange: (value: number, key: \"r\" | \"g\" | \"b\" | \"a\") => void;\r\n};\r\n\r\nconst ColorSliders: FunctionComponent<ColorSlidersProps> = ({ color, onSliderChange }) => (\r\n    <>\r\n        <SyncedSliderPropertyLine label=\"R\" value={color.r * 255} min={0} max={255} onChange={(value) => onSliderChange(value, \"r\")} />\r\n        <SyncedSliderPropertyLine label=\"G\" value={color.g * 255} min={0} max={255} onChange={(value) => onSliderChange(value, \"g\")} />\r\n        <SyncedSliderPropertyLine label=\"B\" value={color.b * 255} min={0} max={255} onChange={(value) => onSliderChange(value, \"b\")} />\r\n        {color instanceof Color4 && <SyncedSliderPropertyLine label=\"A\" value={color.a} min={0} max={1} step={0.01} onChange={(value) => onSliderChange(value, \"a\")} />}\r\n    </>\r\n);\r\n\r\nexport const Color3PropertyLine = ColorPropertyLine as FunctionComponent<ColorPickerProps<Color3> & PropertyLineProps<Color3>>;\r\nexport const Color4PropertyLine = ColorPropertyLine as FunctionComponent<ColorPickerProps<Color4> & PropertyLineProps<Color4>>;\r\n","import { makeStyles } from \"@fluentui/react-components\";\r\nimport { Dropdown } from \"../../primitives/dropdown\";\r\nimport type { AcceptedDropdownValue, DropdownProps } from \"../../primitives/dropdown\";\r\nimport { PropertyLine } from \"./propertyLine\";\r\nimport type { PropertyLineProps } from \"./propertyLine\";\r\nimport { forwardRef } from \"react\";\r\nimport type { FunctionComponent } from \"react\";\r\nimport { UniformWidthStyling } from \"../../primitives/utils\";\r\n\r\nconst useStyles = makeStyles({\r\n    dropdown: {\r\n        ...UniformWidthStyling,\r\n    },\r\n});\r\n\r\ntype DropdownPropertyLineProps<V extends AcceptedDropdownValue> = DropdownProps<V> & PropertyLineProps<V>;\r\n\r\n/**\r\n * Wraps a dropdown in a property line\r\n * @param props - PropertyLineProps and DropdownProps\r\n * @returns property-line wrapped dropdown\r\n */\r\n\r\nexport const DropdownPropertyLine = forwardRef<HTMLDivElement, DropdownPropertyLineProps<AcceptedDropdownValue>>((props, ref) => {\r\n    DropdownPropertyLine.displayName = \"DropdownPropertyLine\";\r\n    const classes = useStyles();\r\n    return (\r\n        <PropertyLine {...props} ref={ref}>\r\n            <Dropdown {...props} className={classes.dropdown} />\r\n        </PropertyLine>\r\n    );\r\n});\r\n\r\n/**\r\n * Dropdown component for number values.\r\n */\r\nexport const NumberDropdownPropertyLine = DropdownPropertyLine as FunctionComponent<DropdownPropertyLineProps<number>>;\r\n/**\r\n * Dropdown component for string values\r\n */\r\nexport const StringDropdownPropertyLine = DropdownPropertyLine as FunctionComponent<DropdownPropertyLineProps<string>>;\r\n","import { PropertyLine } from \"./propertyLine\";\r\nimport type { PropertyLineProps } from \"./propertyLine\";\r\nimport type { FunctionComponent } from \"react\";\r\nimport type { TextInputProps } from \"../../primitives/textInput\";\r\nimport { TextInput } from \"../../primitives/textInput\";\r\nimport type { SpinButtonProps } from \"../../primitives/spinButton\";\r\nimport { SpinButton } from \"../../primitives/spinButton\";\r\n/**\r\n * Wraps a text input in a property line\r\n * @param props - PropertyLineProps and InputProps\r\n * @returns property-line wrapped input component\r\n */\r\nexport const TextInputPropertyLine: FunctionComponent<TextInputProps & PropertyLineProps<string>> = (props) => {\r\n    TextInputPropertyLine.displayName = \"TextInputPropertyLine\";\r\n    return (\r\n        <PropertyLine {...props}>\r\n            <TextInput {...props} />\r\n        </PropertyLine>\r\n    );\r\n};\r\n\r\nexport type NumberInputPropertyLineProps = SpinButtonProps & PropertyLineProps<number>;\r\n/**\r\n * Wraps a number input in a property line\r\n * To force integer values, use forceInt param (this is distinct from the 'step' param, which will still allow submitting an integer value. forceInt will not)\r\n * @param props - PropertyLineProps and InputProps\r\n * @returns property-line wrapped input component\r\n */\r\nexport const NumberInputPropertyLine: FunctionComponent<NumberInputPropertyLineProps> = (props) => {\r\n    NumberInputPropertyLine.displayName = \"NumberInputPropertyLine\";\r\n    return (\r\n        <PropertyLine {...props}>\r\n            <SpinButton {...props} />\r\n        </PropertyLine>\r\n    );\r\n};\r\n","import { useEffect, useState } from \"react\";\r\nimport type { FunctionComponent } from \"react\";\r\n\r\nimport { Body1 } from \"@fluentui/react-components\";\r\nimport { PropertyLine } from \"./propertyLine\";\r\nimport type { PrimitiveProps } from \"../../primitives/primitive\";\r\nimport type { PropertyLineProps } from \"./propertyLine\";\r\n\r\nimport { SyncedSliderPropertyLine } from \"./syncedSliderPropertyLine\";\r\nimport type { Vector3 } from \"core/Maths/math.vector\";\r\nimport { Quaternion, Vector2, Vector4 } from \"core/Maths/math.vector\";\r\nimport { Tools } from \"core/Misc/tools\";\r\nimport { CalculatePrecision } from \"../../primitives/utils\";\r\n\r\nexport type TensorPropertyLineProps<V extends Vector2 | Vector3 | Vector4 | Quaternion> = PropertyLineProps<V> &\r\n    PrimitiveProps<V> & {\r\n        /**\r\n         * If passed, all sliders will use this for the min value\r\n         */\r\n        min?: number;\r\n        /**\r\n         * If passed, all sliders will use this for the max value\r\n         */\r\n        max?: number;\r\n        /**\r\n         * Will be displayed in the input UI to indicate the unit of measurement\r\n         */\r\n        unit?: string;\r\n\r\n        /**\r\n         * Internal spinbutton's step\r\n         */\r\n        step?: number;\r\n        /**\r\n         * If passed, the UX will use the conversion functions to display/update values\r\n         */\r\n        valueConverter?: {\r\n            /**\r\n             * Will call from(val) before displaying in the UX\r\n             */\r\n            from: (val: number) => number;\r\n            /**\r\n             * Will call to(val) before calling onChange\r\n             */\r\n            to: (val: number) => number;\r\n        };\r\n    };\r\n\r\nconst HasZ = (vector: Vector2 | Vector3 | Vector4 | Quaternion): vector is Vector3 => !(vector instanceof Vector2);\r\nconst HasW = (vector: Vector2 | Vector3 | Vector4 | Quaternion): vector is Vector4 => vector instanceof Vector4 || vector instanceof Quaternion;\r\n\r\n/**\r\n * Reusable component which renders a vector property line containing a label, vector value, and expandable XYZW values\r\n * The expanded section contains a slider/input box for each component of the vector (x, y, z, w)\r\n * @param props\r\n * @returns\r\n */\r\nconst TensorPropertyLine: FunctionComponent<TensorPropertyLineProps<Vector2 | Vector3 | Vector4 | Quaternion>> = (props) => {\r\n    TensorPropertyLine.displayName = \"TensorPropertyLine\";\r\n    const converted = (val: number) => (props.valueConverter ? props.valueConverter.from(val) : val);\r\n    const formatted = (val: number) => converted(val).toFixed(props.step !== undefined ? Math.max(0, CalculatePrecision(props.step)) : 2);\r\n\r\n    const [vector, setVector] = useState(props.value);\r\n    const { min, max } = props;\r\n\r\n    const onChange = (val: number, key: \"x\" | \"y\" | \"z\" | \"w\") => {\r\n        const value = props.valueConverter ? props.valueConverter.to(val) : val;\r\n        const newVector = vector.clone();\r\n        (newVector as Vector4)[key] = value; // The syncedSlider for 'w' is only rendered when vector is a Vector4, so this is safe\r\n\r\n        setVector(newVector);\r\n        props.onChange(newVector);\r\n    };\r\n\r\n    useEffect(() => {\r\n        setVector(props.value);\r\n    }, [props.value, props.expandedContent]);\r\n\r\n    return (\r\n        <PropertyLine\r\n            {...props}\r\n            expandedContent={\r\n                vector ? <VectorSliders vector={vector} min={min} max={max} unit={props.unit} step={props.step} converted={converted} onChange={onChange} /> : undefined\r\n            }\r\n        >\r\n            <Body1>{`[${formatted(props.value.x)}, ${formatted(props.value.y)}${HasZ(props.value) ? `, ${formatted(props.value.z)}` : \"\"}${HasW(props.value) ? `, ${formatted(props.value.w)}` : \"\"}]`}</Body1>\r\n        </PropertyLine>\r\n    );\r\n};\r\n\r\ntype VectorSlidersProps<V extends Vector2 | Vector3 | Vector4 | Quaternion> = {\r\n    vector: V;\r\n    min?: number;\r\n    max?: number;\r\n    unit?: string;\r\n    step?: number;\r\n    converted: (val: number) => number;\r\n    onChange: (val: number, key: \"x\" | \"y\" | \"z\" | \"w\") => void;\r\n};\r\n\r\nconst VectorSliders = <V extends Vector2 | Vector3 | Vector4 | Quaternion>({ vector, min, max, unit, step, converted, onChange }: VectorSlidersProps<V>) => (\r\n    <>\r\n        <SyncedSliderPropertyLine label=\"X\" value={converted(vector.x)} min={min} max={max} onChange={(val) => onChange(val, \"x\")} unit={unit} step={step} />\r\n        <SyncedSliderPropertyLine label=\"Y\" value={converted(vector.y)} min={min} max={max} onChange={(val) => onChange(val, \"y\")} unit={unit} step={step} />\r\n        {HasZ(vector) && <SyncedSliderPropertyLine label=\"Z\" value={converted(vector.z)} min={min} max={max} onChange={(val) => onChange(val, \"z\")} unit={unit} step={step} />}\r\n        {HasW(vector) && <SyncedSliderPropertyLine label=\"W\" value={converted(vector.w)} min={min} max={max} onChange={(val) => onChange(val, \"w\")} unit={unit} step={step} />}\r\n    </>\r\n);\r\n\r\ntype RotationVectorPropertyLineProps = TensorPropertyLineProps<Vector3> & {\r\n    /**\r\n     * Display angles as degrees instead of radians\r\n     */\r\n    useDegrees?: boolean;\r\n};\r\n\r\nconst ToDegreesConverter = { from: Tools.ToDegrees, to: Tools.ToRadians };\r\nexport const RotationVectorPropertyLine: FunctionComponent<RotationVectorPropertyLineProps> = (props) => {\r\n    RotationVectorPropertyLine.displayName = \"RotationVectorPropertyLine\";\r\n    const min = props.useDegrees ? 0 : undefined;\r\n    const max = props.useDegrees ? 360 : undefined;\r\n    return (\r\n        <Vector3PropertyLine\r\n            {...props}\r\n            unit={props.useDegrees ? \"deg\" : \"rad\"}\r\n            valueConverter={props.useDegrees ? ToDegreesConverter : undefined}\r\n            min={min}\r\n            max={max}\r\n            step={0.001}\r\n        />\r\n    );\r\n};\r\n\r\ntype QuaternionPropertyLineProps = TensorPropertyLineProps<Quaternion> & {\r\n    /**\r\n     * Display angles as degrees instead of radians\r\n     */\r\n    useDegrees?: boolean;\r\n    /**\r\n     * Display angles as Euler angles instead of quaternions\r\n     */\r\n    useEuler?: boolean;\r\n};\r\nconst QuaternionPropertyLineInternal = TensorPropertyLine as FunctionComponent<TensorPropertyLineProps<Quaternion>>;\r\nexport const QuaternionPropertyLine: FunctionComponent<QuaternionPropertyLineProps> = (props) => {\r\n    QuaternionPropertyLine.displayName = \"QuaternionPropertyLine\";\r\n    const min = props.useDegrees ? 0 : undefined;\r\n    const max = props.useDegrees ? 360 : undefined;\r\n    const [quat, setQuat] = useState(props.value);\r\n\r\n    useEffect(() => {\r\n        setQuat(props.value);\r\n    }, [props.value]);\r\n\r\n    // Extract only the properties that exist on QuaternionPropertyLineProps\r\n    const { useEuler, ...restProps } = props;\r\n\r\n    const onQuatChange = (val: Quaternion) => {\r\n        setQuat(val);\r\n        props.onChange(val);\r\n    };\r\n\r\n    const onEulerChange = (val: Vector3) => {\r\n        const quat = Quaternion.FromEulerAngles(val.x, val.y, val.z);\r\n        onQuatChange(quat);\r\n    };\r\n\r\n    return useEuler ? (\r\n        <Vector3PropertyLine\r\n            {...restProps}\r\n            nullable={false}\r\n            ignoreNullable={false}\r\n            value={quat.toEulerAngles()}\r\n            valueConverter={ToDegreesConverter}\r\n            min={min}\r\n            max={max}\r\n            onChange={onEulerChange}\r\n            unit={props.useDegrees ? \"deg\" : \"rad\"}\r\n        />\r\n    ) : (\r\n        <QuaternionPropertyLineInternal {...props} nullable={false} value={quat} min={min} max={max} onChange={onQuatChange} unit={props.useDegrees ? \"deg\" : \"rad\"} />\r\n    );\r\n};\r\nexport const Vector2PropertyLine = TensorPropertyLine as FunctionComponent<TensorPropertyLineProps<Vector2>>;\r\nexport const Vector3PropertyLine = TensorPropertyLine as FunctionComponent<TensorPropertyLineProps<Vector3>>;\r\nexport const Vector4PropertyLine = TensorPropertyLine as FunctionComponent<TensorPropertyLineProps<Vector4>>;\r\n","import type { IInspectable as InspectableProperty } from \"core/index\";\r\nimport type { ServiceDefinition } from \"../modularity/serviceDefinition\";\r\nimport type { IPropertiesService } from \"../services/panes/properties/propertiesService\";\r\n\r\nimport { InspectableType } from \"core/Misc/iInspectable\";\r\nimport { ButtonLine } from \"shared-ui-components/fluent/hoc/buttonLine\";\r\nimport { FileUploadLine } from \"shared-ui-components/fluent/hoc/fileUploadLine\";\r\nimport { Color3PropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/colorPropertyLine\";\r\nimport { DropdownPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/dropdownPropertyLine\";\r\nimport { TextInputPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/inputPropertyLine\";\r\nimport { SwitchPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/switchPropertyLine\";\r\nimport { SyncedSliderPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/syncedSliderPropertyLine\";\r\nimport { TextPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/textPropertyLine\";\r\nimport { QuaternionPropertyLine, Vector2PropertyLine, Vector3PropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/vectorPropertyLine\";\r\nimport { BoundProperty } from \"../components/properties/boundProperty\";\r\nimport { PropertiesServiceIdentity } from \"../services/panes/properties/propertiesService\";\r\n\r\ntype InspectableObject = {\r\n    inspectableCustomProperties: InspectableProperty[];\r\n};\r\n\r\nfunction IsInspectableObject(entity: unknown): entity is InspectableObject {\r\n    return !!(entity as InspectableObject).inspectableCustomProperties;\r\n}\r\n\r\nexport const LegacyInspectableObjectPropertiesServiceDefinition: ServiceDefinition<[], [IPropertiesService]> = {\r\n    friendlyName: \"Additional Nodes\",\r\n    consumes: [PropertiesServiceIdentity],\r\n    factory: (propertiesService) => {\r\n        const propertiesSectionRegistration = propertiesService.addSection({\r\n            identity: \"Custom\",\r\n            order: Number.MAX_SAFE_INTEGER,\r\n        });\r\n\r\n        const propertiesContentRegistration = propertiesService.addSectionContent({\r\n            key: \"Additional Nodes Properties\",\r\n            predicate: (entity: unknown) => IsInspectableObject(entity),\r\n            content: [\r\n                {\r\n                    section: \"Custom\",\r\n                    component: ({ context }) => {\r\n                        return (\r\n                            <>\r\n                                {(context.inspectableCustomProperties ?? []).map((prop): JSX.Element => {\r\n                                    const commonProps = {\r\n                                        target: context as Record<string, any>,\r\n                                        propertyKey: prop.propertyName,\r\n                                        label: prop.label,\r\n                                        ignoreNullable: true,\r\n                                        defaultValue: undefined,\r\n                                    } as const;\r\n\r\n                                    switch (prop.type) {\r\n                                        case InspectableType.Checkbox:\r\n                                            return <BoundProperty key={prop.propertyName} {...commonProps} component={SwitchPropertyLine} />;\r\n                                        case InspectableType.Slider:\r\n                                            return (\r\n                                                <BoundProperty\r\n                                                    key={prop.propertyName}\r\n                                                    {...commonProps}\r\n                                                    min={prop.min}\r\n                                                    max={prop.max}\r\n                                                    step={prop.step}\r\n                                                    component={SyncedSliderPropertyLine}\r\n                                                />\r\n                                            );\r\n                                        case InspectableType.Vector3:\r\n                                            return <BoundProperty key={prop.propertyName} {...commonProps} component={Vector3PropertyLine} />;\r\n                                        case InspectableType.Quaternion:\r\n                                            return <BoundProperty key={prop.propertyName} {...commonProps} component={QuaternionPropertyLine} />;\r\n                                        case InspectableType.Color3:\r\n                                            return <BoundProperty key={prop.propertyName} {...commonProps} component={Color3PropertyLine} />;\r\n                                        case InspectableType.String:\r\n                                            return <BoundProperty key={prop.propertyName} {...commonProps} component={TextInputPropertyLine} />;\r\n                                        case InspectableType.Button:\r\n                                            return <ButtonLine key={prop.propertyName} label={prop.label} onClick={() => prop.callback?.()} />;\r\n                                        case InspectableType.Options:\r\n                                            return <BoundProperty key={prop.propertyName} {...commonProps} component={DropdownPropertyLine} options={prop.options ?? []} />;\r\n                                        case InspectableType.Tab:\r\n                                            return <BoundProperty key={prop.propertyName} {...commonProps} component={TextPropertyLine} />;\r\n                                        case InspectableType.FileButton:\r\n                                            return (\r\n                                                <FileUploadLine\r\n                                                    key={prop.propertyName}\r\n                                                    label={prop.label}\r\n                                                    accept={prop.accept ?? \"\"}\r\n                                                    onClick={(files) => {\r\n                                                        if (files.length > 0 && prop.fileCallback) {\r\n                                                            prop.fileCallback(files[0]);\r\n                                                        }\r\n                                                    }}\r\n                                                />\r\n                                            );\r\n                                        case InspectableType.Vector2:\r\n                                            return <BoundProperty key={prop.propertyName} {...commonProps} component={Vector2PropertyLine} />;\r\n                                    }\r\n                                })}\r\n                            </>\r\n                        );\r\n                    },\r\n                },\r\n            ],\r\n        });\r\n\r\n        return {\r\n            dispose: () => {\r\n                propertiesSectionRegistration.dispose();\r\n                propertiesContentRegistration.dispose();\r\n            },\r\n        };\r\n    },\r\n};\r\n","import type { ExtensionManager } from \"../extensibility/extensionManager\";\r\n\r\nimport { createContext, useContext } from \"react\";\r\n\r\nexport type ExtensionManagerContext = {\r\n    readonly extensionManager: ExtensionManager;\r\n};\r\n\r\nexport const ExtensionManagerContext = createContext<ExtensionManagerContext | undefined>(undefined);\r\n\r\nexport function useExtensionManager() {\r\n    return useContext(ExtensionManagerContext)?.extensionManager;\r\n}\r\n","import type { IDisposable, Nullable } from \"core/index\";\r\nimport type { ServiceContainer } from \"../modularity/serviceContainer\";\r\nimport type { IExtensionFeed, ExtensionMetadata, ExtensionModule } from \"./extensionFeed\";\r\n\r\nimport { Logger } from \"core/Misc/logger\";\r\n\r\n/**\r\n * Represents a loaded extension.\r\n */\r\nexport interface IExtension {\r\n    /**\r\n     * The metadata for the extension.\r\n     */\r\n    readonly metadata: ExtensionMetadata;\r\n\r\n    /**\r\n     * Whether the extension is currently being installed, uninstalled, enabled, or disabled.\r\n     */\r\n    readonly isStateChanging: boolean;\r\n\r\n    /**\r\n     * Whether the extension is enabled.\r\n     */\r\n    readonly isInstalled: boolean;\r\n\r\n    /**\r\n     * Installs the extension.\r\n     */\r\n    installAsync(): Promise<void>;\r\n\r\n    /**\r\n     * Uninstalls the extension.\r\n     */\r\n    uninstallAsync(): Promise<void>;\r\n\r\n    /**\r\n     * Adds a handler that is called when the state of the extension changes.\r\n     * @param handler The handler to add.\r\n     * @returns A disposable that removes the handler when disposed.\r\n     */\r\n    addStateChangedHandler(handler: () => void): IDisposable;\r\n}\r\n\r\n/**\r\n * Provides information about an extension installation failure.\r\n */\r\nexport type InstallFailedInfo = {\r\n    /**\r\n     * The metadata of the extension that failed to install.\r\n     */\r\n    extension: ExtensionMetadata;\r\n\r\n    /**\r\n     * The error that occurred during the installation.\r\n     */\r\n    error: unknown;\r\n};\r\n\r\ntype InstalledExtension = {\r\n    metadata: ExtensionMetadata;\r\n    feed: IExtensionFeed;\r\n    isStateChanging: boolean;\r\n    extensionModule?: ExtensionModule;\r\n    registrationToken?: IDisposable;\r\n};\r\n\r\nconst InstalledExtensionsKey = \"Babylon/Extensions/InstalledExtensions\";\r\n\r\nconst ExtensionInstalledKeyPrefix = \"Babylon/Extensions/IsExtensionInstalled\";\r\nfunction GetExtensionInstalledKey(name: string): string {\r\n    return `${ExtensionInstalledKeyPrefix}/${name}`;\r\n}\r\n\r\n/**\r\n * Represents a query for loaded extensions.\r\n */\r\nexport interface IExtensionQuery {\r\n    /**\r\n     * The total number of extensions that satisfy the query.\r\n     */\r\n    readonly totalCount: number;\r\n\r\n    /**\r\n     * Fetches a range of extensions from the query.\r\n     * @param index The index of the first extension to fetch.\r\n     * @param count The number of extensions to fetch.\r\n     * @returns A promise that resolves to the extensions.\r\n     */\r\n    getExtensionsAsync(index: number, count: number): Promise<IExtension[]>;\r\n}\r\n\r\nfunction GetExtensionIdentity(feed: string, name: string) {\r\n    return `${feed}|${name}`;\r\n}\r\n\r\n/**\r\n * Manages the installation, uninstallation, enabling, and disabling of extensions.\r\n */\r\nexport class ExtensionManager implements IDisposable {\r\n    private readonly _installedExtensions = new Map<string, InstalledExtension>();\r\n\r\n    private readonly _stateChangedHandlers = new Map<string, Set<() => void>>();\r\n\r\n    private constructor(\r\n        private readonly _serviceContainer: ServiceContainer,\r\n        private readonly _feeds: readonly IExtensionFeed[],\r\n        private readonly _onInstallFailed: (info: InstallFailedInfo) => void\r\n    ) {}\r\n\r\n    /**\r\n     * Creates a new instance of the ExtensionManager.\r\n     * This will automatically rehydrate previously installed and enabled extensions.\r\n     * @param serviceContainer The service container to use.\r\n     * @param feeds The extension feeds to include.\r\n     * @param onInstallFailed A callback that is called when an extension installation fails.\r\n     * @returns A promise that resolves to the new instance of the ExtensionManager.\r\n     */\r\n    public static async CreateAsync(\r\n        serviceContainer: ServiceContainer,\r\n        feeds: readonly IExtensionFeed[],\r\n        onInstallFailed: (info: InstallFailedInfo) => void\r\n    ): Promise<ExtensionManager> {\r\n        const extensionManager = new ExtensionManager(serviceContainer, feeds, onInstallFailed);\r\n\r\n        // Rehydrate installed extensions.\r\n        const installedExtensionNames = JSON.parse(localStorage.getItem(InstalledExtensionsKey) ?? \"[]\") as string[];\r\n        for (const installedExtensionName of installedExtensionNames) {\r\n            const installedExtensionRaw = localStorage.getItem(GetExtensionInstalledKey(installedExtensionName));\r\n            if (installedExtensionRaw) {\r\n                const installedExtensionData = JSON.parse(installedExtensionRaw) as {\r\n                    feed: string;\r\n                    metadata: ExtensionMetadata;\r\n                };\r\n\r\n                const feed = feeds.find((feed) => feed.name === installedExtensionData.feed);\r\n                if (feed) {\r\n                    const installedExtension = extensionManager._createInstalledExtension(installedExtensionData.metadata, feed);\r\n                    extensionManager._installedExtensions.set(installedExtension.metadata.name, installedExtension);\r\n                }\r\n            }\r\n        }\r\n\r\n        // Load installed and enabled extensions.\r\n        const enablePromises: Promise<void>[] = [];\r\n        for (const extension of extensionManager._installedExtensions.values()) {\r\n            enablePromises.push(\r\n                (async () => {\r\n                    try {\r\n                        await extensionManager._enableAsync(extension.metadata, false, false);\r\n                    } catch {\r\n                        // If enabling the extension fails, uninstall it. The extension install fail callback will still be called,\r\n                        // so the owner of the ExtensionManager instance can decide what to do with the error.\r\n                        await extensionManager._uninstallAsync(extension.metadata, false);\r\n                    }\r\n                })()\r\n            );\r\n        }\r\n\r\n        await Promise.all(enablePromises);\r\n\r\n        return extensionManager;\r\n    }\r\n\r\n    /**\r\n     * Gets the names of the feeds that are included in the extension manager.\r\n     * @returns The names of the feeds.\r\n     */\r\n    public get feedNames() {\r\n        return this._feeds.map((feed) => feed.name);\r\n    }\r\n\r\n    /**\r\n     * Queries the extension manager for extensions.\r\n     * @param filter The filter to apply to the query.\r\n     * @param feeds The feeds to include in the query.\r\n     * @param installedOnly Whether to only include installed extensions.\r\n     * @returns A promise that resolves to the extension query.\r\n     */\r\n    public async queryExtensionsAsync(filter = \"\", feeds: string[] = this.feedNames, installedOnly = false): Promise<IExtensionQuery> {\r\n        if (installedOnly) {\r\n            const installedExtensions = Array.from(this._installedExtensions.values()).filter((installedExtension) => feeds.includes(installedExtension.feed.name));\r\n            return {\r\n                totalCount: installedExtensions.length,\r\n                getExtensionsAsync: async (index, count) => {\r\n                    return installedExtensions.slice(index, index + count).map((installedExtension) => this._createExtension(installedExtension.metadata, installedExtension.feed));\r\n                },\r\n            };\r\n        }\r\n\r\n        const queries = await Promise.all(\r\n            this._feeds.filter((feed) => feeds.includes(feed.name)).map(async (feed) => Object.assign(await feed.queryExtensionsAsync(filter), { feed }))\r\n        );\r\n        const totalCount = queries.reduce((sum, query) => sum + query.totalCount, 0);\r\n\r\n        return {\r\n            totalCount,\r\n            getExtensionsAsync: async (index, count) => {\r\n                const extensions = new Array<IExtension>();\r\n                let remaining = count;\r\n\r\n                for (const query of queries) {\r\n                    if (remaining <= 0) {\r\n                        break;\r\n                    }\r\n\r\n                    if (index >= query.totalCount) {\r\n                        index -= query.totalCount;\r\n                        continue;\r\n                    }\r\n\r\n                    // This is intentionally sequential as we are querying for results until the count of results is met.\r\n                    // eslint-disable-next-line no-await-in-loop\r\n                    const metadataSlice = await query.getExtensionMetadataAsync(index, remaining);\r\n                    extensions.push(...metadataSlice.map((metadata) => this._createExtension(metadata, query.feed)));\r\n                    remaining -= metadataSlice.length;\r\n                    index = 0;\r\n                }\r\n\r\n                return extensions;\r\n            },\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Disposes the extension manager.\r\n     */\r\n    public dispose() {\r\n        for (const installedExtension of this._installedExtensions.values()) {\r\n            // eslint-disable-next-line github/no-then\r\n            this._disableAsync(installedExtension.metadata, false).catch((error) => {\r\n                Logger.Warn(`Failed to disable extension ${installedExtension.metadata.name}: ${error}`);\r\n            });\r\n        }\r\n\r\n        this._stateChangedHandlers.clear();\r\n    }\r\n\r\n    private async _installAsync(metadata: ExtensionMetadata, feed: IExtensionFeed, isNestedStateChange: boolean): Promise<InstalledExtension> {\r\n        let installedExtension = this._installedExtensions.get(metadata.name);\r\n\r\n        if (!installedExtension) {\r\n            installedExtension = this._createInstalledExtension(metadata, feed);\r\n            installedExtension.isStateChanging = true;\r\n            this._installedExtensions.set(metadata.name, installedExtension);\r\n\r\n            try {\r\n                // Enable the extension.\r\n                await this._enableAsync(metadata, true, true);\r\n            } catch (error) {\r\n                this._installedExtensions.delete(metadata.name);\r\n                throw error;\r\n            } finally {\r\n                !isNestedStateChange && (installedExtension.isStateChanging = false);\r\n            }\r\n\r\n            // Mark the extension as being installed.\r\n            localStorage.setItem(\r\n                GetExtensionInstalledKey(GetExtensionIdentity(feed.name, metadata.name)),\r\n                JSON.stringify({\r\n                    feed: feed.name,\r\n                    metadata,\r\n                })\r\n            );\r\n            localStorage.setItem(\r\n                InstalledExtensionsKey,\r\n                JSON.stringify(Array.from(this._installedExtensions.values()).map((extension) => GetExtensionIdentity(extension.feed.name, extension.metadata.name)))\r\n            );\r\n        }\r\n\r\n        return installedExtension;\r\n    }\r\n\r\n    private async _uninstallAsync(metadata: ExtensionMetadata, isNestedStateChange: boolean): Promise<void> {\r\n        const installedExtension = this._installedExtensions.get(metadata.name);\r\n        if (installedExtension && (isNestedStateChange || !installedExtension.isStateChanging)) {\r\n            try {\r\n                !isNestedStateChange && (installedExtension.isStateChanging = true);\r\n\r\n                // Disable the extension.\r\n                await this._disableAsync(metadata, true);\r\n\r\n                // Remove the extension from in memory.\r\n                this._installedExtensions.delete(metadata.name);\r\n\r\n                // Mark the extension as being uninstalled.\r\n                localStorage.removeItem(GetExtensionInstalledKey(GetExtensionIdentity(installedExtension.feed.name, metadata.name)));\r\n                localStorage.setItem(InstalledExtensionsKey, JSON.stringify(Array.from(this._installedExtensions.keys())));\r\n            } finally {\r\n                !isNestedStateChange && (installedExtension.isStateChanging = false);\r\n            }\r\n        }\r\n    }\r\n\r\n    private async _enableAsync(metadata: ExtensionMetadata, isInitialInstall: boolean, isNestedStateChange: boolean): Promise<void> {\r\n        const installedExtension = this._installedExtensions.get(metadata.name);\r\n        if (installedExtension && (isNestedStateChange || !installedExtension.isStateChanging)) {\r\n            try {\r\n                !isNestedStateChange && (installedExtension.isStateChanging = true);\r\n\r\n                // If we haven't done so already, load the extension module.\r\n                if (!installedExtension.extensionModule) {\r\n                    installedExtension.extensionModule = await installedExtension.feed.getExtensionModuleAsync(metadata.name);\r\n                }\r\n\r\n                if (!installedExtension.extensionModule) {\r\n                    throw new Error(`Unable to load extension module for \"${metadata.name}\" from feed \"${installedExtension.feed.name}\".`);\r\n                }\r\n\r\n                // Register the ServiceDefinitions.\r\n                let servicesRegistrationToken: Nullable<IDisposable> = null;\r\n                if (installedExtension.extensionModule.default.serviceDefinitions) {\r\n                    servicesRegistrationToken = await this._serviceContainer.addServicesAsync(...installedExtension.extensionModule.default.serviceDefinitions);\r\n                }\r\n\r\n                // Create a registration token to for dispose.\r\n                installedExtension.registrationToken = {\r\n                    dispose: () => {\r\n                        servicesRegistrationToken?.dispose();\r\n                    },\r\n                };\r\n            } catch (error: unknown) {\r\n                this._onInstallFailed({\r\n                    extension: metadata,\r\n                    error,\r\n                });\r\n                throw error;\r\n            } finally {\r\n                !isNestedStateChange && (installedExtension.isStateChanging = false);\r\n            }\r\n        }\r\n    }\r\n\r\n    private async _disableAsync(metadata: ExtensionMetadata, isNestedStateChange: boolean): Promise<void> {\r\n        const installedExtension = this._installedExtensions.get(metadata.name);\r\n        if (installedExtension && (isNestedStateChange || !installedExtension.isStateChanging)) {\r\n            try {\r\n                !isNestedStateChange && (installedExtension.isStateChanging = true);\r\n\r\n                // Unregister the service registrations.\r\n                installedExtension.registrationToken?.dispose();\r\n            } finally {\r\n                !isNestedStateChange && (installedExtension.isStateChanging = false);\r\n            }\r\n        }\r\n    }\r\n\r\n    private _addStateChangedHandler(metadata: ExtensionMetadata, handler: () => void): IDisposable {\r\n        let stateChangedHandlers = this._stateChangedHandlers.get(metadata.name);\r\n        if (!stateChangedHandlers) {\r\n            this._stateChangedHandlers.set(metadata.name, (stateChangedHandlers = new Set()));\r\n        }\r\n\r\n        stateChangedHandlers.add(handler);\r\n\r\n        return {\r\n            dispose: () => {\r\n                stateChangedHandlers.delete(handler);\r\n                if (stateChangedHandlers.size === 0) {\r\n                    this._stateChangedHandlers.delete(metadata.name);\r\n                }\r\n            },\r\n        };\r\n    }\r\n\r\n    private _createExtension(metadata: ExtensionMetadata, feed: IExtensionFeed): IExtension {\r\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\r\n        const extensionManager = this;\r\n        return {\r\n            metadata,\r\n            get isStateChanging() {\r\n                return extensionManager._installedExtensions.get(metadata.name)?.isStateChanging ?? false;\r\n            },\r\n            get isInstalled() {\r\n                return extensionManager._installedExtensions.has(metadata.name);\r\n            },\r\n            installAsync: async () => {\r\n                await extensionManager._installAsync(metadata, feed, false);\r\n            },\r\n            uninstallAsync: async () => await extensionManager._uninstallAsync(metadata, false),\r\n            addStateChangedHandler: (handler: () => void) => extensionManager._addStateChangedHandler(metadata, handler),\r\n        };\r\n    }\r\n\r\n    private _createInstalledExtension(metadata: ExtensionMetadata, feed: IExtensionFeed): InstalledExtension {\r\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\r\n        const extensionManager = this;\r\n        let isStateChanging = false;\r\n        return {\r\n            metadata,\r\n            feed,\r\n            get isStateChanging() {\r\n                return isStateChanging;\r\n            },\r\n            set isStateChanging(value) {\r\n                if (value !== isStateChanging) {\r\n                    isStateChanging = value;\r\n                    extensionManager._stateChangedHandlers.get(this.metadata.name)?.forEach((handler) => handler());\r\n                }\r\n            },\r\n        };\r\n    }\r\n}\r\n","import type { IDisposable } from \"core/index\";\r\n\r\nimport type { IService, ServiceDefinition } from \"./serviceDefinition\";\r\n\r\nimport { SortGraph } from \"../misc/graphUtils\";\r\n\r\n// Service definitions should strongly typed when they are defined to avoid programming errors. However, they are tracked internally\r\n// in a weakly typed manner so they can be handled generically.\r\nexport type WeaklyTypedServiceDefinition = Omit<ServiceDefinition<IService<symbol>[] | [], IService<symbol>[] | []>, \"factory\"> & {\r\n    /**\r\n     * A factory function responsible for creating a service instance.\r\n     */\r\n    factory: (...args: any) => ReturnType<ServiceDefinition<IService<symbol>[] | [], IService<symbol>[] | []>[\"factory\"]>;\r\n};\r\n\r\n// This sorts a set of service definitions based on their dependencies (e.g. a topological sort).\r\nfunction SortServiceDefinitions(serviceDefinitions: WeaklyTypedServiceDefinition[]) {\r\n    const sortedServiceDefinitions: typeof serviceDefinitions = [];\r\n    SortGraph(\r\n        serviceDefinitions,\r\n        function* (serviceDefinition) {\r\n            // Check each dependency.\r\n            for (const contractIdentity of serviceDefinition.consumes ?? []) {\r\n                // If another service definition produces the dependency contract, return it as an adjacent node for the purpose of sorting.\r\n                yield* serviceDefinitions.filter((otherServiceDefinition) => (otherServiceDefinition.produces ?? []).includes(contractIdentity));\r\n            }\r\n        },\r\n        sortedServiceDefinitions.push.bind(sortedServiceDefinitions)\r\n    );\r\n    return sortedServiceDefinitions;\r\n}\r\n\r\n/**\r\n * A service container manages the lifetimes of a set of services.\r\n * It takes care of instantiating the services in the correct order based on their dependencies,\r\n * passing dependencies through to services, and disposing of services when the container is disposed.\r\n */\r\nexport class ServiceContainer implements IDisposable {\r\n    private _isDisposed = false;\r\n    private readonly _serviceDefinitions = new Map<symbol, WeaklyTypedServiceDefinition>();\r\n    private readonly _serviceDependents = new Map<WeaklyTypedServiceDefinition, Set<WeaklyTypedServiceDefinition>>();\r\n    private readonly _serviceInstances = new Map<WeaklyTypedServiceDefinition, (IService<symbol> & Partial<IDisposable>) | void>();\r\n\r\n    public constructor(private readonly _friendlyName: string) {}\r\n\r\n    /**\r\n     * Adds a set of service definitions in the service container.\r\n     * The services are sorted based on their dependencies.\r\n     * @param args The service definitions to register, and optionally an abort signal.\r\n     * @returns A disposable that will remove the service definition from the service container.\r\n     */\r\n    public async addServicesAsync(\r\n        ...args: WeaklyTypedServiceDefinition[] | [...serviceDefinitions: WeaklyTypedServiceDefinition[], abortSignal: AbortSignal]\r\n    ): Promise<IDisposable> {\r\n        if (this._isDisposed) {\r\n            throw new Error(\"ServiceContainer is disposed.\");\r\n        }\r\n\r\n        const abortSignal = args[args.length - 1] instanceof AbortSignal ? (args.pop() as AbortSignal) : undefined;\r\n        const serviceDefinitions = args as WeaklyTypedServiceDefinition[];\r\n\r\n        const sortedServiceDefinitions = SortServiceDefinitions(serviceDefinitions);\r\n\r\n        const dispose = () => {\r\n            for (const serviceDefinition of sortedServiceDefinitions.reverse()) {\r\n                this._removeService(serviceDefinition);\r\n            }\r\n        };\r\n\r\n        try {\r\n            for (const serviceDefinition of sortedServiceDefinitions) {\r\n                // We could possibly optimize this by allowing some parallel initialization of services, but this would be way more complex, so let's wait and see if it's needed.\r\n                // eslint-disable-next-line no-await-in-loop\r\n                await this._addServiceAsync(serviceDefinition, abortSignal);\r\n            }\r\n        } catch (error: unknown) {\r\n            dispose();\r\n            throw error;\r\n        }\r\n\r\n        return {\r\n            dispose,\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Registers a service definition in the service container.\r\n     * @param serviceDefinition The service definition to register.\r\n     * @param abortSignal An optional abort signal.\r\n     * @returns A disposable that will remove the service definition from the service container.\r\n     */\r\n    public async addServiceAsync<Produces extends IService<symbol>[] = [], Consumes extends IService<symbol>[] = []>(\r\n        serviceDefinition: ServiceDefinition<Produces, Consumes>,\r\n        abortSignal?: AbortSignal\r\n    ): Promise<IDisposable> {\r\n        if (abortSignal) {\r\n            return await this.addServicesAsync(serviceDefinition, abortSignal);\r\n        } else {\r\n            return await this.addServicesAsync(serviceDefinition);\r\n        }\r\n    }\r\n\r\n    private async _addServiceAsync(service: WeaklyTypedServiceDefinition, abortSignal?: AbortSignal) {\r\n        if (this._isDisposed) {\r\n            throw new Error(`'${this._friendlyName}' container is disposed.`);\r\n        }\r\n\r\n        service.produces?.forEach((contract) => {\r\n            if (this._serviceDefinitions.has(contract)) {\r\n                throw new Error(`A service producing the contract '${contract.toString()}' has already been added to this '${this._friendlyName}' container.`);\r\n            }\r\n        });\r\n\r\n        service.produces?.forEach((contract) => {\r\n            this._serviceDefinitions.set(contract, service);\r\n        });\r\n\r\n        const dependencies =\r\n            service.consumes?.map((dependency) => {\r\n                const dependencyDefinition = this._serviceDefinitions.get(dependency);\r\n                if (!dependencyDefinition) {\r\n                    throw new Error(`Service '${dependency.toString()}' has not been registered in the '${this._friendlyName}' container.`);\r\n                }\r\n\r\n                let dependentDefinitions = this._serviceDependents.get(dependencyDefinition);\r\n                if (!dependentDefinitions) {\r\n                    this._serviceDependents.set(dependencyDefinition, (dependentDefinitions = new Set()));\r\n                }\r\n                dependentDefinitions.add(service);\r\n\r\n                const dependencyInstance = this._serviceInstances.get(dependencyDefinition);\r\n                if (!dependencyInstance) {\r\n                    throw new Error(`Service '${dependency.toString()}' has not been instantiated in the '${this._friendlyName}' container.`);\r\n                }\r\n\r\n                return dependencyInstance;\r\n            }) ?? [];\r\n\r\n        this._serviceInstances.set(service, await service.factory(...dependencies, abortSignal));\r\n    }\r\n\r\n    private _removeService(service: WeaklyTypedServiceDefinition) {\r\n        if (this._isDisposed) {\r\n            throw new Error(`'${this._friendlyName}' container is disposed.`);\r\n        }\r\n\r\n        const serviceDependents = this._serviceDependents.get(service);\r\n        if (serviceDependents) {\r\n            throw new Error(\r\n                `Service '${service.friendlyName}' has dependents: ${Array.from(serviceDependents)\r\n                    .map((dependent) => dependent.friendlyName)\r\n                    .join(\", \")}`\r\n            );\r\n        }\r\n\r\n        // NOTE: The service instance could be undefined, as the service factory for a service that does not produce any contracts is not required to return an actual service instance.\r\n        const serviceInstance = this._serviceInstances.get(service);\r\n        this._serviceInstances.delete(service);\r\n        serviceInstance?.dispose?.();\r\n\r\n        service.produces?.forEach((contract) => {\r\n            this._serviceDefinitions.delete(contract);\r\n        });\r\n\r\n        service.consumes?.forEach((dependency) => {\r\n            const dependencyDefinition = this._serviceDefinitions.get(dependency);\r\n            if (dependencyDefinition) {\r\n                const dependentDefinitions = this._serviceDependents.get(dependencyDefinition);\r\n                if (dependentDefinitions) {\r\n                    dependentDefinitions.delete(service);\r\n                    if (dependentDefinitions.size === 0) {\r\n                        this._serviceDependents.delete(dependencyDefinition);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Disposes the service container and all contained services.\r\n     */\r\n    public dispose() {\r\n        Array.from(this._serviceInstances.keys()).reverse().forEach(this._removeService.bind(this));\r\n        this._serviceInstances.clear();\r\n        this._serviceDependents.clear();\r\n        this._serviceDefinitions.clear();\r\n        this._isDisposed = true;\r\n    }\r\n}\r\n","import type { MenuButtonProps, MenuCheckedValueChangeData, MenuCheckedValueChangeEvent } from \"@fluentui/react-components\";\r\nimport type { TernaryDarkMode } from \"usehooks-ts\";\r\nimport type { ServiceDefinition } from \"../modularity/serviceDefinition\";\r\nimport type { IShellService } from \"../services/shellService\";\r\n\r\nimport { makeStyles, Menu, MenuItemRadio, MenuList, MenuPopover, MenuTrigger, SplitButton, Tooltip } from \"@fluentui/react-components\";\r\nimport { WeatherMoonRegular, WeatherSunnyRegular } from \"@fluentui/react-icons\";\r\nimport { useCallback } from \"react\";\r\n\r\nimport { useThemeMode } from \"../hooks/themeHooks\";\r\nimport { ShellServiceIdentity } from \"../services/shellService\";\r\n\r\nconst useStyles = makeStyles({\r\n    themeButton: {\r\n        margin: 0,\r\n    },\r\n    themeMenuPopover: {\r\n        minWidth: 0,\r\n    },\r\n});\r\n\r\nexport const ThemeSelectorServiceDefinition: ServiceDefinition<[], [IShellService]> = {\r\n    friendlyName: \"ThemeSelector\",\r\n    consumes: [ShellServiceIdentity],\r\n    factory: (shellService) => {\r\n        const registration = shellService.addToolbarItem({\r\n            key: \"ThemeSelector\",\r\n            horizontalLocation: \"right\",\r\n            verticalLocation: \"top\",\r\n            suppressTeachingMoment: true,\r\n            order: -300,\r\n            component: () => {\r\n                const classes = useStyles();\r\n\r\n                const { isDarkMode, themeMode, setThemeMode } = useThemeMode();\r\n\r\n                const onSelectedThemeChange = useCallback((e: MenuCheckedValueChangeEvent, data: MenuCheckedValueChangeData) => {\r\n                    setThemeMode(data.checkedItems.includes(\"System\") ? \"system\" : (data.checkedItems[0].toLocaleLowerCase() as TernaryDarkMode));\r\n                }, []);\r\n\r\n                const toggleTheme = useCallback(() => {\r\n                    setThemeMode(isDarkMode ? \"light\" : \"dark\");\r\n                }, [isDarkMode]);\r\n\r\n                return (\r\n                    <Menu positioning=\"below-end\" checkedValues={{ theme: [themeMode] }} onCheckedValueChange={onSelectedThemeChange}>\r\n                        <MenuTrigger disableButtonEnhancement={true}>\r\n                            {(triggerProps: MenuButtonProps) => (\r\n                                <Tooltip content=\"Select Theme\" relationship=\"label\">\r\n                                    <SplitButton\r\n                                        className={classes.themeButton}\r\n                                        menuButton={triggerProps}\r\n                                        primaryActionButton={{ onClick: toggleTheme }}\r\n                                        size=\"small\"\r\n                                        appearance=\"transparent\"\r\n                                        shape=\"circular\"\r\n                                        icon={isDarkMode ? <WeatherSunnyRegular /> : <WeatherMoonRegular />}\r\n                                    ></SplitButton>\r\n                                </Tooltip>\r\n                            )}\r\n                        </MenuTrigger>\r\n\r\n                        <MenuPopover className={classes.themeMenuPopover}>\r\n                            <MenuList>\r\n                                <MenuItemRadio name=\"theme\" value={\"system\" satisfies TernaryDarkMode}>\r\n                                    System\r\n                                </MenuItemRadio>\r\n                                <MenuItemRadio name=\"theme\" value={\"light\" satisfies TernaryDarkMode}>\r\n                                    Light\r\n                                </MenuItemRadio>\r\n                                <MenuItemRadio name=\"theme\" value={\"dark\" satisfies TernaryDarkMode}>\r\n                                    Dark\r\n                                </MenuItemRadio>\r\n                            </MenuList>\r\n                        </MenuPopover>\r\n                    </Menu>\r\n                );\r\n            },\r\n        });\r\n\r\n        return {\r\n            dispose: () => registration.dispose(),\r\n        };\r\n    },\r\n};\r\n","import type { ComponentType, FunctionComponent } from \"react\";\r\nimport type { TernaryDarkMode } from \"usehooks-ts\";\r\n\r\nimport type { IDisposable } from \"core/index\";\r\nimport type { IExtensionFeed } from \"./extensibility/extensionFeed\";\r\nimport type { IExtension, InstallFailedInfo } from \"./extensibility/extensionManager\";\r\nimport type { WeaklyTypedServiceDefinition } from \"./modularity/serviceContainer\";\r\nimport type { IRootComponentService, ShellServiceOptions } from \"./services/shellService\";\r\n\r\nimport {\r\n    Body1,\r\n    Button,\r\n    Dialog,\r\n    DialogActions,\r\n    DialogBody,\r\n    DialogContent,\r\n    DialogSurface,\r\n    DialogTitle,\r\n    List,\r\n    ListItem,\r\n    makeStyles,\r\n    Spinner,\r\n    tokens,\r\n} from \"@fluentui/react-components\";\r\nimport { ErrorCircleRegular } from \"@fluentui/react-icons\";\r\nimport { createElement, Suspense, useCallback, useEffect, useState } from \"react\";\r\nimport { createRoot } from \"react-dom/client\";\r\n\r\nimport { Deferred } from \"core/Misc/deferred\";\r\nimport { Logger } from \"core/Misc/logger\";\r\nimport { Theme } from \"./components/theme\";\r\nimport { ToastProvider } from \"shared-ui-components/fluent/primitives/toast\";\r\nimport { ExtensionManagerContext } from \"./contexts/extensionManagerContext\";\r\nimport { ExtensionManager } from \"./extensibility/extensionManager\";\r\nimport { SetThemeMode } from \"./hooks/themeHooks\";\r\nimport { ServiceContainer } from \"./modularity/serviceContainer\";\r\nimport { MakeShellServiceDefinition, RootComponentServiceIdentity } from \"./services/shellService\";\r\nimport { ThemeSelectorServiceDefinition } from \"./services/themeSelectorService\";\r\n\r\nconst useStyles = makeStyles({\r\n    app: {\r\n        colorScheme: \"light dark\",\r\n        flexGrow: 1,\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        backgroundColor: tokens.colorTransparentBackground,\r\n    },\r\n    spinner: {\r\n        flexGrow: 1,\r\n        animationDuration: \"1s\",\r\n        animationName: {\r\n            from: { opacity: 0 },\r\n            to: { opacity: 1 },\r\n        },\r\n    },\r\n    extensionErrorTitleDiv: {\r\n        display: \"flex\",\r\n        flexDirection: \"row\",\r\n        alignItems: \"center\",\r\n        gap: tokens.spacingHorizontalS,\r\n    },\r\n    extensionErrorIcon: {\r\n        color: tokens.colorPaletteRedForeground1,\r\n    },\r\n});\r\n\r\nexport type ModularToolOptions = {\r\n    /**\r\n     * The container element where the tool will be rendered.\r\n     */\r\n    containerElement: HTMLElement;\r\n\r\n    /**\r\n     * The service definitions to be registered with the tool.\r\n     */\r\n    serviceDefinitions: readonly WeaklyTypedServiceDefinition[];\r\n\r\n    /**\r\n     * The theme mode to use. If not specified, the default is \"system\", which uses the system/browser preference, and the last used mode is persisted.\r\n     */\r\n    themeMode?: TernaryDarkMode;\r\n\r\n    /**\r\n     * Whether to show the theme selector in the toolbar. Default is true.\r\n     */\r\n    showThemeSelector?: boolean;\r\n\r\n    /**\r\n     * The extension feeds that provide optional extensions the user can install.\r\n     */\r\n    extensionFeeds?: readonly IExtensionFeed[];\r\n} & ShellServiceOptions;\r\n\r\n/**\r\n * Creates a modular tool with a base set of common tool services, including the toolbar/side pane basic UI layout.\r\n * @param options The options for the tool.\r\n * @returns A token that can be used to dispose of the tool.\r\n */\r\nexport function MakeModularTool(options: ModularToolOptions): IDisposable {\r\n    const { containerElement, serviceDefinitions, themeMode, showThemeSelector = true, extensionFeeds = [] } = options;\r\n    if (themeMode) {\r\n        SetThemeMode(themeMode);\r\n    }\r\n\r\n    const modularToolRootComponent: FunctionComponent = () => {\r\n        const classes = useStyles();\r\n        const [extensionManagerContext, setExtensionManagerContext] = useState<ExtensionManagerContext>();\r\n        const [requiredExtensions, setRequiredExtensions] = useState<string[]>();\r\n        const [requiredExtensionsDeferred, setRequiredExtensionsDeferred] = useState<Deferred<boolean>>();\r\n        const [extensionInstallError, setExtensionInstallError] = useState<InstallFailedInfo>();\r\n\r\n        const [rootComponent, setRootComponent] = useState<ComponentType>();\r\n\r\n        // This is the main async initialization.\r\n        useEffect(() => {\r\n            const initializeExtensionManagerAsync = async () => {\r\n                const serviceContainer = new ServiceContainer(\"ModularToolContainer\");\r\n\r\n                // Register the shell service (top level toolbar/side pane UI layout).\r\n                await serviceContainer.addServiceAsync(MakeShellServiceDefinition(options));\r\n\r\n                // Register a service that simply consumes the IRootComponentService and sets the root component as state so it can be rendered.\r\n                await serviceContainer.addServiceAsync<[], [IRootComponentService]>({\r\n                    friendlyName: \"Root Component Bootstrapper\",\r\n                    consumes: [RootComponentServiceIdentity],\r\n                    factory: (rootComponentService) => {\r\n                        // Use function syntax for the state setter since the root component may be a function component.\r\n                        setRootComponent(() => rootComponentService.rootComponent);\r\n                        return {\r\n                            dispose: () => setRootComponent(undefined),\r\n                        };\r\n                    },\r\n                });\r\n\r\n                // Register the extension list service (for browsing/installing extensions) if extension feeds are provided.\r\n                if (extensionFeeds.length > 0) {\r\n                    const { ExtensionListServiceDefinition } = await import(\"./services/extensionsListService\");\r\n                    await serviceContainer.addServiceAsync(ExtensionListServiceDefinition);\r\n                }\r\n\r\n                // Register the theme selector service (for selecting the theme) if theming is configured.\r\n                if (showThemeSelector) {\r\n                    await serviceContainer.addServiceAsync(ThemeSelectorServiceDefinition);\r\n                }\r\n\r\n                // Register all external services (that make up a unique tool).\r\n                await serviceContainer.addServicesAsync(...serviceDefinitions);\r\n\r\n                // Create the extension manager, passing along the registry for runtime changes to the registered services.\r\n                const extensionManager = await ExtensionManager.CreateAsync(serviceContainer, extensionFeeds, setExtensionInstallError);\r\n\r\n                // Check query params for required extensions. This lets users share links with sets of extensions.\r\n                const queryParams = new URLSearchParams(window.location.search);\r\n                const requiredExtensions = queryParams.getAll(\"babylon.requiredExtension\");\r\n                const uninstalledExtensions: IExtension[] = [];\r\n                for (const requiredExtension of requiredExtensions) {\r\n                    // These could possibly be parallelized to speed things up, but it's more complex so let's wait and see if we need it.\r\n                    // eslint-disable-next-line no-await-in-loop\r\n                    const query = await extensionManager.queryExtensionsAsync(requiredExtension);\r\n                    // eslint-disable-next-line no-await-in-loop\r\n                    const extensions = await query.getExtensionsAsync(0, query.totalCount);\r\n                    for (const extension of extensions) {\r\n                        if (!extension.isInstalled) {\r\n                            uninstalledExtensions.push(extension);\r\n                        }\r\n                    }\r\n                }\r\n\r\n                // Check if any required extensions are uninstalled or disabled. If so, show a dialog to the user.\r\n                if (uninstalledExtensions.length > 0) {\r\n                    setRequiredExtensions(uninstalledExtensions.map((extension) => extension.metadata.name));\r\n                    const deferred = new Deferred<boolean>();\r\n                    setRequiredExtensionsDeferred(deferred);\r\n                    if (await deferred.promise) {\r\n                        for (const extension of uninstalledExtensions) {\r\n                            // This could possibly be parallelized to speed things up, but it's more complex so let's wait and see if we need it.\r\n                            // eslint-disable-next-line no-await-in-loop\r\n                            await extension.installAsync();\r\n                        }\r\n                    }\r\n                }\r\n\r\n                // Set the contexts.\r\n                setExtensionManagerContext({ extensionManager });\r\n\r\n                return () => {\r\n                    extensionManager.dispose();\r\n                    serviceContainer.dispose();\r\n                    serviceContainer.dispose();\r\n                };\r\n            };\r\n\r\n            const disposePromise = initializeExtensionManagerAsync();\r\n\r\n            return () => {\r\n                disposePromise\r\n                    // eslint-disable-next-line github/no-then\r\n                    .then((dispose) => dispose())\r\n                    // eslint-disable-next-line github/no-then\r\n                    .catch((error) => {\r\n                        Logger.Error(`Failed to dispose of the modular tool: ${error}`);\r\n                    });\r\n            };\r\n        }, []);\r\n\r\n        const onAcceptRequiredExtensions = useCallback(() => {\r\n            setRequiredExtensions(undefined);\r\n            requiredExtensionsDeferred?.resolve(true);\r\n        }, [setRequiredExtensions, requiredExtensionsDeferred]);\r\n\r\n        const onRejectRequiredExtensions = useCallback(() => {\r\n            setRequiredExtensions(undefined);\r\n            requiredExtensionsDeferred?.resolve(false);\r\n        }, [setRequiredExtensions, requiredExtensionsDeferred]);\r\n\r\n        const onAcknowledgedExtensionInstallError = useCallback(() => {\r\n            setExtensionInstallError(undefined);\r\n        }, [setExtensionInstallError]);\r\n\r\n        // Show a spinner until a main view has been set.\r\n        // eslint-disable-next-line @typescript-eslint/naming-convention\r\n        const Content: ComponentType = rootComponent ?? (() => <Spinner className={classes.spinner} />);\r\n\r\n        return (\r\n            <ExtensionManagerContext.Provider value={extensionManagerContext}>\r\n                <Theme className={classes.app}>\r\n                    <ToastProvider>\r\n                        <Dialog open={!!requiredExtensions} modalType=\"alert\">\r\n                            <DialogSurface>\r\n                                <DialogBody>\r\n                                    <DialogTitle>Required Extensions</DialogTitle>\r\n                                    <DialogContent>\r\n                                        Opening this URL requires the following extensions to be installed and enabled:\r\n                                        <ul>{requiredExtensions?.map((name) => <li key={name}>{name}</li>)}</ul>\r\n                                    </DialogContent>\r\n                                    <DialogActions>\r\n                                        <Button appearance=\"primary\" onClick={onAcceptRequiredExtensions}>\r\n                                            Install & Enable\r\n                                        </Button>\r\n                                        <Button appearance=\"secondary\" onClick={onRejectRequiredExtensions}>\r\n                                            No Thanks\r\n                                        </Button>\r\n                                    </DialogActions>\r\n                                </DialogBody>\r\n                            </DialogSurface>\r\n                        </Dialog>\r\n                        <Dialog open={!!extensionInstallError} modalType=\"alert\">\r\n                            <DialogSurface>\r\n                                <DialogBody>\r\n                                    <DialogTitle>\r\n                                        <div className={classes.extensionErrorTitleDiv}>\r\n                                            Extension Install Error\r\n                                            <ErrorCircleRegular className={classes.extensionErrorIcon} />\r\n                                        </div>\r\n                                    </DialogTitle>\r\n                                    <DialogContent>\r\n                                        <List>\r\n                                            <ListItem>\r\n                                                <Body1>{`Extension \"${extensionInstallError?.extension.name}\" failed to install and was removed.`}</Body1>\r\n                                            </ListItem>\r\n                                            <ListItem>\r\n                                                <Body1>{`${extensionInstallError?.error}`}</Body1>\r\n                                            </ListItem>\r\n                                        </List>\r\n                                    </DialogContent>\r\n                                    <DialogActions>\r\n                                        <Button appearance=\"primary\" onClick={onAcknowledgedExtensionInstallError}>\r\n                                            Close\r\n                                        </Button>\r\n                                    </DialogActions>\r\n                                </DialogBody>\r\n                            </DialogSurface>\r\n                        </Dialog>\r\n                        <Suspense fallback={<Spinner className={classes.spinner} />}>\r\n                            <Content />\r\n                        </Suspense>\r\n                    </ToastProvider>\r\n                </Theme>\r\n            </ExtensionManagerContext.Provider>\r\n        );\r\n    };\r\n\r\n    // Set the container element to be a flex container so that the tool can be displayed properly.\r\n    const originalContainerElementDisplay = containerElement.style.display;\r\n    containerElement.style.display = \"flex\";\r\n\r\n    // Create and render the react root component.\r\n    const reactRoot = createRoot(containerElement);\r\n    reactRoot.render(createElement(modularToolRootComponent));\r\n\r\n    let disposed = false;\r\n    return {\r\n        dispose: () => {\r\n            // Unmount and restore the original container element display.\r\n            if (!disposed) {\r\n                disposed = true;\r\n                reactRoot.unmount();\r\n                containerElement.style.display = originalContainerElementDisplay;\r\n            }\r\n        },\r\n    };\r\n}\r\n","import type { Camera, Gizmo, IDisposable, Light, Node, Scene } from \"core/index\";\r\nimport type { IService, ServiceDefinition } from \"../modularity/serviceDefinition\";\r\n\r\nimport { FrameGraphUtils } from \"core/FrameGraph/frameGraphUtils\";\r\nimport { CameraGizmo } from \"core/Gizmos/cameraGizmo\";\r\nimport { LightGizmo } from \"core/Gizmos/lightGizmo\";\r\nimport { UtilityLayerRenderer } from \"core/Rendering/utilityLayerRenderer\";\r\n\r\ntype Reference<T> = {\r\n    value: T;\r\n} & IDisposable;\r\n\r\nexport const GizmoServiceIdentity = Symbol(\"GizmoService\");\r\n\r\nexport interface IGizmoService extends IService<typeof GizmoServiceIdentity> {\r\n    getUtilityLayer(scene: Scene, layer?: string): Reference<UtilityLayerRenderer>;\r\n    getCameraGizmo(camera: Camera): Reference<CameraGizmo>;\r\n    getLightGizmo(light: Light): Reference<LightGizmo>;\r\n    getCameraGizmos(scene: Scene): readonly CameraGizmo[];\r\n    getLightGizmos(scene: Scene): readonly LightGizmo[];\r\n}\r\n\r\nexport const GizmoServiceDefinition: ServiceDefinition<[IGizmoService], []> = {\r\n    friendlyName: \"Gizmo Service\",\r\n    produces: [GizmoServiceIdentity],\r\n    factory: () => {\r\n        const utilityLayers = new WeakMap<Scene, Map<string, { utilityLayer: UtilityLayerRenderer; refCount: number }>>();\r\n        const getUtilityLayer = (scene: Scene, layer = \"default\") => {\r\n            let utilityLayerInfoForScene = utilityLayers.get(scene);\r\n            if (!utilityLayerInfoForScene) {\r\n                utilityLayerInfoForScene = new Map();\r\n                utilityLayers.set(scene, utilityLayerInfoForScene);\r\n            }\r\n            let utilityLayerInfo = utilityLayerInfoForScene.get(layer);\r\n            if (!utilityLayerInfo) {\r\n                const utilityLayer = scene.frameGraph ? FrameGraphUtils.CreateUtilityLayerRenderer(scene.frameGraph) : new UtilityLayerRenderer(scene);\r\n                utilityLayerInfo = { utilityLayer, refCount: 0 };\r\n                utilityLayerInfoForScene.set(layer, utilityLayerInfo);\r\n            }\r\n\r\n            utilityLayerInfo.refCount++;\r\n\r\n            let disposed = false;\r\n            return {\r\n                value: utilityLayerInfo.utilityLayer,\r\n                dispose: () => {\r\n                    if (!disposed) {\r\n                        disposed = true;\r\n                        utilityLayerInfo.refCount--;\r\n                        if (utilityLayerInfo.refCount === 0) {\r\n                            utilityLayerInfo.utilityLayer.dispose();\r\n                            utilityLayerInfoForScene.delete(layer);\r\n                            if (utilityLayerInfoForScene.size === 0) {\r\n                                utilityLayers.delete(scene);\r\n                            }\r\n                        }\r\n                    }\r\n                },\r\n            } satisfies Reference<UtilityLayerRenderer>;\r\n        };\r\n\r\n        function getGizmo<NodeT extends Node, GizmoT extends Gizmo>(\r\n            node: NodeT,\r\n            scene: Scene,\r\n            gizmoClass: new (...args: ConstructorParameters<typeof Gizmo>) => GizmoT,\r\n            gizmoMap: WeakMap<NodeT, { gizmo: GizmoT; refCount: number }>,\r\n            onGizmoCreated: (node: NodeT, gizmo: GizmoT) => void\r\n        ) {\r\n            let refCountedGizmo = gizmoMap.get(node);\r\n\r\n            if (!refCountedGizmo) {\r\n                const utilityLayerRef = getUtilityLayer(scene);\r\n                const gizmo = new gizmoClass(utilityLayerRef.value);\r\n                onGizmoCreated(node, gizmo);\r\n                const nodeDisposedObserver = node.onDisposeObservable.addOnce(() => gizmo.dispose());\r\n                const disposeGizmo = gizmo.dispose.bind(gizmo);\r\n                gizmo.dispose = () => {\r\n                    nodeDisposedObserver.remove();\r\n                    disposeGizmo();\r\n                    utilityLayerRef.dispose();\r\n                };\r\n                refCountedGizmo = { gizmo, refCount: 0 };\r\n                gizmoMap.set(node, refCountedGizmo);\r\n                onGizmoCreated(node, gizmo);\r\n            }\r\n\r\n            refCountedGizmo.refCount++;\r\n\r\n            let disposed = false;\r\n            return {\r\n                value: refCountedGizmo.gizmo,\r\n                dispose: () => {\r\n                    if (!disposed) {\r\n                        disposed = true;\r\n                        refCountedGizmo.refCount--;\r\n                        if (refCountedGizmo.refCount === 0) {\r\n                            refCountedGizmo.gizmo.dispose();\r\n                            gizmoMap.delete(node);\r\n                        }\r\n                    }\r\n                },\r\n            } satisfies Reference<GizmoT>;\r\n        }\r\n\r\n        const cameraGizmos = new WeakMap<Camera, { gizmo: CameraGizmo; refCount: number }>();\r\n        const getCameraGizmo = (camera: Camera) => getGizmo(camera, camera.getScene(), CameraGizmo, cameraGizmos, (camera, gizmo) => (gizmo.camera = camera));\r\n\r\n        const lightGizmos = new WeakMap<Light, { gizmo: LightGizmo; refCount: number }>();\r\n        const getLightGizmo = (light: Light) => getGizmo(light, light.getScene(), LightGizmo, lightGizmos, (light, gizmo) => (gizmo.light = light));\r\n\r\n        return {\r\n            getUtilityLayer,\r\n            getCameraGizmo,\r\n            getLightGizmo,\r\n            getCameraGizmos: (scene) => scene.cameras.map((camera) => cameraGizmos.get(camera)?.gizmo).filter(Boolean) as readonly CameraGizmo[],\r\n            getLightGizmos: (scene) => scene.lights.map((light) => lightGizmos.get(light)?.gizmo).filter(Boolean) as readonly LightGizmo[],\r\n        };\r\n    },\r\n};\r\n","import { createFluentIcon } from \"@fluentui/react-icons\";\r\n\r\nexport const MeshIcon = createFluentIcon(\r\n    \"Mesh\",\r\n    \"16\",\r\n    '<path d=\"M14.03,3.54l-5.11-2.07c-.61-.25-1.27-.25-1.88,0L1.93,3.54c-.57.23-.94.78-.94,1.39v6.15c0,.61.37,1.16.94,1.39l5.11,2.07c.3.12.62.18.94.18s.64-.06.94-.18l5.12-2.07c.57-.23.94-.78.94-1.39v-6.15c0-.61-.37-1.16-.94-1.39ZM13.97,7.71l-2.11.86v-2.71l2.11-.86v2.71ZM1.99,5l2.11.86v2.71l-2.11-.86v-2.71ZM11.35,4.98l-2.04-.83,1.78-.72,2.04.83-1.78.72ZM10.02,5.52l-2.04.83-2.04-.83,2.04-.83,2.04.83ZM4.6,4.98l-1.78-.72,2.04-.83,1.78.72-2.04.83ZM5.1,6.26l2.38.96v2.71l-2.38-.96v-2.71ZM8.48,7.22l2.38-.96v2.71l-2.38.96v-2.71ZM7.41,2.39c.18-.07.37-.11.56-.11s.38.04.56.11l1.22.49-1.78.72-1.79-.72,1.22-.49ZM1.99,11.07v-2.29l2.11.86v2.62l-1.8-.73c-.19-.08-.31-.26-.31-.46ZM5.1,12.67v-2.62l2.38.96v2.61s-.04,0-.06-.01l-2.31-.94ZM8.54,13.61s-.04,0-.06.01v-2.61l2.38-.96v2.62l-2.31.94ZM13.66,11.54l-1.8.73v-2.62l2.11-.86v2.29c0,.2-.12.39-.31.46Z\"/>'\r\n);\r\n\r\nexport const TranslateIcon = createFluentIcon(\r\n    \"Translate\",\r\n    \"24\",\r\n    '<path d=\"M20.16,12.98l-2.75-2.75c-.29-.29-.77-.29-1.06,0-.29.29-.29.77,0,1.06l1.47,1.47h-6.69v-6.69l1.47,1.47c.29.29.77.29,1.06,0,.29-.29.29-.77,0-1.06l-2.75-2.75c-.14-.14-.33-.22-.53-.22s-.39.08-.53.22l-2.75,2.75c-.29.29-.29.77,0,1.06.29.29.77.29,1.06,0l1.47-1.47v7.13l-3.52,3.52v-2.08c0-.41-.34-.75-.75-.75s-.75.34-.75.75v3.89c0,.2.08.39.22.53.14.14.33.22.53.22h3.89c.41,0,.75-.34.75-.75s-.34-.75-.75-.75h-2.08s3.52-3.52,3.52-3.52h7.13l-1.47,1.47c-.29.29-.29.77,0,1.06s.77.29,1.06,0l2.75-2.75c.14-.14.22-.33.22-.53s-.08-.39-.22-.53Z\" />'\r\n);\r\n\r\nexport const MaterialIcon = createFluentIcon(\r\n    \"Material\",\r\n    \"16\",\r\n    '<path d=\"M14.74,6.3c-.09-.36-.38-.64-.75-.72-.04-.09-.08-.18-.12-.27.1-.15.16-.32.16-.51,0-.18-.05-.34-.13-.48-1.23-1.97-3.41-3.28-5.9-3.28C4.16,1.04,1.04,4.16,1.04,7.99c0,.39.23.72.57.88.02.12.03.25.06.37-.18.18-.3.42-.3.7,0,.11.02.21.06.31.94,2.74,3.53,4.71,6.58,4.71,3.84,0,6.96-3.12,6.96-6.96,0-.59-.08-1.16-.22-1.7ZM2.07,8.58c-.02-.19-.03-.39-.03-.58,0-3.29,2.67-5.96,5.96-5.96,2.23,0,4.17,1.23,5.2,3.05.05.18-.07.45-.3.75-.57-.73-1.45-1.21-2.45-1.21-1.72,0-3.12,1.4-3.12,3.11,0,.33.07.65.16.95-3.05.82-5.17.52-5.42-.11ZM12.56,7.75c0,1.17-.95,2.11-2.11,2.11s-2.12-.95-2.12-2.11.95-2.11,2.12-2.11,2.11.95,2.11,2.11ZM8,13.96c-2.6,0-4.81-1.68-5.62-4.01.5.16,1.11.24,1.79.24,1.15,0,2.49-.22,3.79-.59.57.76,1.47,1.26,2.49,1.26,1.72,0,3.11-1.4,3.11-3.11,0-.34-.07-.65-.17-.96.13-.13.24-.26.34-.39.14.51.22,1.04.22,1.6,0,3.29-2.67,5.96-5.96,5.96Z\"/>'\r\n);\r\n\r\nexport const FlatTangentIcon = createFluentIcon(\r\n    \"FlatTangent\",\r\n    \"20\",\r\n    '<g transform=\"scale(0.5)\"><path d=\"M28,18.5a1.51,1.51,0,0,0-1.41,1H11.5v1H26.59a1.5,1.5,0,1,0,1.41-2Z\"/></g>'\r\n);\r\n\r\nexport const LinearTangentIcon = createFluentIcon(\r\n    \"LinearTangent\",\r\n    \"20\",\r\n    '<g transform=\"scale(0.5)\"><path d=\"M26,14a1.49,1.49,0,0,0-2.4,1.69l-10,10,.71.71,10-10A1.49,1.49,0,0,0,26,14Z\"/></g>'\r\n);\r\n\r\nexport const BreakTangentIcon = createFluentIcon(\r\n    \"BreakTangent\",\r\n    \"20\",\r\n    '<g transform=\"scale(0.5)\"><path d=\"M27.11,13.05a1.49,1.49,0,0,0-2.05.53,1.47,1.47,0,0,0,.14,1.72l-4.78,8L20,22.92l-.42.42-4.78-8a1.47,1.47,0,0,0,.14-1.72,1.49,1.49,0,0,0-2-.53,1.5,1.5,0,0,0,1,2.76l4.91,8.26-1,1L20,27.16,22.12,25l-1-1,4.91-8.26a1.5,1.5,0,0,0,1.05-2.76Z\"/></g>'\r\n);\r\n\r\nexport const UnifyTangentIcon = createFluentIcon(\r\n    \"UnifyTangent\",\r\n    \"20\",\r\n    '<g transform=\"scale(0.5)\"><path d=\"M27.94,18.28a1.49,1.49,0,0,0-1.41,1h-5l-1.62-1.63-1.62,1.63h-5a1.5,1.5,0,1,0,0,1h5l1.62,1.62,1.62-1.62h5a1.5,1.5,0,1,0,1.41-2Z\"/></g>'\r\n);\r\n\r\nexport const StepTangentIcon = createFluentIcon(\r\n    \"StepTangent\",\r\n    \"20\",\r\n    '<g transform=\"scale(0.5)\"><path d=\"M29,16.71a1.5,1.5,0,1,0-2,1.41v5.67H11v1H28V18.12A1.51,1.51,0,0,0,29,16.71Z\"/></g>'\r\n);\r\n","import type { MenuButtonProps, MenuCheckedValueChangeData, MenuCheckedValueChangeEvent } from \"@fluentui/react-components\";\r\nimport type { FunctionComponent } from \"react\";\r\n\r\nimport type { IDisposable, Nullable, Scene, TransformNode } from \"core/index\";\r\nimport type { IGizmoService } from \"../services/gizmoService\";\r\n\r\nimport { makeStyles, Menu, MenuItemRadio, MenuList, MenuPopover, MenuTrigger, SplitButton, tokens, Tooltip } from \"@fluentui/react-components\";\r\nimport { ArrowExpandRegular, ArrowRotateClockwiseRegular, CubeRegular, GlobeRegular, SelectObjectRegular } from \"@fluentui/react-icons\";\r\nimport { useCallback, useEffect, useState } from \"react\";\r\n\r\nimport { Bone } from \"core/Bones/bone\";\r\nimport { Camera } from \"core/Cameras/camera\";\r\nimport { GizmoCoordinatesMode } from \"core/Gizmos/gizmo\";\r\nimport { GizmoManager } from \"core/Gizmos/gizmoManager\";\r\nimport { Light } from \"core/Lights/light\";\r\nimport { AbstractMesh } from \"core/Meshes/abstractMesh\";\r\nimport { Node } from \"core/node\";\r\nimport { TranslateIcon } from \"shared-ui-components/fluent/icons\";\r\nimport { Collapse } from \"shared-ui-components/fluent/primitives/collapse\";\r\nimport { ToggleButton } from \"shared-ui-components/fluent/primitives/toggleButton\";\r\nimport { useProperty } from \"../hooks/compoundPropertyHooks\";\r\nimport { useResource } from \"../hooks/resourceHooks\";\r\n\r\ntype GizmoMode = \"translate\" | \"rotate\" | \"scale\" | \"boundingBox\";\r\n\r\nconst useStyles = makeStyles({\r\n    coordinatesModeButton: {\r\n        margin: `0 0 0 ${tokens.spacingHorizontalXS}`,\r\n    },\r\n    coordinatesModeMenu: {\r\n        minWidth: 0,\r\n    },\r\n});\r\n\r\nexport const GizmoToolbar: FunctionComponent<{ scene: Scene; entity: unknown; gizmoService: IGizmoService }> = (props) => {\r\n    const { scene, entity, gizmoService } = props;\r\n\r\n    const classes = useStyles();\r\n\r\n    const gizmoManager = useResource(\r\n        useCallback(() => {\r\n            const utilityLayerRef = gizmoService.getUtilityLayer(scene);\r\n            const keepDepthUtilityLayerRef = gizmoService.getUtilityLayer(scene, \"keepDepth\");\r\n            const gizmoManager = new GizmoManager(scene, undefined, utilityLayerRef.value, keepDepthUtilityLayerRef.value);\r\n            gizmoManager.usePointerToAttachGizmos = false;\r\n\r\n            const disposeGizmoManager = gizmoManager.dispose.bind(gizmoManager);\r\n            gizmoManager.dispose = () => {\r\n                disposeGizmoManager();\r\n                utilityLayerRef.dispose();\r\n                keepDepthUtilityLayerRef.dispose();\r\n            };\r\n\r\n            return gizmoManager;\r\n        }, [scene])\r\n    );\r\n\r\n    const coordinatesMode = useProperty(gizmoManager, \"coordinatesMode\");\r\n\r\n    const [gizmoMode, setGizmoMode] = useState<GizmoMode>();\r\n\r\n    useEffect(() => {\r\n        let visualizationGizmoRef: Nullable<IDisposable> = null;\r\n        let resolvedEntity = entity;\r\n        if (gizmoMode) {\r\n            if (entity instanceof Camera) {\r\n                const cameraGizmoRef = gizmoService.getCameraGizmo(entity);\r\n                visualizationGizmoRef = cameraGizmoRef;\r\n                resolvedEntity = cameraGizmoRef.value.attachedNode;\r\n            } else if (entity instanceof Light) {\r\n                const lightGizmoRef = gizmoService.getLightGizmo(entity);\r\n                visualizationGizmoRef = lightGizmoRef;\r\n                resolvedEntity = lightGizmoRef.value.attachedNode;\r\n            } else if (entity instanceof Bone) {\r\n                resolvedEntity = entity.getTransformNode() ?? entity;\r\n            }\r\n        }\r\n\r\n        let resolvedGizmoMode = gizmoMode;\r\n        if (!resolvedEntity) {\r\n            resolvedGizmoMode = undefined;\r\n        } else {\r\n            if (resolvedGizmoMode === \"translate\") {\r\n                if (!(resolvedEntity as TransformNode).position) {\r\n                    resolvedGizmoMode = undefined;\r\n                }\r\n            } else if (resolvedGizmoMode === \"rotate\") {\r\n                if (!(resolvedEntity as TransformNode).rotation) {\r\n                    resolvedGizmoMode = undefined;\r\n                }\r\n            } else if (resolvedGizmoMode === \"scale\") {\r\n                if (!(resolvedEntity as TransformNode).scaling) {\r\n                    resolvedGizmoMode = undefined;\r\n                }\r\n            } else {\r\n                if (!(resolvedEntity instanceof AbstractMesh)) {\r\n                    resolvedGizmoMode = undefined;\r\n                }\r\n            }\r\n        }\r\n\r\n        gizmoManager.positionGizmoEnabled = resolvedGizmoMode === \"translate\";\r\n        gizmoManager.rotationGizmoEnabled = resolvedGizmoMode === \"rotate\";\r\n        gizmoManager.scaleGizmoEnabled = resolvedGizmoMode === \"scale\";\r\n        gizmoManager.boundingBoxGizmoEnabled = resolvedGizmoMode === \"boundingBox\";\r\n\r\n        if (gizmoManager.gizmos.boundingBoxGizmo) {\r\n            gizmoManager.gizmos.boundingBoxGizmo.fixedDragMeshScreenSize = true;\r\n        }\r\n\r\n        if (!resolvedGizmoMode) {\r\n            gizmoManager.attachToNode(null);\r\n        } else {\r\n            if (resolvedEntity instanceof AbstractMesh) {\r\n                gizmoManager.attachToMesh(resolvedEntity);\r\n            } else if (resolvedEntity instanceof Node) {\r\n                gizmoManager.attachToNode(resolvedEntity);\r\n            }\r\n        }\r\n\r\n        return () => {\r\n            gizmoManager.attachToNode(null);\r\n            visualizationGizmoRef?.dispose();\r\n        };\r\n    }, [gizmoManager, gizmoMode, entity]);\r\n\r\n    const updateGizmoMode = useCallback((mode: GizmoMode) => {\r\n        setGizmoMode((currentMode) => (currentMode === mode ? undefined : mode));\r\n    }, []);\r\n\r\n    const onCoordinatesModeChange = useCallback((e: MenuCheckedValueChangeEvent, data: MenuCheckedValueChangeData) => {\r\n        gizmoManager.coordinatesMode = Number(data.checkedItems[0]);\r\n    }, []);\r\n\r\n    const toggleCoordinatesMode = useCallback(() => {\r\n        gizmoManager.coordinatesMode = coordinatesMode === GizmoCoordinatesMode.Local ? GizmoCoordinatesMode.World : GizmoCoordinatesMode.Local;\r\n    }, [gizmoManager, coordinatesMode]);\r\n\r\n    return (\r\n        <>\r\n            <ToggleButton title=\"Translate\" checkedIcon={TranslateIcon} value={gizmoMode === \"translate\"} onChange={() => updateGizmoMode(\"translate\")} />\r\n            <ToggleButton title=\"Rotate\" checkedIcon={ArrowRotateClockwiseRegular} value={gizmoMode === \"rotate\"} onChange={() => updateGizmoMode(\"rotate\")} />\r\n            <ToggleButton title=\"Scale\" checkedIcon={ArrowExpandRegular} value={gizmoMode === \"scale\"} onChange={() => updateGizmoMode(\"scale\")} />\r\n            <ToggleButton title=\"Bounding Box\" checkedIcon={SelectObjectRegular} value={gizmoMode === \"boundingBox\"} onChange={() => updateGizmoMode(\"boundingBox\")} />\r\n            <Collapse visible={!!gizmoMode} orientation=\"horizontal\">\r\n                {/* TODO: gehalper factor this into a shared component */}\r\n                <Menu positioning=\"below-end\" checkedValues={{ coordinatesMode: [coordinatesMode.toString()] }} onCheckedValueChange={onCoordinatesModeChange}>\r\n                    <MenuTrigger disableButtonEnhancement={true}>\r\n                        {(triggerProps: MenuButtonProps) => (\r\n                            <Tooltip content=\"Coordinates Mode\" relationship=\"label\">\r\n                                <SplitButton\r\n                                    className={classes.coordinatesModeButton}\r\n                                    menuButton={triggerProps}\r\n                                    primaryActionButton={{\r\n                                        onClick: toggleCoordinatesMode,\r\n                                    }}\r\n                                    size=\"small\"\r\n                                    appearance=\"transparent\"\r\n                                    shape=\"rounded\"\r\n                                    icon={coordinatesMode === GizmoCoordinatesMode.Local ? <CubeRegular /> : <GlobeRegular />}\r\n                                ></SplitButton>\r\n                            </Tooltip>\r\n                        )}\r\n                    </MenuTrigger>\r\n\r\n                    <MenuPopover className={classes.coordinatesModeMenu}>\r\n                        <MenuList>\r\n                            <MenuItemRadio name=\"coordinatesMode\" value={GizmoCoordinatesMode.Local.toString()}>\r\n                                Local\r\n                            </MenuItemRadio>\r\n                            <MenuItemRadio name=\"coordinatesMode\" value={GizmoCoordinatesMode.World.toString()}>\r\n                                World\r\n                            </MenuItemRadio>\r\n                        </MenuList>\r\n                    </MenuPopover>\r\n                </Menu>\r\n            </Collapse>\r\n        </>\r\n    );\r\n};\r\n","import type { ServiceDefinition } from \"../modularity/serviceDefinition\";\r\nimport type { ISceneContext } from \"./sceneContext\";\r\nimport type { ISelectionService } from \"./selectionService\";\r\nimport type { IShellService } from \"./shellService\";\r\nimport type { IGizmoService } from \"./gizmoService\";\r\n\r\nimport { SceneContextIdentity } from \"./sceneContext\";\r\nimport { SelectionServiceIdentity } from \"./selectionService\";\r\nimport { ShellServiceIdentity } from \"./shellService\";\r\nimport { GizmoToolbar } from \"../components/gizmoToolbar\";\r\nimport { useObservableState } from \"../hooks/observableHooks\";\r\nimport { GizmoServiceIdentity } from \"./gizmoService\";\r\n\r\nexport const GizmoToolbarServiceDefinition: ServiceDefinition<[], [ISceneContext, IShellService, ISelectionService, IGizmoService]> = {\r\n    friendlyName: \"Gizmo Toolbar\",\r\n    consumes: [SceneContextIdentity, ShellServiceIdentity, SelectionServiceIdentity, GizmoServiceIdentity],\r\n    factory: (sceneContext, shellService, selectionService, gizmoService) => {\r\n        shellService.addToolbarItem({\r\n            key: \"Gizmo Toolbar\",\r\n            verticalLocation: \"top\",\r\n            horizontalLocation: \"left\",\r\n            suppressTeachingMoment: true,\r\n            component: () => {\r\n                const scene = useObservableState(() => sceneContext.currentScene, sceneContext.currentSceneObservable);\r\n                const selectedEntity = useObservableState(() => selectionService.selectedEntity, selectionService.onSelectedEntityChanged);\r\n                return scene ? <GizmoToolbar scene={scene} entity={selectedEntity} gizmoService={gizmoService} /> : null;\r\n            },\r\n        });\r\n    },\r\n};\r\n","import type { ServiceDefinition } from \"../modularity/serviceDefinition\";\r\nimport type { ISceneContext } from \"./sceneContext\";\r\nimport type { IShellService } from \"./shellService\";\r\n\r\nimport { Badge, makeStyles, tokens } from \"@fluentui/react-components\";\r\nimport { useCallback } from \"react\";\r\n\r\nimport { useObservableState } from \"../hooks/observableHooks\";\r\nimport { SceneContextIdentity } from \"./sceneContext\";\r\nimport { ShellServiceIdentity } from \"./shellService\";\r\n\r\nconst useStyles = makeStyles({\r\n    badge: {\r\n        margin: tokens.spacingHorizontalXXS,\r\n        fontFamily: \"monospace\",\r\n    },\r\n});\r\n\r\nexport const MiniStatsServiceDefinition: ServiceDefinition<[], [ISceneContext, IShellService]> = {\r\n    friendlyName: \"Mini Stats\",\r\n    consumes: [SceneContextIdentity, ShellServiceIdentity],\r\n    factory: (sceneContext, shellService) => {\r\n        shellService.addToolbarItem({\r\n            key: \"Mini Stats\",\r\n            verticalLocation: \"bottom\",\r\n            horizontalLocation: \"right\",\r\n            suppressTeachingMoment: true,\r\n            component: () => {\r\n                const classes = useStyles();\r\n\r\n                const scene = useObservableState(\r\n                    useCallback(() => sceneContext.currentScene, [sceneContext.currentScene]),\r\n                    sceneContext.currentSceneObservable\r\n                );\r\n                const engine = scene?.getEngine();\r\n                const fps = useObservableState(\r\n                    useCallback(() => (engine ? Math.round(engine.getFps()) : null), [engine]),\r\n                    engine?.onBeginFrameObservable\r\n                );\r\n\r\n                return fps != null ? <Badge appearance=\"outline\" className={classes.badge}>{`${fps} fps`}</Badge> : null;\r\n            },\r\n        });\r\n    },\r\n};\r\n","import type { FunctionComponent } from \"react\";\r\n\r\nimport type { TargetedAnimation } from \"core/index\";\r\nimport type { ISelectionService } from \"../../../services/selectionService\";\r\nimport { LinkToEntityPropertyLine } from \"../linkToEntityPropertyLine\";\r\n\r\nexport const TargetedAnimationGeneralProperties: FunctionComponent<{ targetedAnimation: TargetedAnimation; selectionService: ISelectionService }> = (props) => {\r\n    const { selectionService } = props;\r\n\r\n    return (\r\n        <>\r\n            <LinkToEntityPropertyLine\r\n                label=\"Target\"\r\n                description=\"The entity animated by this animation.\"\r\n                entity={props.targetedAnimation.target}\r\n                selectionService={selectionService}\r\n            />\r\n        </>\r\n    );\r\n};\r\n","import type { Dispatch, FunctionComponent, PropsWithChildren, SetStateAction } from \"react\";\r\nimport type { Nullable } from \"core/types\";\r\nimport type { Animation } from \"core/Animations/animation\";\r\nimport type { TargetedAnimation, AnimationGroup } from \"core/Animations/animationGroup\";\r\nimport type { Scene } from \"core/scene\";\r\nimport type { IAnimatable } from \"core/Animations/animatable.interface\";\r\nimport type { AnimationKeyInterpolation } from \"core/Animations/animationKey\";\r\nimport type { CurveData } from \"./canvas/curveData\";\r\n\r\n/**\r\n * Represents a key point on a curve\r\n */\r\nexport type KeyPoint = {\r\n    /** The curve data this key point belongs to */\r\n    curve: CurveData;\r\n    /** The key index in the animation */\r\n    keyId: number;\r\n};\r\n\r\nimport { createContext, useCallback, useContext, useMemo, useRef, useState } from \"react\";\r\nimport { Observable } from \"core/Misc/observable\";\r\n\r\n/**\r\n * Options for active animation changed event\r\n */\r\nexport type ActiveAnimationChangedOptions = {\r\n    /** Whether to evaluate keys */\r\n    evaluateKeys?: boolean;\r\n    /** Whether to update frame */\r\n    frame?: boolean;\r\n    /** Whether to update range */\r\n    range?: boolean;\r\n};\r\n\r\n/**\r\n * State for the curve editor\r\n */\r\nexport type CurveEditorState = {\r\n    /** Editor title */\r\n    title: string;\r\n    /** All animations in the editor */\r\n    animations: Nullable<Animation[] | TargetedAnimation[]>;\r\n    /** The scene */\r\n    scene: Scene;\r\n    /** Target animatable */\r\n    target: Nullable<IAnimatable>;\r\n    /** Root animation group if any */\r\n    rootAnimationGroup: Nullable<AnimationGroup>;\r\n    /** Currently active/selected animations */\r\n    activeAnimations: Animation[];\r\n    /** Active color channels by animation ID */\r\n    activeChannels: { [key: number]: string };\r\n    /** Currently selected key points */\r\n    activeKeyPoints: Nullable<KeyPoint[]>;\r\n    /** The main/primary selected key point */\r\n    mainKeyPoint: Nullable<KeyPoint>;\r\n    /** Snippet ID for sharing */\r\n    snippetId: string;\r\n    /** Whether using targeted animations */\r\n    useTargetAnimations: boolean;\r\n    /** Current playhead frame */\r\n    activeFrame: number;\r\n    /** Start of visible/play range */\r\n    fromKey: number;\r\n    /** End of visible/play range */\r\n    toKey: number;\r\n    /** Whether to use existing play range */\r\n    useExistingPlayRange: boolean;\r\n    /** Playback direction */\r\n    forwardAnimation: boolean;\r\n    /** Whether animation is playing */\r\n    isPlaying: boolean;\r\n    /** Total clip length in frames */\r\n    clipLength: number;\r\n    /** Minimum reference frame */\r\n    referenceMinFrame: number;\r\n    /** Maximum reference frame */\r\n    referenceMaxFrame: number;\r\n    /** Whether an input is focused */\r\n    focusedInput: boolean;\r\n    /** Lock last frame value */\r\n    lockLastFrameValue: boolean;\r\n    /** Lock last frame frame number */\r\n    lockLastFrameFrame: boolean;\r\n};\r\n\r\n/**\r\n * Actions available in the curve editor\r\n */\r\nexport type CurveEditorActions = {\r\n    /** Set active animations */\r\n    setActiveAnimations: Dispatch<SetStateAction<Animation[]>>;\r\n    /** Set active frame */\r\n    setActiveFrame: Dispatch<SetStateAction<number>>;\r\n    /** Set from key */\r\n    setFromKey: Dispatch<SetStateAction<number>>;\r\n    /** Set to key */\r\n    setToKey: Dispatch<SetStateAction<number>>;\r\n    /** Set is playing */\r\n    setIsPlaying: Dispatch<SetStateAction<boolean>>;\r\n    /** Set clip length */\r\n    setClipLength: Dispatch<SetStateAction<number>>;\r\n    /** Set reference max frame */\r\n    setReferenceMaxFrame: Dispatch<SetStateAction<number>>;\r\n    /** Set focused input */\r\n    setFocusedInput: Dispatch<SetStateAction<boolean>>;\r\n    /** Set active key points */\r\n    setActiveKeyPoints: Dispatch<SetStateAction<Nullable<KeyPoint[]>>>;\r\n    /** Set active channels */\r\n    setActiveChannels: Dispatch<SetStateAction<{ [key: number]: string }>>;\r\n    /** Play animation */\r\n    play: (forward: boolean) => void;\r\n    /** Stop animation */\r\n    stop: () => void;\r\n    /** Move to specific frame */\r\n    moveToFrame: (frame: number) => void;\r\n    /** Refresh target state */\r\n    refreshTarget: () => void;\r\n    /** Clear key point selection */\r\n    clearSelection: () => void;\r\n    /** Enable a channel for an animation */\r\n    enableChannel: (animation: Animation, color: string) => void;\r\n    /** Disable a channel for an animation */\r\n    disableChannel: (animation: Animation) => void;\r\n    /** Check if channel is enabled */\r\n    isChannelEnabled: (animation: Animation, color: string) => boolean;\r\n    /** Get active channel color */\r\n    getActiveChannel: (animation: Animation) => string | undefined;\r\n    /** Reset all active channels */\r\n    resetAllActiveChannels: () => void;\r\n    /** Get previous key frame */\r\n    getPrevKey: () => Nullable<number>;\r\n    /** Get next key frame */\r\n    getNextKey: () => Nullable<number>;\r\n    /** Prepare the editor */\r\n    prepare: () => void;\r\n};\r\n\r\n/**\r\n * Observables for curve editor events\r\n */\r\nexport type CurveEditorObservables = {\r\n    /** Fired when active animation changes */\r\n    onActiveAnimationChanged: Observable<ActiveAnimationChangedOptions>;\r\n    /** Fired when active key point changes */\r\n    onActiveKeyPointChanged: Observable<void>;\r\n    /** Fired when host window is resized */\r\n    onHostWindowResized: Observable<void>;\r\n    /** Fired to select all keys */\r\n    onSelectAllKeys: Observable<void>;\r\n    /** Fired when active key frame changes */\r\n    onActiveKeyFrameChanged: Observable<number>;\r\n    /** Fired when frame is set */\r\n    onFrameSet: Observable<number>;\r\n    /** Fired when frame is manually entered */\r\n    onFrameManuallyEntered: Observable<number>;\r\n    /** Fired when main key point is set */\r\n    onMainKeyPointSet: Observable<void>;\r\n    /** Fired when main key point is moved */\r\n    onMainKeyPointMoved: Observable<void>;\r\n    /** Fired when value is set */\r\n    onValueSet: Observable<number>;\r\n    /** Fired when value is manually entered */\r\n    onValueManuallyEntered: Observable<number>;\r\n    /** Fired when frame is required */\r\n    onFrameRequired: Observable<void>;\r\n    /** Fired when create or update key point is required */\r\n    onCreateOrUpdateKeyPointRequired: Observable<void>;\r\n    /** Fired when flatten tangent is required */\r\n    onFlattenTangentRequired: Observable<void>;\r\n    /** Fired when linear tangent is required */\r\n    onLinearTangentRequired: Observable<void>;\r\n    /** Fired when break tangent is required */\r\n    onBreakTangentRequired: Observable<void>;\r\n    /** Fired when unify tangent is required */\r\n    onUnifyTangentRequired: Observable<void>;\r\n    /** Fired when step tangent is required */\r\n    onStepTangentRequired: Observable<void>;\r\n    /** Fired when animation should be deleted */\r\n    onDeleteAnimation: Observable<Animation>;\r\n    /** Fired when graph is moved */\r\n    onGraphMoved: Observable<number>;\r\n    /** Fired when graph is scaled */\r\n    onGraphScaled: Observable<number>;\r\n    /** Fired when range is updated */\r\n    onRangeUpdated: Observable<void>;\r\n    /** Fired when move to frame is required */\r\n    onMoveToFrameRequired: Observable<number>;\r\n    /** Fired when animation state changes */\r\n    onAnimationStateChanged: Observable<void>;\r\n    /** Fired when delete active key points is required */\r\n    onDeleteKeyActiveKeyPoints: Observable<void>;\r\n    /** Fired when selection rectangle is moved */\r\n    onSelectionRectangleMoved: Observable<DOMRect>;\r\n    /** Fired when animations are loaded */\r\n    onAnimationsLoaded: Observable<void>;\r\n    /** Fired when clip length is increased */\r\n    onClipLengthIncreased: Observable<number>;\r\n    /** Fired when clip length is decreased */\r\n    onClipLengthDecreased: Observable<number>;\r\n    /** Fired when interpolation mode is set */\r\n    onInterpolationModeSet: Observable<{ keyId: number; value: AnimationKeyInterpolation }>;\r\n    /** Fired when select to is activated */\r\n    onSelectToActivated: Observable<{ from: number; to: number }>;\r\n    /** Fired when range frame bar is resized */\r\n    onRangeFrameBarResized: Observable<number>;\r\n    /** Fired when playhead is moved */\r\n    onPlayheadMoved: Observable<number>;\r\n    /** Fired when active key data changes */\r\n    onActiveKeyDataChanged: Observable<number>;\r\n};\r\n\r\n/**\r\n * Combined context value\r\n */\r\nexport type CurveEditorContextValue = {\r\n    /** Editor state */\r\n    state: CurveEditorState;\r\n    /** Editor actions */\r\n    actions: CurveEditorActions;\r\n    /** Editor observables */\r\n    observables: CurveEditorObservables;\r\n};\r\n\r\nconst CurveEditorContext = createContext<CurveEditorContextValue | null>(null);\r\n\r\n/**\r\n * Props for the CurveEditorProvider\r\n */\r\nexport type CurveEditorProviderProps = {\r\n    /** The scene */\r\n    scene: Scene;\r\n    /** Target animatable */\r\n    target: Nullable<IAnimatable>;\r\n    /** Animations to edit */\r\n    animations: Nullable<Animation[] | TargetedAnimation[]>;\r\n    /** Root animation group if any */\r\n    rootAnimationGroup?: Nullable<AnimationGroup>;\r\n    /** Editor title */\r\n    title?: string;\r\n    /** Whether using targeted animations */\r\n    useTargetAnimations?: boolean;\r\n};\r\n\r\n/**\r\n * Provider component for curve editor context\r\n * @param props - Provider props including scene, target, and animations\r\n * @returns The provider component with context\r\n */\r\nexport const CurveEditorProvider: FunctionComponent<PropsWithChildren<CurveEditorProviderProps>> = (props) => {\r\n    const { scene, target, animations, rootAnimationGroup = null, title = \"Animation\", useTargetAnimations = false, children } = props;\r\n\r\n    // State\r\n    const [activeAnimations, setActiveAnimations] = useState<Animation[]>([]);\r\n    const [activeChannels, setActiveChannels] = useState<{ [key: number]: string }>({});\r\n    const [activeKeyPoints, setActiveKeyPoints] = useState<Nullable<KeyPoint[]>>(null);\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    const [mainKeyPoint, _setMainKeyPoint] = useState<Nullable<KeyPoint>>(null);\r\n    const [activeFrame, setActiveFrame] = useState(0);\r\n    const [fromKey, setFromKey] = useState(0);\r\n    const [toKey, setToKey] = useState(100);\r\n    const [isPlaying, setIsPlaying] = useState(false);\r\n    const [clipLength, setClipLength] = useState(100);\r\n    const [referenceMinFrame, setReferenceMinFrame] = useState(0);\r\n    const [referenceMaxFrame, setReferenceMaxFrame] = useState(100);\r\n    const [focusedInput, setFocusedInput] = useState(false);\r\n    const [snippetId, setSnippetId] = useState(\"\");\r\n    const [forwardAnimation, setForwardAnimation] = useState(true);\r\n\r\n    // Observables - created once\r\n    const observables = useRef<CurveEditorObservables>({\r\n        onActiveAnimationChanged: new Observable(),\r\n        onActiveKeyPointChanged: new Observable(),\r\n        onHostWindowResized: new Observable(),\r\n        onSelectAllKeys: new Observable(),\r\n        onActiveKeyFrameChanged: new Observable(),\r\n        onFrameSet: new Observable(),\r\n        onFrameManuallyEntered: new Observable(),\r\n        onMainKeyPointSet: new Observable(),\r\n        onMainKeyPointMoved: new Observable(),\r\n        onValueSet: new Observable(),\r\n        onValueManuallyEntered: new Observable(),\r\n        onFrameRequired: new Observable(),\r\n        onCreateOrUpdateKeyPointRequired: new Observable(),\r\n        onFlattenTangentRequired: new Observable(),\r\n        onLinearTangentRequired: new Observable(),\r\n        onBreakTangentRequired: new Observable(),\r\n        onUnifyTangentRequired: new Observable(),\r\n        onStepTangentRequired: new Observable(),\r\n        onDeleteAnimation: new Observable(),\r\n        onGraphMoved: new Observable(),\r\n        onGraphScaled: new Observable(),\r\n        onRangeUpdated: new Observable(),\r\n        onMoveToFrameRequired: new Observable(),\r\n        onAnimationStateChanged: new Observable(),\r\n        onDeleteKeyActiveKeyPoints: new Observable(),\r\n        onSelectionRectangleMoved: new Observable(),\r\n        onAnimationsLoaded: new Observable(),\r\n        onClipLengthIncreased: new Observable(),\r\n        onClipLengthDecreased: new Observable(),\r\n        onInterpolationModeSet: new Observable(),\r\n        onSelectToActivated: new Observable(),\r\n        onRangeFrameBarResized: new Observable(),\r\n        onPlayheadMoved: new Observable(),\r\n        onActiveKeyDataChanged: new Observable(),\r\n    });\r\n\r\n    // Actions\r\n    const prepare = useCallback(() => {\r\n        setIsPlaying(false);\r\n        if (!animations || !animations.length) {\r\n            return;\r\n        }\r\n\r\n        const animation = useTargetAnimations ? (animations[0] as TargetedAnimation).animation : (animations[0] as Animation);\r\n        const keys = animation.getKeys();\r\n\r\n        setReferenceMinFrame(0);\r\n        setReferenceMaxFrame(keys[keys.length - 1].frame);\r\n        setFromKey(0);\r\n        setToKey(keys[keys.length - 1].frame);\r\n        setSnippetId(animation.snippetId);\r\n        setClipLength(keys[keys.length - 1].frame);\r\n\r\n        // Auto-select the first animation\r\n        setActiveAnimations([animation]);\r\n\r\n        if (animation && animation.hasRunningRuntimeAnimations) {\r\n            setIsPlaying(true);\r\n        }\r\n    }, [animations, useTargetAnimations]);\r\n\r\n    const play = useCallback(\r\n        (forward: boolean) => {\r\n            setIsPlaying(true);\r\n            scene.stopAnimation(target);\r\n\r\n            if (forward) {\r\n                if (rootAnimationGroup) {\r\n                    rootAnimationGroup.start(true, 1.0, fromKey, toKey);\r\n                } else {\r\n                    scene.beginAnimation(target, fromKey, toKey, true);\r\n                }\r\n            } else {\r\n                if (rootAnimationGroup) {\r\n                    rootAnimationGroup.start(true, 1.0, toKey, fromKey);\r\n                } else {\r\n                    scene.beginAnimation(target, toKey, fromKey, true);\r\n                }\r\n            }\r\n            setForwardAnimation(forward);\r\n\r\n            // Move to active frame\r\n            if (rootAnimationGroup) {\r\n                rootAnimationGroup.goToFrame(activeFrame);\r\n            }\r\n\r\n            observables.current.onAnimationStateChanged.notifyObservers();\r\n        },\r\n        [scene, target, rootAnimationGroup, fromKey, toKey, activeFrame]\r\n    );\r\n\r\n    const stop = useCallback(() => {\r\n        setIsPlaying(false);\r\n        if (rootAnimationGroup) {\r\n            rootAnimationGroup.stop();\r\n        } else {\r\n            scene.stopAnimation(target);\r\n        }\r\n        observables.current.onAnimationStateChanged.notifyObservers();\r\n    }, [scene, target, rootAnimationGroup]);\r\n\r\n    const moveToFrame = useCallback(\r\n        (frame: number) => {\r\n            if (!animations || !animations.length) {\r\n                return;\r\n            }\r\n\r\n            setActiveFrame(frame);\r\n            observables.current.onPlayheadMoved.notifyObservers(frame);\r\n\r\n            if (!isPlaying) {\r\n                if (rootAnimationGroup) {\r\n                    rootAnimationGroup.start(false, 1.0, fromKey, toKey);\r\n                } else {\r\n                    scene.beginAnimation(target, fromKey, toKey, false);\r\n                }\r\n            }\r\n\r\n            for (const animationEntry of animations) {\r\n                const animation = useTargetAnimations ? (animationEntry as TargetedAnimation).animation : (animationEntry as Animation);\r\n                if (!animation.hasRunningRuntimeAnimations) {\r\n                    return;\r\n                }\r\n\r\n                for (const runtimeAnimation of animation.runtimeAnimations) {\r\n                    runtimeAnimation.goToFrame(frame);\r\n                }\r\n            }\r\n\r\n            stop();\r\n        },\r\n        [animations, useTargetAnimations, isPlaying, rootAnimationGroup, scene, target, fromKey, toKey, stop]\r\n    );\r\n\r\n    const refreshTarget = useCallback(() => {\r\n        if (!animations || !animations.length || isPlaying) {\r\n            return;\r\n        }\r\n        moveToFrame(activeFrame);\r\n    }, [animations, isPlaying, moveToFrame, activeFrame]);\r\n\r\n    const clearSelection = useCallback(() => {\r\n        setActiveKeyPoints([]);\r\n        observables.current.onActiveKeyPointChanged.notifyObservers();\r\n    }, []);\r\n\r\n    const enableChannel = useCallback((animation: Animation, color: string) => {\r\n        setActiveChannels((prev) => ({ ...prev, [animation.uniqueId]: color }));\r\n    }, []);\r\n\r\n    const disableChannel = useCallback((animation: Animation) => {\r\n        setActiveChannels((prev) => {\r\n            const newChannels = { ...prev };\r\n            delete newChannels[animation.uniqueId];\r\n            return newChannels;\r\n        });\r\n    }, []);\r\n\r\n    const isChannelEnabled = useCallback(\r\n        (animation: Animation, color: string) => {\r\n            return activeChannels[animation.uniqueId] === undefined || activeChannels[animation.uniqueId] === color;\r\n        },\r\n        [activeChannels]\r\n    );\r\n\r\n    const getActiveChannel = useCallback(\r\n        (animation: Animation) => {\r\n            return activeChannels[animation.uniqueId];\r\n        },\r\n        [activeChannels]\r\n    );\r\n\r\n    const resetAllActiveChannels = useCallback(() => {\r\n        clearSelection();\r\n        setActiveChannels({});\r\n    }, [clearSelection]);\r\n\r\n    const getPrevKey = useCallback((): Nullable<number> => {\r\n        if (!animations || !animations.length || activeAnimations.length === 0) {\r\n            return null;\r\n        }\r\n\r\n        let prevKey = -Number.MAX_VALUE;\r\n\r\n        for (const animation of activeAnimations) {\r\n            const keys = animation.getKeys();\r\n            for (const key of keys) {\r\n                if (key.frame < activeFrame && key.frame > prevKey) {\r\n                    prevKey = key.frame;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (prevKey === -Number.MAX_VALUE) {\r\n            prevKey = fromKey;\r\n        }\r\n\r\n        return prevKey;\r\n    }, [animations, activeAnimations, activeFrame, fromKey]);\r\n\r\n    const getNextKey = useCallback((): Nullable<number> => {\r\n        if (!animations || !animations.length) {\r\n            return null;\r\n        }\r\n\r\n        let nextKey = Number.MAX_VALUE;\r\n\r\n        for (const animation of activeAnimations) {\r\n            const keys = animation.getKeys();\r\n            for (const key of keys) {\r\n                if (key.frame > activeFrame && key.frame < nextKey) {\r\n                    nextKey = key.frame;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (nextKey === Number.MAX_VALUE) {\r\n            nextKey = toKey;\r\n        }\r\n\r\n        return nextKey;\r\n    }, [animations, activeAnimations, activeFrame, toKey]);\r\n\r\n    // Build context value\r\n    const state: CurveEditorState = useMemo(\r\n        () => ({\r\n            title,\r\n            animations,\r\n            scene,\r\n            target,\r\n            rootAnimationGroup,\r\n            activeAnimations,\r\n            activeChannels,\r\n            activeKeyPoints,\r\n            mainKeyPoint,\r\n            snippetId,\r\n            useTargetAnimations,\r\n            activeFrame,\r\n            fromKey,\r\n            toKey,\r\n            useExistingPlayRange: false,\r\n            forwardAnimation,\r\n            isPlaying,\r\n            clipLength,\r\n            referenceMinFrame,\r\n            referenceMaxFrame,\r\n            focusedInput,\r\n            lockLastFrameValue: false,\r\n            lockLastFrameFrame: false,\r\n        }),\r\n        [\r\n            title,\r\n            animations,\r\n            scene,\r\n            target,\r\n            rootAnimationGroup,\r\n            activeAnimations,\r\n            activeChannels,\r\n            activeKeyPoints,\r\n            mainKeyPoint,\r\n            snippetId,\r\n            useTargetAnimations,\r\n            activeFrame,\r\n            fromKey,\r\n            toKey,\r\n            forwardAnimation,\r\n            isPlaying,\r\n            clipLength,\r\n            referenceMinFrame,\r\n            referenceMaxFrame,\r\n            focusedInput,\r\n        ]\r\n    );\r\n\r\n    const actions: CurveEditorActions = useMemo(\r\n        () => ({\r\n            setActiveAnimations,\r\n            setActiveFrame,\r\n            setFromKey,\r\n            setToKey,\r\n            setIsPlaying,\r\n            setClipLength,\r\n            setReferenceMaxFrame,\r\n            setFocusedInput,\r\n            setActiveKeyPoints,\r\n            setActiveChannels,\r\n            play,\r\n            stop,\r\n            moveToFrame,\r\n            refreshTarget,\r\n            clearSelection,\r\n            enableChannel,\r\n            disableChannel,\r\n            isChannelEnabled,\r\n            getActiveChannel,\r\n            resetAllActiveChannels,\r\n            getPrevKey,\r\n            getNextKey,\r\n            prepare,\r\n        }),\r\n        [\r\n            play,\r\n            stop,\r\n            moveToFrame,\r\n            refreshTarget,\r\n            clearSelection,\r\n            enableChannel,\r\n            disableChannel,\r\n            isChannelEnabled,\r\n            getActiveChannel,\r\n            resetAllActiveChannels,\r\n            getPrevKey,\r\n            getNextKey,\r\n            prepare,\r\n        ]\r\n    );\r\n\r\n    const contextValue: CurveEditorContextValue = useMemo(\r\n        () => ({\r\n            state,\r\n            actions,\r\n            observables: observables.current,\r\n        }),\r\n        [state, actions]\r\n    );\r\n\r\n    return <CurveEditorContext.Provider value={contextValue}>{children}</CurveEditorContext.Provider>;\r\n};\r\n\r\n/**\r\n * Hook to access the curve editor context\r\n * @returns The curve editor context value\r\n */\r\nexport function useCurveEditor(): CurveEditorContextValue {\r\n    const context = useContext(CurveEditorContext);\r\n    if (!context) {\r\n        throw new Error(\"useCurveEditor must be used within a CurveEditorProvider\");\r\n    }\r\n    return context;\r\n}\r\n","import type { FunctionComponent } from \"react\";\r\n\r\nimport { makeStyles, tokens, Divider } from \"@fluentui/react-components\";\r\nimport { useCallback, useEffect, useState } from \"react\";\r\nimport { AddRegular, DeleteRegular, FullScreenMaximizeRegular } from \"@fluentui/react-icons\";\r\n\r\nimport { Button } from \"shared-ui-components/fluent/primitives/button\";\r\nimport { SpinButton } from \"shared-ui-components/fluent/primitives/spinButton\";\r\nimport { FlatTangentIcon, LinearTangentIcon, BreakTangentIcon, UnifyTangentIcon, StepTangentIcon } from \"shared-ui-components/fluent/icons\";\r\nimport { useCurveEditor } from \"./curveEditorContext\";\r\n\r\nconst useStyles = makeStyles({\r\n    root: {\r\n        display: \"flex\",\r\n        flexDirection: \"row\",\r\n        alignItems: \"center\",\r\n        gap: tokens.spacingHorizontalS,\r\n        padding: `${tokens.spacingVerticalS} ${tokens.spacingHorizontalM}`,\r\n        backgroundColor: tokens.colorNeutralBackground3,\r\n        height: \"40px\",\r\n        boxSizing: \"border-box\",\r\n    },\r\n    title: {\r\n        fontWeight: tokens.fontWeightSemibold,\r\n        fontSize: tokens.fontSizeBase300,\r\n        marginRight: tokens.spacingHorizontalM,\r\n    },\r\n    inputGroup: {\r\n        display: \"flex\",\r\n        flexDirection: \"row\",\r\n        alignItems: \"center\",\r\n        gap: tokens.spacingHorizontalXS,\r\n    },\r\n    inputLabel: {\r\n        fontSize: tokens.fontSizeBase200,\r\n        color: tokens.colorNeutralForeground3,\r\n    },\r\n    spinButton: {\r\n        width: \"80px\",\r\n    },\r\n    buttonGroup: {\r\n        display: \"flex\",\r\n        flexDirection: \"row\",\r\n        alignItems: \"center\",\r\n        gap: tokens.spacingHorizontalXXS,\r\n    },\r\n    divider: {\r\n        height: \"24px\",\r\n    },\r\n});\r\n\r\n/**\r\n * Top toolbar for the curve editor with frame/value inputs and action buttons\r\n * @returns The top bar component\r\n */\r\nexport const TopBar: FunctionComponent = () => {\r\n    const styles = useStyles();\r\n    const { state, observables } = useCurveEditor();\r\n\r\n    const [keyFrameValue, setKeyFrameValue] = useState<number | null>(null);\r\n    const [keyValue, setKeyValue] = useState<number | null>(null);\r\n    const [frameControlEnabled, setFrameControlEnabled] = useState(false);\r\n    const [valueControlEnabled, setValueControlEnabled] = useState(false);\r\n\r\n    const hasActiveAnimations = state.activeAnimations.length > 0;\r\n    const hasActiveKeyPoints = state.activeKeyPoints && state.activeKeyPoints.length > 0;\r\n\r\n    // Subscribe to observables\r\n    useEffect(() => {\r\n        const onFrameSetObserver = observables.onFrameSet.add((newFrameValue) => {\r\n            setKeyFrameValue(Math.round(newFrameValue));\r\n        });\r\n\r\n        const onValueSetObserver = observables.onValueSet.add((newValue) => {\r\n            setKeyValue(parseFloat(newValue.toFixed(2)));\r\n        });\r\n\r\n        const onActiveAnimationChangedObserver = observables.onActiveAnimationChanged.add(() => {\r\n            // Only reset values if there are no active key points selected\r\n            // This prevents values from being cleared during drag operations\r\n            if (!state.activeKeyPoints || state.activeKeyPoints.length === 0) {\r\n                setKeyFrameValue(null);\r\n                setKeyValue(null);\r\n            }\r\n        });\r\n\r\n        const onActiveKeyPointChangedObserver = observables.onActiveKeyPointChanged.add(() => {\r\n            const numKeys = state.activeKeyPoints?.length || 0;\r\n            // TODO: Properly type KeyPointComponent to access curve.animation\r\n            const numAnims = numKeys;\r\n\r\n            const frameEnabled = (numKeys === 1 && numAnims === 1) || (numKeys > 1 && numAnims > 1);\r\n            setFrameControlEnabled(frameEnabled);\r\n            setValueControlEnabled(numKeys > 0);\r\n            // Don't reset values here - they are set by onFrameSet/onValueSet observers\r\n        });\r\n\r\n        return () => {\r\n            observables.onFrameSet.remove(onFrameSetObserver);\r\n            observables.onValueSet.remove(onValueSetObserver);\r\n            observables.onActiveAnimationChanged.remove(onActiveAnimationChangedObserver);\r\n            observables.onActiveKeyPointChanged.remove(onActiveKeyPointChangedObserver);\r\n        };\r\n    }, [observables, state.activeKeyPoints]);\r\n\r\n    const handleFrameChange = useCallback(\r\n        (value: number) => {\r\n            if (value !== 0) {\r\n                observables.onFrameManuallyEntered.notifyObservers(value);\r\n            }\r\n        },\r\n        [observables]\r\n    );\r\n\r\n    const handleValueChange = useCallback(\r\n        (value: number) => {\r\n            observables.onValueManuallyEntered.notifyObservers(value);\r\n        },\r\n        [observables]\r\n    );\r\n\r\n    return (\r\n        <div className={styles.root}>\r\n            <div className={styles.title}>{state.title}</div>\r\n\r\n            <Divider vertical className={styles.divider} />\r\n\r\n            {/* Frame Input */}\r\n            <div className={styles.inputGroup}>\r\n                <div className={styles.inputLabel}>Frame:</div>\r\n                <SpinButton className={styles.spinButton} value={keyFrameValue ?? 0} onChange={handleFrameChange} disabled={!hasActiveAnimations || !frameControlEnabled} />\r\n            </div>\r\n\r\n            {/* Value Input */}\r\n            <div className={styles.inputGroup}>\r\n                <div className={styles.inputLabel}>Value:</div>\r\n                <SpinButton className={styles.spinButton} value={keyValue ?? 0} onChange={handleValueChange} disabled={!hasActiveAnimations || !valueControlEnabled} step={0.1} />\r\n            </div>\r\n\r\n            <Divider vertical className={styles.divider} />\r\n\r\n            {/* Key Actions */}\r\n            <div className={styles.buttonGroup}>\r\n                <Button\r\n                    icon={AddRegular}\r\n                    appearance=\"subtle\"\r\n                    disabled={!hasActiveAnimations}\r\n                    onClick={() => observables.onCreateOrUpdateKeyPointRequired.notifyObservers()}\r\n                    title=\"New key\"\r\n                />\r\n                <Button\r\n                    icon={DeleteRegular}\r\n                    appearance=\"subtle\"\r\n                    disabled={!hasActiveKeyPoints}\r\n                    onClick={() => observables.onDeleteKeyActiveKeyPoints.notifyObservers()}\r\n                    title=\"Delete key\"\r\n                />\r\n                <Button icon={FullScreenMaximizeRegular} appearance=\"subtle\" onClick={() => observables.onFrameRequired.notifyObservers()} title=\"Frame canvas\" />\r\n            </div>\r\n\r\n            <Divider vertical className={styles.divider} />\r\n\r\n            {/* Tangent Actions */}\r\n            <div className={styles.buttonGroup}>\r\n                <Button\r\n                    icon={FlatTangentIcon}\r\n                    appearance=\"subtle\"\r\n                    disabled={!hasActiveKeyPoints}\r\n                    onClick={() => observables.onFlattenTangentRequired.notifyObservers()}\r\n                    title=\"Flatten tangent\"\r\n                />\r\n                <Button\r\n                    icon={LinearTangentIcon}\r\n                    appearance=\"subtle\"\r\n                    disabled={!hasActiveKeyPoints}\r\n                    onClick={() => observables.onLinearTangentRequired.notifyObservers()}\r\n                    title=\"Linear tangent\"\r\n                />\r\n                <Button\r\n                    icon={BreakTangentIcon}\r\n                    appearance=\"subtle\"\r\n                    disabled={!hasActiveKeyPoints}\r\n                    onClick={() => observables.onBreakTangentRequired.notifyObservers()}\r\n                    title=\"Break tangent\"\r\n                />\r\n                <Button\r\n                    icon={UnifyTangentIcon}\r\n                    appearance=\"subtle\"\r\n                    disabled={!hasActiveKeyPoints}\r\n                    onClick={() => observables.onUnifyTangentRequired.notifyObservers()}\r\n                    title=\"Unify tangent\"\r\n                />\r\n                <Button\r\n                    icon={StepTangentIcon}\r\n                    appearance=\"subtle\"\r\n                    disabled={!hasActiveKeyPoints}\r\n                    onClick={() => observables.onStepTangentRequired.notifyObservers()}\r\n                    title=\"Step tangent\"\r\n                />\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","/**\r\n * Color constants for the curve editor\r\n * These colors are used consistently across the curve editor UI for\r\n * representing different animation channels and UI elements.\r\n */\r\n\r\n/**\r\n * Channel colors for multi-component animations (vectors, colors, quaternions)\r\n */\r\nexport const ChannelColors = {\r\n    /** Red channel / X component */\r\n    X: \"#DB3E3E\",\r\n    /** Green channel / Y component */\r\n    Y: \"#51E22D\",\r\n    /** Blue channel / Z component */\r\n    Z: \"#00A3FF\",\r\n    /** W component (quaternions) */\r\n    W: \"#8700FF\",\r\n    /** Alpha channel */\r\n    ALPHA: \"#FFFFFF\",\r\n} as const;\r\n\r\n/**\r\n * Aliases for color channels (R, G, B map to X, Y, Z)\r\n */\r\nexport const ColorChannelColors = {\r\n    /** Red channel */\r\n    R: ChannelColors.X,\r\n    /** Green channel */\r\n    G: ChannelColors.Y,\r\n    /** Blue channel */\r\n    B: ChannelColors.Z,\r\n    /** Alpha channel */\r\n    A: ChannelColors.ALPHA,\r\n} as const;\r\n\r\n/**\r\n * Default curve color for single-component (float) animations\r\n */\r\nexport const DefaultCurveColor = \"#ffffff\";\r\n\r\n/**\r\n * Graph UI colors\r\n */\r\nexport const GraphColors = {\r\n    /** Zero line color */\r\n    zeroLine: \"#666666\",\r\n    /** Selection rectangle stroke */\r\n    selectionStroke: \"#ffffff\",\r\n    /** Value axis label color */\r\n    valueAxisLabel: \"#555555\",\r\n    /** Value axis background */\r\n    valueAxisBackground: \"#111111\",\r\n    /** Selected keypoint color (gold) */\r\n    selectedKeypoint: \"#FFD700\",\r\n    /** Default keypoint stroke color */\r\n    keypointStroke: \"#ffffff\",\r\n    /** Tangent handle color */\r\n    tangentHandle: \"#FFD700\",\r\n} as const;\r\n","import type { FunctionComponent } from \"react\";\r\nimport type { Animation } from \"core/Animations/animation\";\r\n\r\nimport { makeStyles, tokens, Input, Label, Dropdown, Option } from \"@fluentui/react-components\";\r\nimport { useCallback, useEffect, useState } from \"react\";\r\n\r\nimport { Button } from \"shared-ui-components/fluent/primitives/button\";\r\nimport { useCurveEditor } from \"../curveEditorContext\";\r\n\r\nconst useStyles = makeStyles({\r\n    root: {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        gap: tokens.spacingVerticalM,\r\n    },\r\n    header: {\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        gap: tokens.spacingHorizontalS,\r\n    },\r\n    title: {\r\n        fontSize: tokens.fontSizeBase400,\r\n        fontWeight: tokens.fontWeightSemibold,\r\n    },\r\n    form: {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        gap: tokens.spacingVerticalS,\r\n    },\r\n    row: {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        gap: tokens.spacingVerticalXS,\r\n    },\r\n    buttons: {\r\n        display: \"flex\",\r\n        gap: tokens.spacingHorizontalS,\r\n        marginTop: tokens.spacingVerticalM,\r\n    },\r\n});\r\n\r\nconst LOOP_MODES = [\r\n    { label: \"Cycle\", value: 1 },\r\n    { label: \"Constant\", value: 0 },\r\n    { label: \"Relative\", value: 2 },\r\n    { label: \"Relative from current\", value: 4 },\r\n] as const;\r\n\r\ntype EditAnimationPanelProps = {\r\n    animation: Animation;\r\n    onClose: () => void;\r\n};\r\n\r\n/**\r\n * Panel for editing animation properties\r\n * @returns The edit animation panel component\r\n */\r\nexport const EditAnimationPanel: FunctionComponent<EditAnimationPanelProps> = ({ animation, onClose }) => {\r\n    const styles = useStyles();\r\n    const { observables } = useCurveEditor();\r\n\r\n    const [name, setName] = useState(animation.name);\r\n    const [property, setProperty] = useState(animation.targetProperty);\r\n    const [loopMode, setLoopMode] = useState(animation.loopMode ?? 1);\r\n\r\n    // Update state when animation changes\r\n    useEffect(() => {\r\n        setName(animation.name);\r\n        setProperty(animation.targetProperty);\r\n        setLoopMode(animation.loopMode ?? 1);\r\n    }, [animation]);\r\n\r\n    const isValid = name.trim().length > 0 && property.trim().length > 0;\r\n\r\n    const saveChanges = useCallback(() => {\r\n        if (!isValid) {\r\n            return;\r\n        }\r\n\r\n        // Update animation properties\r\n        animation.name = name;\r\n        animation.targetProperty = property;\r\n        animation.loopMode = loopMode;\r\n\r\n        // Notify observers\r\n        observables.onAnimationsLoaded.notifyObservers();\r\n\r\n        onClose();\r\n    }, [isValid, name, property, loopMode, animation, observables, onClose]);\r\n\r\n    const getLoopModeLabel = (value: number): string => {\r\n        const mode = LOOP_MODES.find((m) => m.value === value);\r\n        return mode?.label ?? \"Cycle\";\r\n    };\r\n\r\n    return (\r\n        <div className={styles.root}>\r\n            <div className={styles.form}>\r\n                <div className={styles.row}>\r\n                    <Label>Display Name</Label>\r\n                    <Input value={name} onChange={(_, data) => setName(data.value)} placeholder=\"Animation name\" />\r\n                </div>\r\n\r\n                <div className={styles.row}>\r\n                    <Label>Property</Label>\r\n                    <Input value={property} onChange={(_, data) => setProperty(data.value)} placeholder=\"e.g., position, rotation, scaling\" />\r\n                </div>\r\n\r\n                <div className={styles.row}>\r\n                    <Label>Loop Mode</Label>\r\n                    <Dropdown\r\n                        value={getLoopModeLabel(loopMode)}\r\n                        selectedOptions={[loopMode.toString()]}\r\n                        onOptionSelect={(_, data) => setLoopMode(Number(data.optionValue))}\r\n                        positioning=\"below\"\r\n                        inlinePopup\r\n                    >\r\n                        {LOOP_MODES.map((mode) => (\r\n                            <Option key={mode.value} value={mode.value.toString()}>\r\n                                {mode.label}\r\n                            </Option>\r\n                        ))}\r\n                    </Dropdown>\r\n                </div>\r\n            </div>\r\n\r\n            <div className={styles.buttons}>\r\n                <Button appearance=\"primary\" onClick={saveChanges} label=\"Save\" disabled={!isValid} />\r\n                <Button appearance=\"subtle\" onClick={onClose} label=\"Cancel\" />\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","import type { FunctionComponent } from \"react\";\r\nimport type { Animation } from \"core/Animations/animation\";\r\nimport type { TargetedAnimation } from \"core/Animations/animationGroup\";\r\n\r\nimport { makeStyles, tokens } from \"@fluentui/react-components\";\r\nimport { useCallback, useState } from \"react\";\r\nimport { ChevronDownRegular, ChevronRightRegular, SettingsRegular, DeleteRegular, CircleSmallFilled } from \"@fluentui/react-icons\";\r\nimport { Animation as AnimationEnum } from \"core/Animations/animation\";\r\n\r\nimport { Button } from \"shared-ui-components/fluent/primitives/button\";\r\nimport { Popover } from \"shared-ui-components/fluent/primitives/popover\";\r\nimport { useCurveEditor } from \"../curveEditorContext\";\r\nimport { ChannelColors, ColorChannelColors } from \"../curveEditorColors\";\r\nimport { useObservableState } from \"../../../hooks/observableHooks\";\r\nimport { EditAnimationPanel } from \"./editAnimationPanel\";\r\n\r\nconst useStyles = makeStyles({\r\n    root: {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n    },\r\n    entry: {\r\n        display: \"flex\",\r\n        flexDirection: \"row\",\r\n        alignItems: \"center\",\r\n        padding: `${tokens.spacingVerticalXS} ${tokens.spacingHorizontalS}`,\r\n        cursor: \"pointer\",\r\n        borderRadius: tokens.borderRadiusMedium,\r\n        color: tokens.colorNeutralForeground1,\r\n        \"&:hover\": {\r\n            backgroundColor: tokens.colorSubtleBackgroundHover,\r\n        },\r\n    },\r\n    entryActive: {\r\n        backgroundColor: tokens.colorSubtleBackgroundSelected,\r\n        color: tokens.colorNeutralForeground1,\r\n        \"&:hover\": {\r\n            backgroundColor: tokens.colorSubtleBackgroundSelected,\r\n        },\r\n    },\r\n    chevron: {\r\n        width: \"20px\",\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\",\r\n        flexShrink: 0,\r\n    },\r\n    name: {\r\n        flex: 1,\r\n        overflow: \"hidden\",\r\n        textOverflow: \"ellipsis\",\r\n        whiteSpace: \"nowrap\",\r\n        fontSize: tokens.fontSizeBase200,\r\n        color: \"inherit\",\r\n    },\r\n    actions: {\r\n        display: \"flex\",\r\n        flexDirection: \"row\",\r\n        gap: tokens.spacingHorizontalXXS,\r\n        opacity: 0,\r\n    },\r\n    actionsVisible: {\r\n        opacity: 1,\r\n    },\r\n    subEntry: {\r\n        paddingLeft: tokens.spacingHorizontalL,\r\n    },\r\n    subEntryDisabled: {\r\n        opacity: 0.5,\r\n    },\r\n    colorDot: {\r\n        width: \"8px\",\r\n        height: \"8px\",\r\n        borderRadius: \"50%\",\r\n        marginRight: tokens.spacingHorizontalXS,\r\n    },\r\n});\r\n\r\ntype AnimationEntryProps = {\r\n    /** The animation to display */\r\n    animation: Animation;\r\n};\r\n\r\n/**\r\n * Single animation entry in the list\r\n * @returns Animation entry component\r\n */\r\nconst AnimationEntry: FunctionComponent<AnimationEntryProps> = ({ animation }) => {\r\n    const styles = useStyles();\r\n    const { state, actions, observables } = useCurveEditor();\r\n\r\n    const [isExpanded, setIsExpanded] = useState(false);\r\n    const [isHovered, setIsHovered] = useState(false);\r\n    const [isEditOpen, setIsEditOpen] = useState(false);\r\n\r\n    const isActive = state.activeAnimations.indexOf(animation) !== -1;\r\n    const isExpandable = animation.dataType !== AnimationEnum.ANIMATIONTYPE_FLOAT;\r\n\r\n    const handleClick = useCallback(\r\n        (evt: React.MouseEvent) => {\r\n            if (!evt.ctrlKey) {\r\n                actions.setActiveAnimations([animation]);\r\n                actions.resetAllActiveChannels();\r\n            } else {\r\n                const index = state.activeAnimations.indexOf(animation);\r\n                if (index !== -1) {\r\n                    actions.setActiveAnimations((prev) => prev.filter((a) => a !== animation));\r\n                } else {\r\n                    actions.setActiveAnimations((prev) => [...prev, animation]);\r\n                }\r\n            }\r\n            actions.disableChannel(animation);\r\n            observables.onActiveAnimationChanged.notifyObservers({});\r\n        },\r\n        [animation, actions, observables, state.activeAnimations]\r\n    );\r\n\r\n    const handleExpandClick = useCallback((evt?: React.MouseEvent) => {\r\n        evt?.stopPropagation();\r\n        setIsExpanded((prev) => !prev);\r\n    }, []);\r\n\r\n    const handleEditOpenChange = useCallback((open: boolean) => {\r\n        setIsEditOpen(open);\r\n    }, []);\r\n\r\n    const handleDelete = useCallback(\r\n        (evt?: React.MouseEvent) => {\r\n            evt?.stopPropagation();\r\n            observables.onDeleteAnimation.notifyObservers(animation);\r\n        },\r\n        [animation, observables]\r\n    );\r\n\r\n    const getSubEntries = () => {\r\n        switch (animation.dataType) {\r\n            case AnimationEnum.ANIMATIONTYPE_COLOR3:\r\n                return [\r\n                    { name: \"Red\", color: ColorChannelColors.R },\r\n                    { name: \"Green\", color: ColorChannelColors.G },\r\n                    { name: \"Blue\", color: ColorChannelColors.B },\r\n                ];\r\n            case AnimationEnum.ANIMATIONTYPE_COLOR4:\r\n                return [\r\n                    { name: \"Red\", color: ColorChannelColors.R },\r\n                    { name: \"Green\", color: ColorChannelColors.G },\r\n                    { name: \"Blue\", color: ColorChannelColors.B },\r\n                    { name: \"Alpha\", color: ColorChannelColors.A },\r\n                ];\r\n            case AnimationEnum.ANIMATIONTYPE_VECTOR2:\r\n                return [\r\n                    { name: \"X\", color: ChannelColors.X },\r\n                    { name: \"Y\", color: ChannelColors.Y },\r\n                ];\r\n            case AnimationEnum.ANIMATIONTYPE_VECTOR3:\r\n                return [\r\n                    { name: \"X\", color: ChannelColors.X },\r\n                    { name: \"Y\", color: ChannelColors.Y },\r\n                    { name: \"Z\", color: ChannelColors.Z },\r\n                ];\r\n            case AnimationEnum.ANIMATIONTYPE_QUATERNION:\r\n                return [\r\n                    { name: \"X\", color: ChannelColors.X },\r\n                    { name: \"Y\", color: ChannelColors.Y },\r\n                    { name: \"Z\", color: ChannelColors.Z },\r\n                    { name: \"W\", color: ChannelColors.W },\r\n                ];\r\n            default:\r\n                return [];\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className={styles.root}>\r\n            <div\r\n                className={`${styles.entry} ${isActive ? styles.entryActive : \"\"}`}\r\n                onClick={handleClick}\r\n                onMouseEnter={() => setIsHovered(true)}\r\n                onMouseLeave={() => setIsHovered(false)}\r\n            >\r\n                <div className={styles.chevron}>\r\n                    {isExpandable ? (\r\n                        <Button icon={isExpanded ? ChevronDownRegular : ChevronRightRegular} appearance=\"transparent\" onClick={handleExpandClick} />\r\n                    ) : (\r\n                        <CircleSmallFilled />\r\n                    )}\r\n                </div>\r\n                <div className={styles.name} title={animation.name}>\r\n                    {animation.name}\r\n                </div>\r\n                <div className={`${styles.actions} ${isHovered || isEditOpen ? styles.actionsVisible : \"\"}`}>\r\n                    <Popover\r\n                        open={isEditOpen}\r\n                        onOpenChange={handleEditOpenChange}\r\n                        positioning=\"after\"\r\n                        trigger={<Button icon={SettingsRegular} appearance=\"transparent\" title=\"Edit animation\" />}\r\n                    >\r\n                        <EditAnimationPanel animation={animation} onClose={() => setIsEditOpen(false)} />\r\n                    </Popover>\r\n                    <Button icon={DeleteRegular} appearance=\"transparent\" onClick={handleDelete} title=\"Delete animation\" />\r\n                </div>\r\n            </div>\r\n            {isExpanded && getSubEntries().map((sub) => <AnimationSubEntry key={sub.name} animation={animation} subName={sub.name} color={sub.color} />)}\r\n        </div>\r\n    );\r\n};\r\n\r\ntype AnimationSubEntryProps = {\r\n    /** The animation */\r\n    animation: Animation;\r\n    /** The sub-entry name (X, Y, Z, R, G, B, etc.) */\r\n    subName: string;\r\n    /** The color for this channel */\r\n    color: string;\r\n};\r\n\r\n/**\r\n * Sub-entry for vector/color animations (X, Y, Z, R, G, B, etc.)\r\n * @returns Animation sub-entry component\r\n */\r\nconst AnimationSubEntry: FunctionComponent<AnimationSubEntryProps> = ({ animation, subName, color }) => {\r\n    const styles = useStyles();\r\n    const { actions, observables } = useCurveEditor();\r\n\r\n    const activeChannel = actions.getActiveChannel(animation);\r\n    const isThisChannelActive = activeChannel === color;\r\n    const isEnabled = activeChannel === undefined || isThisChannelActive;\r\n\r\n    const handleClick = useCallback(() => {\r\n        if (isThisChannelActive) {\r\n            // Clicking on the already-active channel disables filtering (shows all)\r\n            actions.disableChannel(animation);\r\n        } else {\r\n            // Clicking on a channel enables only that channel\r\n            actions.enableChannel(animation, color);\r\n        }\r\n        observables.onActiveAnimationChanged.notifyObservers({});\r\n    }, [animation, color, isThisChannelActive, actions, observables]);\r\n\r\n    return (\r\n        <div className={`${styles.entry} ${styles.subEntry} ${!isEnabled ? styles.subEntryDisabled : \"\"}`} onClick={handleClick}>\r\n            <div className={styles.colorDot} style={{ backgroundColor: color }} />\r\n            <div className={styles.name}>{subName}</div>\r\n        </div>\r\n    );\r\n};\r\n\r\n/**\r\n * Animation list component showing all animations\r\n * @returns Animation list component\r\n */\r\nexport const AnimationList: FunctionComponent = () => {\r\n    const styles = useStyles();\r\n    const { state, observables } = useCurveEditor();\r\n\r\n    // Re-render when animations are loaded or changed (e.g. animation deleted)\r\n    // useCallback stabilizes the accessor to prevent infinite re-render loops\r\n    useObservableState(\r\n        useCallback(() => ({}), []),\r\n        observables.onAnimationsLoaded,\r\n        observables.onActiveAnimationChanged\r\n    );\r\n\r\n    // Get animations from target if available (for dynamically added animations), otherwise from state\r\n    const animations = state.target?.animations ?? state.animations;\r\n\r\n    return (\r\n        <div className={styles.root}>\r\n            {animations?.map((a: Animation | TargetedAnimation, i: number) => {\r\n                const animation = state.useTargetAnimations ? (a as TargetedAnimation).animation : (a as Animation);\r\n                return <AnimationEntry key={animation.uniqueId ?? i} animation={animation} />;\r\n            })}\r\n        </div>\r\n    );\r\n};\r\n","import type { FunctionComponent } from \"react\";\r\nimport type { IAnimationKey } from \"core/Animations/animationKey\";\r\nimport type { TargetedAnimation } from \"core/Animations/animationGroup\";\r\n\r\nimport { makeStyles, tokens, Input, Label, Dropdown, Option } from \"@fluentui/react-components\";\r\nimport { useCallback, useState, useMemo, useEffect } from \"react\";\r\nimport { Animation } from \"core/Animations/animation\";\r\nimport { Quaternion, Vector2, Vector3 } from \"core/Maths/math.vector\";\r\nimport { Color3, Color4 } from \"core/Maths/math.color\";\r\n\r\nimport { Button } from \"shared-ui-components/fluent/primitives/button\";\r\nimport { useCurveEditor } from \"../curveEditorContext\";\r\n\r\nconst useStyles = makeStyles({\r\n    root: {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        gap: tokens.spacingVerticalM,\r\n    },\r\n    header: {\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        gap: tokens.spacingHorizontalS,\r\n    },\r\n    title: {\r\n        fontSize: tokens.fontSizeBase400,\r\n        fontWeight: tokens.fontWeightSemibold,\r\n    },\r\n    form: {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        gap: tokens.spacingVerticalS,\r\n    },\r\n    row: {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        gap: tokens.spacingVerticalXS,\r\n    },\r\n    buttons: {\r\n        display: \"flex\",\r\n        gap: tokens.spacingHorizontalS,\r\n        marginTop: tokens.spacingVerticalM,\r\n    },\r\n    typeDisplay: {\r\n        padding: `${tokens.spacingVerticalS} ${tokens.spacingHorizontalM}`,\r\n        backgroundColor: tokens.colorNeutralBackground3,\r\n        borderRadius: tokens.borderRadiusMedium,\r\n        fontSize: tokens.fontSizeBase300,\r\n    },\r\n});\r\n\r\nconst ANIMATION_TYPES = [\"Float\", \"Vector2\", \"Vector3\", \"Quaternion\", \"Color3\", \"Color4\"] as const;\r\nconst LOOP_MODES = [\"Cycle\", \"Relative\", \"Relative from current\", \"Constant\"] as const;\r\nconst MODES = [\"List\", \"Custom\"] as const;\r\n\r\ntype AddAnimationPanelProps = {\r\n    onClose: () => void;\r\n};\r\n\r\n/**\r\n * Panel for adding new animations\r\n * @returns The add animation panel component\r\n */\r\nexport const AddAnimationPanel: FunctionComponent<AddAnimationPanelProps> = ({ onClose }) => {\r\n    const styles = useStyles();\r\n    const { state, observables } = useCurveEditor();\r\n\r\n    const [name, setName] = useState(\"\");\r\n    const [mode, setMode] = useState<(typeof MODES)[number]>(\"List\");\r\n    const [customProperty, setCustomProperty] = useState(\"\");\r\n    const [selectedProperty, setSelectedProperty] = useState(\"\");\r\n    const [animationType, setAnimationType] = useState<(typeof ANIMATION_TYPES)[number]>(\"Float\");\r\n    const [loopMode, setLoopMode] = useState<(typeof LOOP_MODES)[number]>(\"Cycle\");\r\n\r\n    // Get animatable properties from target\r\n    const properties = useMemo(() => {\r\n        const result: string[] = [];\r\n\r\n        if (!state.target) {\r\n            return result;\r\n        }\r\n\r\n        let target = state.target as object | null;\r\n        const source = state.target as unknown as Record<string, unknown>;\r\n\r\n        while (target !== null) {\r\n            const descriptors = Object.getOwnPropertyDescriptors(target);\r\n            for (const property in descriptors) {\r\n                const descriptor = descriptors[property];\r\n                // Skip private properties and null/undefined values\r\n                if (property[0] === \"_\" || source[property] === null || source[property] === undefined) {\r\n                    continue;\r\n                }\r\n\r\n                const value = source[property] as Record<string, unknown>;\r\n\r\n                // Skip non-animatable values (must be number, vector, quaternion, or color)\r\n                if (value.r === undefined && value.x === undefined && isNaN(parseFloat(value as unknown as string))) {\r\n                    continue;\r\n                }\r\n\r\n                // Skip duplicates\r\n                if (result.indexOf(property) !== -1) {\r\n                    continue;\r\n                }\r\n\r\n                // Skip read-only properties\r\n                if (!descriptor.writable && !descriptor.set) {\r\n                    continue;\r\n                }\r\n\r\n                result.push(property);\r\n            }\r\n\r\n            target = Object.getPrototypeOf(target);\r\n        }\r\n\r\n        result.sort();\r\n\r\n        // Move common properties to the top\r\n        const main = [\"scaling\", \"rotation\", \"position\"];\r\n        for (const mainProperty of main) {\r\n            const index = result.indexOf(mainProperty);\r\n            if (index !== -1) {\r\n                result.splice(index, 1);\r\n                result.unshift(mainProperty);\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }, [state.target]);\r\n\r\n    // Set initial selected property when properties change\r\n    useEffect(() => {\r\n        if (properties.length > 0 && !selectedProperty) {\r\n            setSelectedProperty(properties[0]);\r\n        }\r\n    }, [properties, selectedProperty]);\r\n\r\n    // Infer type from selected property value\r\n    const inferredType = useMemo((): (typeof ANIMATION_TYPES)[number] => {\r\n        if (mode === \"Custom\" || !state.target || !selectedProperty) {\r\n            return animationType;\r\n        }\r\n\r\n        const source = state.target as unknown as Record<string, unknown>;\r\n        const value = source[selectedProperty];\r\n\r\n        if (value === null || value === undefined) {\r\n            return \"Float\";\r\n        }\r\n\r\n        if (!isNaN(parseFloat(value as string))) {\r\n            return \"Float\";\r\n        }\r\n\r\n        const valueObj = value as { getClassName?: () => string };\r\n        if (valueObj.getClassName) {\r\n            const className = valueObj.getClassName();\r\n            if (ANIMATION_TYPES.includes(className as (typeof ANIMATION_TYPES)[number])) {\r\n                return className as (typeof ANIMATION_TYPES)[number];\r\n            }\r\n        }\r\n\r\n        return \"Float\";\r\n    }, [mode, state.target, selectedProperty, animationType]);\r\n\r\n    const isCustomMode = mode === \"Custom\" || properties.length === 0;\r\n    const currentProperty = isCustomMode ? customProperty : selectedProperty;\r\n    const currentType = isCustomMode ? animationType : inferredType;\r\n\r\n    // Get FPS from existing animations or default to 60\r\n    const fps = useMemo(() => {\r\n        if (state.animations && state.animations.length) {\r\n            const anim = state.useTargetAnimations ? (state.animations[0] as TargetedAnimation).animation : (state.animations[0] as Animation);\r\n            return anim.framePerSecond;\r\n        }\r\n        return 60;\r\n    }, [state.animations, state.useTargetAnimations]);\r\n\r\n    // Get min/max frame from existing animations\r\n    const { minFrame, maxFrame } = useMemo(() => {\r\n        let min = 0;\r\n        let max = 100;\r\n\r\n        if (state.animations) {\r\n            for (const anim of state.animations) {\r\n                const innerAnim = state.useTargetAnimations ? (anim as TargetedAnimation).animation : (anim as Animation);\r\n                const keys = innerAnim.getKeys();\r\n                if (keys.length) {\r\n                    min = Math.min(min, keys[0].frame);\r\n                    max = Math.max(max, keys[keys.length - 1].frame);\r\n                }\r\n            }\r\n        }\r\n\r\n        return { minFrame: min, maxFrame: max };\r\n    }, [state.animations, state.useTargetAnimations]);\r\n\r\n    // Validation for the create button\r\n    const isValid = name.trim() !== \"\" && currentProperty.trim() !== \"\";\r\n\r\n    const createAnimation = useCallback(() => {\r\n        if (!name || !currentProperty) {\r\n            return;\r\n        }\r\n\r\n        let dataType = 0;\r\n        let loopModeValue = 0;\r\n        let defaultValue0: unknown;\r\n        let defaultValue1: unknown;\r\n        let defaultTangent0: unknown;\r\n        let defaultTangent1: unknown;\r\n\r\n        // Set data type and default values\r\n        switch (currentType) {\r\n            case \"Float\":\r\n                dataType = Animation.ANIMATIONTYPE_FLOAT;\r\n                defaultValue0 = 0;\r\n                defaultValue1 = 1;\r\n                defaultTangent0 = 0;\r\n                defaultTangent1 = 0;\r\n                break;\r\n            case \"Vector2\":\r\n                dataType = Animation.ANIMATIONTYPE_VECTOR2;\r\n                defaultValue0 = Vector2.Zero();\r\n                defaultValue1 = new Vector2(1, 1);\r\n                defaultTangent0 = new Vector2(0, 0);\r\n                defaultTangent1 = new Vector2(0, 0);\r\n                break;\r\n            case \"Vector3\":\r\n                dataType = Animation.ANIMATIONTYPE_VECTOR3;\r\n                defaultValue0 = Vector3.Zero();\r\n                defaultValue1 = new Vector3(1, 1, 1);\r\n                defaultTangent0 = new Vector3(0, 0, 0);\r\n                defaultTangent1 = new Vector3(0, 0, 0);\r\n                break;\r\n            case \"Quaternion\":\r\n                dataType = Animation.ANIMATIONTYPE_QUATERNION;\r\n                defaultValue0 = Quaternion.Zero();\r\n                defaultValue1 = new Quaternion(1, 1, 1, 0);\r\n                defaultTangent0 = new Quaternion(0, 0, 0, 0);\r\n                defaultTangent1 = new Quaternion(0, 0, 0, 0);\r\n                break;\r\n            case \"Color3\":\r\n                dataType = Animation.ANIMATIONTYPE_COLOR3;\r\n                defaultValue0 = Color3.Black();\r\n                defaultValue1 = Color3.White();\r\n                defaultTangent0 = new Color3(0, 0, 0);\r\n                defaultTangent1 = new Color3(0, 0, 0);\r\n                break;\r\n            case \"Color4\":\r\n                dataType = Animation.ANIMATIONTYPE_COLOR4;\r\n                defaultValue0 = new Color4(0, 0, 0, 0);\r\n                defaultValue1 = new Color4(1, 1, 1, 1);\r\n                defaultTangent0 = new Color4(0, 0, 0, 0);\r\n                defaultTangent1 = new Color4(0, 0, 0, 0);\r\n                break;\r\n        }\r\n\r\n        // Set loop mode\r\n        switch (loopMode) {\r\n            case \"Cycle\":\r\n                loopModeValue = Animation.ANIMATIONLOOPMODE_CYCLE;\r\n                break;\r\n            case \"Relative\":\r\n                loopModeValue = Animation.ANIMATIONLOOPMODE_RELATIVE;\r\n                break;\r\n            case \"Relative from current\":\r\n                loopModeValue = Animation.ANIMATIONLOOPMODE_RELATIVE_FROM_CURRENT;\r\n                break;\r\n            case \"Constant\":\r\n                loopModeValue = Animation.ANIMATIONLOOPMODE_CONSTANT;\r\n                break;\r\n        }\r\n\r\n        // Create the animation\r\n        const animation = new Animation(name, currentProperty, fps, dataType, loopModeValue);\r\n\r\n        const keys: IAnimationKey[] = [\r\n            {\r\n                frame: minFrame,\r\n                value: defaultValue0,\r\n                inTangent: defaultTangent0,\r\n                outTangent: defaultTangent0,\r\n            },\r\n            {\r\n                frame: maxFrame,\r\n                value: defaultValue1,\r\n                inTangent: defaultTangent1,\r\n                outTangent: defaultTangent1,\r\n            },\r\n        ];\r\n\r\n        animation.setKeys(keys);\r\n\r\n        // Add to target animations\r\n        if (state.target) {\r\n            if (!state.target.animations || state.target.animations.length === 0) {\r\n                state.target.animations = [animation];\r\n            } else {\r\n                state.target.animations = [...state.target.animations, animation];\r\n            }\r\n        }\r\n\r\n        // Close first so AnimationList mounts, then notify\r\n        onClose();\r\n        observables.onAnimationsLoaded.notifyObservers();\r\n    }, [name, currentProperty, currentType, loopMode, fps, minFrame, maxFrame, state, observables, onClose]);\r\n\r\n    return (\r\n        <div className={styles.root}>\r\n            <div className={styles.header}>\r\n                <div className={styles.title}>Add Animation</div>\r\n            </div>\r\n\r\n            <div className={styles.form}>\r\n                <div className={styles.row}>\r\n                    <Label>Display Name</Label>\r\n                    <Input value={name} onChange={(_, data) => setName(data.value)} placeholder=\"Animation name\" />\r\n                </div>\r\n\r\n                <div className={styles.row}>\r\n                    <Label>Mode</Label>\r\n                    <Dropdown\r\n                        value={mode}\r\n                        selectedOptions={[mode]}\r\n                        onOptionSelect={(_, data) => setMode(data.optionValue as (typeof MODES)[number])}\r\n                        disabled={properties.length === 0}\r\n                    >\r\n                        {MODES.map((m) => (\r\n                            <Option key={m} value={m}>\r\n                                {m}\r\n                            </Option>\r\n                        ))}\r\n                    </Dropdown>\r\n                </div>\r\n\r\n                <div className={styles.row}>\r\n                    <Label>Property</Label>\r\n                    {isCustomMode ? (\r\n                        <Input value={customProperty} onChange={(_, data) => setCustomProperty(data.value)} placeholder=\"e.g., position, rotation, scaling\" />\r\n                    ) : (\r\n                        <Dropdown value={selectedProperty} selectedOptions={[selectedProperty]} onOptionSelect={(_, data) => setSelectedProperty(data.optionValue as string)}>\r\n                            {properties.map((prop) => (\r\n                                <Option key={prop} value={prop}>\r\n                                    {prop}\r\n                                </Option>\r\n                            ))}\r\n                        </Dropdown>\r\n                    )}\r\n                </div>\r\n\r\n                <div className={styles.row}>\r\n                    <Label>Type</Label>\r\n                    {isCustomMode ? (\r\n                        <Dropdown\r\n                            value={animationType}\r\n                            selectedOptions={[animationType]}\r\n                            onOptionSelect={(_, data) => setAnimationType(data.optionValue as (typeof ANIMATION_TYPES)[number])}\r\n                        >\r\n                            {ANIMATION_TYPES.map((type) => (\r\n                                <Option key={type} value={type}>\r\n                                    {type}\r\n                                </Option>\r\n                            ))}\r\n                        </Dropdown>\r\n                    ) : (\r\n                        <div className={styles.typeDisplay}>{inferredType}</div>\r\n                    )}\r\n                </div>\r\n\r\n                <div className={styles.row}>\r\n                    <Label>Loop Mode</Label>\r\n                    <Dropdown value={loopMode} selectedOptions={[loopMode]} onOptionSelect={(_, data) => setLoopMode(data.optionValue as (typeof LOOP_MODES)[number])}>\r\n                        {LOOP_MODES.map((lm) => (\r\n                            <Option key={lm} value={lm}>\r\n                                {lm}\r\n                            </Option>\r\n                        ))}\r\n                    </Dropdown>\r\n                </div>\r\n            </div>\r\n\r\n            <div className={styles.buttons}>\r\n                <Button appearance=\"primary\" onClick={createAnimation} disabled={!isValid} label=\"Create\" />\r\n                <Button appearance=\"subtle\" onClick={onClose} label=\"Cancel\" />\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","import type { FunctionComponent } from \"react\";\r\n\r\nimport { makeStyles, tokens, Input, Label } from \"@fluentui/react-components\";\r\nimport { useCallback, useState } from \"react\";\r\nimport { Animation } from \"core/Animations/animation\";\r\nimport { Tools } from \"core/Misc/tools\";\r\n\r\nimport { Button } from \"shared-ui-components/fluent/primitives/button\";\r\nimport { UploadButton } from \"shared-ui-components/fluent/primitives/uploadButton\";\r\nimport { useCurveEditor } from \"../curveEditorContext\";\r\n\r\nconst useStyles = makeStyles({\r\n    root: {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        gap: tokens.spacingVerticalM,\r\n    },\r\n    header: {\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        gap: tokens.spacingHorizontalS,\r\n    },\r\n    title: {\r\n        fontSize: tokens.fontSizeBase400,\r\n        fontWeight: tokens.fontWeightSemibold,\r\n    },\r\n    section: {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        gap: tokens.spacingVerticalS,\r\n    },\r\n    row: {\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        gap: tokens.spacingHorizontalS,\r\n    },\r\n    input: {\r\n        flex: 1,\r\n    },\r\n    snippetId: {\r\n        fontSize: tokens.fontSizeBase200,\r\n        color: tokens.colorNeutralForeground3,\r\n        marginTop: tokens.spacingVerticalS,\r\n    },\r\n    errorText: {\r\n        color: tokens.colorPaletteRedForeground1,\r\n        fontSize: tokens.fontSizeBase200,\r\n    },\r\n});\r\n\r\ntype LoadAnimationPanelProps = {\r\n    onClose: () => void;\r\n};\r\n\r\n/**\r\n * Panel for loading animations from file or snippet server\r\n * @returns The load animation panel component\r\n */\r\nexport const LoadAnimationPanel: FunctionComponent<LoadAnimationPanelProps> = ({ onClose }) => {\r\n    const styles = useStyles();\r\n    const { state, actions, observables } = useCurveEditor();\r\n\r\n    const [snippetIdInput, setSnippetIdInput] = useState(\"\");\r\n    const [loadedSnippetId, setLoadedSnippetId] = useState<string | null>(null);\r\n    const [loadError, setLoadError] = useState<string | null>(null);\r\n\r\n    const loadAnimations = useCallback(\r\n        (animations: Animation[]) => {\r\n            // Update target\r\n            if (state.target) {\r\n                state.target.animations = animations;\r\n            }\r\n\r\n            // Update active animations\r\n            actions.setActiveAnimations(animations.length ? animations : []);\r\n\r\n            // Close first so AnimationList mounts, then notify\r\n            onClose();\r\n            observables.onAnimationsLoaded.notifyObservers();\r\n            observables.onActiveAnimationChanged.notifyObservers({});\r\n        },\r\n        [state.target, actions, observables, onClose]\r\n    );\r\n\r\n    const loadFromFile = useCallback(\r\n        (files: FileList) => {\r\n            if (!files.length) {\r\n                return;\r\n            }\r\n\r\n            const file = files[0];\r\n            Tools.ReadFile(\r\n                file,\r\n                (data) => {\r\n                    const decoder = new TextDecoder(\"utf-8\");\r\n                    const parsedAnimations = JSON.parse(decoder.decode(data)).animations;\r\n                    const animations: Animation[] = [];\r\n\r\n                    for (const parsedAnimation of parsedAnimations) {\r\n                        animations.push(Animation.Parse(parsedAnimation));\r\n                    }\r\n\r\n                    loadAnimations(animations);\r\n                },\r\n                undefined,\r\n                true\r\n            );\r\n        },\r\n        [loadAnimations]\r\n    );\r\n\r\n    const loadFromSnippetServer = useCallback(async () => {\r\n        if (!snippetIdInput) {\r\n            return;\r\n        }\r\n\r\n        setLoadError(null);\r\n\r\n        try {\r\n            const result = await Animation.ParseFromSnippetAsync(snippetIdInput);\r\n            const animations = Array.isArray(result) ? (result as Animation[]) : [result as Animation];\r\n\r\n            setLoadedSnippetId(snippetIdInput);\r\n            loadAnimations(animations);\r\n        } catch (err) {\r\n            setLoadError(\"Unable to load animations: \" + err);\r\n        }\r\n    }, [snippetIdInput, loadAnimations]);\r\n\r\n    return (\r\n        <div className={styles.root}>\r\n            <div className={styles.header}>\r\n                <div className={styles.title}>Load Animations</div>\r\n            </div>\r\n\r\n            <div className={styles.section}>\r\n                <Label>From Snippet Server</Label>\r\n                <div className={styles.row}>\r\n                    <Input className={styles.input} placeholder=\"Snippet ID\" value={snippetIdInput} onChange={(_, data) => setSnippetIdInput(data.value)} />\r\n                    <Button appearance=\"primary\" onClick={loadFromSnippetServer} disabled={!snippetIdInput.trim()} label=\"Load\" />\r\n                </div>\r\n                {loadError && <div className={styles.errorText}>{loadError}</div>}\r\n            </div>\r\n\r\n            <div className={styles.section}>\r\n                <Label>From File</Label>\r\n                <UploadButton appearance=\"subtle\" onUpload={loadFromFile} accept=\".json\" label=\"Browse...\" />\r\n            </div>\r\n\r\n            {loadedSnippetId && <div className={styles.snippetId}>Loaded Snippet ID: {loadedSnippetId}</div>}\r\n        </div>\r\n    );\r\n};\r\n","export class StringTools {\r\n    /*\r\n     * Based on FileSaver.js\r\n     * A saveAs() FileSaver implementation.\r\n     *\r\n     * By Eli Grey, http://eligrey.com\r\n     *\r\n     * License : https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md (MIT)\r\n     * source  : http://purl.eligrey.com/github/FileSaver.js\r\n     */\r\n    private static _SaveAs(blob: Blob, name: string, document: HTMLDocument) {\r\n        if (\"download\" in HTMLAnchorElement.prototype) {\r\n            const url = window.URL || window.webkitURL;\r\n            const a = document.createElement(\"a\");\r\n\r\n            a.download = name;\r\n            a.rel = \"noopener\"; // tabnabbing\r\n\r\n            a.href = url.createObjectURL(blob);\r\n            setTimeout(() => {\r\n                url.revokeObjectURL(a.href);\r\n            }, 4e4); // 40s\r\n            setTimeout(() => {\r\n                this._Click(a, document);\r\n            }, 0);\r\n            return;\r\n        }\r\n\r\n        // Open a popup immediately do go around popup blocker\r\n        // Mostly only available on user interaction and the fileReader is async so...\r\n        let popup = open(\"\", \"_blank\");\r\n        if (popup) {\r\n            popup.document.title = popup.document.body.innerText = \"downloading...\";\r\n        }\r\n\r\n        const force = blob.type === \"application/octet-stream\";\r\n        const isSafari = /constructor/i.test((window as any).HTMLElement) || (window as any).safari;\r\n        const isChromeIOS = /CriOS\\/[\\d]+/.test(navigator.userAgent);\r\n\r\n        if ((isChromeIOS || (force && isSafari)) && typeof FileReader !== \"undefined\") {\r\n            // Safari doesn't allow downloading of blob URLs\r\n            const reader = new FileReader();\r\n            reader.onloadend = () => {\r\n                let url: any = reader.result;\r\n                url = isChromeIOS ? url : url.replace(/^data:[^;]*;/, \"data:attachment/file;\");\r\n                if (popup) {\r\n                    popup.location.href = url;\r\n                } else {\r\n                    location.href = url;\r\n                }\r\n                popup = null;\r\n            };\r\n            reader.readAsDataURL(blob);\r\n        } else {\r\n            const windowUrl = window.URL || window.webkitURL;\r\n            const url = windowUrl.createObjectURL(blob);\r\n            if (popup) {\r\n                popup.location.href = url;\r\n            } else {\r\n                location.href = url;\r\n            }\r\n            popup = null;\r\n            setTimeout(function () {\r\n                windowUrl.revokeObjectURL(url);\r\n            }, 4e4);\r\n        }\r\n    }\r\n\r\n    private static _Click(node: HTMLElement, document: HTMLDocument) {\r\n        try {\r\n            node.dispatchEvent(new MouseEvent(\"click\"));\r\n        } catch (e) {\r\n            const evt = document.createEvent(\"MouseEvents\");\r\n            evt.initMouseEvent(\"click\", true, true, window, 0, 0, 0, 80, 20, false, false, false, false, 0, null);\r\n            node.dispatchEvent(evt);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Download a string into a file that will be saved locally by the browser\r\n     * @param document\r\n     * @param content defines the string to download locally as a file\r\n     * @param filename\r\n     */\r\n    public static DownloadAsFile(document: HTMLDocument, content: string, filename: string) {\r\n        const blob = new Blob([content], {\r\n            type: \"application/octet-stream\",\r\n        });\r\n\r\n        this._SaveAs(blob, filename, document);\r\n    }\r\n}\r\n","import type { FunctionComponent } from \"react\";\r\nimport type { Animation } from \"core/Animations/animation\";\r\nimport type { TargetedAnimation } from \"core/Animations/animationGroup\";\r\n\r\nimport { makeStyles, tokens, Checkbox } from \"@fluentui/react-components\";\r\nimport { useCallback, useState } from \"react\";\r\nimport { Animation as AnimationClass } from \"core/Animations/animation\";\r\nimport { StringTools } from \"shared-ui-components/stringTools\";\r\n\r\nimport { Button } from \"shared-ui-components/fluent/primitives/button\";\r\nimport { useCurveEditor } from \"../curveEditorContext\";\r\n\r\nconst useStyles = makeStyles({\r\n    root: {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        gap: tokens.spacingVerticalM,\r\n    },\r\n    header: {\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        gap: tokens.spacingHorizontalS,\r\n    },\r\n    title: {\r\n        fontSize: tokens.fontSizeBase400,\r\n        fontWeight: tokens.fontWeightSemibold,\r\n    },\r\n    list: {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        gap: tokens.spacingVerticalXS,\r\n        maxHeight: \"200px\",\r\n        overflow: \"auto\",\r\n        padding: tokens.spacingVerticalS,\r\n        backgroundColor: tokens.colorNeutralBackground2,\r\n        borderRadius: tokens.borderRadiusMedium,\r\n    },\r\n    buttons: {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        gap: tokens.spacingVerticalS,\r\n    },\r\n    snippetId: {\r\n        fontSize: tokens.fontSizeBase200,\r\n        color: tokens.colorNeutralForeground3,\r\n        marginTop: tokens.spacingVerticalS,\r\n    },\r\n    errorText: {\r\n        color: tokens.colorPaletteRedForeground1,\r\n        fontSize: tokens.fontSizeBase200,\r\n    },\r\n});\r\n\r\ntype SaveAnimationPanelProps = {\r\n    onClose: () => void;\r\n};\r\n\r\n/**\r\n * Panel for saving animations to file or snippet server\r\n * @returns The save animation panel component\r\n */\r\nexport const SaveAnimationPanel: FunctionComponent<SaveAnimationPanelProps> = ({ onClose: _onClose }) => {\r\n    const styles = useStyles();\r\n    const { state } = useCurveEditor();\r\n\r\n    const [selectedAnimations, setSelectedAnimations] = useState<Animation[]>(() => {\r\n        if (!state.animations) {\r\n            return [];\r\n        }\r\n        if (state.useTargetAnimations) {\r\n            return (state.animations as TargetedAnimation[]).map((ta) => ta.animation);\r\n        }\r\n        return [...(state.animations as Animation[])];\r\n    });\r\n    const [snippetId, setSnippetId] = useState<string | null>(null);\r\n    const [saveError, setSaveError] = useState<string | null>(null);\r\n    const [isSaving, setIsSaving] = useState(false);\r\n\r\n    const getAnimation = useCallback(\r\n        (anim: Animation | TargetedAnimation): Animation => {\r\n            return state.useTargetAnimations ? (anim as TargetedAnimation).animation : (anim as Animation);\r\n        },\r\n        [state.useTargetAnimations]\r\n    );\r\n\r\n    const toggleAnimation = useCallback((animation: Animation, checked: boolean) => {\r\n        setSelectedAnimations((prev) => {\r\n            if (checked) {\r\n                return [...prev, animation];\r\n            }\r\n            return prev.filter((a) => a !== animation);\r\n        });\r\n    }, []);\r\n\r\n    const getJson = useCallback(() => {\r\n        const json: { animations: unknown[] } = { animations: [] };\r\n        for (const animation of selectedAnimations) {\r\n            json.animations.push(animation.serialize());\r\n        }\r\n        return JSON.stringify(json);\r\n    }, [selectedAnimations]);\r\n\r\n    const saveToFile = useCallback(() => {\r\n        StringTools.DownloadAsFile(document, getJson(), \"animations.json\");\r\n    }, [getJson]);\r\n\r\n    const saveToSnippetServer = useCallback(() => {\r\n        const xmlHttp = new XMLHttpRequest();\r\n        const json = getJson();\r\n\r\n        setIsSaving(true);\r\n        setSaveError(null);\r\n\r\n        xmlHttp.onreadystatechange = () => {\r\n            if (xmlHttp.readyState === 4) {\r\n                setIsSaving(false);\r\n                if (xmlHttp.status === 200) {\r\n                    const snippet = JSON.parse(xmlHttp.responseText);\r\n                    let newSnippetId = snippet.id;\r\n                    if (snippet.version && snippet.version !== \"0\") {\r\n                        newSnippetId += \"#\" + snippet.version;\r\n                    }\r\n                    setSnippetId(newSnippetId);\r\n                } else {\r\n                    setSaveError(\"Unable to save your animations. Please try again.\");\r\n                }\r\n            }\r\n        };\r\n\r\n        xmlHttp.open(\"POST\", AnimationClass.SnippetUrl + (snippetId ? \"/\" + snippetId : \"\"), true);\r\n        xmlHttp.setRequestHeader(\"Content-Type\", \"application/json\");\r\n\r\n        const dataToSend = {\r\n            payload: JSON.stringify({ animations: json }),\r\n            name: \"\",\r\n            description: \"\",\r\n            tags: \"\",\r\n        };\r\n\r\n        xmlHttp.send(JSON.stringify(dataToSend));\r\n    }, [getJson, snippetId]);\r\n\r\n    return (\r\n        <div className={styles.root}>\r\n            <div className={styles.header}>\r\n                <div className={styles.title}>Save Animations</div>\r\n            </div>\r\n\r\n            <div className={styles.list}>\r\n                {state.animations?.map((anim, i) => {\r\n                    const animation = getAnimation(anim);\r\n                    const isChecked = selectedAnimations.includes(animation);\r\n                    return <Checkbox key={i} label={animation.name} checked={isChecked} onChange={(_, data) => toggleAnimation(animation, !!data.checked)} />;\r\n                })}\r\n            </div>\r\n\r\n            <div className={styles.buttons}>\r\n                <Button\r\n                    appearance=\"primary\"\r\n                    onClick={saveToSnippetServer}\r\n                    disabled={selectedAnimations.length === 0 || isSaving}\r\n                    label={isSaving ? \"Saving...\" : \"Save to Snippet Server\"}\r\n                />\r\n                <Button appearance=\"secondary\" onClick={saveToFile} disabled={selectedAnimations.length === 0} label=\"Save to File\" />\r\n            </div>\r\n\r\n            {saveError && <div className={styles.errorText}>{saveError}</div>}\r\n            {snippetId && <div className={styles.snippetId}>Saved! Snippet ID: {snippetId}</div>}\r\n        </div>\r\n    );\r\n};\r\n","import type { FunctionComponent } from \"react\";\r\n\r\nimport { makeStyles, tokens } from \"@fluentui/react-components\";\r\nimport { useCallback, useEffect, useRef, useState } from \"react\";\r\nimport { AddRegular, ArrowDownloadRegular, SaveRegular } from \"@fluentui/react-icons\";\r\nimport type { Animation } from \"core/Animations/animation\";\r\nimport type { TargetedAnimation } from \"core/Animations/animationGroup\";\r\n\r\nimport { Button } from \"shared-ui-components/fluent/primitives/button\";\r\nimport { Popover } from \"shared-ui-components/fluent/primitives/popover\";\r\nimport { SpinButton } from \"shared-ui-components/fluent/primitives/spinButton\";\r\nimport { useCurveEditor } from \"./curveEditorContext\";\r\nimport { AnimationList } from \"./sideBar/animationList\";\r\nimport { AddAnimationPanel } from \"./sideBar/addAnimationPanel\";\r\nimport { LoadAnimationPanel } from \"./sideBar/loadAnimationPanel\";\r\nimport { SaveAnimationPanel } from \"./sideBar/saveAnimationPanel\";\r\n\r\nconst useStyles = makeStyles({\r\n    root: {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        width: \"100%\",\r\n        height: \"100%\",\r\n        minHeight: 0,\r\n        backgroundColor: tokens.colorNeutralBackground1,\r\n        overflow: \"hidden\",\r\n    },\r\n    menuBar: {\r\n        display: \"flex\",\r\n        flexDirection: \"row\",\r\n        alignItems: \"center\",\r\n        gap: tokens.spacingHorizontalXS,\r\n        padding: `0 ${tokens.spacingHorizontalS}`,\r\n        backgroundColor: tokens.colorNeutralBackground2,\r\n        height: \"30px\",\r\n        flexShrink: 0,\r\n    },\r\n    fpsInput: {\r\n        display: \"flex\",\r\n        flexDirection: \"row\",\r\n        alignItems: \"center\",\r\n        gap: tokens.spacingHorizontalXS,\r\n        marginLeft: \"auto\",\r\n    },\r\n    fpsLabel: {\r\n        fontSize: tokens.fontSizeBase200,\r\n        color: tokens.colorNeutralForeground3,\r\n    },\r\n    spinButton: {\r\n        width: \"60px\",\r\n    },\r\n    tabList: {\r\n        padding: `0 ${tokens.spacingHorizontalS}`,\r\n    },\r\n    content: {\r\n        flex: 1,\r\n        minHeight: 0,\r\n        overflow: \"auto\",\r\n        padding: tokens.spacingHorizontalS,\r\n    },\r\n    popoverSurface: {\r\n        padding: tokens.spacingHorizontalM,\r\n        maxHeight: \"500px\",\r\n        overflow: \"auto\",\r\n    },\r\n});\r\n\r\ntype PopoverType = \"add\" | \"load\" | \"save\" | null;\r\n\r\n/**\r\n * Sidebar component for the curve editor with animation list and controls\r\n * @returns The sidebar component\r\n */\r\nexport const SideBar: FunctionComponent = () => {\r\n    const styles = useStyles();\r\n    const { state, actions, observables } = useCurveEditor();\r\n\r\n    const [openPopover, setOpenPopover] = useState<PopoverType>(null);\r\n    const [fps, setFps] = useState(60);\r\n\r\n    // Get FPS from animations\r\n    useEffect(() => {\r\n        if (state.animations && state.animations.length) {\r\n            const animation = state.useTargetAnimations ? (state.animations[0] as TargetedAnimation).animation : (state.animations[0] as Animation);\r\n            setFps(animation.framePerSecond);\r\n        }\r\n    }, [state.animations, state.useTargetAnimations]);\r\n\r\n    // Subscribe to animations loaded\r\n    useEffect(() => {\r\n        const observer = observables.onAnimationsLoaded.add(() => {\r\n            setOpenPopover(null);\r\n        });\r\n        return () => {\r\n            observables.onAnimationsLoaded.remove(observer);\r\n        };\r\n    }, [observables]);\r\n\r\n    // Subscribe to delete animation request - use ref to access current state.target\r\n    const targetRef = useRef(state.target);\r\n    targetRef.current = state.target;\r\n\r\n    useEffect(() => {\r\n        const observer = observables.onDeleteAnimation.add((animation: Animation) => {\r\n            // Remove from active animations\r\n            actions.setActiveAnimations((prev) => prev.filter((a) => a !== animation));\r\n\r\n            // Update target if exists\r\n            const target = targetRef.current;\r\n            if (target && target.animations) {\r\n                target.animations = target.animations.filter((a: Animation) => a !== animation);\r\n            }\r\n\r\n            // Also update state.animations if it's an array we can filter\r\n            // This mutates the array in place since we can't setState on a prop\r\n            if (state.animations) {\r\n                const index = state.animations.findIndex((a) => {\r\n                    const anim = state.useTargetAnimations ? (a as TargetedAnimation).animation : (a as Animation);\r\n                    return anim === animation;\r\n                });\r\n                if (index !== -1) {\r\n                    state.animations.splice(index, 1);\r\n                }\r\n            }\r\n\r\n            observables.onAnimationsLoaded.notifyObservers();\r\n            observables.onActiveAnimationChanged.notifyObservers({});\r\n        });\r\n        return () => {\r\n            observables.onDeleteAnimation.remove(observer);\r\n        };\r\n        // Note: We intentionally don't include actions in deps because setActiveAnimations is stable\r\n    }, [observables]);\r\n\r\n    const handleFpsChange = useCallback(\r\n        (value: number) => {\r\n            if (state.animations) {\r\n                setFps(value);\r\n                for (const anim of state.animations) {\r\n                    if (state.useTargetAnimations) {\r\n                        (anim as TargetedAnimation).animation.framePerSecond = value;\r\n                    } else {\r\n                        (anim as Animation).framePerSecond = value;\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        [state.animations, state.useTargetAnimations]\r\n    );\r\n\r\n    return (\r\n        <div className={styles.root}>\r\n            <div className={styles.menuBar}>\r\n                {!state.useTargetAnimations && (\r\n                    <>\r\n                        <Popover\r\n                            open={openPopover === \"add\"}\r\n                            onOpenChange={(open) => setOpenPopover(open ? \"add\" : null)}\r\n                            positioning=\"below-start\"\r\n                            trigger={<Button icon={AddRegular} appearance={openPopover === \"add\" ? \"primary\" : \"subtle\"} title=\"Add new animation\" />}\r\n                        >\r\n                            <AddAnimationPanel onClose={() => setOpenPopover(null)} />\r\n                        </Popover>\r\n                        <Popover\r\n                            open={openPopover === \"load\"}\r\n                            onOpenChange={(open) => setOpenPopover(open ? \"load\" : null)}\r\n                            positioning=\"below-start\"\r\n                            trigger={<Button icon={ArrowDownloadRegular} appearance={openPopover === \"load\" ? \"primary\" : \"subtle\"} title=\"Load animations\" />}\r\n                        >\r\n                            <LoadAnimationPanel onClose={() => setOpenPopover(null)} />\r\n                        </Popover>\r\n                    </>\r\n                )}\r\n                <Popover\r\n                    open={openPopover === \"save\"}\r\n                    onOpenChange={(open) => setOpenPopover(open ? \"save\" : null)}\r\n                    positioning=\"below-start\"\r\n                    trigger={<Button icon={SaveRegular} appearance={openPopover === \"save\" ? \"primary\" : \"subtle\"} title=\"Save current animations\" />}\r\n                >\r\n                    <SaveAnimationPanel onClose={() => setOpenPopover(null)} />\r\n                </Popover>\r\n\r\n                <div className={styles.fpsInput}>\r\n                    <SpinButton className={styles.spinButton} value={fps} onChange={handleFpsChange} min={1} max={120} />\r\n                    <div className={styles.fpsLabel}>fps</div>\r\n                </div>\r\n            </div>\r\n\r\n            <div className={styles.content}>\r\n                <AnimationList />\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","import { Animation } from \"core/Animations/animation\";\r\nimport { AnimationKeyInterpolation } from \"core/Animations/animationKey\";\r\nimport { Observable } from \"core/Misc/observable\";\r\n\r\n// eslint-disable-next-line @typescript-eslint/naming-convention\r\nexport interface KeyEntry {\r\n    frame: number;\r\n    value: number;\r\n    inTangent?: number;\r\n    outTangent?: number;\r\n    lockedTangent: boolean;\r\n    interpolation?: AnimationKeyInterpolation;\r\n}\r\n\r\nexport class CurveData {\r\n    public static readonly SampleRate = 50;\r\n    public keys: KeyEntry[] = [];\r\n    public animation: Animation;\r\n    public color: string;\r\n    public onDataUpdatedObservable = new Observable<void>();\r\n    public property?: string;\r\n    public tangentBuilder?: () => any;\r\n    public setDefaultInTangent?: (keyId: number) => any;\r\n    public setDefaultOutTangent?: (keyId: number) => any;\r\n\r\n    public static readonly TangentLength = 50;\r\n\r\n    public constructor(\r\n        color: string,\r\n        animation: Animation,\r\n        property?: string,\r\n        tangentBuilder?: () => any,\r\n        setDefaultInTangent?: (keyId: number) => any,\r\n        setDefaultOutTangent?: (keyId: number) => any\r\n    ) {\r\n        this.color = color;\r\n        this.animation = animation;\r\n        this.property = property;\r\n        this.tangentBuilder = tangentBuilder;\r\n        this.setDefaultInTangent = setDefaultInTangent;\r\n        this.setDefaultOutTangent = setDefaultOutTangent;\r\n    }\r\n\r\n    public getPathData(convertX: (x: number) => number, convertY: (y: number) => number) {\r\n        const keys = this.keys;\r\n        if (keys.length < 2) {\r\n            return \"\";\r\n        }\r\n        let pathData = `M${convertX(keys[0].frame)} ${convertY(keys[0].value)}`;\r\n\r\n        const dataType = this.animation.dataType;\r\n        for (let keyIndex = 1; keyIndex < keys.length; keyIndex++) {\r\n            const outTangent = keys[keyIndex - 1].outTangent;\r\n            const inTangent = keys[keyIndex].inTangent;\r\n            const currentFrame = keys[keyIndex].frame;\r\n            const currentValue = keys[keyIndex].value;\r\n            const prevFrame = keys[keyIndex - 1].frame;\r\n            const prevValue = keys[keyIndex - 1].value;\r\n            const frameDist = currentFrame - prevFrame;\r\n            const prevInterpolation = keys[keyIndex - 1].interpolation;\r\n\r\n            if (prevInterpolation === AnimationKeyInterpolation.STEP) {\r\n                // Draw a stepped curve\r\n                pathData += `L ${convertX(currentFrame)} ${convertY(prevValue)}`;\r\n                pathData += `L ${convertX(currentFrame)} ${convertY(currentValue)}`;\r\n                continue;\r\n            }\r\n\r\n            if (outTangent === undefined && inTangent === undefined && dataType !== Animation.ANIMATIONTYPE_QUATERNION) {\r\n                // Draw a straight line\r\n                pathData += ` L${convertX(currentFrame)} ${convertY(currentValue)}`;\r\n                continue;\r\n            }\r\n\r\n            // Let's sample the curve else\r\n            for (let frame = prevFrame; frame < currentFrame; frame += frameDist / CurveData.SampleRate) {\r\n                const keyValue = this.animation.evaluate(frame);\r\n                const value = this.property ? keyValue[this.property] : keyValue;\r\n                pathData += ` L${convertX(frame)} ${convertY(value)}`;\r\n            }\r\n            pathData += ` L${convertX(currentFrame)} ${convertY(currentValue)}`;\r\n        }\r\n\r\n        return pathData;\r\n    }\r\n\r\n    public updateLockedTangentMode(keyIndex: number, enabled: boolean) {\r\n        const keys = this.keys;\r\n        keys[keyIndex].lockedTangent = enabled;\r\n\r\n        const animationKeys = this.animation.getKeys();\r\n        animationKeys[keyIndex].lockedTangent = enabled;\r\n    }\r\n\r\n    public updateInterpolationMode(keyIndex: number, interpolationMode: AnimationKeyInterpolation) {\r\n        const keys = this.keys;\r\n        keys[keyIndex].interpolation = interpolationMode;\r\n\r\n        const animationKeys = this.animation.getKeys();\r\n        animationKeys[keyIndex].interpolation = interpolationMode;\r\n\r\n        this.onDataUpdatedObservable.notifyObservers();\r\n    }\r\n\r\n    public getInControlPoint(keyIndex: number) {\r\n        if (keyIndex === 0) {\r\n            return 0;\r\n        }\r\n\r\n        const keys = this.keys;\r\n        let inTangent = keys[keyIndex].inTangent;\r\n\r\n        if (inTangent === undefined && this.hasDefinedInTangent(keyIndex)) {\r\n            inTangent = this.evaluateInTangent(keyIndex);\r\n        }\r\n\r\n        return inTangent;\r\n    }\r\n\r\n    public getOutControlPoint(keyIndex: number) {\r\n        const keys = this.keys;\r\n        if (keyIndex === keys.length - 1) {\r\n            return 0;\r\n        }\r\n\r\n        let outTangent = keys[keyIndex].outTangent;\r\n\r\n        if (outTangent === undefined && this.hasDefinedOutTangent(keyIndex)) {\r\n            outTangent = this.evaluateOutTangent(keyIndex);\r\n        }\r\n\r\n        return outTangent;\r\n    }\r\n\r\n    public hasDefinedOutTangent(keyIndex: number) {\r\n        const keys = this.keys;\r\n        if (keyIndex === this.keys.length - 1) {\r\n            return false;\r\n        }\r\n        const prevFrame = keys[keyIndex].frame;\r\n        const currentFrame = keys[keyIndex + 1].frame;\r\n        return prevFrame !== currentFrame;\r\n    }\r\n\r\n    public evaluateOutTangent(keyIndex: number) {\r\n        const keys = this.keys;\r\n        const prevFrame = keys[keyIndex].frame;\r\n        const currentFrame = keys[keyIndex + 1].frame;\r\n        return (keys[keyIndex + 1].value - keys[keyIndex].value) / (currentFrame - prevFrame);\r\n    }\r\n\r\n    public hasDefinedInTangent(keyIndex: number) {\r\n        if (keyIndex === 0) {\r\n            return false;\r\n        }\r\n        const keys = this.keys;\r\n        const prevFrame = keys[keyIndex - 1].frame;\r\n        const currentFrame = keys[keyIndex].frame;\r\n        return prevFrame !== currentFrame;\r\n    }\r\n\r\n    public evaluateInTangent(keyIndex: number) {\r\n        const keys = this.keys;\r\n        const prevFrame = keys[keyIndex - 1].frame;\r\n        const currentFrame = keys[keyIndex].frame;\r\n        return (keys[keyIndex].value - keys[keyIndex - 1].value) / (currentFrame - prevFrame);\r\n    }\r\n\r\n    public storeDefaultInTangent(keyIndex: number) {\r\n        const keys = this.keys;\r\n        const animationKeys = this.animation.getKeys();\r\n        if (this.hasDefinedInTangent(keyIndex)) {\r\n            keys[keyIndex].inTangent = this.evaluateInTangent(keyIndex);\r\n        }\r\n\r\n        if (this.property) {\r\n            if (!animationKeys[keyIndex].inTangent) {\r\n                animationKeys[keyIndex].inTangent = this.tangentBuilder!();\r\n                this.setDefaultInTangent!(keyIndex);\r\n            }\r\n            animationKeys[keyIndex].inTangent[this.property] = keys[keyIndex].inTangent;\r\n        } else {\r\n            animationKeys[keyIndex].inTangent = keys[keyIndex].inTangent;\r\n        }\r\n    }\r\n\r\n    public storeDefaultOutTangent(keyIndex: number) {\r\n        const keys = this.keys;\r\n        const animationKeys = this.animation.getKeys();\r\n        if (this.hasDefinedOutTangent(keyIndex)) {\r\n            keys[keyIndex].outTangent = this.evaluateOutTangent(keyIndex);\r\n        }\r\n\r\n        if (this.property) {\r\n            if (!animationKeys[keyIndex].outTangent) {\r\n                animationKeys[keyIndex].outTangent = this.tangentBuilder!();\r\n                this.setDefaultOutTangent!(keyIndex);\r\n            }\r\n            animationKeys[keyIndex].outTangent[this.property] = keys[keyIndex].outTangent;\r\n        } else {\r\n            animationKeys[keyIndex].outTangent = keys[keyIndex].outTangent;\r\n        }\r\n    }\r\n\r\n    public updateInTangentFromControlPoint(keyId: number, slope: number) {\r\n        const keys = this.keys;\r\n        keys[keyId].inTangent = slope;\r\n\r\n        const animationKeys = this.animation.getKeys();\r\n        if (this.property) {\r\n            if (!animationKeys[keyId].inTangent) {\r\n                animationKeys[keyId].inTangent = this.tangentBuilder!();\r\n                this.setDefaultInTangent!(keyId);\r\n            }\r\n            if (!animationKeys[keyId - 1].outTangent) {\r\n                animationKeys[keyId - 1].outTangent = this.tangentBuilder!();\r\n                this.setDefaultOutTangent!(keyId - 1);\r\n            }\r\n\r\n            animationKeys[keyId].inTangent[this.property] = keys[keyId].inTangent;\r\n        } else {\r\n            animationKeys[keyId].inTangent = keys[keyId].inTangent;\r\n\r\n            if (animationKeys[keyId - 1].outTangent === undefined) {\r\n                this.storeDefaultOutTangent(keyId - 1);\r\n            }\r\n        }\r\n\r\n        this.onDataUpdatedObservable.notifyObservers();\r\n    }\r\n\r\n    public updateOutTangentFromControlPoint(keyId: number, slope: number) {\r\n        const keys = this.keys;\r\n        keys[keyId].outTangent = slope;\r\n\r\n        const animationKeys = this.animation.getKeys();\r\n\r\n        if (this.property) {\r\n            if (!animationKeys[keyId + 1].inTangent) {\r\n                animationKeys[keyId + 1].inTangent = this.tangentBuilder!();\r\n                this.setDefaultInTangent!(keyId + 1);\r\n            }\r\n            if (!animationKeys[keyId].outTangent) {\r\n                animationKeys[keyId].outTangent = this.tangentBuilder!();\r\n                this.setDefaultOutTangent!(keyId);\r\n            }\r\n\r\n            animationKeys[keyId].outTangent[this.property] = keys[keyId].outTangent;\r\n        } else {\r\n            animationKeys[keyId].outTangent = keys[keyId].outTangent;\r\n            if (animationKeys[keyId + 1].inTangent === undefined) {\r\n                this.storeDefaultInTangent(keyId + 1);\r\n            }\r\n        }\r\n\r\n        this.onDataUpdatedObservable.notifyObservers();\r\n    }\r\n\r\n    public updateKeyFrame(keyId: number, frame: number) {\r\n        const originalKey = this.animation.getKeys()[keyId];\r\n        originalKey.frame = frame;\r\n\r\n        this.keys[keyId].frame = frame;\r\n\r\n        this.onDataUpdatedObservable.notifyObservers();\r\n    }\r\n\r\n    public updateKeyValue(keyId: number, value: number) {\r\n        this.keys[keyId].value = value;\r\n\r\n        const sourceKey = this.animation.getKeys()[keyId];\r\n\r\n        if (this.property) {\r\n            sourceKey.value[this.property] = value;\r\n        } else {\r\n            sourceKey.value = value;\r\n        }\r\n\r\n        this.onDataUpdatedObservable.notifyObservers();\r\n    }\r\n}\r\n","import type { FunctionComponent } from \"react\";\r\n\r\nimport * as React from \"react\";\r\nimport { Animation } from \"core/Animations/animation\";\r\nimport type { CurveData } from \"./curveData\";\r\n\r\ntype CurveProps = {\r\n    curve: CurveData;\r\n    convertX: (frame: number) => number;\r\n    convertY: (value: number) => number;\r\n};\r\n\r\n/**\r\n * Curve component that renders an animation curve path\r\n * @param props - The curve props\r\n * @returns The rendered curve SVG element\r\n */\r\nexport const Curve: FunctionComponent<CurveProps> = ({ curve, convertX, convertY }) => {\r\n    const isQuaternion = curve.animation.dataType === Animation.ANIMATIONTYPE_QUATERNION;\r\n\r\n    // Path style - same as v1\r\n    const pathStyle: React.CSSProperties = {\r\n        stroke: curve.color,\r\n        fill: \"none\",\r\n        strokeWidth: \"2\",\r\n    };\r\n\r\n    if (isQuaternion) {\r\n        (pathStyle as Record<string, unknown>)[\"strokeDasharray\"] = \"5\";\r\n        (pathStyle as Record<string, unknown>)[\"strokeOpacity\"] = \"0.5\";\r\n    }\r\n\r\n    return (\r\n        <svg style={{ cursor: \"pointer\", overflow: \"auto\" }}>\r\n            <path d={curve.getPathData(convertX, convertY)} style={pathStyle} />\r\n        </svg>\r\n    );\r\n};\r\n","/**\r\n * KeyPointComponent for v2 curve editor - functional component version\r\n * This component renders individual key points on the curve editor canvas.\r\n * Includes full tangent editing support for feature parity with v1.\r\n */\r\nimport { Animation } from \"core/Animations/animation\";\r\nimport { AnimationKeyInterpolation } from \"core/Animations/animationKey\";\r\nimport { Vector2 } from \"core/Maths/math.vector\";\r\nimport type { Nullable } from \"core/types\";\r\nimport * as React from \"react\";\r\nimport { useCallback, useEffect, useRef, useState } from \"react\";\r\nimport type { CurveData } from \"./curveData\";\r\nimport type { KeyPoint } from \"../curveEditorContext\";\r\nimport { useCurveEditor } from \"../curveEditorContext\";\r\n\r\n// Inline SVG data URIs for key point icons\r\nconst KEY_INACTIVE =\r\n    \"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='10' viewBox='0 0 10 10'%3E%3Crect width='10' height='10' style='fill:none'/%3E%3Cpath d='M5,1.41a1,1,0,0,0-.71.3L1.71,4.29a1,1,0,0,0,0,1.41h0L4.29,8.29a1,1,0,0,0,1.41,0h0L8.29,5.71a1,1,0,0,0,0-1.41h0L5.71,1.71A1,1,0,0,0,5,1.41Z' style='fill:%23aaa'/%3E%3Cpolyline points='5 2.41 5 2.41 7.59 5 5 7.59 2.41 5 5 2.41 5 2.41' style='fill:%23111'/%3E%3C/svg%3E\";\r\n\r\nconst KEY_SELECTED =\r\n    \"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='10' viewBox='0 0 10 10'%3E%3Crect width='10' height='10' style='fill:none'/%3E%3Crect x='2.17' y='2.17' width='5.66' height='5.66' rx='1' transform='translate(-2.07 5) rotate(-45)' style='fill:%23ffc017'/%3E%3C/svg%3E\";\r\n\r\nconst KEY_ACTIVE =\r\n    \"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='10' viewBox='0 0 10 10'%3E%3Cpath d='M5,1.41a1,1,0,0,0-.71.3L1.71,4.29a1,1,0,0,0,0,1.41h0L4.29,8.29a1,1,0,0,0,1.41,0h0L8.29,5.71a1,1,0,0,0,0-1.41h0L5.71,1.71A1,1,0,0,0,5,1.41Z' style='fill:%23ffc017'/%3E%3Crect width='10' height='10' style='fill:none'/%3E%3Cpolyline points='5 2.41 5 2.41 7.59 5 5 7.59 2.41 5 5 2.41 5 2.41' style='fill:%23111'/%3E%3C/svg%3E\";\r\n\r\n/** Selection state for key points */\r\nexport enum SelectionState {\r\n    None,\r\n    Selected,\r\n    Siblings,\r\n}\r\n\r\n/** Control mode for pointer interactions */\r\nenum ControlMode {\r\n    None,\r\n    Key,\r\n    TangentLeft,\r\n    TangentRight,\r\n}\r\n\r\n/** Props for the KeyPointComponent */\r\ninterface IKeyPointComponentProps {\r\n    x: number;\r\n    y: number;\r\n    getPreviousX: () => Nullable<number>;\r\n    getNextX: () => Nullable<number>;\r\n    invertX: (x: number) => number;\r\n    invertY: (y: number) => number;\r\n    convertX: (x: number) => number;\r\n    convertY: (y: number) => number;\r\n    scale: number;\r\n    keyId: number;\r\n    curve: CurveData;\r\n    channel: string;\r\n    onFrameValueChanged: (value: number) => void;\r\n    onKeyValueChanged: (value: number) => void;\r\n}\r\n\r\n/**\r\n * KeyPointComponent - Renders a single key point on the curve editor\r\n * Handles selection, dragging, and tangent manipulation\r\n * @param props - The component props\r\n * @returns The rendered key point SVG element\r\n */\r\nexport const KeyPointComponent: React.FunctionComponent<IKeyPointComponentProps> = (props) => {\r\n    const { x: initialX, y: initialY, getPreviousX, getNextX, invertX, invertY, convertX, convertY, scale, keyId, curve, channel, onFrameValueChanged, onKeyValueChanged } = props;\r\n\r\n    const { state, actions, observables } = useCurveEditor();\r\n\r\n    // Local state\r\n    const [selectedState, setSelectedState] = useState<SelectionState>(SelectionState.None);\r\n    const [tangentSelectedIndex, setTangentSelectedIndex] = useState(-1);\r\n    const [currentX, setCurrentX] = useState(initialX);\r\n    const [currentY, setCurrentY] = useState(initialY);\r\n    const [, setForceUpdate] = useState(0);\r\n\r\n    // Refs\r\n    const svgHostRef = useRef<SVGSVGElement>(null);\r\n    const keyPointRef = useRef<SVGImageElement>(null);\r\n    const pointerIsDown = useRef(false);\r\n    const sourcePointerX = useRef(0);\r\n    const sourcePointerY = useRef(0);\r\n    const controlMode = useRef<ControlMode>(ControlMode.None);\r\n    const lockX = useRef(false);\r\n    const lockY = useRef(false);\r\n    const accumulatedX = useRef(0);\r\n    const accumulatedY = useRef(0);\r\n\r\n    // Tangent vectors (mutable refs for performance)\r\n    const inVec = useRef(new Vector2());\r\n    const outVec = useRef(new Vector2());\r\n    const storedLengthIn = useRef(0);\r\n    const storedLengthOut = useRef(0);\r\n\r\n    // Track current position in refs to avoid stale closure issues during drag\r\n    const currentXRef = useRef(initialX);\r\n    const currentYRef = useRef(initialY);\r\n\r\n    // Suppress unused variable warnings\r\n    void channel;\r\n\r\n    // Update position when props change\r\n    useEffect(() => {\r\n        setCurrentX(initialX);\r\n        setCurrentY(initialY);\r\n        currentXRef.current = initialX;\r\n        currentYRef.current = initialY;\r\n    }, [initialX, initialY]);\r\n\r\n    // Helper to compare curves by identity (animation + property) rather than reference\r\n    const curvesMatch = useCallback((c1: CurveData, c2: CurveData) => {\r\n        return c1.animation.uniqueId === c2.animation.uniqueId && c1.property === c2.property;\r\n    }, []);\r\n\r\n    // Check if this key point is selected\r\n    const isSelected = useCallback(() => {\r\n        return state.activeKeyPoints?.some((kp: KeyPoint) => curvesMatch(kp.curve, curve) && kp.keyId === keyId) ?? false;\r\n    }, [state.activeKeyPoints, curve, keyId, curvesMatch]);\r\n\r\n    // Update selection state\r\n    // v1 logic: \"Selected\" means this keypoint is in activeKeyPoints\r\n    // \"Siblings\" means another keypoint with same keyId but different curve (same animation) is selected\r\n    useEffect(() => {\r\n        if (isSelected()) {\r\n            // This keypoint is directly selected\r\n            setSelectedState(SelectionState.Selected);\r\n        } else if (state.activeKeyPoints) {\r\n            // Check if a sibling (same keyId, different curve, same animation) is selected\r\n            let isSibling = false;\r\n            for (const activeKeyPoint of state.activeKeyPoints) {\r\n                if (activeKeyPoint.keyId === keyId && !curvesMatch(activeKeyPoint.curve, curve) && activeKeyPoint.curve.animation.uniqueId === curve.animation.uniqueId) {\r\n                    isSibling = true;\r\n                    break;\r\n                }\r\n            }\r\n            if (isSibling) {\r\n                setSelectedState(SelectionState.Siblings);\r\n            } else {\r\n                setSelectedState(SelectionState.None);\r\n                setTangentSelectedIndex(-1);\r\n            }\r\n        } else {\r\n            setSelectedState(SelectionState.None);\r\n            setTangentSelectedIndex(-1);\r\n        }\r\n    }, [state.activeKeyPoints, state.mainKeyPoint, curve, keyId, isSelected, curvesMatch]);\r\n\r\n    // Extract slope from a tangent vector (matches v1's _extractSlope)\r\n    const extractSlope = useCallback(\r\n        (vec: Vector2, storedLength: number, isIn: boolean) => {\r\n            const keys = curve.keys;\r\n            const keyValue = keys[keyId].value;\r\n            const keyFrame = keys[keyId].frame;\r\n\r\n            // Ensure vector points in the correct direction (modifies vec directly like v1)\r\n            if (isIn && vec.x >= 0) {\r\n                vec.x = -0.01;\r\n            } else if (!isIn && vec.x <= 0) {\r\n                vec.x = 0.01;\r\n            }\r\n\r\n            // Clone AFTER direction correction (like v1)\r\n            const currentPosition = vec.clone();\r\n            currentPosition.normalize();\r\n            currentPosition.scaleInPlace(storedLength);\r\n\r\n            const value = isIn ? keyValue - invertY(currentPosition.y + currentY) : invertY(currentPosition.y + currentY) - keyValue;\r\n            const frame = isIn ? keyFrame - invertX(currentPosition.x + currentX) : invertX(currentPosition.x + currentX) - keyFrame;\r\n\r\n            return value / frame;\r\n        },\r\n        [curve, keyId, invertX, invertY, currentX, currentY]\r\n    );\r\n\r\n    // Tangent operations\r\n    const flattenTangent = useCallback(() => {\r\n        // First update the interpolation mode to NONE without triggering observers\r\n        const keys = curve.keys;\r\n        const animationKeys = curve.animation.getKeys();\r\n        keys[keyId].interpolation = AnimationKeyInterpolation.NONE;\r\n        animationKeys[keyId].interpolation = AnimationKeyInterpolation.NONE;\r\n\r\n        // Then update the tangents\r\n        if (tangentSelectedIndex === -1 || tangentSelectedIndex === 0) {\r\n            if (keyId !== 0) {\r\n                curve.updateInTangentFromControlPoint(keyId, 0);\r\n            }\r\n        }\r\n        if (tangentSelectedIndex === -1 || tangentSelectedIndex === 1) {\r\n            if (keyId !== curve.keys.length - 1) {\r\n                curve.updateOutTangentFromControlPoint(keyId, 0);\r\n            }\r\n        }\r\n        setForceUpdate((v) => v + 1);\r\n    }, [keyId, tangentSelectedIndex, curve]);\r\n\r\n    const linearTangent = useCallback(() => {\r\n        // First update the interpolation mode to NONE without triggering observers\r\n        const keys = curve.keys;\r\n        const animationKeys = curve.animation.getKeys();\r\n        keys[keyId].interpolation = AnimationKeyInterpolation.NONE;\r\n        animationKeys[keyId].interpolation = AnimationKeyInterpolation.NONE;\r\n\r\n        // Then update the tangents\r\n        if (tangentSelectedIndex === -1 || tangentSelectedIndex === 0) {\r\n            if (keyId !== 0) {\r\n                curve.storeDefaultInTangent(keyId);\r\n            }\r\n        }\r\n        if (tangentSelectedIndex === -1 || tangentSelectedIndex === 1) {\r\n            if (keyId !== curve.keys.length - 1) {\r\n                curve.storeDefaultOutTangent(keyId);\r\n            }\r\n        }\r\n\r\n        // Notify once after all changes are done\r\n        curve.onDataUpdatedObservable.notifyObservers();\r\n        setForceUpdate((v) => v + 1);\r\n    }, [keyId, tangentSelectedIndex, curve]);\r\n\r\n    const breakTangent = useCallback(() => {\r\n        // Update interpolation without triggering intermediate observers\r\n        const keys = curve.keys;\r\n        const animationKeys = curve.animation.getKeys();\r\n        keys[keyId].interpolation = AnimationKeyInterpolation.NONE;\r\n        animationKeys[keyId].interpolation = AnimationKeyInterpolation.NONE;\r\n\r\n        curve.updateLockedTangentMode(keyId, false);\r\n        curve.onDataUpdatedObservable.notifyObservers();\r\n        setForceUpdate((v) => v + 1);\r\n    }, [keyId, curve]);\r\n\r\n    const unifyTangent = useCallback(() => {\r\n        // Update interpolation without triggering intermediate observers\r\n        const keys = curve.keys;\r\n        const animationKeys = curve.animation.getKeys();\r\n        keys[keyId].interpolation = AnimationKeyInterpolation.NONE;\r\n        animationKeys[keyId].interpolation = AnimationKeyInterpolation.NONE;\r\n\r\n        curve.updateLockedTangentMode(keyId, true);\r\n        curve.onDataUpdatedObservable.notifyObservers();\r\n        setForceUpdate((v) => v + 1);\r\n    }, [keyId, curve]);\r\n\r\n    const stepTangent = useCallback(() => {\r\n        curve.updateInterpolationMode(keyId, AnimationKeyInterpolation.STEP);\r\n        setForceUpdate((v) => v + 1);\r\n    }, [keyId, curve]);\r\n\r\n    // Subscribe to tangent operation observables\r\n    useEffect(() => {\r\n        const flattenObserver = observables.onFlattenTangentRequired.add(() => {\r\n            if (isSelected()) {\r\n                flattenTangent();\r\n            }\r\n        });\r\n\r\n        const linearObserver = observables.onLinearTangentRequired.add(() => {\r\n            if (isSelected()) {\r\n                linearTangent();\r\n            }\r\n        });\r\n\r\n        const breakObserver = observables.onBreakTangentRequired.add(() => {\r\n            if (isSelected()) {\r\n                breakTangent();\r\n            }\r\n        });\r\n\r\n        const unifyObserver = observables.onUnifyTangentRequired.add(() => {\r\n            if (isSelected()) {\r\n                unifyTangent();\r\n            }\r\n        });\r\n\r\n        const stepObserver = observables.onStepTangentRequired.add(() => {\r\n            if (isSelected()) {\r\n                stepTangent();\r\n            }\r\n        });\r\n\r\n        return () => {\r\n            observables.onFlattenTangentRequired.remove(flattenObserver);\r\n            observables.onLinearTangentRequired.remove(linearObserver);\r\n            observables.onBreakTangentRequired.remove(breakObserver);\r\n            observables.onUnifyTangentRequired.remove(unifyObserver);\r\n            observables.onStepTangentRequired.remove(stepObserver);\r\n        };\r\n    }, [observables, isSelected, flattenTangent, linearTangent, breakTangent, unifyTangent, stepTangent]);\r\n\r\n    // Handle selection rectangle\r\n    useEffect(() => {\r\n        const observer = observables.onSelectionRectangleMoved.add((rect1: DOMRect) => {\r\n            if (!keyPointRef.current) {\r\n                return;\r\n            }\r\n\r\n            const animationType = curve.animation.dataType;\r\n            const isQuaternionAnimation = animationType === Animation.ANIMATIONTYPE_QUATERNION;\r\n            if (isQuaternionAnimation) {\r\n                return;\r\n            }\r\n\r\n            const rect2 = keyPointRef.current.getBoundingClientRect();\r\n            const overlap = !(rect1.right < rect2.left || rect1.left > rect2.right || rect1.bottom < rect2.top || rect1.top > rect2.bottom);\r\n\r\n            // Update activeKeyPoints based on overlap\r\n            actions.setActiveKeyPoints((prev) => {\r\n                const current = prev || [];\r\n                const matchesCurve = (kp: KeyPoint) => kp.curve.animation.uniqueId === curve.animation.uniqueId && kp.curve.property === curve.property && kp.keyId === keyId;\r\n                const isCurrentlySelected = current.some(matchesCurve);\r\n\r\n                if (overlap && !isCurrentlySelected) {\r\n                    return [...current, { curve, keyId }];\r\n                } else if (!overlap && isCurrentlySelected) {\r\n                    return current.filter((kp) => !matchesCurve(kp));\r\n                }\r\n                return prev;\r\n            });\r\n        });\r\n\r\n        return () => {\r\n            observables.onSelectionRectangleMoved.remove(observer);\r\n        };\r\n    }, [observables, curve, keyId, actions]);\r\n\r\n    // Handle select all keys\r\n    useEffect(() => {\r\n        const observer = observables.onSelectAllKeys.add(() => {\r\n            actions.setActiveKeyPoints((prev) => {\r\n                const current = prev || [];\r\n                const matchesCurve = (kp: KeyPoint) => kp.curve.animation.uniqueId === curve.animation.uniqueId && kp.curve.property === curve.property && kp.keyId === keyId;\r\n                const isCurrentlySelected = current.some(matchesCurve);\r\n                if (!isCurrentlySelected) {\r\n                    return [...current, { curve, keyId }];\r\n                }\r\n                return prev;\r\n            });\r\n        });\r\n\r\n        return () => {\r\n            observables.onSelectAllKeys.remove(observer);\r\n        };\r\n    }, [observables, actions, curve, keyId]);\r\n\r\n    // Mouse/pointer handlers\r\n    const handlePointerDown = useCallback(\r\n        (evt: React.PointerEvent<SVGSVGElement>) => {\r\n            const animationType = curve.animation.dataType;\r\n            const isQuaternionAnimation = animationType === Animation.ANIMATIONTYPE_QUATERNION;\r\n\r\n            if (isQuaternionAnimation) {\r\n                return;\r\n            }\r\n\r\n            evt.preventDefault();\r\n            evt.stopPropagation();\r\n\r\n            pointerIsDown.current = true;\r\n            sourcePointerX.current = evt.nativeEvent.offsetX;\r\n            sourcePointerY.current = evt.nativeEvent.offsetY;\r\n\r\n            // Determine control mode based on target\r\n            const target = evt.nativeEvent.target as HTMLElement;\r\n            if (target.tagName === \"image\") {\r\n                controlMode.current = ControlMode.Key;\r\n                setTangentSelectedIndex(-1);\r\n            } else if (target.classList.contains(\"left-tangent\")) {\r\n                controlMode.current = ControlMode.TangentLeft;\r\n                setTangentSelectedIndex(0);\r\n            } else if (target.classList.contains(\"right-tangent\")) {\r\n                controlMode.current = ControlMode.TangentRight;\r\n                setTangentSelectedIndex(1);\r\n            }\r\n\r\n            // Reset lock state\r\n            lockX.current = false;\r\n            lockY.current = false;\r\n            accumulatedX.current = 0;\r\n            accumulatedY.current = 0;\r\n\r\n            // Handle selection\r\n            if (!evt.ctrlKey) {\r\n                if (!isSelected()) {\r\n                    actions.setActiveKeyPoints([{ curve, keyId }]);\r\n                }\r\n            } else {\r\n                actions.setActiveKeyPoints((prev) => {\r\n                    const current = prev || [];\r\n                    const matchesCurve = (kp: KeyPoint) => kp.curve.animation.uniqueId === curve.animation.uniqueId && kp.curve.property === curve.property && kp.keyId === keyId;\r\n                    const isCurrentlySelected = current.some(matchesCurve);\r\n                    if (isCurrentlySelected) {\r\n                        return current.filter((kp) => !matchesCurve(kp));\r\n                    } else {\r\n                        return [...current, { curve, keyId }];\r\n                    }\r\n                });\r\n            }\r\n\r\n            observables.onActiveKeyPointChanged.notifyObservers();\r\n\r\n            // Capture pointer for drag\r\n            (evt.target as SVGSVGElement).setPointerCapture(evt.pointerId);\r\n        },\r\n        [curve, keyId, actions, observables, isSelected]\r\n    );\r\n\r\n    const handlePointerMove = useCallback(\r\n        (evt: React.PointerEvent<SVGSVGElement>) => {\r\n            if (!pointerIsDown.current || selectedState !== SelectionState.Selected) {\r\n                return;\r\n            }\r\n\r\n            const diffX = evt.nativeEvent.offsetX - sourcePointerX.current;\r\n            const diffY = evt.nativeEvent.offsetY - sourcePointerY.current;\r\n\r\n            if (controlMode.current === ControlMode.Key) {\r\n                // Handle shift-lock for constrained movement\r\n                if (evt.shiftKey) {\r\n                    if (!lockX.current && !lockY.current) {\r\n                        accumulatedX.current += Math.abs(diffX);\r\n                        accumulatedY.current += Math.abs(diffY);\r\n\r\n                        if (accumulatedX.current > 5 || accumulatedY.current > 5) {\r\n                            if (accumulatedX.current > accumulatedY.current) {\r\n                                lockY.current = true;\r\n                            } else {\r\n                                lockX.current = true;\r\n                            }\r\n                        }\r\n                    }\r\n                } else {\r\n                    lockX.current = false;\r\n                    lockY.current = false;\r\n                }\r\n\r\n                // Calculate new position using refs to avoid stale closure\r\n                let newX = currentXRef.current + (lockX.current ? 0 : diffX * scale);\r\n                let newY = currentYRef.current + (lockY.current ? 0 : diffY * scale);\r\n\r\n                // Constrain to valid frame range\r\n                const previousX = getPreviousX();\r\n                const nextX = getNextX();\r\n                const epsilon = 0.01;\r\n\r\n                if (previousX !== null) {\r\n                    newX = Math.max(previousX + epsilon, newX);\r\n                }\r\n                if (nextX !== null) {\r\n                    newX = Math.min(nextX - epsilon, newX);\r\n                }\r\n\r\n                // Check frame lock constraints\r\n                if (keyId !== 0 && !(state.lockLastFrameFrame && keyId === curve.keys.length - 1)) {\r\n                    const frame = invertX(newX);\r\n                    onFrameValueChanged(frame);\r\n                    observables.onFrameSet.notifyObservers(frame);\r\n                } else {\r\n                    newX = currentXRef.current;\r\n                }\r\n\r\n                // Check value lock constraints\r\n                if (state.lockLastFrameValue && keyId === curve.keys.length - 1) {\r\n                    newY = currentYRef.current;\r\n                }\r\n\r\n                const value = invertY(newY);\r\n                onKeyValueChanged(value);\r\n                observables.onValueSet.notifyObservers(value);\r\n\r\n                // Update both ref and state\r\n                currentXRef.current = newX;\r\n                currentYRef.current = newY;\r\n                setCurrentX(newX);\r\n                setCurrentY(newY);\r\n            } else {\r\n                // Tangent manipulation\r\n                const keys = curve.keys;\r\n                const isLockedTangent = keys[keyId].lockedTangent && keyId !== 0 && keyId !== keys.length - 1;\r\n\r\n                // Calculate angle diff BEFORE modifying the tangent (like v1 does)\r\n                let angleDiff = 0;\r\n                if (isLockedTangent) {\r\n                    const va = inVec.current.clone().normalize();\r\n                    const vb = outVec.current.clone().normalize();\r\n                    angleDiff = Math.acos(Math.min(1.0, Math.max(-1, Vector2.Dot(va, vb))));\r\n\r\n                    // Determine direction of angle\r\n                    const tmpCheck = new Vector2();\r\n                    va.rotateToRef(-angleDiff, tmpCheck);\r\n                    if (Vector2.Distance(tmpCheck, vb) > 0.01) {\r\n                        angleDiff = -angleDiff;\r\n                    }\r\n                }\r\n\r\n                if (controlMode.current === ControlMode.TangentLeft) {\r\n                    // Update the vector in place - multiply by scale to match v1 behavior\r\n                    inVec.current.x += diffX * scale;\r\n                    inVec.current.y += diffY * scale;\r\n\r\n                    const newSlope = extractSlope(inVec.current, storedLengthIn.current, true);\r\n                    curve.updateInTangentFromControlPoint(keyId, newSlope);\r\n\r\n                    if (isLockedTangent) {\r\n                        // Rotate the moved inVec by -angleDiff to get the outVec direction\r\n                        const tmpVector = new Vector2();\r\n                        inVec.current.rotateToRef(-angleDiff, tmpVector);\r\n                        tmpVector.x = Math.abs(tmpVector.x); // Ensure out tangent points right\r\n                        const outSlope = extractSlope(tmpVector, storedLengthOut.current, false);\r\n                        curve.updateOutTangentFromControlPoint(keyId, outSlope);\r\n                        // Update outVec visually to match the rotated position\r\n                        outVec.current.copyFrom(tmpVector);\r\n                        outVec.current.normalize();\r\n                        outVec.current.scaleInPlace(100 * scale);\r\n                    }\r\n                } else if (controlMode.current === ControlMode.TangentRight) {\r\n                    // Update the vector in place - multiply by scale to match v1 behavior\r\n                    outVec.current.x += diffX * scale;\r\n                    outVec.current.y += diffY * scale;\r\n\r\n                    const newSlope = extractSlope(outVec.current, storedLengthOut.current, false);\r\n                    curve.updateOutTangentFromControlPoint(keyId, newSlope);\r\n\r\n                    if (isLockedTangent) {\r\n                        // Rotate the moved outVec by angleDiff to get the inVec direction\r\n                        const tmpVector = new Vector2();\r\n                        outVec.current.rotateToRef(angleDiff, tmpVector);\r\n                        tmpVector.x = -Math.abs(tmpVector.x); // Ensure in tangent points left\r\n                        const inSlope = extractSlope(tmpVector, storedLengthIn.current, true);\r\n                        curve.updateInTangentFromControlPoint(keyId, inSlope);\r\n                        // Update inVec visually to match the rotated position\r\n                        inVec.current.copyFrom(tmpVector);\r\n                        inVec.current.normalize();\r\n                        inVec.current.scaleInPlace(100 * scale);\r\n                    }\r\n                }\r\n\r\n                actions.refreshTarget();\r\n                setForceUpdate((v) => v + 1);\r\n            }\r\n\r\n            observables.onActiveKeyDataChanged.notifyObservers(keyId);\r\n            sourcePointerX.current = evt.nativeEvent.offsetX;\r\n            sourcePointerY.current = evt.nativeEvent.offsetY;\r\n        },\r\n        [\r\n            selectedState,\r\n            getPreviousX,\r\n            getNextX,\r\n            invertX,\r\n            invertY,\r\n            scale,\r\n            onFrameValueChanged,\r\n            onKeyValueChanged,\r\n            curve,\r\n            keyId,\r\n            state.lockLastFrameFrame,\r\n            state.lockLastFrameValue,\r\n            observables,\r\n            actions,\r\n            extractSlope,\r\n        ]\r\n    );\r\n\r\n    const handlePointerUp = useCallback((evt: React.PointerEvent<SVGSVGElement>) => {\r\n        pointerIsDown.current = false;\r\n        controlMode.current = ControlMode.None;\r\n        (evt.target as SVGSVGElement).releasePointerCapture(evt.pointerId);\r\n        evt.stopPropagation();\r\n    }, []);\r\n\r\n    // Get the key data\r\n    const keys = curve.keys;\r\n    const key = keys[keyId];\r\n    if (!key) {\r\n        return null;\r\n    }\r\n\r\n    const animationType = curve.animation.dataType;\r\n    const isColorAnimation = animationType === Animation.ANIMATIONTYPE_COLOR3 || animationType === Animation.ANIMATIONTYPE_COLOR4;\r\n    const isQuaternionAnimation = animationType === Animation.ANIMATIONTYPE_QUATERNION;\r\n\r\n    // Determine icon based on selection state\r\n    let icon: string;\r\n    switch (selectedState) {\r\n        case SelectionState.Selected:\r\n            icon = KEY_SELECTED;\r\n            break;\r\n        case SelectionState.Siblings:\r\n            icon = KEY_ACTIVE;\r\n            break;\r\n        default:\r\n            icon = KEY_INACTIVE;\r\n            break;\r\n    }\r\n\r\n    // Get tangent information\r\n    const isLockedTangent = key.lockedTangent ?? true;\r\n    const hasStepTangentIn = keys[keyId - 1]?.interpolation ?? false;\r\n    const hasStepTangentOut = key.interpolation ?? false;\r\n    const hasDefinedInTangent = curve.hasDefinedInTangent(keyId);\r\n    const hasDefinedOutTangent = curve.hasDefinedOutTangent(keyId);\r\n\r\n    // Calculate tangent vectors from curve data (like v1's render method)\r\n    // This recalculates on every render, including after tangent updates\r\n    const convertedX = invertX(currentX);\r\n    const convertedY = invertY(currentY);\r\n\r\n    if (hasDefinedInTangent) {\r\n        const inControlPointValue = convertedY - curve.getInControlPoint(keyId)!;\r\n        inVec.current = new Vector2(convertX(convertedX - 1) - currentX, convertY(inControlPointValue) - currentY);\r\n    } else {\r\n        inVec.current = new Vector2();\r\n    }\r\n\r\n    if (hasDefinedOutTangent) {\r\n        const outControlPointValue = convertedY + curve.getOutControlPoint(keyId)!;\r\n        outVec.current = new Vector2(convertX(convertedX + 1) - currentX, convertY(outControlPointValue) - currentY);\r\n    } else {\r\n        outVec.current = new Vector2();\r\n    }\r\n\r\n    storedLengthIn.current = inVec.current.length();\r\n    storedLengthOut.current = outVec.current.length();\r\n\r\n    // Normalize and scale for display\r\n    inVec.current.normalize();\r\n    inVec.current.scaleInPlace(100 * scale);\r\n    outVec.current.normalize();\r\n    outVec.current.scaleInPlace(100 * scale);\r\n\r\n    return (\r\n        <svg\r\n            ref={svgHostRef}\r\n            onPointerDown={handlePointerDown}\r\n            onPointerMove={handlePointerMove}\r\n            onPointerUp={handlePointerUp}\r\n            x={currentX}\r\n            y={currentY}\r\n            style={{ cursor: isQuaternionAnimation ? \"auto\" : \"pointer\", overflow: \"auto\", opacity: isQuaternionAnimation ? \"25%\" : \"100%\" }}\r\n        >\r\n            <image ref={keyPointRef} x={`-${8 * scale}`} y={`-${8 * scale}`} width={`${16 * scale}`} height={`${16 * scale}`} href={icon} />\r\n            {selectedState === SelectionState.Selected && (\r\n                <g>\r\n                    {/* Left/In tangent */}\r\n                    {keyId !== 0 && !hasStepTangentIn && !isColorAnimation && !isQuaternionAnimation && hasDefinedInTangent && (\r\n                        <>\r\n                            <line\r\n                                x1={0}\r\n                                y1={0}\r\n                                x2={`${inVec.current.x}px`}\r\n                                y2={`${inVec.current.y}px`}\r\n                                style={{\r\n                                    stroke: tangentSelectedIndex === 0 || tangentSelectedIndex === -1 ? \"#F9BF00\" : \"#AAAAAA\",\r\n                                    strokeWidth: `${1 * scale}`,\r\n                                    strokeDasharray: isLockedTangent ? \"\" : \"2, 2\",\r\n                                }}\r\n                            />\r\n                            <circle\r\n                                className=\"left-tangent\"\r\n                                cx={`${inVec.current.x}px`}\r\n                                cy={`${inVec.current.y}px`}\r\n                                r={`${4 * scale}`}\r\n                                style={{\r\n                                    fill: tangentSelectedIndex === 0 || tangentSelectedIndex === -1 ? \"#F9BF00\" : \"#AAAAAA\",\r\n                                }}\r\n                            />\r\n                        </>\r\n                    )}\r\n                    {/* Right/Out tangent */}\r\n                    {keyId !== keys.length - 1 && !hasStepTangentOut && !isColorAnimation && !isQuaternionAnimation && hasDefinedOutTangent && (\r\n                        <>\r\n                            <line\r\n                                x1={0}\r\n                                y1={0}\r\n                                x2={`${outVec.current.x}px`}\r\n                                y2={`${outVec.current.y}px`}\r\n                                style={{\r\n                                    stroke: tangentSelectedIndex === 1 || tangentSelectedIndex === -1 ? \"#F9BF00\" : \"#AAAAAA\",\r\n                                    strokeWidth: `${1 * scale}`,\r\n                                    strokeDasharray: isLockedTangent ? \"\" : \"2, 2\",\r\n                                }}\r\n                            />\r\n                            <circle\r\n                                className=\"right-tangent\"\r\n                                cx={`${outVec.current.x}px`}\r\n                                cy={`${outVec.current.y}px`}\r\n                                r={`${4 * scale}`}\r\n                                style={{\r\n                                    fill: tangentSelectedIndex === 1 || tangentSelectedIndex === -1 ? \"#F9BF00\" : \"#AAAAAA\",\r\n                                }}\r\n                            />\r\n                        </>\r\n                    )}\r\n                </g>\r\n            )}\r\n        </svg>\r\n    );\r\n};\r\n\r\nexport default KeyPointComponent;\r\n","import type { FunctionComponent } from \"react\";\r\nimport type { Animation } from \"core/Animations/animation\";\r\nimport type { IAnimationKey } from \"core/Animations/animationKey\";\r\n\r\nimport { makeStyles, tokens } from \"@fluentui/react-components\";\r\nimport { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\r\nimport { Animation as AnimationEnum } from \"core/Animations/animation\";\r\nimport { Vector2 } from \"core/Maths/math.vector\";\r\nimport { Vector3 } from \"core/Maths/math.vector\";\r\nimport { Quaternion } from \"core/Maths/math.vector\";\r\nimport { Color3, Color4 } from \"core/Maths/math.color\";\r\n\r\nimport { useCurveEditor } from \"../curveEditorContext\";\r\nimport { useObservableState } from \"../../../hooks/observableHooks\";\r\nimport { CurveData } from \"./curveData\";\r\nimport { Curve } from \"./curve\";\r\nimport { KeyPointComponent } from \"./keyPoint\";\r\nimport { ChannelColors, ColorChannelColors, DefaultCurveColor } from \"../curveEditorColors\";\r\n\r\nconst useStyles = makeStyles({\r\n    root: {\r\n        position: \"absolute\",\r\n        top: 0,\r\n        left: 0,\r\n        width: \"100%\",\r\n        height: \"100%\",\r\n        overflow: \"hidden\",\r\n        backgroundColor: tokens.colorNeutralBackground2,\r\n    },\r\n    svg: {\r\n        position: \"absolute\",\r\n        top: 0,\r\n        left: 0,\r\n    },\r\n    gridLine: {\r\n        stroke: tokens.colorNeutralStroke2,\r\n        strokeWidth: \"1px\",\r\n        strokeDasharray: \"4 4\",\r\n    },\r\n    zeroLine: {\r\n        stroke: tokens.colorNeutralStroke1,\r\n        strokeWidth: \"1px\",\r\n    },\r\n    selectionRect: {\r\n        fill: \"rgba(255, 255, 255, 0.1)\",\r\n        stroke: tokens.colorNeutralForeground1,\r\n        strokeWidth: \"1px\",\r\n        strokeDasharray: \"4 4\",\r\n    },\r\n    valueAxisLabel: {\r\n        fill: tokens.colorNeutralForeground3,\r\n        fontSize: \"10px\",\r\n        fontFamily: \"acumin-pro-condensed, sans-serif\",\r\n        userSelect: \"none\",\r\n    },\r\n    valueAxisBackground: {\r\n        fill: tokens.colorNeutralBackground1,\r\n    },\r\n    activeRangeOverlay: {\r\n        position: \"absolute\" as const,\r\n        top: 0,\r\n        height: \"100%\",\r\n        backgroundColor: tokens.colorBrandBackground2,\r\n        opacity: 0.3,\r\n        pointerEvents: \"none\" as const,\r\n    },\r\n    inactiveRangeOverlay: {\r\n        position: \"absolute\" as const,\r\n        top: 0,\r\n        height: \"100%\",\r\n        backgroundColor: tokens.colorNeutralBackgroundStatic,\r\n        opacity: 0.6,\r\n        pointerEvents: \"none\" as const,\r\n    },\r\n});\r\n\r\ntype GraphProps = {\r\n    width: number;\r\n    height: number;\r\n};\r\n\r\n/**\r\n * Main graph area for displaying and editing animation curves\r\n * @returns The graph component\r\n */\r\nexport const Graph: FunctionComponent<GraphProps> = ({ width, height }) => {\r\n    const styles = useStyles();\r\n    const { state, actions, observables } = useCurveEditor();\r\n    const svgRef = useRef<SVGSVGElement>(null);\r\n\r\n    const [scale, setScale] = useState(1);\r\n    const [offsetX, setOffsetX] = useState(0);\r\n    const [offsetY, setOffsetY] = useState(0);\r\n    const [isPointerDown, setIsPointerDown] = useState(false);\r\n    const [pointerStart, setPointerStart] = useState({ x: 0, y: 0 });\r\n\r\n    // Re-render when active animation or range changes\r\n    // useCallback stabilizes the accessor to prevent infinite re-render loops\r\n    useObservableState(\r\n        useCallback(() => ({}), []),\r\n        observables.onActiveAnimationChanged,\r\n        observables.onRangeUpdated\r\n    );\r\n\r\n    // Ensure dimensions are valid\r\n    const safeWidth = Math.max(1, width);\r\n    const safeHeight = Math.max(1, height);\r\n\r\n    const graphOffsetX = 30;\r\n    const viewWidth = safeWidth - graphOffsetX;\r\n\r\n    // Subscribe to action observables\r\n    useEffect(() => {\r\n        // Handle create or update key point\r\n        const onCreateOrUpdateKeyPointRequired = observables.onCreateOrUpdateKeyPointRequired.add(() => {\r\n            if (state.activeAnimations.length === 0) {\r\n                return;\r\n            }\r\n\r\n            for (const currentAnimation of state.activeAnimations) {\r\n                if (currentAnimation.dataType === AnimationEnum.ANIMATIONTYPE_QUATERNION) {\r\n                    continue;\r\n                }\r\n                const keys = currentAnimation.getKeys();\r\n                const currentFrame = state.activeFrame;\r\n\r\n                // Find where to insert the new key\r\n                let indexToAdd = -1;\r\n                for (const key of keys) {\r\n                    if (key.frame < currentFrame) {\r\n                        indexToAdd++;\r\n                    } else {\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                // Get the value at the current frame\r\n                const value = currentAnimation.evaluate(currentFrame);\r\n\r\n                const leftKey = keys[indexToAdd];\r\n                const rightKey = keys[indexToAdd + 1];\r\n\r\n                if (leftKey && Math.floor(currentFrame - leftKey.frame) === 0) {\r\n                    // Key already exists at this frame, update it\r\n                    leftKey.value = value;\r\n                } else if (rightKey && Math.floor(rightKey.frame - currentFrame) === 0) {\r\n                    // Key already exists at this frame, update it\r\n                    rightKey.value = value;\r\n                } else {\r\n                    // Create new key\r\n                    const newKey: IAnimationKey = {\r\n                        frame: currentFrame,\r\n                        value: value,\r\n                        lockedTangent: true,\r\n                    };\r\n\r\n                    keys.splice(indexToAdd + 1, 0, newKey);\r\n                }\r\n\r\n                currentAnimation.setKeys(keys);\r\n            }\r\n\r\n            // Clear selection and refresh\r\n            actions.setActiveKeyPoints([]);\r\n            observables.onActiveKeyPointChanged.notifyObservers();\r\n            observables.onActiveAnimationChanged.notifyObservers({});\r\n        });\r\n\r\n        // Handle frame canvas - reset view to fit all content\r\n        const onFrameRequired = observables.onFrameRequired.add(() => {\r\n            setScale(1);\r\n            setOffsetX(0);\r\n            setOffsetY(0);\r\n        });\r\n\r\n        // Handle delete active key points\r\n        const onDeleteKeyActiveKeyPoints = observables.onDeleteKeyActiveKeyPoints.add(() => {\r\n            if (!state.activeKeyPoints || state.activeKeyPoints.length === 0) {\r\n                return;\r\n            }\r\n\r\n            // Group key points by animation\r\n            const keysByAnimation = new Map<Animation, Set<number>>();\r\n            for (const keyPoint of state.activeKeyPoints) {\r\n                const animation = keyPoint.curve.animation;\r\n                if (!keysByAnimation.has(animation)) {\r\n                    keysByAnimation.set(animation, new Set());\r\n                }\r\n                keysByAnimation.get(animation)!.add(keyPoint.keyId);\r\n            }\r\n\r\n            // Delete keys from each animation (in reverse order to maintain indices)\r\n            for (const [animation, keyIndices] of keysByAnimation) {\r\n                const keys = animation.getKeys();\r\n                const sortedIndices = Array.from(keyIndices).sort((a, b) => b - a); // Sort descending\r\n                for (const index of sortedIndices) {\r\n                    if (index >= 0 && index < keys.length) {\r\n                        keys.splice(index, 1);\r\n                    }\r\n                }\r\n                animation.setKeys(keys);\r\n            }\r\n\r\n            // Clear selection and refresh\r\n            actions.setActiveKeyPoints([]);\r\n            observables.onActiveKeyPointChanged.notifyObservers();\r\n            observables.onActiveAnimationChanged.notifyObservers({});\r\n        });\r\n\r\n        // Note: Tangent operations (flatten, linear, break, unify, step) are handled by KeyPointComponent\r\n        // Each selected keypoint subscribes to the observables and handles its own tangent updates (like v1)\r\n\r\n        return () => {\r\n            observables.onCreateOrUpdateKeyPointRequired.remove(onCreateOrUpdateKeyPointRequired);\r\n            observables.onFrameRequired.remove(onFrameRequired);\r\n            observables.onDeleteKeyActiveKeyPoints.remove(onDeleteKeyActiveKeyPoints);\r\n        };\r\n    }, [observables, state.activeAnimations, state.activeFrame, state.activeKeyPoints, actions]);\r\n\r\n    const curves = useMemo((): CurveData[] => {\r\n        const result: CurveData[] = [];\r\n\r\n        // Helper to set default tangents across all curves (like v1)\r\n        const setDefaultInTangent = (keyId: number) => {\r\n            for (const curve of result) {\r\n                curve.storeDefaultInTangent(keyId);\r\n            }\r\n        };\r\n        const setDefaultOutTangent = (keyId: number) => {\r\n            for (const curve of result) {\r\n                curve.storeDefaultOutTangent(keyId);\r\n            }\r\n        };\r\n\r\n        for (const animation of state.activeAnimations) {\r\n            const keys = animation.getKeys();\r\n            if (keys.length === 0) {\r\n                continue;\r\n            }\r\n\r\n            const channelColor = state.activeChannels[animation.uniqueId];\r\n            const curvesToAdd: CurveData[] = [];\r\n\r\n            // Create curves based on data type (like v1's _evaluateKeys)\r\n            switch (animation.dataType) {\r\n                case AnimationEnum.ANIMATIONTYPE_FLOAT:\r\n                    curvesToAdd.push(new CurveData(channelColor || DefaultCurveColor, animation));\r\n                    break;\r\n                case AnimationEnum.ANIMATIONTYPE_VECTOR2:\r\n                    if (!channelColor || channelColor === ChannelColors.X) {\r\n                        curvesToAdd.push(new CurveData(ChannelColors.X, animation, \"x\", () => Vector2.Zero(), setDefaultInTangent, setDefaultOutTangent));\r\n                    }\r\n                    if (!channelColor || channelColor === ChannelColors.Y) {\r\n                        curvesToAdd.push(new CurveData(ChannelColors.Y, animation, \"y\", () => Vector2.Zero(), setDefaultInTangent, setDefaultOutTangent));\r\n                    }\r\n                    break;\r\n                case AnimationEnum.ANIMATIONTYPE_VECTOR3:\r\n                    if (!channelColor || channelColor === ChannelColors.X) {\r\n                        curvesToAdd.push(new CurveData(ChannelColors.X, animation, \"x\", () => Vector3.Zero(), setDefaultInTangent, setDefaultOutTangent));\r\n                    }\r\n                    if (!channelColor || channelColor === ChannelColors.Y) {\r\n                        curvesToAdd.push(new CurveData(ChannelColors.Y, animation, \"y\", () => Vector3.Zero(), setDefaultInTangent, setDefaultOutTangent));\r\n                    }\r\n                    if (!channelColor || channelColor === ChannelColors.Z) {\r\n                        curvesToAdd.push(new CurveData(ChannelColors.Z, animation, \"z\", () => Vector3.Zero(), setDefaultInTangent, setDefaultOutTangent));\r\n                    }\r\n                    break;\r\n                case AnimationEnum.ANIMATIONTYPE_COLOR3:\r\n                    if (!channelColor || channelColor === ColorChannelColors.R) {\r\n                        curvesToAdd.push(new CurveData(ColorChannelColors.R, animation, \"r\", () => Color3.Black(), setDefaultInTangent, setDefaultOutTangent));\r\n                    }\r\n                    if (!channelColor || channelColor === ColorChannelColors.G) {\r\n                        curvesToAdd.push(new CurveData(ColorChannelColors.G, animation, \"g\", () => Color3.Black(), setDefaultInTangent, setDefaultOutTangent));\r\n                    }\r\n                    if (!channelColor || channelColor === ColorChannelColors.B) {\r\n                        curvesToAdd.push(new CurveData(ColorChannelColors.B, animation, \"b\", () => Color3.Black(), setDefaultInTangent, setDefaultOutTangent));\r\n                    }\r\n                    break;\r\n                case AnimationEnum.ANIMATIONTYPE_COLOR4:\r\n                    if (!channelColor || channelColor === ColorChannelColors.R) {\r\n                        curvesToAdd.push(new CurveData(ColorChannelColors.R, animation, \"r\", () => new Color4(), setDefaultInTangent, setDefaultOutTangent));\r\n                    }\r\n                    if (!channelColor || channelColor === ColorChannelColors.G) {\r\n                        curvesToAdd.push(new CurveData(ColorChannelColors.G, animation, \"g\", () => new Color4(), setDefaultInTangent, setDefaultOutTangent));\r\n                    }\r\n                    if (!channelColor || channelColor === ColorChannelColors.B) {\r\n                        curvesToAdd.push(new CurveData(ColorChannelColors.B, animation, \"b\", () => new Color4(), setDefaultInTangent, setDefaultOutTangent));\r\n                    }\r\n                    if (!channelColor || channelColor === ColorChannelColors.A) {\r\n                        curvesToAdd.push(new CurveData(ColorChannelColors.A, animation, \"a\", () => new Color4(), setDefaultInTangent, setDefaultOutTangent));\r\n                    }\r\n                    break;\r\n                case AnimationEnum.ANIMATIONTYPE_QUATERNION:\r\n                    if (!channelColor || channelColor === ChannelColors.X) {\r\n                        curvesToAdd.push(new CurveData(ChannelColors.X, animation, \"x\", () => new Quaternion(), setDefaultInTangent, setDefaultOutTangent));\r\n                    }\r\n                    if (!channelColor || channelColor === ChannelColors.Y) {\r\n                        curvesToAdd.push(new CurveData(ChannelColors.Y, animation, \"y\", () => new Quaternion(), setDefaultInTangent, setDefaultOutTangent));\r\n                    }\r\n                    if (!channelColor || channelColor === ChannelColors.Z) {\r\n                        curvesToAdd.push(new CurveData(ChannelColors.Z, animation, \"z\", () => new Quaternion(), setDefaultInTangent, setDefaultOutTangent));\r\n                    }\r\n                    if (!channelColor || channelColor === ChannelColors.W) {\r\n                        curvesToAdd.push(new CurveData(ChannelColors.W, animation, \"w\", () => new Quaternion(), setDefaultInTangent, setDefaultOutTangent));\r\n                    }\r\n                    break;\r\n            }\r\n\r\n            // Populate keys for each curve (like v1's _extractValuesFromKeys)\r\n            for (const key of keys) {\r\n                const lockedTangent = key.lockedTangent ?? true;\r\n\r\n                for (const curve of curvesToAdd) {\r\n                    const prop = curve.property;\r\n                    const value = prop ? (key.value as Record<string, number>)[prop] : (key.value as number);\r\n                    const inTangent = prop ? key.inTangent?.[prop] : (key.inTangent as number | undefined);\r\n                    const outTangent = prop ? key.outTangent?.[prop] : (key.outTangent as number | undefined);\r\n\r\n                    curve.keys.push({\r\n                        frame: key.frame,\r\n                        value,\r\n                        inTangent,\r\n                        outTangent,\r\n                        lockedTangent,\r\n                        interpolation: key.interpolation,\r\n                    });\r\n                }\r\n            }\r\n\r\n            result.push(...curvesToAdd);\r\n        }\r\n\r\n        return result;\r\n    }, [state.activeAnimations, state.activeChannels]);\r\n\r\n    // Calculate value range\r\n    const valueRange = useMemo(() => {\r\n        let minValue = 0;\r\n        let maxValue = 1;\r\n\r\n        for (const curve of curves) {\r\n            for (const key of curve.keys) {\r\n                if (key.value < minValue) {\r\n                    minValue = key.value;\r\n                }\r\n                if (key.value > maxValue) {\r\n                    maxValue = key.value;\r\n                }\r\n            }\r\n        }\r\n\r\n        // Add padding\r\n        const padding = (maxValue - minValue) * 0.1 || 1;\r\n        return { min: minValue - padding, max: maxValue + padding };\r\n    }, [curves]);\r\n\r\n    // Convert frame to x position (uses reference frames for full visible range)\r\n    const frameToX = useCallback(\r\n        (frame: number) => {\r\n            const { referenceMinFrame, referenceMaxFrame } = state;\r\n            const range = referenceMaxFrame - referenceMinFrame;\r\n            if (range <= 0) {\r\n                return graphOffsetX;\r\n            }\r\n            return graphOffsetX + ((frame - referenceMinFrame) / range) * viewWidth * scale + offsetX;\r\n        },\r\n        [state, viewWidth, scale, offsetX]\r\n    );\r\n\r\n    // Convert value to y position\r\n    const valueToY = useCallback(\r\n        (value: number) => {\r\n            const range = valueRange.max - valueRange.min;\r\n            if (range <= 0) {\r\n                return safeHeight / 2;\r\n            }\r\n            return safeHeight - ((value - valueRange.min) / range) * safeHeight * scale + offsetY;\r\n        },\r\n        [valueRange, safeHeight, scale, offsetY]\r\n    );\r\n\r\n    // Convert x position to frame (uses reference frames for full visible range)\r\n    const xToFrame = useCallback(\r\n        (x: number) => {\r\n            const { referenceMinFrame, referenceMaxFrame } = state;\r\n            const range = referenceMaxFrame - referenceMinFrame;\r\n            if (range <= 0) {\r\n                return referenceMinFrame;\r\n            }\r\n            return referenceMinFrame + ((x - graphOffsetX - offsetX) / (viewWidth * scale)) * range;\r\n        },\r\n        [state, viewWidth, scale, offsetX]\r\n    );\r\n\r\n    // Convert y position to value\r\n    const yToValue = useCallback(\r\n        (y: number) => {\r\n            const range = valueRange.max - valueRange.min;\r\n            if (range <= 0) {\r\n                return valueRange.min;\r\n            }\r\n            return valueRange.min + ((safeHeight - y + offsetY) / (safeHeight * scale)) * range;\r\n        },\r\n        [valueRange, safeHeight, scale, offsetY]\r\n    );\r\n\r\n    // Note: Key frame/value changes are now handled directly via curve.updateKeyFrame/updateKeyValue\r\n    // in the KeyPoint component\r\n\r\n    // Handle pointer events for panning\r\n    const handlePointerDown = useCallback((e: React.PointerEvent) => {\r\n        if (e.button === 1 || (e.button === 0 && e.altKey)) {\r\n            // Middle click or Alt+left click for panning\r\n            setIsPointerDown(true);\r\n            setPointerStart({ x: e.clientX, y: e.clientY });\r\n            e.currentTarget.setPointerCapture(e.pointerId);\r\n        }\r\n    }, []);\r\n\r\n    const handlePointerMove = useCallback(\r\n        (e: React.PointerEvent) => {\r\n            if (!isPointerDown) {\r\n                return;\r\n            }\r\n\r\n            const dx = e.clientX - pointerStart.x;\r\n            const dy = e.clientY - pointerStart.y;\r\n\r\n            setOffsetX((prev) => prev + dx);\r\n            setOffsetY((prev) => prev + dy);\r\n            setPointerStart({ x: e.clientX, y: e.clientY });\r\n\r\n            observables.onGraphMoved.notifyObservers(offsetX + dx);\r\n        },\r\n        [isPointerDown, pointerStart, offsetX, observables]\r\n    );\r\n\r\n    const handlePointerUp = useCallback((e: React.PointerEvent) => {\r\n        setIsPointerDown(false);\r\n        e.currentTarget.releasePointerCapture(e.pointerId);\r\n    }, []);\r\n\r\n    // Handle wheel for zooming\r\n    const handleWheel = useCallback(\r\n        (e: React.WheelEvent) => {\r\n            e.preventDefault();\r\n            const delta = e.deltaY > 0 ? 0.9 : 1.1;\r\n            const newScale = Math.max(0.5, Math.min(5, scale * delta));\r\n            setScale(newScale);\r\n            observables.onGraphScaled.notifyObservers(newScale);\r\n        },\r\n        [scale, observables]\r\n    );\r\n\r\n    // Calculate nice step size for grid lines\r\n    const calculateNiceStep = useCallback((range: number, targetLines: number): number => {\r\n        const roughStep = range / targetLines;\r\n        const magnitude = Math.pow(10, Math.floor(Math.log10(roughStep)));\r\n        const residual = roughStep / magnitude;\r\n\r\n        let niceStep: number;\r\n        if (residual <= 1.5) {\r\n            niceStep = magnitude;\r\n        } else if (residual <= 3) {\r\n            niceStep = 2 * magnitude;\r\n        } else if (residual <= 7) {\r\n            niceStep = 5 * magnitude;\r\n        } else {\r\n            niceStep = 10 * magnitude;\r\n        }\r\n\r\n        return niceStep;\r\n    }, []);\r\n\r\n    // Render grid lines\r\n    const renderGrid = useCallback(() => {\r\n        const lines: JSX.Element[] = [];\r\n        const range = valueRange.max - valueRange.min;\r\n\r\n        // Calculate nice step for horizontal grid lines\r\n        const valueStep = calculateNiceStep(range, 5);\r\n\r\n        // Find the first nice value above min\r\n        const startValue = Math.ceil(valueRange.min / valueStep) * valueStep;\r\n\r\n        // Draw horizontal grid lines at nice values\r\n        for (let value = startValue; value <= valueRange.max; value += valueStep) {\r\n            const y = valueToY(value);\r\n            const isZero = Math.abs(value) < valueStep * 0.001;\r\n            lines.push(<line key={`h-${value}`} className={isZero ? styles.zeroLine : styles.gridLine} x1={graphOffsetX} y1={y} x2={width} y2={y} />);\r\n        }\r\n\r\n        // Always draw zero line if in range (in case it wasn't hit by the loop)\r\n        if (valueRange.min < 0 && valueRange.max > 0) {\r\n            const zeroInLoop = Math.abs(startValue % valueStep) < valueStep * 0.001 || Math.abs((startValue - valueStep) % valueStep) < valueStep * 0.001;\r\n            if (!zeroInLoop) {\r\n                const y = valueToY(0);\r\n                lines.push(<line key=\"zero\" className={styles.zeroLine} x1={graphOffsetX} y1={y} x2={safeWidth} y2={y} />);\r\n            }\r\n        }\r\n\r\n        // Vertical grid lines (frame) - use reference frames for full range\r\n        const { referenceMinFrame, referenceMaxFrame } = state;\r\n        const frameRange = referenceMaxFrame - referenceMinFrame;\r\n        const frameStep = calculateNiceStep(frameRange, 10);\r\n        const startFrame = Math.ceil(referenceMinFrame / frameStep) * frameStep;\r\n\r\n        for (let frame = startFrame; frame <= referenceMaxFrame; frame += frameStep) {\r\n            const x = frameToX(frame);\r\n            lines.push(<line key={`v-${frame}`} className={styles.gridLine} x1={x} y1={0} x2={x} y2={safeHeight} />);\r\n        }\r\n\r\n        return lines;\r\n    }, [valueRange, frameToX, valueToY, state, safeWidth, safeHeight, styles, calculateNiceStep]);\r\n\r\n    // Render value axis labels\r\n    const renderValueAxis = useCallback(() => {\r\n        const elements: JSX.Element[] = [];\r\n\r\n        // Background for value axis\r\n        elements.push(<rect key=\"axis-bg\" className={styles.valueAxisBackground} x={0} y={0} width={graphOffsetX} height={safeHeight} />);\r\n\r\n        // Value labels at nice step values (matching grid)\r\n        const range = valueRange.max - valueRange.min;\r\n        const valueStep = calculateNiceStep(range, 5);\r\n        const startValue = Math.ceil(valueRange.min / valueStep) * valueStep;\r\n\r\n        for (let value = startValue; value <= valueRange.max; value += valueStep) {\r\n            const y = valueToY(value);\r\n            // Format the value nicely\r\n            let displayValue: string;\r\n            if (Math.abs(value) < 0.0001 && value !== 0) {\r\n                displayValue = value.toExponential(1);\r\n            } else if (Math.abs(value) < 1) {\r\n                displayValue = value.toFixed(Math.max(0, -Math.floor(Math.log10(valueStep))));\r\n            } else {\r\n                displayValue = value.toFixed(Math.min(2, Math.max(0, -Math.floor(Math.log10(valueStep)))));\r\n            }\r\n            elements.push(\r\n                <text key={`label-${value}`} className={styles.valueAxisLabel} x={graphOffsetX - 4} y={y} textAnchor=\"end\" dominantBaseline=\"middle\">\r\n                    {displayValue}\r\n                </text>\r\n            );\r\n        }\r\n\r\n        return elements;\r\n    }, [valueRange, valueToY, safeHeight, styles, calculateNiceStep]);\r\n\r\n    // Calculate active range overlay position\r\n    const activeRangeLeft = frameToX(state.fromKey);\r\n    const activeRangeRight = frameToX(state.toKey);\r\n    const activeRangeWidth = activeRangeRight - activeRangeLeft;\r\n\r\n    // Calculate inactive (outside range) overlay positions\r\n    const leftInactiveWidth = Math.max(0, activeRangeLeft - graphOffsetX);\r\n    const rightInactiveLeft = Math.min(activeRangeRight, safeWidth);\r\n    const rightInactiveWidth = Math.max(0, safeWidth - rightInactiveLeft);\r\n\r\n    return (\r\n        <div className={styles.root}>\r\n            {/* Inactive range overlays (dark areas outside playback range) */}\r\n            {state.activeAnimations.length > 0 && leftInactiveWidth > 0 && (\r\n                <div\r\n                    className={styles.inactiveRangeOverlay}\r\n                    style={{\r\n                        left: graphOffsetX,\r\n                        width: leftInactiveWidth,\r\n                    }}\r\n                />\r\n            )}\r\n            {state.activeAnimations.length > 0 && rightInactiveWidth > 0 && (\r\n                <div\r\n                    className={styles.inactiveRangeOverlay}\r\n                    style={{\r\n                        left: rightInactiveLeft,\r\n                        width: rightInactiveWidth,\r\n                    }}\r\n                />\r\n            )}\r\n            {/* Active range overlay (highlight showing playback range) */}\r\n            {state.activeAnimations.length > 0 && activeRangeWidth > 0 && (\r\n                <div\r\n                    className={styles.activeRangeOverlay}\r\n                    style={{\r\n                        left: Math.max(graphOffsetX, activeRangeLeft),\r\n                        width: Math.min(activeRangeWidth, safeWidth - Math.max(graphOffsetX, activeRangeLeft)),\r\n                    }}\r\n                />\r\n            )}\r\n            <svg\r\n                ref={svgRef}\r\n                className={styles.svg}\r\n                width={safeWidth}\r\n                height={safeHeight}\r\n                onPointerDown={handlePointerDown}\r\n                onPointerMove={handlePointerMove}\r\n                onPointerUp={handlePointerUp}\r\n                onWheel={handleWheel}\r\n            >\r\n                {renderGrid()}\r\n\r\n                {curves.map((curve) => {\r\n                    const curveId = `${curve.animation.uniqueId}-${curve.property || \"value\"}`;\r\n                    return <Curve key={curveId} curve={curve} convertX={frameToX} convertY={valueToY} />;\r\n                })}\r\n\r\n                {/* Render key points separately - like v1 does with KeyPointComponent */}\r\n                {curves.map((curve) => {\r\n                    const curveId = `${curve.animation.uniqueId}-${curve.property || \"value\"}`;\r\n\r\n                    return curve.keys.map((key, keyIndex) => {\r\n                        const x = frameToX(key.frame);\r\n                        const y = valueToY(key.value);\r\n                        if (!Number.isFinite(x) || !Number.isFinite(y)) {\r\n                            return null;\r\n                        }\r\n\r\n                        return (\r\n                            <KeyPointComponent\r\n                                key={`${curveId}-key-${keyIndex}`}\r\n                                x={x}\r\n                                y={y}\r\n                                getPreviousX={() => (keyIndex > 0 ? frameToX(curve.keys[keyIndex - 1].frame) : null)}\r\n                                getNextX={() => (keyIndex < curve.keys.length - 1 ? frameToX(curve.keys[keyIndex + 1].frame) : null)}\r\n                                invertX={xToFrame}\r\n                                invertY={yToValue}\r\n                                convertX={frameToX}\r\n                                convertY={valueToY}\r\n                                scale={scale}\r\n                                keyId={keyIndex}\r\n                                curve={curve}\r\n                                channel={curve.color}\r\n                                onFrameValueChanged={(frame: number) => {\r\n                                    curve.updateKeyFrame(keyIndex, frame);\r\n                                    actions.refreshTarget();\r\n                                }}\r\n                                onKeyValueChanged={(value: number) => {\r\n                                    curve.updateKeyValue(keyIndex, value);\r\n                                    actions.refreshTarget();\r\n                                }}\r\n                            />\r\n                        );\r\n                    });\r\n                })}\r\n\r\n                {renderValueAxis()}\r\n            </svg>\r\n        </div>\r\n    );\r\n};\r\n","import type { FunctionComponent } from \"react\";\r\n\r\nimport { makeStyles, tokens } from \"@fluentui/react-components\";\r\nimport { useCallback, useEffect, useRef, useState } from \"react\";\r\n\r\nimport { useCurveEditor } from \"../curveEditorContext\";\r\n\r\nconst useStyles = makeStyles({\r\n    root: {\r\n        position: \"absolute\",\r\n        top: 0,\r\n        left: 0,\r\n        width: \"100%\",\r\n        height: \"100%\",\r\n        pointerEvents: \"none\",\r\n    },\r\n    line: {\r\n        position: \"absolute\",\r\n        width: \"2px\",\r\n        height: \"100%\",\r\n        backgroundColor: tokens.colorBrandForeground1,\r\n        pointerEvents: \"auto\",\r\n        cursor: \"ew-resize\",\r\n    },\r\n    handle: {\r\n        position: \"absolute\",\r\n        top: 0,\r\n        width: \"20px\",\r\n        height: \"20px\",\r\n        backgroundColor: tokens.colorBrandBackground,\r\n        borderRadius: \"50%\",\r\n        border: `2px solid ${tokens.colorNeutralBackground1}`,\r\n        pointerEvents: \"auto\",\r\n        cursor: \"pointer\",\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\",\r\n        color: tokens.colorNeutralForegroundOnBrand,\r\n        fontSize: \"9px\",\r\n        fontWeight: \"bold\",\r\n        userSelect: \"none\",\r\n        transform: \"translateX(-50%)\",\r\n    },\r\n});\r\n\r\ntype PlayHeadProps = {\r\n    width: number;\r\n    height: number;\r\n};\r\n\r\n/**\r\n * Playhead component showing current frame position\r\n * Uses direct DOM manipulation (like v1) to avoid render cycle flashing during animation\r\n * @returns The playhead component\r\n */\r\nexport const PlayHead: FunctionComponent<PlayHeadProps> = ({ width, height: _height }) => {\r\n    const styles = useStyles();\r\n    const { state, actions, observables } = useCurveEditor();\r\n    const [isDragging, setIsDragging] = useState(false);\r\n\r\n    // Use refs for all mutable values to avoid render cycles\r\n    const scaleRef = useRef(1);\r\n    const offsetXRef = useRef(0);\r\n    const currentFrameRef = useRef(state.activeFrame);\r\n    const animationFrameRef = useRef<number | null>(null);\r\n    const isPlayingRef = useRef(state.isPlaying);\r\n\r\n    // Cache state values that we need for calculations\r\n    const referenceMinFrameRef = useRef(state.referenceMinFrame);\r\n    const referenceMaxFrameRef = useRef(state.referenceMaxFrame);\r\n    const fromKeyRef = useRef(state.fromKey);\r\n    const toKeyRef = useRef(state.toKey);\r\n    const activeAnimationsRef = useRef(state.activeAnimations);\r\n\r\n    // DOM refs for direct manipulation (avoids flash during playback)\r\n    const lineRef = useRef<HTMLDivElement>(null);\r\n    const handleRef = useRef<HTMLDivElement>(null);\r\n\r\n    const graphOffsetX = 30;\r\n    const viewWidth = width - graphOffsetX;\r\n\r\n    // Update cached refs when state changes (but don't trigger re-renders for playhead position)\r\n    useEffect(() => {\r\n        referenceMinFrameRef.current = state.referenceMinFrame;\r\n        referenceMaxFrameRef.current = state.referenceMaxFrame;\r\n        fromKeyRef.current = state.fromKey;\r\n        toKeyRef.current = state.toKey;\r\n        activeAnimationsRef.current = state.activeAnimations;\r\n    }, [state.referenceMinFrame, state.referenceMaxFrame, state.fromKey, state.toKey, state.activeAnimations]);\r\n\r\n    // Calculate and apply playhead position directly to DOM\r\n    const moveHead = useCallback(\r\n        (frame: number) => {\r\n            if (!lineRef.current || !handleRef.current) {\r\n                return;\r\n            }\r\n\r\n            const range = referenceMaxFrameRef.current - referenceMinFrameRef.current;\r\n            if (range <= 0) {\r\n                return;\r\n            }\r\n\r\n            const x = graphOffsetX + ((frame - referenceMinFrameRef.current) / range) * viewWidth * scaleRef.current + offsetXRef.current;\r\n\r\n            // Hide if out of view\r\n            if (x < graphOffsetX || x > width) {\r\n                lineRef.current.style.display = \"none\";\r\n                handleRef.current.style.display = \"none\";\r\n            } else {\r\n                lineRef.current.style.display = \"\";\r\n                handleRef.current.style.display = \"\";\r\n                lineRef.current.style.left = `${x}px`;\r\n                handleRef.current.style.left = `${x}px`;\r\n                handleRef.current.textContent = Math.round(frame).toString();\r\n            }\r\n\r\n            currentFrameRef.current = frame;\r\n        },\r\n        [viewWidth, width]\r\n    );\r\n\r\n    // Subscribe to all observables in a single effect\r\n    useEffect(() => {\r\n        const onMoved = observables.onGraphMoved.add((newOffset) => {\r\n            offsetXRef.current = newOffset;\r\n            moveHead(currentFrameRef.current);\r\n        });\r\n        const onScaled = observables.onGraphScaled.add((newScale) => {\r\n            scaleRef.current = newScale;\r\n            moveHead(currentFrameRef.current);\r\n        });\r\n        const onPlayheadMoved = observables.onPlayheadMoved.add((frame) => {\r\n            // Skip during playback - we update ourselves via requestAnimationFrame\r\n            if (!isPlayingRef.current) {\r\n                moveHead(frame);\r\n            }\r\n        });\r\n        const onMoveToFrame = observables.onMoveToFrameRequired.add((frame) => {\r\n            moveHead(frame);\r\n        });\r\n\r\n        // Initial position\r\n        moveHead(currentFrameRef.current);\r\n\r\n        return () => {\r\n            observables.onGraphMoved.remove(onMoved);\r\n            observables.onGraphScaled.remove(onScaled);\r\n            observables.onPlayheadMoved.remove(onPlayheadMoved);\r\n            observables.onMoveToFrameRequired.remove(onMoveToFrame);\r\n        };\r\n    }, [observables, moveHead]);\r\n\r\n    // Track animation playback using requestAnimationFrame - separate from render cycle\r\n    useEffect(() => {\r\n        isPlayingRef.current = state.isPlaying;\r\n\r\n        const trackAnimation = () => {\r\n            if (!isPlayingRef.current) {\r\n                return;\r\n            }\r\n\r\n            const animations = activeAnimationsRef.current;\r\n            if (animations.length > 0) {\r\n                const animation = animations[0];\r\n                if (animation && animation.runtimeAnimations && animation.runtimeAnimations.length > 0) {\r\n                    const runtimeAnimation = animation.runtimeAnimations[0];\r\n                    if (runtimeAnimation && runtimeAnimation.currentFrame !== undefined) {\r\n                        const frame = runtimeAnimation.currentFrame;\r\n                        moveHead(frame);\r\n                        // Notify other components (like RangeFrameBar) about the playhead position\r\n                        observables.onPlayheadMoved.notifyObservers(frame);\r\n                    }\r\n                }\r\n            }\r\n\r\n            animationFrameRef.current = requestAnimationFrame(trackAnimation);\r\n        };\r\n\r\n        if (state.isPlaying) {\r\n            animationFrameRef.current = requestAnimationFrame(trackAnimation);\r\n        } else {\r\n            // When playback stops, sync the context's activeFrame\r\n            if (animationFrameRef.current !== null) {\r\n                cancelAnimationFrame(animationFrameRef.current);\r\n                animationFrameRef.current = null;\r\n            }\r\n            // Only update if the frame actually changed\r\n            if (currentFrameRef.current !== state.activeFrame) {\r\n                actions.setActiveFrame(currentFrameRef.current);\r\n            }\r\n        }\r\n\r\n        return () => {\r\n            if (animationFrameRef.current !== null) {\r\n                cancelAnimationFrame(animationFrameRef.current);\r\n                animationFrameRef.current = null;\r\n            }\r\n        };\r\n    }, [state.isPlaying, actions, moveHead, state.activeFrame]);\r\n\r\n    // Convert x to frame\r\n    const xToFrame = useCallback(\r\n        (x: number) => {\r\n            const range = referenceMaxFrameRef.current - referenceMinFrameRef.current;\r\n            const frame = referenceMinFrameRef.current + ((x - graphOffsetX - offsetXRef.current) / (viewWidth * scaleRef.current)) * range;\r\n            // Clamp to the active playback range\r\n            return Math.max(fromKeyRef.current, Math.min(toKeyRef.current, Math.round(frame)));\r\n        },\r\n        [viewWidth]\r\n    );\r\n\r\n    const handlePointerDown = useCallback((e: React.PointerEvent) => {\r\n        setIsDragging(true);\r\n        e.currentTarget.setPointerCapture(e.pointerId);\r\n    }, []);\r\n\r\n    const handlePointerMove = useCallback(\r\n        (e: React.PointerEvent) => {\r\n            if (!isDragging) {\r\n                return;\r\n            }\r\n\r\n            const rect = (e.currentTarget.parentElement as HTMLElement).getBoundingClientRect();\r\n            const x = e.clientX - rect.left;\r\n            const frame = xToFrame(x);\r\n\r\n            moveHead(frame);\r\n            actions.moveToFrame(frame);\r\n        },\r\n        [isDragging, xToFrame, actions, moveHead]\r\n    );\r\n\r\n    const handlePointerUp = useCallback((e: React.PointerEvent) => {\r\n        setIsDragging(false);\r\n        e.currentTarget.releasePointerCapture(e.pointerId);\r\n    }, []);\r\n\r\n    return (\r\n        <div className={styles.root}>\r\n            <div ref={lineRef} className={styles.line} onPointerDown={handlePointerDown} onPointerMove={handlePointerMove} onPointerUp={handlePointerUp} />\r\n            <div ref={handleRef} className={styles.handle} onPointerDown={handlePointerDown} onPointerMove={handlePointerMove} onPointerUp={handlePointerUp} />\r\n        </div>\r\n    );\r\n};\r\n","import type { FunctionComponent } from \"react\";\r\n\r\nimport { makeStyles, tokens } from \"@fluentui/react-components\";\r\nimport { useCallback, useEffect, useRef, useState } from \"react\";\r\n\r\nimport { useCurveEditor } from \"../curveEditorContext\";\r\n\r\nconst useStyles = makeStyles({\r\n    root: {\r\n        display: \"flex\",\r\n        flexDirection: \"row\",\r\n        alignItems: \"center\",\r\n        height: \"30px\",\r\n        backgroundColor: tokens.colorNeutralBackground3,\r\n        borderBottom: `1px solid ${tokens.colorNeutralStroke1}`,\r\n        userSelect: \"none\",\r\n        overflow: \"hidden\",\r\n        position: \"relative\",\r\n    },\r\n    tick: {\r\n        position: \"absolute\",\r\n        height: \"8px\",\r\n        width: \"1px\",\r\n        backgroundColor: tokens.colorNeutralStroke1,\r\n        bottom: 0,\r\n    },\r\n    label: {\r\n        position: \"absolute\",\r\n        fontSize: tokens.fontSizeBase100,\r\n        color: tokens.colorNeutralForeground3,\r\n        bottom: \"10px\",\r\n    },\r\n});\r\n\r\ntype FrameBarProps = {\r\n    /** Width of the frame bar */\r\n    width: number;\r\n};\r\n\r\n/**\r\n * Frame bar showing frame numbers along the top of the graph\r\n * @param props - The component props\r\n * @returns The frame bar component\r\n */\r\nexport const FrameBar: FunctionComponent<FrameBarProps> = ({ width }) => {\r\n    const styles = useStyles();\r\n    const { state, observables } = useCurveEditor();\r\n    const containerRef = useRef<HTMLDivElement>(null);\r\n    const [scale, setScale] = useState(1);\r\n    const [offsetX, setOffsetX] = useState(0);\r\n\r\n    const graphOffsetX = 30;\r\n    const viewWidth = width - graphOffsetX;\r\n\r\n    // Subscribe to graph moved/scaled events\r\n    useEffect(() => {\r\n        const onMoved = observables.onGraphMoved.add((newOffset) => {\r\n            setOffsetX(newOffset);\r\n        });\r\n        const onScaled = observables.onGraphScaled.add((newScale) => {\r\n            setScale(newScale);\r\n        });\r\n\r\n        return () => {\r\n            observables.onGraphMoved.remove(onMoved);\r\n            observables.onGraphScaled.remove(onScaled);\r\n        };\r\n    }, [observables]);\r\n\r\n    // Generate tick marks - use reference frames for full visible range\r\n    const renderTicks = useCallback(() => {\r\n        const ticks: JSX.Element[] = [];\r\n        const { referenceMinFrame, referenceMaxFrame } = state;\r\n\r\n        const range = referenceMaxFrame - referenceMinFrame;\r\n        if (range <= 0 || viewWidth <= 0) {\r\n            return ticks;\r\n        }\r\n\r\n        // Determine tick spacing based on zoom level\r\n        let tickSpacing = 10;\r\n        if (range > 500) {\r\n            tickSpacing = 100;\r\n        } else if (range > 200) {\r\n            tickSpacing = 50;\r\n        } else if (range > 100) {\r\n            tickSpacing = 20;\r\n        } else if (range > 50) {\r\n            tickSpacing = 10;\r\n        } else {\r\n            tickSpacing = 5;\r\n        }\r\n\r\n        const startFrame = Math.floor(referenceMinFrame / tickSpacing) * tickSpacing;\r\n        const endFrame = Math.ceil(referenceMaxFrame / tickSpacing) * tickSpacing;\r\n\r\n        for (let frame = startFrame; frame <= endFrame; frame += tickSpacing) {\r\n            const x = graphOffsetX + ((frame - referenceMinFrame) / range) * viewWidth * scale + offsetX;\r\n\r\n            if (x >= graphOffsetX && x <= width) {\r\n                ticks.push(\r\n                    <div key={`tick-${frame}`} className={styles.tick} style={{ left: x }} />,\r\n                    <div key={`label-${frame}`} className={styles.label} style={{ left: x - 10 }}>\r\n                        {frame}\r\n                    </div>\r\n                );\r\n            }\r\n        }\r\n\r\n        return ticks;\r\n    }, [state.referenceMinFrame, state.referenceMaxFrame, viewWidth, width, scale, offsetX, styles]);\r\n\r\n    return (\r\n        <div className={styles.root} ref={containerRef}>\r\n            {renderTicks()}\r\n        </div>\r\n    );\r\n};\r\n","import type { FunctionComponent } from \"react\";\r\n\r\nimport { makeStyles, tokens } from \"@fluentui/react-components\";\r\nimport { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\r\n\r\nimport { useCurveEditor } from \"../curveEditorContext\";\r\nimport { useObservableState } from \"../../../hooks/observableHooks\";\r\n\r\nconst useStyles = makeStyles({\r\n    root: {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        height: \"100%\",\r\n        backgroundColor: tokens.colorNeutralBackground2,\r\n        overflow: \"hidden\",\r\n        userSelect: \"none\",\r\n        pointerEvents: \"none\",\r\n    },\r\n    svg: {\r\n        width: \"100%\",\r\n        height: \"100%\",\r\n    },\r\n    tickLabel: {\r\n        fill: tokens.colorNeutralForeground3,\r\n        fontSize: \"12px\",\r\n        fontFamily: \"acumin-pro-condensed, sans-serif\",\r\n        textAnchor: \"middle\",\r\n    },\r\n    tickLine: {\r\n        stroke: tokens.colorNeutralStroke2,\r\n        strokeWidth: \"0.5px\",\r\n    },\r\n    keyframeLine: {\r\n        stroke: \"#ffc017\",\r\n        strokeWidth: \"0.5px\",\r\n    },\r\n    activeFrameLine: {\r\n        stroke: tokens.colorBrandForeground1,\r\n        strokeWidth: \"1px\",\r\n    },\r\n});\r\n\r\ntype RangeFrameBarProps = {\r\n    width: number;\r\n};\r\n\r\nconst TICK_DISTANCE = 25;\r\nconst OFFSET_X = 10;\r\n\r\n/**\r\n * Range frame bar showing frame tick marks and keyframe indicators\r\n * @returns The range frame bar component\r\n */\r\nexport const RangeFrameBar: FunctionComponent<RangeFrameBarProps> = ({ width }) => {\r\n    const styles = useStyles();\r\n    const { state, observables } = useCurveEditor();\r\n    const svgRef = useRef<SVGSVGElement>(null);\r\n    const [viewWidth, setViewWidth] = useState(width);\r\n    const [displayFrame, setDisplayFrame] = useState(state.activeFrame);\r\n\r\n    // Re-render when range updates\r\n    // useCallback stabilizes the accessor to prevent infinite re-render loops\r\n    useObservableState(\r\n        useCallback(() => ({}), []),\r\n        observables.onRangeUpdated\r\n    );\r\n\r\n    // Update view width on resize\r\n    useEffect(() => {\r\n        const updateWidth = () => {\r\n            if (svgRef.current) {\r\n                setViewWidth(svgRef.current.clientWidth);\r\n            }\r\n        };\r\n\r\n        updateWidth();\r\n\r\n        const onResize = observables.onHostWindowResized.add(updateWidth);\r\n        // Track playhead position during playback using local state to avoid full context re-renders\r\n        const onPlayheadMoved = observables.onPlayheadMoved.add((frame) => setDisplayFrame(frame));\r\n\r\n        return () => {\r\n            observables.onHostWindowResized.remove(onResize);\r\n            observables.onPlayheadMoved.remove(onPlayheadMoved);\r\n        };\r\n    }, [observables]);\r\n\r\n    // Sync display frame with state.activeFrame when not playing\r\n    useEffect(() => {\r\n        if (!state.isPlaying) {\r\n            setDisplayFrame(state.activeFrame);\r\n        }\r\n    }, [state.activeFrame, state.isPlaying]);\r\n\r\n    // Compute frame ticks\r\n    const frameTicks = useMemo(() => {\r\n        if (state.activeAnimations.length === 0) {\r\n            return [];\r\n        }\r\n\r\n        const { fromKey, toKey } = state;\r\n        const range = toKey - fromKey;\r\n        if (range <= 0) {\r\n            return [];\r\n        }\r\n\r\n        const convertRatio = range / viewWidth;\r\n        const offset = Math.max(Math.floor(TICK_DISTANCE * convertRatio), 1);\r\n\r\n        const steps: number[] = [];\r\n        const start = fromKey;\r\n        const end = start + range;\r\n\r\n        for (let step = start; step <= end; step += offset) {\r\n            steps.push(step);\r\n        }\r\n\r\n        // Ensure end is included if not already\r\n        if (steps.length > 0 && steps[steps.length - 1] < end - offset / 2) {\r\n            steps.push(end);\r\n        }\r\n\r\n        return steps;\r\n    }, [state.fromKey, state.toKey, state.activeAnimations.length, viewWidth]);\r\n\r\n    // Frame to X position\r\n    const frameToX = useCallback(\r\n        (frame: number) => {\r\n            const { fromKey, toKey } = state;\r\n            const range = toKey - fromKey;\r\n            if (range <= 0) {\r\n                return 0;\r\n            }\r\n            return ((frame - fromKey) / range) * viewWidth;\r\n        },\r\n        [state.fromKey, state.toKey, viewWidth]\r\n    );\r\n\r\n    // Render keyframe markers for active animations\r\n    const renderKeyframes = useMemo(() => {\r\n        const lines: JSX.Element[] = [];\r\n\r\n        for (const animation of state.activeAnimations) {\r\n            const keys = animation.getKeys();\r\n            for (let i = 0; i < keys.length; i++) {\r\n                const x = frameToX(keys[i].frame);\r\n                lines.push(<line key={`keyframe-${animation.uniqueId}-${i}`} className={styles.keyframeLine} x1={x} y1={0} x2={x} y2={40} />);\r\n            }\r\n        }\r\n\r\n        return lines;\r\n    }, [state.activeAnimations, frameToX, styles.keyframeLine]);\r\n\r\n    // Render active frame marker - uses displayFrame for smooth updates during playback\r\n    const renderActiveFrame = useMemo(() => {\r\n        if (displayFrame === null || displayFrame === undefined) {\r\n            return null;\r\n        }\r\n\r\n        const x = frameToX(displayFrame);\r\n        return <line className={styles.activeFrameLine} x1={x} y1={0} x2={x} y2={40} />;\r\n    }, [displayFrame, frameToX, styles.activeFrameLine]);\r\n\r\n    const viewBox = `${-OFFSET_X} 0 ${viewWidth + OFFSET_X * 4} 40`;\r\n\r\n    return (\r\n        <div className={styles.root}>\r\n            <svg ref={svgRef} className={styles.svg} viewBox={viewBox}>\r\n                {/* Frame tick marks with labels */}\r\n                {frameTicks.map((frame, i) => {\r\n                    const x = frameToX(frame);\r\n                    return (\r\n                        <g key={`tick-${frame}-${i}`}>\r\n                            <line className={styles.tickLine} x1={x} y1={22} x2={x} y2={40} />\r\n                            <text className={styles.tickLabel} x={x} y={14}>\r\n                                {Math.round(frame)}\r\n                            </text>\r\n                        </g>\r\n                    );\r\n                })}\r\n\r\n                {renderKeyframes}\r\n\r\n                {renderActiveFrame}\r\n            </svg>\r\n        </div>\r\n    );\r\n};\r\n","import type { FunctionComponent } from \"react\";\r\n\r\nimport { makeStyles, tokens } from \"@fluentui/react-components\";\r\nimport { useEffect, useRef, useState } from \"react\";\r\n\r\nimport { useCurveEditor } from \"../curveEditorContext\";\r\nimport { Graph } from \"./graph\";\r\nimport { PlayHead } from \"./playHead\";\r\nimport { FrameBar } from \"./frameBar\";\r\nimport { RangeFrameBar } from \"./rangeFrameBar\";\r\n\r\nconst useStyles = makeStyles({\r\n    root: {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        flex: 1,\r\n        minHeight: 0,\r\n        position: \"relative\",\r\n        backgroundColor: tokens.colorNeutralBackground3,\r\n        overflow: \"hidden\",\r\n    },\r\n    frameBar: {\r\n        flexShrink: 0,\r\n        height: \"30px\",\r\n        backgroundColor: tokens.colorNeutralBackground2,\r\n    },\r\n    canvasArea: {\r\n        flex: 1,\r\n        minHeight: 0,\r\n        position: \"relative\",\r\n        overflow: \"hidden\",\r\n    },\r\n    rangeFrameBar: {\r\n        flexShrink: 0,\r\n        height: \"40px\",\r\n        backgroundColor: tokens.colorNeutralBackground2,\r\n    },\r\n});\r\n\r\n/**\r\n * Main canvas area containing the graph, playhead, and frame bars\r\n * @returns The canvas component\r\n */\r\nexport const Canvas: FunctionComponent = () => {\r\n    const styles = useStyles();\r\n    const { observables } = useCurveEditor();\r\n    const containerRef = useRef<HTMLDivElement>(null);\r\n    const [dimensions, setDimensions] = useState({ width: 0, height: 0 });\r\n\r\n    // Note: Child components (Graph, PlayHead, etc.) handle their own observable subscriptions\r\n    // No need for canvas to re-render on animation changes\r\n\r\n    // Update dimensions on resize\r\n    useEffect(() => {\r\n        const updateDimensions = () => {\r\n            if (containerRef.current) {\r\n                setDimensions({\r\n                    width: containerRef.current.clientWidth,\r\n                    height: containerRef.current.clientHeight,\r\n                });\r\n            }\r\n        };\r\n\r\n        updateDimensions();\r\n\r\n        const observer = new ResizeObserver(updateDimensions);\r\n        if (containerRef.current) {\r\n            observer.observe(containerRef.current);\r\n        }\r\n\r\n        const onResize = observables.onHostWindowResized.add(updateDimensions);\r\n\r\n        return () => {\r\n            observer.disconnect();\r\n            observables.onHostWindowResized.remove(onResize);\r\n        };\r\n    }, [observables]);\r\n\r\n    return (\r\n        <div className={styles.root} ref={containerRef}>\r\n            <div className={styles.frameBar}>\r\n                <FrameBar width={dimensions.width} />\r\n            </div>\r\n            <div className={styles.canvasArea}>\r\n                <Graph width={dimensions.width} height={dimensions.height - 70} />\r\n                <PlayHead width={dimensions.width} height={dimensions.height - 70} />\r\n            </div>\r\n            <div className={styles.rangeFrameBar}>\r\n                <RangeFrameBar width={dimensions.width} />\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","import type { FunctionComponent } from \"react\";\r\n\r\nimport { makeStyles, tokens } from \"@fluentui/react-components\";\r\nimport { useCallback, useEffect, useRef, useState } from \"react\";\r\n\r\nimport { useCurveEditor } from \"./curveEditorContext\";\r\n\r\nconst useStyles = makeStyles({\r\n    root: {\r\n        flex: 1,\r\n        height: \"25px\",\r\n        backgroundColor: tokens.colorNeutralBackground1,\r\n        position: \"relative\",\r\n        margin: \"5px 0\",\r\n        minWidth: \"100px\",\r\n        touchAction: \"none\",\r\n    },\r\n    scrollbar: {\r\n        position: \"absolute\",\r\n        top: \"2px\",\r\n        bottom: \"2px\",\r\n        backgroundColor: tokens.colorNeutralBackground3,\r\n        display: \"flex\",\r\n        flexDirection: \"row\",\r\n        alignItems: \"center\",\r\n        minWidth: \"70px\",\r\n        cursor: \"grab\",\r\n        touchAction: \"none\",\r\n        \"&:active\": {\r\n            cursor: \"grabbing\",\r\n        },\r\n    },\r\n    handle: {\r\n        width: \"20px\",\r\n        height: \"100%\",\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\",\r\n        cursor: \"ew-resize\",\r\n        flexShrink: 0,\r\n        touchAction: \"none\",\r\n    },\r\n    handleIcon: {\r\n        width: \"10px\",\r\n        height: \"12px\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        justifyContent: \"space-between\",\r\n        \"& div\": {\r\n            height: \"2px\",\r\n            width: \"100%\",\r\n            backgroundColor: tokens.colorNeutralForeground3,\r\n        },\r\n    },\r\n    label: {\r\n        flex: 1,\r\n        textAlign: \"center\",\r\n        fontSize: \"12px\",\r\n        fontFamily: \"acumin-pro-condensed, sans-serif\",\r\n        color: tokens.colorNeutralForeground3,\r\n        userSelect: \"none\",\r\n        pointerEvents: \"none\",\r\n    },\r\n});\r\n\r\n/**\r\n * Range selector component - a draggable scrollbar for selecting frame range\r\n * @returns The range selector component\r\n */\r\nexport const RangeSelector: FunctionComponent = () => {\r\n    const styles = useStyles();\r\n    const { state, actions, observables } = useCurveEditor();\r\n\r\n    const containerRef = useRef<HTMLDivElement>(null);\r\n    const scrollbarRef = useRef<HTMLDivElement>(null);\r\n    const [viewWidth, setViewWidth] = useState(200);\r\n\r\n    // Use refs to avoid stale closures in pointer handlers\r\n    const dragStateRef = useRef<{\r\n        isPointerDown: boolean;\r\n        dragMode: \"left\" | \"right\" | \"both\" | null;\r\n        startX: number;\r\n        startFrom: number;\r\n        startTo: number;\r\n    }>({\r\n        isPointerDown: false,\r\n        dragMode: null,\r\n        startX: 0,\r\n        startFrom: 0,\r\n        startTo: 0,\r\n    });\r\n\r\n    // Store current state values in refs for event handlers\r\n    const stateRef = useRef({ fromKey: state.fromKey, toKey: state.toKey });\r\n    stateRef.current = { fromKey: state.fromKey, toKey: state.toKey };\r\n\r\n    // Get frame limits from animations\r\n    const minFrame = state.referenceMinFrame;\r\n    const maxFrame = state.clipLength;\r\n\r\n    const minFrameRef = useRef(minFrame);\r\n    const maxFrameRef = useRef(maxFrame);\r\n    const viewWidthRef = useRef(viewWidth);\r\n    minFrameRef.current = minFrame;\r\n    maxFrameRef.current = maxFrame;\r\n    viewWidthRef.current = viewWidth;\r\n\r\n    // Update view width on resize\r\n    useEffect(() => {\r\n        const updateWidth = () => {\r\n            if (containerRef.current) {\r\n                setViewWidth(containerRef.current.clientWidth - 4);\r\n            }\r\n        };\r\n\r\n        updateWidth();\r\n\r\n        const resizeObserver = new ResizeObserver(updateWidth);\r\n        if (containerRef.current) {\r\n            resizeObserver.observe(containerRef.current);\r\n        }\r\n\r\n        const hostResizeObserver = observables.onHostWindowResized.add(updateWidth);\r\n\r\n        return () => {\r\n            resizeObserver.disconnect();\r\n            observables.onHostWindowResized.remove(hostResizeObserver);\r\n        };\r\n    }, [observables]);\r\n\r\n    // Calculate scrollbar position\r\n    const range = maxFrame - minFrame;\r\n    const leftPos = range > 0 ? 2 + ((state.fromKey - minFrame) / range) * viewWidth : 2;\r\n    const rightPos = range > 0 ? 2 + ((maxFrame - state.toKey) / range) * viewWidth : 2;\r\n\r\n    const handlePointerDown = useCallback((evt: React.PointerEvent<HTMLDivElement>) => {\r\n        // Check if we clicked on a handle\r\n        const target = evt.target as HTMLElement;\r\n        let mode: \"left\" | \"right\" | \"both\" = \"both\";\r\n\r\n        // Check target and its parent (for the nested handleIcon div)\r\n        if (target.id === \"left-handle\" || target.parentElement?.id === \"left-handle\") {\r\n            mode = \"left\";\r\n        } else if (target.id === \"right-handle\" || target.parentElement?.id === \"right-handle\") {\r\n            mode = \"right\";\r\n        }\r\n\r\n        dragStateRef.current = {\r\n            isPointerDown: true,\r\n            dragMode: mode,\r\n            startX: evt.clientX,\r\n            startFrom: stateRef.current.fromKey,\r\n            startTo: stateRef.current.toKey,\r\n        };\r\n\r\n        evt.currentTarget.setPointerCapture(evt.pointerId);\r\n        evt.preventDefault();\r\n    }, []);\r\n\r\n    const handlePointerMove = useCallback(\r\n        (evt: React.PointerEvent<HTMLDivElement>) => {\r\n            const drag = dragStateRef.current;\r\n            if (!drag.isPointerDown || !drag.dragMode) {\r\n                return;\r\n            }\r\n\r\n            evt.preventDefault();\r\n\r\n            const currentMinFrame = minFrameRef.current;\r\n            const currentMaxFrame = maxFrameRef.current;\r\n            const currentRange = currentMaxFrame - currentMinFrame;\r\n            const currentViewWidth = viewWidthRef.current;\r\n\r\n            const dx = evt.clientX - drag.startX;\r\n            const frameOffset = currentRange > 0 ? (dx / currentViewWidth) * currentRange : 0;\r\n\r\n            if (drag.dragMode === \"both\") {\r\n                let newFrom = Math.round(drag.startFrom + frameOffset);\r\n                let newTo = Math.round(drag.startTo + frameOffset);\r\n\r\n                // Keep within bounds\r\n                if (newTo > currentMaxFrame) {\r\n                    const adjust = newTo - currentMaxFrame;\r\n                    newTo = currentMaxFrame;\r\n                    newFrom -= adjust;\r\n                }\r\n                if (newFrom < currentMinFrame) {\r\n                    const adjust = currentMinFrame - newFrom;\r\n                    newFrom = currentMinFrame;\r\n                    newTo += adjust;\r\n                }\r\n\r\n                // Clamp\r\n                newFrom = Math.max(currentMinFrame, Math.min(currentMaxFrame, newFrom));\r\n                newTo = Math.max(currentMinFrame, Math.min(currentMaxFrame, newTo));\r\n\r\n                actions.setFromKey(newFrom);\r\n                actions.setToKey(newTo);\r\n            } else if (drag.dragMode === \"left\") {\r\n                let newFrom = Math.round(drag.startFrom + frameOffset);\r\n                newFrom = Math.max(currentMinFrame, Math.min(stateRef.current.toKey - 1, newFrom));\r\n                actions.setFromKey(newFrom);\r\n            } else if (drag.dragMode === \"right\") {\r\n                let newTo = Math.round(drag.startTo + frameOffset);\r\n                newTo = Math.max(stateRef.current.fromKey + 1, Math.min(currentMaxFrame, newTo));\r\n                actions.setToKey(newTo);\r\n            }\r\n\r\n            observables.onRangeUpdated.notifyObservers();\r\n            actions.stop();\r\n        },\r\n        [actions, observables]\r\n    );\r\n\r\n    const handlePointerUp = useCallback((evt: React.PointerEvent<HTMLDivElement>) => {\r\n        dragStateRef.current.isPointerDown = false;\r\n        dragStateRef.current.dragMode = null;\r\n        evt.currentTarget.releasePointerCapture(evt.pointerId);\r\n    }, []);\r\n\r\n    const handlePointerCancel = useCallback((evt: React.PointerEvent<HTMLDivElement>) => {\r\n        dragStateRef.current.isPointerDown = false;\r\n        dragStateRef.current.dragMode = null;\r\n        evt.currentTarget.releasePointerCapture(evt.pointerId);\r\n    }, []);\r\n\r\n    return (\r\n        <div ref={containerRef} className={styles.root}>\r\n            <div\r\n                ref={scrollbarRef}\r\n                className={styles.scrollbar}\r\n                style={{\r\n                    left: `${leftPos}px`,\r\n                    right: `${rightPos}px`,\r\n                }}\r\n                onPointerDown={handlePointerDown}\r\n                onPointerMove={handlePointerMove}\r\n                onPointerUp={handlePointerUp}\r\n                onPointerCancel={handlePointerCancel}\r\n            >\r\n                <div id=\"left-handle\" className={styles.handle}>\r\n                    <div className={styles.handleIcon}>\r\n                        <div />\r\n                        <div />\r\n                        <div />\r\n                    </div>\r\n                </div>\r\n                <div className={styles.label}>{Math.floor(state.fromKey)}</div>\r\n                <div className={styles.label}>{Math.floor(state.toKey)}</div>\r\n                <div id=\"right-handle\" className={styles.handle}>\r\n                    <div className={styles.handleIcon}>\r\n                        <div />\r\n                        <div />\r\n                        <div />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","import type { FunctionComponent } from \"react\";\r\n\r\nimport { makeStyles, tokens } from \"@fluentui/react-components\";\r\nimport { memo, useCallback, useEffect, useRef, useState } from \"react\";\r\nimport { PlayRegular, PreviousRegular, NextRegular, ArrowPreviousRegular, ArrowNextRegular, RecordStopRegular, TriangleLeftRegular } from \"@fluentui/react-icons\";\r\n\r\nimport { Button } from \"shared-ui-components/fluent/primitives/button\";\r\nimport { SpinButton } from \"shared-ui-components/fluent/primitives/spinButton\";\r\nimport { useCurveEditor } from \"./curveEditorContext\";\r\nimport { RangeSelector } from \"./rangeSelector\";\r\n\r\nconst useStyles = makeStyles({\r\n    root: {\r\n        display: \"flex\",\r\n        flexDirection: \"row\",\r\n        alignItems: \"center\",\r\n        gap: tokens.spacingHorizontalM,\r\n        padding: `0 ${tokens.spacingHorizontalM}`,\r\n        backgroundColor: tokens.colorNeutralBackground3,\r\n        height: \"100%\",\r\n        boxSizing: \"border-box\",\r\n    },\r\n    mediaControls: {\r\n        display: \"flex\",\r\n        flexDirection: \"row\",\r\n        alignItems: \"center\",\r\n        gap: tokens.spacingHorizontalXXS,\r\n    },\r\n    frameDisplay: {\r\n        display: \"flex\",\r\n        flexDirection: \"row\",\r\n        alignItems: \"center\",\r\n        gap: tokens.spacingHorizontalXS,\r\n    },\r\n    frameLabel: {\r\n        fontSize: tokens.fontSizeBase200,\r\n        color: tokens.colorNeutralForeground3,\r\n    },\r\n    spinButton: {\r\n        width: \"70px\",\r\n    },\r\n    rangeSection: {\r\n        display: \"flex\",\r\n        flexDirection: \"row\",\r\n        alignItems: \"center\",\r\n        gap: tokens.spacingHorizontalS,\r\n        flex: 1,\r\n    },\r\n    clipLengthSection: {\r\n        display: \"flex\",\r\n        flexDirection: \"row\",\r\n        alignItems: \"center\",\r\n        gap: tokens.spacingHorizontalXS,\r\n        marginLeft: \"auto\",\r\n    },\r\n});\r\n\r\n/**\r\n * Props for the MediaControls component\r\n */\r\ntype MediaControlsProps = {\r\n    hasActiveAnimations: boolean;\r\n    isPlaying: boolean;\r\n    forwardAnimation: boolean;\r\n    onPlayForward: () => void;\r\n    onPlayBackward: () => void;\r\n    onStop: () => void;\r\n    onPrevKey: () => void;\r\n    onNextKey: () => void;\r\n    onFirstFrame: () => void;\r\n    onLastFrame: () => void;\r\n};\r\n\r\n/**\r\n * Memoized media controls component to prevent re-renders during playback\r\n */\r\nconst MediaControls = memo<MediaControlsProps>(\r\n    ({ hasActiveAnimations, isPlaying, forwardAnimation, onPlayForward, onPlayBackward, onStop, onPrevKey, onNextKey, onFirstFrame, onLastFrame }) => {\r\n        return (\r\n            <>\r\n                <Button icon={PreviousRegular} appearance=\"subtle\" disabled={!hasActiveAnimations} onClick={onFirstFrame} title=\"First frame\" />\r\n                <Button icon={ArrowPreviousRegular} appearance=\"subtle\" disabled={!hasActiveAnimations} onClick={onPrevKey} title=\"Previous key\" />\r\n                <Button\r\n                    icon={TriangleLeftRegular}\r\n                    appearance={isPlaying && !forwardAnimation ? \"primary\" : \"subtle\"}\r\n                    disabled={!hasActiveAnimations}\r\n                    onClick={onPlayBackward}\r\n                    title=\"Play backward\"\r\n                />\r\n                <Button icon={RecordStopRegular} appearance=\"subtle\" disabled={!hasActiveAnimations || !isPlaying} onClick={onStop} title=\"Stop\" />\r\n                <Button\r\n                    icon={PlayRegular}\r\n                    appearance={isPlaying && forwardAnimation ? \"primary\" : \"subtle\"}\r\n                    disabled={!hasActiveAnimations}\r\n                    onClick={onPlayForward}\r\n                    title=\"Play forward\"\r\n                />\r\n                <Button icon={ArrowNextRegular} appearance=\"subtle\" disabled={!hasActiveAnimations} onClick={onNextKey} title=\"Next key\" />\r\n                <Button icon={NextRegular} appearance=\"subtle\" disabled={!hasActiveAnimations} onClick={onLastFrame} title=\"Last frame\" />\r\n            </>\r\n        );\r\n    }\r\n);\r\n\r\nMediaControls.displayName = \"MediaControls\";\r\n\r\n/**\r\n * Bottom bar component with playback controls and frame navigation.\r\n * @returns The BottomBar component.\r\n */\r\nexport const BottomBar: FunctionComponent = () => {\r\n    const styles = useStyles();\r\n    const { state, actions, observables } = useCurveEditor();\r\n\r\n    // Track display frame separately for smooth updates during playback\r\n    const [displayFrame, setDisplayFrame] = useState(state.activeFrame);\r\n\r\n    // Use clipLength from state, with referenceMaxFrame as fallback\r\n    const effectiveClipLength = state.clipLength > 0 ? state.clipLength : state.referenceMaxFrame;\r\n    const [clipLength, setClipLength] = useState(effectiveClipLength);\r\n\r\n    // Keep a ref to current toKey for use in observers\r\n    const toKeyRef = useRef(state.toKey);\r\n    toKeyRef.current = state.toKey;\r\n\r\n    // Subscribe to playhead moved for display updates during playback\r\n    useEffect(() => {\r\n        const onPlayheadMoved = observables.onPlayheadMoved.add((frame) => {\r\n            setDisplayFrame(frame);\r\n        });\r\n\r\n        return () => {\r\n            observables.onPlayheadMoved.remove(onPlayheadMoved);\r\n        };\r\n    }, [observables]);\r\n\r\n    // Sync display frame with state.activeFrame when not playing\r\n    useEffect(() => {\r\n        if (!state.isPlaying) {\r\n            setDisplayFrame(state.activeFrame);\r\n        }\r\n    }, [state.activeFrame, state.isPlaying]);\r\n\r\n    // Sync clip length with state\r\n    useEffect(() => {\r\n        const newClipLength = state.clipLength > 0 ? state.clipLength : state.referenceMaxFrame;\r\n        setClipLength(newClipLength);\r\n    }, [state.clipLength, state.referenceMaxFrame]);\r\n\r\n    // Subscribe to clip length change observables\r\n    useEffect(() => {\r\n        const onClipLengthIncreased = observables.onClipLengthIncreased.add((newLength) => {\r\n            setClipLength(newLength);\r\n            actions.setClipLength(newLength);\r\n            actions.setReferenceMaxFrame(newLength);\r\n        });\r\n        const onClipLengthDecreased = observables.onClipLengthDecreased.add((newLength) => {\r\n            setClipLength(newLength);\r\n            actions.setClipLength(newLength);\r\n            actions.setReferenceMaxFrame(newLength);\r\n            // Clamp toKey to new clip length\r\n            if (toKeyRef.current > newLength) {\r\n                actions.setToKey(newLength);\r\n            }\r\n        });\r\n\r\n        return () => {\r\n            observables.onClipLengthIncreased.remove(onClipLengthIncreased);\r\n            observables.onClipLengthDecreased.remove(onClipLengthDecreased);\r\n        };\r\n    }, [observables, actions]);\r\n\r\n    const handlePlayForward = useCallback(() => {\r\n        actions.play(true);\r\n    }, [actions]);\r\n\r\n    const handlePlayBackward = useCallback(() => {\r\n        actions.play(false);\r\n    }, [actions]);\r\n\r\n    const handleStop = useCallback(() => {\r\n        actions.stop();\r\n    }, [actions]);\r\n\r\n    const handlePrevKey = useCallback(() => {\r\n        const prevFrame = actions.getPrevKey();\r\n        if (prevFrame !== null) {\r\n            actions.moveToFrame(prevFrame);\r\n        }\r\n    }, [actions]);\r\n\r\n    const handleNextKey = useCallback(() => {\r\n        const nextFrame = actions.getNextKey();\r\n        if (nextFrame !== null) {\r\n            actions.moveToFrame(nextFrame);\r\n        }\r\n    }, [actions]);\r\n\r\n    const handleFirstFrame = useCallback(() => {\r\n        actions.moveToFrame(state.fromKey);\r\n    }, [actions, state.fromKey]);\r\n\r\n    const handleLastFrame = useCallback(() => {\r\n        actions.moveToFrame(state.toKey);\r\n    }, [actions, state.toKey]);\r\n\r\n    /**\r\n     * Handler for frame input change.\r\n     * @param value - The new frame value.\r\n     */\r\n    const handleFrameChange = useCallback(\r\n        (value: number) => {\r\n            actions.moveToFrame(value);\r\n        },\r\n        [actions]\r\n    );\r\n\r\n    /**\r\n     * Handler for clip length change.\r\n     * @param value - The new clip length value.\r\n     */\r\n    const handleClipLengthChange = useCallback(\r\n        (value: number) => {\r\n            const newLength = Math.max(1, value);\r\n            if (newLength > state.clipLength) {\r\n                observables.onClipLengthIncreased.notifyObservers(newLength);\r\n            } else if (newLength < state.clipLength) {\r\n                observables.onClipLengthDecreased.notifyObservers(newLength);\r\n            }\r\n        },\r\n        [state.clipLength, observables]\r\n    );\r\n\r\n    const hasActiveAnimations = state.activeAnimations.length > 0;\r\n\r\n    return (\r\n        <div className={styles.root}>\r\n            <div className={styles.mediaControls}>\r\n                <MediaControls\r\n                    hasActiveAnimations={hasActiveAnimations}\r\n                    isPlaying={state.isPlaying}\r\n                    forwardAnimation={state.forwardAnimation}\r\n                    onPlayForward={handlePlayForward}\r\n                    onPlayBackward={handlePlayBackward}\r\n                    onStop={handleStop}\r\n                    onPrevKey={handlePrevKey}\r\n                    onNextKey={handleNextKey}\r\n                    onFirstFrame={handleFirstFrame}\r\n                    onLastFrame={handleLastFrame}\r\n                />\r\n            </div>\r\n\r\n            {/* Current frame display - uses displayFrame for smooth updates during playback */}\r\n            <div className={styles.frameDisplay}>\r\n                <div className={styles.frameLabel}>Frame:</div>\r\n                <SpinButton className={styles.spinButton} value={displayFrame} onChange={handleFrameChange} min={state.fromKey} max={state.toKey} disabled={!hasActiveAnimations} />\r\n            </div>\r\n\r\n            <RangeSelector />\r\n\r\n            <div className={styles.clipLengthSection}>\r\n                <div className={styles.frameLabel}>Clip Length:</div>\r\n                <SpinButton className={styles.spinButton} value={clipLength} onChange={handleClipLengthChange} min={1} disabled={!hasActiveAnimations} />\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","import type { FunctionComponent } from \"react\";\r\nimport type { Nullable } from \"core/types\";\r\nimport type { Animation } from \"core/Animations/animation\";\r\nimport type { TargetedAnimation, AnimationGroup } from \"core/Animations/animationGroup\";\r\nimport type { Scene } from \"core/scene\";\r\nimport type { IAnimatable } from \"core/Animations/animatable.interface\";\r\n\r\nimport { makeStyles, tokens } from \"@fluentui/react-components\";\r\nimport { useCallback, useEffect, useRef } from \"react\";\r\n\r\nimport { CurveEditorProvider, useCurveEditor } from \"./curveEditorContext\";\r\nimport { TopBar } from \"./topBar\";\r\nimport { SideBar } from \"./sideBar\";\r\nimport { Canvas } from \"./canvas/canvas\";\r\nimport { BottomBar } from \"./bottomBar\";\r\n\r\nconst useStyles = makeStyles({\r\n    root: {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        width: \"100%\",\r\n        height: \"100%\",\r\n        minHeight: 0,\r\n        flex: 1,\r\n        backgroundColor: tokens.colorNeutralBackground3,\r\n        color: tokens.colorNeutralForeground1,\r\n        overflow: \"hidden\",\r\n        fontFamily: \"'acumin-pro-condensed', 'Segoe UI', sans-serif\",\r\n        outline: \"none\", // Remove focus outline for keyboard shortcuts\r\n    },\r\n    topBar: {\r\n        flexShrink: 0,\r\n        height: \"40px\",\r\n    },\r\n    mainContent: {\r\n        display: \"flex\",\r\n        flexDirection: \"row\",\r\n        flex: 1,\r\n        minHeight: 0,\r\n        overflow: \"hidden\",\r\n    },\r\n    sideBar: {\r\n        width: \"220px\",\r\n        flexShrink: 0,\r\n        marginLeft: \"10px\",\r\n    },\r\n    canvasArea: {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        flex: 1,\r\n        minHeight: 0,\r\n        marginLeft: \"10px\",\r\n        marginRight: \"10px\",\r\n        overflow: \"hidden\",\r\n    },\r\n    bottomBar: {\r\n        flexShrink: 0,\r\n        height: \"45px\",\r\n    },\r\n});\r\n\r\n/**\r\n * Internal component that uses the curve editor context\r\n * @returns The curve editor content\r\n */\r\nconst CurveEditorContent: FunctionComponent = () => {\r\n    const styles = useStyles();\r\n    const { state, actions, observables } = useCurveEditor();\r\n    const rootRef = useRef<HTMLDivElement>(null);\r\n    const prepareRef = useRef(() => actions.prepare());\r\n    prepareRef.current = () => actions.prepare();\r\n\r\n    useEffect(() => {\r\n        // Only run prepare once on mount\r\n        prepareRef.current();\r\n    }, []);\r\n\r\n    // Keyboard handler for hotkeys\r\n    const handleKeyDown = useCallback(\r\n        (evt: React.KeyboardEvent<HTMLDivElement>) => {\r\n            switch (evt.key) {\r\n                case \"Delete\":\r\n                case \"Backspace\":\r\n                    if (state.activeKeyPoints?.length && !state.focusedInput) {\r\n                        observables.onDeleteKeyActiveKeyPoints.notifyObservers();\r\n                    }\r\n                    break;\r\n                case \" \":\r\n                    evt.preventDefault();\r\n                    if (state.isPlaying) {\r\n                        actions.stop();\r\n                    } else {\r\n                        actions.play(true);\r\n                    }\r\n                    break;\r\n                case \"a\":\r\n                    if (evt.ctrlKey) {\r\n                        observables.onSelectAllKeys.notifyObservers();\r\n                        observables.onActiveKeyPointChanged.notifyObservers();\r\n                        evt.preventDefault();\r\n                    }\r\n                    break;\r\n                case \"ArrowLeft\":\r\n                    if (!state.focusedInput) {\r\n                        const newFrame = Math.max(0, state.activeFrame - 1);\r\n                        actions.moveToFrame(newFrame);\r\n                        evt.preventDefault();\r\n                    }\r\n                    break;\r\n                case \"ArrowRight\":\r\n                    if (!state.focusedInput) {\r\n                        const newFrame = Math.min(state.clipLength, state.activeFrame + 1);\r\n                        actions.moveToFrame(newFrame);\r\n                        evt.preventDefault();\r\n                    }\r\n                    break;\r\n                case \"ArrowDown\": {\r\n                    if (!state.focusedInput) {\r\n                        const prevKey = actions.getPrevKey();\r\n                        if (prevKey !== null) {\r\n                            actions.moveToFrame(prevKey);\r\n                        }\r\n                        evt.preventDefault();\r\n                    }\r\n                    break;\r\n                }\r\n                case \"ArrowUp\": {\r\n                    if (!state.focusedInput) {\r\n                        const nextKey = actions.getNextKey();\r\n                        if (nextKey !== null) {\r\n                            actions.moveToFrame(nextKey);\r\n                        }\r\n                        evt.preventDefault();\r\n                    }\r\n                    break;\r\n                }\r\n            }\r\n        },\r\n        [state.activeKeyPoints, state.focusedInput, state.isPlaying, state.activeFrame, state.clipLength, observables, actions]\r\n    );\r\n\r\n    // Handle window resize\r\n    useEffect(() => {\r\n        const handleResize = () => {\r\n            // Notify observers about resize\r\n        };\r\n        window.addEventListener(\"resize\", handleResize);\r\n        return () => window.removeEventListener(\"resize\", handleResize);\r\n    }, []);\r\n\r\n    // Focus the root element on mount to enable keyboard shortcuts\r\n    useEffect(() => {\r\n        rootRef.current?.focus();\r\n    }, []);\r\n\r\n    return (\r\n        <div ref={rootRef} className={styles.root} tabIndex={0} onKeyDown={handleKeyDown}>\r\n            <div className={styles.topBar}>\r\n                <TopBar />\r\n            </div>\r\n            <div className={styles.mainContent}>\r\n                <div className={styles.sideBar}>\r\n                    <SideBar />\r\n                </div>\r\n                <div className={styles.canvasArea}>\r\n                    <Canvas />\r\n                </div>\r\n            </div>\r\n            <div className={styles.bottomBar}>\r\n                <BottomBar />\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n/**\r\n * Props for the CurveEditor component\r\n */\r\nexport type CurveEditorProps = {\r\n    /** The scene */\r\n    scene: Scene;\r\n    /** Target animatable */\r\n    target: Nullable<IAnimatable>;\r\n    /** Animations to edit */\r\n    animations: Nullable<Animation[] | TargetedAnimation[]>;\r\n    /** Root animation group if any */\r\n    rootAnimationGroup?: Nullable<AnimationGroup>;\r\n    /** Editor title */\r\n    title?: string;\r\n    /** Whether using targeted animations */\r\n    useTargetAnimations?: boolean;\r\n};\r\n\r\n/**\r\n * Animation Curve Editor component for editing animation keyframes and curves\r\n * @param props - The component props\r\n * @returns The curve editor component\r\n */\r\nexport const CurveEditor: FunctionComponent<CurveEditorProps> = (props) => {\r\n    const { scene, target, animations, rootAnimationGroup, title, useTargetAnimations } = props;\r\n\r\n    return (\r\n        <CurveEditorProvider scene={scene} target={target} animations={animations} rootAnimationGroup={rootAnimationGroup} title={title} useTargetAnimations={useTargetAnimations}>\r\n            <CurveEditorContent />\r\n        </CurveEditorProvider>\r\n    );\r\n};\r\n","import type { FunctionComponent } from \"react\";\r\nimport type { Nullable } from \"core/types\";\r\nimport type { Animation } from \"core/Animations/animation\";\r\nimport type { TargetedAnimation, AnimationGroup } from \"core/Animations/animationGroup\";\r\nimport type { Scene } from \"core/scene\";\r\nimport type { IAnimatable } from \"core/Animations/animatable.interface\";\r\n\r\nimport { useRef } from \"react\";\r\nimport { EditRegular } from \"@fluentui/react-icons\";\r\n\r\nimport { ButtonLine } from \"shared-ui-components/fluent/hoc/buttonLine\";\r\nimport { ChildWindow } from \"shared-ui-components/fluent/hoc/childWindow\";\r\nimport { CurveEditor } from \"./curveEditor\";\r\n\r\n/**\r\n * Props for the CurveEditorButton component\r\n */\r\nexport type CurveEditorButtonProps = {\r\n    /** The scene */\r\n    scene: Scene;\r\n    /** Target animatable */\r\n    target: Nullable<IAnimatable>;\r\n    /** Animations to edit */\r\n    animations: Nullable<Animation[] | TargetedAnimation[]>;\r\n    /** Root animation group if any */\r\n    rootAnimationGroup?: Nullable<AnimationGroup>;\r\n    /** Editor title */\r\n    title?: string;\r\n    /** Whether using targeted animations */\r\n    useTargetAnimations?: boolean;\r\n    /** Button label */\r\n    label?: string;\r\n};\r\n\r\n/**\r\n * Button component that opens the Animation Curve Editor in a popup window\r\n * @param props - The component props\r\n * @returns The button component\r\n */\r\nexport const CurveEditorButton: FunctionComponent<CurveEditorButtonProps> = (props) => {\r\n    const { scene, target, animations, rootAnimationGroup, title, useTargetAnimations, label = \"Open Animation Curve Editor\" } = props;\r\n\r\n    const childWindow = useRef<ChildWindow>(null);\r\n\r\n    return (\r\n        <>\r\n            <ButtonLine\r\n                label={label}\r\n                onClick={() =>\r\n                    childWindow.current?.open({\r\n                        defaultWidth: 1024,\r\n                        defaultHeight: 512,\r\n                        title: title ?? \"Animation Curve Editor\",\r\n                    })\r\n                }\r\n                icon={EditRegular}\r\n            />\r\n            <ChildWindow id=\"Animation Curve Editor\" imperativeRef={childWindow}>\r\n                <CurveEditor\r\n                    scene={scene}\r\n                    target={target}\r\n                    animations={animations}\r\n                    rootAnimationGroup={rootAnimationGroup}\r\n                    title={title}\r\n                    useTargetAnimations={useTargetAnimations}\r\n                />\r\n            </ChildWindow>\r\n        </>\r\n    );\r\n};\r\n","import type { FunctionComponent } from \"react\";\r\n\r\nimport { useCallback } from \"react\";\r\n\r\nimport type { AnimationGroup } from \"core/Animations/animationGroup\";\r\nimport { ButtonLine } from \"shared-ui-components/fluent/hoc/buttonLine\";\r\nimport { NumberInputPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/inputPropertyLine\";\r\nimport { StringifiedPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/stringifiedPropertyLine\";\r\nimport { SwitchPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/switchPropertyLine\";\r\nimport { SyncedSliderPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/syncedSliderPropertyLine\";\r\nimport { Collapse } from \"shared-ui-components/fluent/primitives/collapse\";\r\nimport { useProperty } from \"../../../hooks/compoundPropertyHooks\";\r\nimport { useObservableState } from \"../../../hooks/observableHooks\";\r\nimport { BoundProperty } from \"../boundProperty\";\r\nimport { CurveEditorButton } from \"../../curveEditor/curveEditorButton\";\r\n\r\ninterface ICurrentFrameHolder {\r\n    currentFrame: number;\r\n}\r\n\r\nexport const AnimationGroupControlProperties: FunctionComponent<{ animationGroup: AnimationGroup }> = (props) => {\r\n    const { animationGroup } = props;\r\n    const targetedAnimations = animationGroup.targetedAnimations;\r\n    const scene = animationGroup.getScene();\r\n    let currentFrameHolder: ICurrentFrameHolder | undefined = undefined;\r\n\r\n    if (targetedAnimations.length > 0) {\r\n        currentFrameHolder = targetedAnimations[0].animation.runtimeAnimations.find((rA) => rA.target === targetedAnimations[0].target);\r\n    }\r\n\r\n    const isPlaying = useObservableState(\r\n        useCallback(() => {\r\n            return animationGroup.isPlaying;\r\n        }, [animationGroup]),\r\n        animationGroup.onAnimationGroupPlayObservable,\r\n        animationGroup.onAnimationGroupPauseObservable,\r\n        animationGroup.onAnimationGroupEndObservable\r\n    );\r\n\r\n    const currentFrame = useObservableState(\r\n        useCallback(() => {\r\n            return currentFrameHolder ? currentFrameHolder.currentFrame : undefined;\r\n        }, [currentFrameHolder]),\r\n        isPlaying ? animationGroup.getScene().onBeforeRenderObservable : null\r\n    );\r\n    const enableBlending = useProperty(animationGroup, \"enableBlending\");\r\n    return (\r\n        <>\r\n            <ButtonLine label={isPlaying ? \"Pause\" : \"Play\"} onClick={() => (isPlaying ? animationGroup.pause() : animationGroup.play(true))} />\r\n            <ButtonLine label=\"Stop\" onClick={() => animationGroup.stop()} />\r\n            <CurveEditorButton\r\n                scene={scene}\r\n                target={null}\r\n                animations={targetedAnimations}\r\n                rootAnimationGroup={animationGroup}\r\n                title={animationGroup.name}\r\n                useTargetAnimations={true}\r\n            />\r\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"Speed Ratio\" min={0} max={10} step={0.1} target={animationGroup} propertyKey=\"speedRatio\" />\r\n            {currentFrameHolder && currentFrame !== undefined ? (\r\n                <SyncedSliderPropertyLine\r\n                    label=\"Current Frame\"\r\n                    min={animationGroup.from}\r\n                    max={animationGroup.to}\r\n                    step={(animationGroup.to - animationGroup.from) / 1000.0}\r\n                    value={currentFrame}\r\n                    onChange={(value) => {\r\n                        if (!animationGroup.isPlaying) {\r\n                            animationGroup.play(true);\r\n                            animationGroup.goToFrame(value);\r\n                            animationGroup.pause();\r\n                        } else {\r\n                            animationGroup.goToFrame(value);\r\n                        }\r\n                    }}\r\n                />\r\n            ) : null}\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Blending\" target={animationGroup} propertyKey=\"enableBlending\" ignoreNullable defaultValue={false} />\r\n            <Collapse visible={!!enableBlending}>\r\n                <>\r\n                    <BoundProperty\r\n                        component={SyncedSliderPropertyLine}\r\n                        label=\"Blending Speed\"\r\n                        min={0}\r\n                        max={1}\r\n                        step={0.01}\r\n                        target={animationGroup}\r\n                        propertyKey=\"blendingSpeed\"\r\n                        ignoreNullable\r\n                        defaultValue={0}\r\n                    />\r\n                    <BoundProperty component={SwitchPropertyLine} label=\"Is Additive\" target={animationGroup} propertyKey=\"isAdditive\" />\r\n                    <BoundProperty component={NumberInputPropertyLine} label=\"Weight\" target={animationGroup} propertyKey=\"weight\" step={0.1} />\r\n                    <BoundProperty component={NumberInputPropertyLine} label=\"Play order\" target={animationGroup} propertyKey=\"playOrder\" forceInt />\r\n                </>\r\n            </Collapse>\r\n        </>\r\n    );\r\n};\r\n\r\nexport const AnimationGroupInfoProperties: FunctionComponent<{ animationGroup: AnimationGroup }> = (props) => {\r\n    const { animationGroup } = props;\r\n    return (\r\n        <>\r\n            <StringifiedPropertyLine label=\"Animation Count\" value={animationGroup.targetedAnimations.length} />\r\n            <StringifiedPropertyLine label=\"From\" value={animationGroup.from} precision={2} />\r\n            <StringifiedPropertyLine label=\"To\" value={animationGroup.to} precision={2} />\r\n            <StringifiedPropertyLine label=\"Unique ID\" value={animationGroup.uniqueId} />\r\n        </>\r\n    );\r\n};\r\n","import type { ServiceDefinition } from \"../../../modularity/serviceDefinition\";\r\nimport type { IPropertiesService } from \"./propertiesService\";\r\n\r\nimport { AnimationGroup } from \"core/Animations/animationGroup\";\r\nimport { TargetedAnimation } from \"core/Animations/animationGroup\";\r\nimport { PropertiesServiceIdentity } from \"./propertiesService\";\r\nimport { TargetedAnimationGeneralProperties } from \"../../../components/properties/animation/targetedAnimationProperties\";\r\nimport { AnimationGroupControlProperties, AnimationGroupInfoProperties } from \"../../../components/properties/animation/animationGroupProperties\";\r\nimport type { ISelectionService } from \"../../selectionService\";\r\nimport { SelectionServiceIdentity } from \"../../selectionService\";\r\n\r\nexport const AnimationGroupPropertiesServiceDefinition: ServiceDefinition<[], [IPropertiesService, ISelectionService]> = {\r\n    friendlyName: \"Animation Group Properties\",\r\n    consumes: [PropertiesServiceIdentity, SelectionServiceIdentity],\r\n    factory: (propertiesService, selectionService) => {\r\n        const animationGroupContentRegistration = propertiesService.addSectionContent({\r\n            key: \"Animation Group Properties\",\r\n            predicate: (entity: unknown) => entity instanceof AnimationGroup,\r\n            content: [\r\n                {\r\n                    section: \"Control\",\r\n                    component: ({ context }) => <AnimationGroupControlProperties animationGroup={context} />,\r\n                },\r\n                {\r\n                    section: \"Info\",\r\n                    component: ({ context }) => <AnimationGroupInfoProperties animationGroup={context} />,\r\n                },\r\n            ],\r\n        });\r\n\r\n        const targetedAnimationContentRegistration = propertiesService.addSectionContent({\r\n            key: \"Targeted Animation Properties\",\r\n            predicate: (entity: unknown) => entity instanceof TargetedAnimation,\r\n            content: [\r\n                {\r\n                    section: \"General\",\r\n                    component: ({ context }) => <TargetedAnimationGeneralProperties targetedAnimation={context} selectionService={selectionService} />,\r\n                },\r\n            ],\r\n        });\r\n\r\n        return {\r\n            dispose: () => {\r\n                animationGroupContentRegistration.dispose();\r\n                targetedAnimationContentRegistration.dispose();\r\n            },\r\n        };\r\n    },\r\n};\r\n","import { MessageBar as FluentMessageBar, MessageBarTitle, MessageBarBody, makeStyles, tokens } from \"@fluentui/react-components\";\r\nimport type { FunctionComponent } from \"react\";\r\nimport { Link } from \"./link\";\r\n\r\nconst useClasses = makeStyles({\r\n    container: {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        gap: tokens.spacingVerticalS, // 8px\r\n    },\r\n});\r\n\r\ntype MessageBarProps = {\r\n    message: string;\r\n    title?: string;\r\n    docLink?: string;\r\n    intent: \"info\" | \"success\" | \"warning\" | \"error\";\r\n};\r\nexport const MessageBar: FunctionComponent<MessageBarProps> = (props) => {\r\n    MessageBar.displayName = \"MessageBar\";\r\n    const { message, title, intent, docLink } = props;\r\n    const classes = useClasses();\r\n\r\n    return (\r\n        <div className={classes.container}>\r\n            <FluentMessageBar intent={intent} layout=\"multiline\">\r\n                <MessageBarBody>\r\n                    {title && <MessageBarTitle>{title}</MessageBarTitle>}\r\n                    {message}\r\n                    {docLink && (\r\n                        <>\r\n                            {\" - \"}\r\n                            <Link url={docLink} value=\"Learn More\" />\r\n                        </>\r\n                    )}\r\n                </MessageBarBody>\r\n            </FluentMessageBar>\r\n        </div>\r\n    );\r\n};\r\n","import type { FunctionComponent } from \"react\";\r\n\r\nimport { useCallback, useRef } from \"react\";\r\nimport { Badge } from \"@fluentui/react-components\";\r\n\r\nimport { PropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/propertyLine\";\r\nimport { TextPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/textPropertyLine\";\r\nimport { ButtonLine } from \"shared-ui-components/fluent/hoc/buttonLine\";\r\nimport { MessageBar } from \"shared-ui-components/fluent/primitives/messageBar\";\r\nimport { Collapse } from \"shared-ui-components/fluent/primitives/collapse\";\r\nimport { useObservableState } from \"../../../hooks/observableHooks\";\r\nimport { NumberInputPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/inputPropertyLine\";\r\nimport { SyncedSliderPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/syncedSliderPropertyLine\";\r\nimport { SwitchPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/switchPropertyLine\";\r\nimport type { AnimationRange } from \"core/Animations/animationRange\";\r\nimport type { Nullable } from \"core/types\";\r\nimport type { IAnimatable } from \"core/Animations/animatable.interface\";\r\nimport type { Scene } from \"core/scene\";\r\nimport { AnimationPropertiesOverride } from \"core/Animations/animationPropertiesOverride\";\r\nimport { useProperty } from \"../../../hooks/compoundPropertyHooks\";\r\nimport { BoundProperty } from \"../boundProperty\";\r\nimport { CurveEditorButton } from \"../../curveEditor/curveEditorButton\";\r\n\r\nexport interface IAnimationRangeContainer {\r\n    getAnimationRanges(): Nullable<AnimationRange>[];\r\n}\r\n\r\nexport interface IAnimatableContainer {\r\n    getAnimatables(): IAnimatable[];\r\n}\r\n\r\ndeclare module \"core/Animations/animatable\" {\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    interface Animatable {\r\n        animationPropertiesOverride?: AnimationPropertiesOverride;\r\n    }\r\n}\r\n\r\nexport const AnimationsProperties: FunctionComponent<{ scene: Scene; entity: Partial<IAnimatable & IAnimationRangeContainer & IAnimatableContainer> }> = (props) => {\r\n    const { scene, entity } = props;\r\n\r\n    // Track animations array changes via property interception\r\n    const trackedAnimations = useProperty(entity as IAnimatable, \"animations\");\r\n    const animations = trackedAnimations ?? [];\r\n    const ranges = entity.getAnimationRanges?.()?.filter((range) => !!range) ?? [];\r\n    const childAnimatablesAnimations = entity.getAnimatables?.().flatMap((animatable) => animatable.animations ?? []) ?? [];\r\n    animations.concat(childAnimatablesAnimations);\r\n\r\n    const lastFrom = useRef(0);\r\n    const lastTo = useRef(0);\r\n    const lastLoop = useRef(false);\r\n\r\n    const animatablesForTarget = scene.getAllAnimatablesByTarget(entity);\r\n    const isPlaying = animatablesForTarget.length > 0;\r\n    const mainAnimatable = isPlaying ? animatablesForTarget[0] : undefined;\r\n\r\n    const animationPropertiesOverride = useProperty(mainAnimatable, \"animationPropertiesOverride\");\r\n\r\n    if (mainAnimatable) {\r\n        lastFrom.current = mainAnimatable.fromFrame;\r\n        lastTo.current = mainAnimatable.toFrame;\r\n        lastLoop.current = mainAnimatable.loopAnimation;\r\n    }\r\n\r\n    const hasAnimations = animations.length > 0 || ranges.length > 0;\r\n\r\n    const currentFrame = useObservableState(\r\n        useCallback(() => {\r\n            return mainAnimatable ? mainAnimatable.masterFrame : (scene.getAllAnimatablesByTarget(entity)[0]?.masterFrame ?? 0);\r\n        }, [scene, entity, mainAnimatable]),\r\n        hasAnimations ? scene.onAfterAnimationsObservable : undefined\r\n    );\r\n\r\n    return (\r\n        <>\r\n            {!hasAnimations && (\r\n                <MessageBar\r\n                    intent=\"info\"\r\n                    title=\"No Animations\"\r\n                    message=\"To modify animations, attach an animation to this node.\"\r\n                    docLink=\"https://doc.babylonjs.com/features/featuresDeepDive/animation/\"\r\n                />\r\n            )}\r\n            {ranges.length > 0 && (\r\n                <PropertyLine\r\n                    label=\"Ranges\"\r\n                    expandedContent={\r\n                        <>\r\n                            {ranges.map((range) => {\r\n                                return (\r\n                                    <ButtonLine\r\n                                        key={range.name}\r\n                                        label={range.name}\r\n                                        onClick={() => {\r\n                                            scene.beginAnimation(entity, range.from, range.to, true);\r\n                                        }}\r\n                                    />\r\n                                );\r\n                            })}\r\n                        </>\r\n                    }\r\n                >\r\n                    <Badge appearance=\"filled\">{ranges.length}</Badge>\r\n                </PropertyLine>\r\n            )}\r\n            {animations.length > 0 && (\r\n                <PropertyLine\r\n                    label=\"Animations\"\r\n                    expandedContent={\r\n                        <>\r\n                            {animations.map((animation, index) => {\r\n                                return <TextPropertyLine key={animation.uniqueId} label={`${index}: ${animation.name}`} value={animation.targetProperty} />;\r\n                            })}\r\n                        </>\r\n                    }\r\n                >\r\n                    <Badge appearance=\"filled\">{animations.length}</Badge>\r\n                </PropertyLine>\r\n            )}\r\n            {/* CurveEditorButton is always rendered at the same position to preserve ChildWindow state */}\r\n            <CurveEditorButton scene={scene} target={entity as IAnimatable} animations={animations} title={(entity as { name?: string }).name ?? \"Animation Curve Editor\"} />\r\n            {mainAnimatable && (\r\n                <>\r\n                    <PropertyLine\r\n                        label=\"Animation Controls\"\r\n                        expandedContent={\r\n                            <>\r\n                                <NumberInputPropertyLine\r\n                                    label=\"From\"\r\n                                    value={mainAnimatable.fromFrame}\r\n                                    onChange={(value) => {\r\n                                        scene.stopAnimation(entity);\r\n                                        scene.beginAnimation(entity, value, mainAnimatable.toFrame, true);\r\n                                    }}\r\n                                />\r\n                                <NumberInputPropertyLine\r\n                                    label=\"To\"\r\n                                    value={mainAnimatable.toFrame}\r\n                                    onChange={(value) => {\r\n                                        scene.stopAnimation(entity);\r\n                                        scene.beginAnimation(entity, mainAnimatable.fromFrame, value, true);\r\n                                    }}\r\n                                />\r\n                                <SwitchPropertyLine\r\n                                    label=\"Loop\"\r\n                                    value={mainAnimatable.loopAnimation}\r\n                                    onChange={(value) => {\r\n                                        for (const animatable of animatablesForTarget) {\r\n                                            animatable.loopAnimation = value;\r\n                                        }\r\n                                    }}\r\n                                />\r\n                                <SyncedSliderPropertyLine\r\n                                    label=\"Current Frame\"\r\n                                    value={currentFrame}\r\n                                    min={mainAnimatable.fromFrame}\r\n                                    max={mainAnimatable.toFrame}\r\n                                    step={(mainAnimatable.toFrame - mainAnimatable.fromFrame) / 1000}\r\n                                    onChange={(value) => {\r\n                                        mainAnimatable.goToFrame(value);\r\n                                    }}\r\n                                />\r\n                            </>\r\n                        }\r\n                        expandByDefault\r\n                    ></PropertyLine>\r\n                </>\r\n            )}\r\n            {hasAnimations && (\r\n                <ButtonLine\r\n                    label={isPlaying ? \"Stop Animation\" : \"Play Animation\"}\r\n                    onClick={() => {\r\n                        if (isPlaying) {\r\n                            scene.stopAnimation(entity);\r\n                        } else {\r\n                            scene.beginAnimation(entity, lastFrom.current, lastTo.current, lastLoop.current);\r\n                        }\r\n                    }}\r\n                />\r\n            )}\r\n            {mainAnimatable && (ranges.length > 0 || animations.length > 0) ? (\r\n                <>\r\n                    <SwitchPropertyLine\r\n                        label=\"Enable Override\"\r\n                        value={animationPropertiesOverride != null}\r\n                        onChange={(value) => {\r\n                            if (value) {\r\n                                mainAnimatable.animationPropertiesOverride = new AnimationPropertiesOverride();\r\n                                mainAnimatable.animationPropertiesOverride.blendingSpeed = 0.05;\r\n                            } else {\r\n                                mainAnimatable.animationPropertiesOverride = undefined;\r\n                            }\r\n                        }}\r\n                    />\r\n                    <Collapse visible={animationPropertiesOverride != null}>\r\n                        <div>\r\n                            <BoundProperty component={SwitchPropertyLine} label=\"Enable Blending\" target={animationPropertiesOverride!} propertyKey=\"enableBlending\" />\r\n                            <BoundProperty\r\n                                component={SyncedSliderPropertyLine}\r\n                                label=\"Blending Speed\"\r\n                                target={animationPropertiesOverride!}\r\n                                propertyKey=\"blendingSpeed\"\r\n                                min={0}\r\n                                max={0.1}\r\n                                step={0.01}\r\n                            />\r\n                        </div>\r\n                    </Collapse>\r\n                </>\r\n            ) : null}\r\n        </>\r\n    );\r\n};\r\n","import type { IAnimatable } from \"core/index\";\r\n\r\nimport type { IAnimatableContainer, IAnimationRangeContainer } from \"../../../components/properties/animation/animationsProperties\";\r\nimport type { ServiceDefinition } from \"../../../modularity/serviceDefinition\";\r\nimport type { ISelectionService } from \"../../selectionService\";\r\nimport type { IPropertiesService } from \"./propertiesService\";\r\nimport type { ISceneContext } from \"../../../services/sceneContext\";\r\n\r\nimport { AnimationsProperties } from \"../../../components/properties/animation/animationsProperties\";\r\nimport { SelectionServiceIdentity } from \"../../selectionService\";\r\nimport { PropertiesServiceIdentity } from \"./propertiesService\";\r\nimport { SceneContextIdentity } from \"../../../services/sceneContext\";\r\n\r\nfunction IsAnimatable(entity: unknown): entity is IAnimatable {\r\n    return (entity as IAnimatable).animations !== undefined;\r\n}\r\n\r\nfunction IsAnimationRangeContainer(entity: unknown): entity is IAnimationRangeContainer {\r\n    return (entity as IAnimationRangeContainer).getAnimationRanges !== undefined;\r\n}\r\n\r\nfunction IsAnimatableContainer(entity: unknown): entity is IAnimatableContainer {\r\n    return (entity as IAnimatableContainer).getAnimatables !== undefined;\r\n}\r\n\r\nexport const AnimationPropertiesServiceDefinition: ServiceDefinition<[], [IPropertiesService, ISelectionService, ISceneContext]> = {\r\n    friendlyName: \"Animation Properties\",\r\n    consumes: [PropertiesServiceIdentity, SelectionServiceIdentity, SceneContextIdentity],\r\n    factory: (propertiesService, selectionService, sceneContext) => {\r\n        const scene = sceneContext.currentScene;\r\n        if (!scene) {\r\n            return undefined;\r\n        }\r\n\r\n        const animationContentRegistration = propertiesService.addSectionContent({\r\n            key: \"Animation Properties\",\r\n            predicate: (entity: unknown) => IsAnimatable(entity) || IsAnimationRangeContainer(entity) || IsAnimatableContainer(entity),\r\n            content: [\r\n                {\r\n                    section: \"Animation\",\r\n                    component: ({ context }) => <AnimationsProperties scene={scene} entity={context} />,\r\n                },\r\n            ],\r\n        });\r\n\r\n        return {\r\n            dispose: () => {\r\n                animationContentRegistration.dispose();\r\n            },\r\n        };\r\n    },\r\n};\r\n","import type { FunctionComponent } from \"react\";\r\n\r\nimport { SyncedSliderPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/syncedSliderPropertyLine\";\r\nimport { SwitchPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/switchPropertyLine\";\r\nimport { BoundProperty } from \"./boundProperty\";\r\nimport type { Atmosphere } from \"addons/atmosphere/atmosphere\";\r\nimport { Vector3PropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/vectorPropertyLine\";\r\nimport { Color3PropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/colorPropertyLine\";\r\nimport { PropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/propertyLine\";\r\n\r\nexport const GeneralAtmosphereProperties: FunctionComponent<{ entity: Atmosphere }> = (props) => {\r\n    const { entity: atmosphere } = props;\r\n    return (\r\n        <>\r\n            <BoundProperty\r\n                label=\"Planet Radius (km)\"\r\n                component={SyncedSliderPropertyLine}\r\n                target={atmosphere.physicalProperties}\r\n                propertyKey=\"planetRadius\"\r\n                propertyPath=\"physicalProperties.planetRadius\"\r\n                min={1000.0}\r\n                max={10000.0}\r\n                step={1}\r\n            />\r\n            <BoundProperty\r\n                label=\"Atmosphere Thickness (km)\"\r\n                component={SyncedSliderPropertyLine}\r\n                target={atmosphere.physicalProperties}\r\n                propertyKey=\"atmosphereThickness\"\r\n                propertyPath=\"physicalProperties.atmosphereThickness\"\r\n                min={1.0}\r\n                max={200.0}\r\n                step={1}\r\n            />\r\n        </>\r\n    );\r\n};\r\nexport const ScatteringAndAbsorptionProperties: FunctionComponent<{ entity: Atmosphere }> = (props) => {\r\n    const { entity: atmosphere } = props;\r\n    return (\r\n        <>\r\n            <PropertyLine\r\n                label=\"Rayleigh Scattering\"\r\n                expandByDefault\r\n                description=\"Rayleigh scattering is the scattering of light off of the molecules of the atmosphere. It is the main reason why the sky is blue. Increasing the Rayleigh scattering coefficient will result in a bluer sky.\"\r\n                expandedContent={\r\n                    <>\r\n                        <BoundProperty\r\n                            label=\"Scale\"\r\n                            component={SyncedSliderPropertyLine}\r\n                            target={atmosphere.physicalProperties}\r\n                            propertyKey=\"rayleighScatteringScale\"\r\n                            propertyPath=\"physicalProperties.rayleighScatteringScale\"\r\n                            min={0.0}\r\n                            max={5.0}\r\n                            step={0.01}\r\n                        />\r\n                        <BoundProperty\r\n                            label=\"Coefficient\"\r\n                            component={Vector3PropertyLine}\r\n                            target={atmosphere.physicalProperties}\r\n                            propertyKey=\"peakRayleighScattering\"\r\n                            propertyPath=\"physicalProperties.peakRayleighScattering\"\r\n                            convertTo={(value) => value.scale(1000)}\r\n                            convertFrom={(value) => value.scale(0.001)}\r\n                            min={0}\r\n                            step={0.01}\r\n                            unit=\"Mm\"\r\n                        />\r\n                    </>\r\n                }\r\n            />\r\n            <PropertyLine\r\n                label=\"Mie Scattering\"\r\n                description=\"Mie scattering is the scattering of light off of the larger particles in the atmosphere, such as dust and water droplets. It is responsible for the white appearance of clouds and the haziness of the sky. Increasing the Mie scattering coefficient will result in a whiter sky.\"\r\n                expandByDefault\r\n                expandedContent={\r\n                    <>\r\n                        <BoundProperty\r\n                            label=\"Scale\"\r\n                            component={SyncedSliderPropertyLine}\r\n                            target={atmosphere.physicalProperties}\r\n                            propertyKey=\"mieScatteringScale\"\r\n                            propertyPath=\"physicalProperties.mieScatteringScale\"\r\n                            min={0.0}\r\n                            max={5.0}\r\n                            step={0.01}\r\n                        />\r\n                        <BoundProperty\r\n                            label=\"Coefficient\"\r\n                            component={Vector3PropertyLine}\r\n                            target={atmosphere.physicalProperties}\r\n                            propertyKey=\"peakMieScattering\"\r\n                            propertyPath=\"physicalProperties.peakMieScattering\"\r\n                            convertTo={(value) => value.scale(1000)}\r\n                            convertFrom={(value) => value.scale(0.001)}\r\n                            min={0}\r\n                            step={0.01}\r\n                            unit=\"Mm\"\r\n                        />\r\n                    </>\r\n                }\r\n            />\r\n            <PropertyLine\r\n                label=\"Mie Absorption\"\r\n                description=\"Mie absorption is the absorption of light by the larger particles in the atmosphere, such as dust and water droplets. It is responsible for the dimming of the sun during haze and fog. Increasing mie absorption coefficient will result in visually darker skies.\"\r\n                expandByDefault\r\n                expandedContent={\r\n                    <>\r\n                        <BoundProperty\r\n                            label=\"Scale\"\r\n                            component={SyncedSliderPropertyLine}\r\n                            target={atmosphere.physicalProperties}\r\n                            propertyKey=\"mieAbsorptionScale\"\r\n                            propertyPath=\"physicalProperties.mieAbsorptionScale\"\r\n                            min={0.0}\r\n                            max={5.0}\r\n                            step={0.01}\r\n                        />\r\n                        <BoundProperty\r\n                            label=\"Coefficient\"\r\n                            component={Vector3PropertyLine}\r\n                            target={atmosphere.physicalProperties}\r\n                            propertyKey=\"peakMieAbsorption\"\r\n                            propertyPath=\"physicalProperties.peakMieAbsorption\"\r\n                            convertTo={(value) => value.scale(1000)}\r\n                            convertFrom={(value) => value.scale(0.001)}\r\n                            min={0}\r\n                            step={0.01}\r\n                            unit=\"Mm\"\r\n                        />\r\n                    </>\r\n                }\r\n            />\r\n            <PropertyLine\r\n                label=\"Ozone Absorption\"\r\n                expandByDefault\r\n                description=\"Ozone absorption is the absorption of light by ozone molecules in the atmosphere. Increasing ozone absorption coefficient will result in visually darker skies.\"\r\n                expandedContent={\r\n                    <>\r\n                        <BoundProperty\r\n                            label=\"Scale\"\r\n                            component={SyncedSliderPropertyLine}\r\n                            target={atmosphere.physicalProperties}\r\n                            propertyKey=\"ozoneAbsorptionScale\"\r\n                            propertyPath=\"physicalProperties.ozoneAbsorptionScale\"\r\n                            min={0.0}\r\n                            max={5.0}\r\n                            step={0.01}\r\n                        />\r\n                        <BoundProperty\r\n                            label=\"Coefficient\"\r\n                            component={Vector3PropertyLine}\r\n                            target={atmosphere.physicalProperties}\r\n                            propertyKey=\"peakOzoneAbsorption\"\r\n                            propertyPath=\"physicalProperties.peakOzoneAbsorption\"\r\n                            convertTo={(value) => value.scale(1000)}\r\n                            convertFrom={(value) => value.scale(0.001)}\r\n                            min={0}\r\n                            step={0.01}\r\n                        />\r\n                    </>\r\n                }\r\n            />\r\n        </>\r\n    );\r\n};\r\nexport const MultipleScatteringProperties: FunctionComponent<{ entity: Atmosphere }> = (props) => {\r\n    const { entity: atmosphere } = props;\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty label=\"Intensity\" component={SyncedSliderPropertyLine} target={atmosphere} propertyKey=\"multiScatteringIntensity\" min={0} max={5.0} step={0.1} />\r\n            <BoundProperty\r\n                label=\"Minimum Intensity\"\r\n                component={SyncedSliderPropertyLine}\r\n                target={atmosphere}\r\n                propertyKey=\"minimumMultiScatteringIntensity\"\r\n                min={0.0}\r\n                max={0.1}\r\n                step={0.0001}\r\n            />\r\n            <BoundProperty label=\"Minimum Color\" component={Color3PropertyLine} target={atmosphere} propertyKey=\"minimumMultiScatteringColor\" />\r\n            <BoundProperty label=\"Ground Albedo\" component={Color3PropertyLine} target={atmosphere} propertyKey=\"groundAlbedo\" />\r\n        </>\r\n    );\r\n};\r\nexport const AerialPerspectiveProperties: FunctionComponent<{ entity: Atmosphere }> = (props) => {\r\n    const { entity: atmosphere } = props;\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty label=\"Intensity\" component={SyncedSliderPropertyLine} target={atmosphere} propertyKey=\"aerialPerspectiveIntensity\" min={0} max={5.0} step={0.1} />\r\n            <BoundProperty\r\n                label=\"Transmittance Scale\"\r\n                component={SyncedSliderPropertyLine}\r\n                target={atmosphere}\r\n                propertyKey=\"aerialPerspectiveTransmittanceScale\"\r\n                min={0}\r\n                max={2.0}\r\n                step={0.01}\r\n            />\r\n            <BoundProperty label=\"Saturation\" component={SyncedSliderPropertyLine} target={atmosphere} propertyKey=\"aerialPerspectiveSaturation\" min={0} max={2.0} step={0.01} />\r\n        </>\r\n    );\r\n};\r\nexport const DiffuseIrradianceProperties: FunctionComponent<{ entity: Atmosphere }> = (props) => {\r\n    const { entity: atmosphere } = props;\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty label=\"Intensity\" component={SyncedSliderPropertyLine} target={atmosphere} propertyKey=\"diffuseSkyIrradianceIntensity\" min={0} max={5.0} step={0.001} />\r\n            <BoundProperty\r\n                label=\"Desaturation\"\r\n                component={SyncedSliderPropertyLine}\r\n                target={atmosphere}\r\n                propertyKey=\"diffuseSkyIrradianceDesaturationFactor\"\r\n                min={0}\r\n                max={1.0}\r\n                step={0.01}\r\n            />\r\n            <BoundProperty\r\n                label=\"Additional Intensity\"\r\n                component={SyncedSliderPropertyLine}\r\n                target={atmosphere}\r\n                propertyKey=\"additionalDiffuseSkyIrradianceIntensity\"\r\n                min={0}\r\n                max={100000.0}\r\n                step={1}\r\n            />\r\n            <BoundProperty label=\"Additional Color\" component={Color3PropertyLine} target={atmosphere} propertyKey=\"additionalDiffuseSkyIrradianceColor\" />\r\n        </>\r\n    );\r\n};\r\nexport const RenderingOptionsProperties: FunctionComponent<{ entity: Atmosphere }> = (props) => {\r\n    const { entity: atmosphere } = props;\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty label=\"Linear Space Output\" component={SwitchPropertyLine} target={atmosphere} propertyKey=\"isLinearSpaceComposition\" />\r\n            <BoundProperty label=\"Linear Space Light\" component={SwitchPropertyLine} target={atmosphere} propertyKey=\"isLinearSpaceLight\" />\r\n            <BoundProperty label=\"Use LUT for Sky (Optimization)\" component={SwitchPropertyLine} target={atmosphere} propertyKey=\"isSkyViewLutEnabled\" />\r\n            <BoundProperty label=\"Use LUT for Aerial Perspective (Optimization)\" component={SwitchPropertyLine} target={atmosphere} propertyKey=\"isAerialPerspectiveLutEnabled\" />\r\n        </>\r\n    );\r\n};\r\n","import type { ServiceDefinition } from \"../../../modularity/serviceDefinition\";\r\nimport type { ISelectionService } from \"../../selectionService\";\r\nimport type { IPropertiesService } from \"./propertiesService\";\r\nimport type { ISceneContext } from \"../../../services/sceneContext\";\r\nimport type { Atmosphere } from \"addons/atmosphere/atmosphere\";\r\nimport { SelectionServiceIdentity } from \"../../selectionService\";\r\nimport { PropertiesServiceIdentity } from \"./propertiesService\";\r\nimport { SceneContextIdentity } from \"../../../services/sceneContext\";\r\nimport {\r\n    AerialPerspectiveProperties,\r\n    DiffuseIrradianceProperties,\r\n    GeneralAtmosphereProperties,\r\n    MultipleScatteringProperties,\r\n    RenderingOptionsProperties,\r\n    ScatteringAndAbsorptionProperties,\r\n} from \"../../../components/properties/atmosphereProperties\";\r\n\r\nexport const AtmospherePropertiesServiceDefinition: ServiceDefinition<[], [IPropertiesService, ISelectionService, ISceneContext]> = {\r\n    friendlyName: \"Atmosphere Properties\",\r\n    consumes: [PropertiesServiceIdentity, SelectionServiceIdentity, SceneContextIdentity],\r\n    factory: (propertiesService, selectionService, sceneContext) => {\r\n        const scene = sceneContext.currentScene;\r\n        if (!scene) {\r\n            return undefined;\r\n        }\r\n\r\n        const atmosphereContentRegistration = propertiesService.addSectionContent({\r\n            key: \"Atmosphere Properties\",\r\n            predicate: (entity: unknown): entity is Atmosphere => (entity as Partial<Atmosphere>).getClassName?.() === \"Atmosphere\",\r\n            content: [\r\n                {\r\n                    section: \"General\",\r\n                    component: ({ context }) => <GeneralAtmosphereProperties entity={context} />,\r\n                },\r\n                {\r\n                    section: \"Scattering and Absorption\",\r\n                    component: ({ context }) => <ScatteringAndAbsorptionProperties entity={context} />,\r\n                },\r\n                {\r\n                    section: \"Multiple Scattering\",\r\n                    component: ({ context }) => <MultipleScatteringProperties entity={context} />,\r\n                },\r\n                {\r\n                    section: \"Aerial Perspective\",\r\n                    component: ({ context }) => <AerialPerspectiveProperties entity={context} />,\r\n                },\r\n                {\r\n                    section: \"Diffuse Sky Irradiance\",\r\n                    component: ({ context }) => <DiffuseIrradianceProperties entity={context} />,\r\n                },\r\n                {\r\n                    section: \"Rendering Options\",\r\n                    component: ({ context }) => <RenderingOptionsProperties entity={context} />,\r\n                },\r\n            ],\r\n        });\r\n\r\n        return {\r\n            dispose: () => {\r\n                atmosphereContentRegistration.dispose();\r\n            },\r\n        };\r\n    },\r\n};\r\n","import type { Sound } from \"core/index\";\r\n\r\nimport type { FunctionComponent } from \"react\";\r\n\r\nimport { useCallback } from \"react\";\r\n\r\nimport { PauseRegular, PlayRegular } from \"@fluentui/react-icons\";\r\nimport { ButtonLine } from \"shared-ui-components/fluent/hoc/buttonLine\";\r\nimport { SwitchPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/switchPropertyLine\";\r\nimport { SyncedSliderPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/syncedSliderPropertyLine\";\r\nimport { TextPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/textPropertyLine\";\r\nimport { useInterceptObservable } from \"../../../hooks/instrumentationHooks\";\r\nimport { useObservableState } from \"../../../hooks/observableHooks\";\r\nimport { BoundProperty, Property } from \"../boundProperty\";\r\n\r\nfunction useSoundState(sound: Sound) {\r\n    const stateChangedObservables = [\r\n        useInterceptObservable(\"function\", sound, \"play\"),\r\n        useInterceptObservable(\"function\", sound, \"pause\"),\r\n        useInterceptObservable(\"function\", sound, \"stop\"),\r\n    ] as const;\r\n\r\n    const isPaused = useObservableState(\r\n        useCallback(() => sound.isPaused, [sound]),\r\n        ...stateChangedObservables\r\n    );\r\n\r\n    const isPlaying = useObservableState(\r\n        useCallback(() => sound.isPlaying, [sound]),\r\n        ...stateChangedObservables\r\n    );\r\n\r\n    return isPaused ? \"Paused\" : isPlaying ? \"Playing\" : \"Stopped\";\r\n}\r\n\r\nexport const SoundGeneralProperties: FunctionComponent<{ sound: Sound }> = (props) => {\r\n    const { sound } = props;\r\n\r\n    const soundState = useSoundState(sound);\r\n\r\n    return (\r\n        <>\r\n            <TextPropertyLine label=\"Status\" value={soundState} />\r\n        </>\r\n    );\r\n};\r\n\r\nexport const SoundCommandProperties: FunctionComponent<{ sound: Sound }> = (props) => {\r\n    const { sound } = props;\r\n\r\n    const soundState = useSoundState(sound);\r\n\r\n    const volume = useObservableState(\r\n        useCallback(() => sound.getVolume(), [sound]),\r\n        useInterceptObservable(\"function\", sound, \"setVolume\")\r\n    );\r\n\r\n    return (\r\n        <>\r\n            <ButtonLine\r\n                label={soundState === \"Playing\" ? \"Pause\" : \"Play\"}\r\n                icon={soundState === \"Playing\" ? PauseRegular : PlayRegular}\r\n                onClick={() => {\r\n                    if (soundState === \"Playing\") {\r\n                        sound.pause();\r\n                    } else {\r\n                        sound.play();\r\n                    }\r\n                }}\r\n            />\r\n            <Property\r\n                component={SyncedSliderPropertyLine}\r\n                label=\"Volume\"\r\n                functionPath=\"setVolume\"\r\n                value={volume}\r\n                min={0}\r\n                max={5}\r\n                step={0.1}\r\n                onChange={(value) => {\r\n                    sound.setVolume(value);\r\n                }}\r\n            />\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Loop\" target={sound} propertyKey=\"loop\" />\r\n        </>\r\n    );\r\n};\r\n","import type { ServiceDefinition } from \"../../../modularity/serviceDefinition\";\r\nimport type { IPropertiesService } from \"./propertiesService\";\r\n\r\nimport { Sound } from \"core/Audio/sound\";\r\nimport { SoundCommandProperties, SoundGeneralProperties } from \"../../../components/properties/audio/soundProperties\";\r\nimport { PropertiesServiceIdentity } from \"./propertiesService\";\r\n\r\nexport const AudioPropertiesServiceDefinition: ServiceDefinition<[], [IPropertiesService]> = {\r\n    friendlyName: \"Audio Properties\",\r\n    consumes: [PropertiesServiceIdentity],\r\n    factory: (propertiesService) => {\r\n        const soundContentRegistration = propertiesService.addSectionContent({\r\n            key: \"Sound General Properties\",\r\n            predicate: (entity: unknown) => entity instanceof Sound,\r\n            content: [\r\n                {\r\n                    section: \"General\",\r\n                    component: ({ context }) => <SoundGeneralProperties sound={context} />,\r\n                },\r\n                {\r\n                    section: \"Commands\",\r\n                    component: ({ context }) => <SoundCommandProperties sound={context} />,\r\n                },\r\n            ],\r\n        });\r\n\r\n        return {\r\n            dispose: () => {\r\n                soundContentRegistration.dispose();\r\n            },\r\n        };\r\n    },\r\n};\r\n","import type { FunctionComponent } from \"react\";\r\n\r\nimport type { ArcRotateCamera } from \"core/index\";\r\nimport type { ISettingsContext } from \"../../../services/settingsContext\";\r\n\r\nimport { NumberInputPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/inputPropertyLine\";\r\nimport { SwitchPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/switchPropertyLine\";\r\nimport { SyncedSliderPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/syncedSliderPropertyLine\";\r\nimport { Vector3PropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/vectorPropertyLine\";\r\nimport { useProperty } from \"../../../hooks/compoundPropertyHooks\";\r\nimport { useAngleConverters } from \"../../../hooks/settingsHooks\";\r\nimport { BoundProperty } from \"../boundProperty\";\r\n\r\nexport const ArcRotateCameraTransformProperties: FunctionComponent<{ camera: ArcRotateCamera; settings: ISettingsContext }> = (props) => {\r\n    const { camera, settings } = props;\r\n\r\n    const [toDisplayAngle, fromDisplayAngle, useDegrees] = useAngleConverters(settings);\r\n\r\n    const lowerAlphaLimit = useProperty(camera, \"lowerAlphaLimit\") ?? 0;\r\n    const upperAlphaLimit = useProperty(camera, \"upperAlphaLimit\") ?? Math.PI * 2;\r\n    const lowerBetaLimit = useProperty(camera, \"lowerBetaLimit\") ?? -Math.PI;\r\n    const upperBetaLimit = useProperty(camera, \"upperBetaLimit\") ?? Math.PI;\r\n    const lowerRadiusLimit = useProperty(camera, \"lowerRadiusLimit\");\r\n    const upperRadiusLimit = useProperty(camera, \"upperRadiusLimit\");\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty\r\n                component={SyncedSliderPropertyLine}\r\n                label=\"Alpha\"\r\n                description={`Horizontal angle in ${useDegrees ? \"degrees\" : \"radians\"}`}\r\n                target={camera}\r\n                propertyKey=\"alpha\"\r\n                min={toDisplayAngle(lowerAlphaLimit)}\r\n                max={toDisplayAngle(upperAlphaLimit)}\r\n                step={toDisplayAngle(0.01)}\r\n                convertTo={(value) => toDisplayAngle(value, true)}\r\n                convertFrom={fromDisplayAngle}\r\n            />\r\n            <BoundProperty\r\n                component={SyncedSliderPropertyLine}\r\n                label=\"Beta\"\r\n                description={`Vertical angle in ${useDegrees ? \"degrees\" : \"radians\"}`}\r\n                target={camera}\r\n                propertyKey=\"beta\"\r\n                min={toDisplayAngle(lowerBetaLimit)}\r\n                max={toDisplayAngle(upperBetaLimit)}\r\n                step={toDisplayAngle(0.01)}\r\n                convertTo={(value) => toDisplayAngle(value, true)}\r\n                convertFrom={fromDisplayAngle}\r\n            />\r\n            {lowerRadiusLimit != null && upperRadiusLimit != null ? (\r\n                <BoundProperty\r\n                    component={SyncedSliderPropertyLine}\r\n                    label=\"Radius\"\r\n                    description=\"Distance from the target point.\"\r\n                    target={camera}\r\n                    propertyKey=\"radius\"\r\n                    min={lowerRadiusLimit}\r\n                    max={upperRadiusLimit}\r\n                    step={0.01}\r\n                />\r\n            ) : (\r\n                <BoundProperty\r\n                    component={NumberInputPropertyLine}\r\n                    label=\"Radius\"\r\n                    description=\"Distance from the target point.\"\r\n                    target={camera}\r\n                    propertyKey=\"radius\"\r\n                    min={0}\r\n                    step={0.01}\r\n                />\r\n            )}\r\n        </>\r\n    );\r\n};\r\n\r\nexport const ArcRotateCameraControlProperties: FunctionComponent<{ camera: ArcRotateCamera }> = (props) => {\r\n    const { camera } = props;\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty component={NumberInputPropertyLine} label=\"Angular Sensitivity X\" target={camera} propertyKey=\"angularSensibilityX\" />\r\n            <BoundProperty component={NumberInputPropertyLine} label=\"Angular Sensitivity Y\" target={camera} propertyKey=\"angularSensibilityY\" />\r\n            <BoundProperty component={NumberInputPropertyLine} label=\"Panning Sensitivity\" target={camera} propertyKey=\"panningSensibility\" />\r\n            <BoundProperty component={NumberInputPropertyLine} label=\"Pinch Delta Percentage\" target={camera} propertyKey=\"pinchDeltaPercentage\" />\r\n            <BoundProperty component={NumberInputPropertyLine} label=\"Wheel Delta Percentage\" target={camera} propertyKey=\"wheelDeltaPercentage\" />\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Use Natural Pinch Zoom\" target={camera} propertyKey=\"useNaturalPinchZoom\" />\r\n        </>\r\n    );\r\n};\r\n\r\nexport const ArcRotateCameraCollisionProperties: FunctionComponent<{ camera: ArcRotateCamera }> = (props) => {\r\n    const { camera } = props;\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Check Collisions\" target={camera} propertyKey=\"checkCollisions\" />\r\n            <BoundProperty component={Vector3PropertyLine} label=\"Collision Radius\" target={camera} propertyKey=\"collisionRadius\" />\r\n        </>\r\n    );\r\n};\r\n\r\nexport const ArcRotateCameraLimitsProperties: FunctionComponent<{ camera: ArcRotateCamera }> = (props) => {\r\n    const { camera } = props;\r\n    // TODO-Iv2: Update defaultValues\r\n    return (\r\n        <>\r\n            <BoundProperty component={NumberInputPropertyLine} label=\"Lower Alpha Limit\" target={camera} propertyKey=\"lowerAlphaLimit\" nullable defaultValue={0} />\r\n            <BoundProperty component={NumberInputPropertyLine} label=\"Upper Alpha Limit\" target={camera} propertyKey=\"upperAlphaLimit\" nullable defaultValue={Infinity} />\r\n            <BoundProperty component={NumberInputPropertyLine} label=\"Lower Beta Limit\" target={camera} propertyKey=\"lowerBetaLimit\" nullable defaultValue={-Math.PI} />\r\n            <BoundProperty component={NumberInputPropertyLine} label=\"Upper Beta Limit\" target={camera} propertyKey=\"upperBetaLimit\" nullable defaultValue={Math.PI} />\r\n            <BoundProperty component={NumberInputPropertyLine} label=\"Lower Radius Limit\" target={camera} propertyKey=\"lowerRadiusLimit\" nullable defaultValue={0} />\r\n            <BoundProperty component={NumberInputPropertyLine} label=\"Upper Radius Limit\" target={camera} propertyKey=\"upperRadiusLimit\" nullable defaultValue={100} />\r\n            <BoundProperty component={NumberInputPropertyLine} label=\"Lower Target Y Limit\" target={camera} propertyKey=\"lowerTargetYLimit\" />\r\n        </>\r\n    );\r\n};\r\n\r\nexport const ArcRotateCameraBehaviorsProperties: FunctionComponent<{ camera: ArcRotateCamera }> = (props) => {\r\n    const { camera } = props;\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Auto Rotation\" target={camera} propertyKey=\"useAutoRotationBehavior\" />\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Bouncing\" target={camera} propertyKey=\"useBouncingBehavior\" />\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Framing\" target={camera} propertyKey=\"useFramingBehavior\" />\r\n        </>\r\n    );\r\n};\r\n","import type { FunctionComponent } from \"react\";\r\n\r\nimport type { GeospatialCamera } from \"core/Cameras/geospatialCamera\";\r\nimport type { ISettingsContext } from \"../../../services/settingsContext\";\r\n\r\nimport { NumberInputPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/inputPropertyLine\";\r\nimport { SwitchPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/switchPropertyLine\";\r\nimport { SyncedSliderPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/syncedSliderPropertyLine\";\r\nimport { Vector3PropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/vectorPropertyLine\";\r\nimport { useProperty } from \"../../../hooks/compoundPropertyHooks\";\r\nimport { useAngleConverters } from \"../../../hooks/settingsHooks\";\r\nimport { BoundProperty } from \"../boundProperty\";\r\n\r\nexport const GeospatialCameraTransformProperties: FunctionComponent<{ camera: GeospatialCamera; settings: ISettingsContext }> = (props) => {\r\n    const { camera, settings } = props;\r\n\r\n    const [toDisplayAngle, fromDisplayAngle, useDegrees] = useAngleConverters(settings);\r\n\r\n    const limits = useProperty(camera, \"limits\");\r\n    const yawMin = limits?.yawMin ?? -Math.PI;\r\n    const yawMax = limits?.yawMax ?? Math.PI;\r\n    const pitchMin = limits?.pitchMin ?? 0;\r\n    const pitchMax = limits?.pitchMax ?? Math.PI / 2;\r\n    const radiusMin = limits?.radiusMin ?? 0;\r\n    const radiusMax = limits?.radiusMax ?? Infinity;\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty\r\n                component={SyncedSliderPropertyLine}\r\n                label=\"Yaw\"\r\n                description={`Horizontal rotation in ${useDegrees ? \"degrees\" : \"radians\"} (0 = north)`}\r\n                target={camera}\r\n                propertyKey=\"yaw\"\r\n                min={toDisplayAngle(yawMin)}\r\n                max={toDisplayAngle(yawMax)}\r\n                step={toDisplayAngle(0.01)}\r\n                convertTo={(value) => toDisplayAngle(value, true)}\r\n                convertFrom={fromDisplayAngle}\r\n            />\r\n            <BoundProperty\r\n                component={SyncedSliderPropertyLine}\r\n                label=\"Pitch\"\r\n                description={`Vertical angle in ${useDegrees ? \"degrees\" : \"radians\"} (0 = looking down, /2 = horizon)`}\r\n                target={camera}\r\n                propertyKey=\"pitch\"\r\n                min={toDisplayAngle(pitchMin)}\r\n                max={toDisplayAngle(pitchMax)}\r\n                step={toDisplayAngle(0.01)}\r\n                convertTo={(value) => toDisplayAngle(value, true)}\r\n                convertFrom={fromDisplayAngle}\r\n            />\r\n            {radiusMax !== Infinity ? (\r\n                <BoundProperty\r\n                    component={SyncedSliderPropertyLine}\r\n                    label=\"Radius\"\r\n                    description=\"Distance from the center point.\"\r\n                    target={camera}\r\n                    propertyKey=\"radius\"\r\n                    min={radiusMin}\r\n                    max={radiusMax}\r\n                    step={0.01}\r\n                />\r\n            ) : (\r\n                <BoundProperty\r\n                    component={NumberInputPropertyLine}\r\n                    label=\"Radius\"\r\n                    description=\"Distance from the center point.\"\r\n                    target={camera}\r\n                    propertyKey=\"radius\"\r\n                    min={0}\r\n                    step={0.01}\r\n                />\r\n            )}\r\n            <BoundProperty component={Vector3PropertyLine} label=\"Center\" description=\"The point on the globe the camera orbits around.\" target={camera} propertyKey=\"center\" />\r\n            <BoundProperty component={Vector3PropertyLine} label=\"Position\" description=\"The camera's position.\" target={camera} propertyKey=\"position\" />\r\n        </>\r\n    );\r\n};\r\n\r\nexport const GeospatialCameraCollisionProperties: FunctionComponent<{ camera: GeospatialCamera }> = (props) => {\r\n    const { camera } = props;\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Check Collisions\" target={camera} propertyKey=\"checkCollisions\" />\r\n            <BoundProperty component={Vector3PropertyLine} label=\"Collision Offset\" target={camera} propertyKey=\"perFrameCollisionOffset\" />\r\n        </>\r\n    );\r\n};\r\n\r\nexport const GeospatialCameraLimitsProperties: FunctionComponent<{ camera: GeospatialCamera }> = (props) => {\r\n    const { camera } = props;\r\n\r\n    const limits = useProperty(camera, \"limits\");\r\n\r\n    if (!limits) {\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty\r\n                component={NumberInputPropertyLine}\r\n                label=\"Pitch Min\"\r\n                description=\"Minimum pitch angle (0 = looking straight down)\"\r\n                target={limits}\r\n                propertyKey=\"pitchMin\"\r\n                propertyPath=\"limits.pitchMin\"\r\n            />\r\n            <BoundProperty\r\n                component={NumberInputPropertyLine}\r\n                label=\"Pitch Max\"\r\n                description=\"Maximum pitch angle (/2 = horizon)\"\r\n                target={limits}\r\n                propertyKey=\"pitchMax\"\r\n                propertyPath=\"limits.pitchMax\"\r\n            />\r\n            <BoundProperty component={NumberInputPropertyLine} label=\"Yaw Min\" description=\"Minimum yaw angle\" target={limits} propertyKey=\"yawMin\" propertyPath=\"limits.yawMin\" />\r\n            <BoundProperty component={NumberInputPropertyLine} label=\"Yaw Max\" description=\"Maximum yaw angle\" target={limits} propertyKey=\"yawMax\" propertyPath=\"limits.yawMax\" />\r\n            <BoundProperty\r\n                component={NumberInputPropertyLine}\r\n                label=\"Radius Min\"\r\n                description=\"Minimum distance from center\"\r\n                target={limits}\r\n                propertyKey=\"radiusMin\"\r\n                propertyPath=\"limits.radiusMin\"\r\n            />\r\n            <BoundProperty\r\n                component={NumberInputPropertyLine}\r\n                label=\"Radius Max\"\r\n                description=\"Maximum distance from center\"\r\n                target={limits}\r\n                propertyKey=\"radiusMax\"\r\n                propertyPath=\"limits.radiusMax\"\r\n            />\r\n            <BoundProperty\r\n                component={NumberInputPropertyLine}\r\n                label=\"Pinch to Pan Max\"\r\n                description=\"Distance threshold for pinch vs pan mode\"\r\n                target={limits}\r\n                propertyKey=\"pinchToPanMax\"\r\n                propertyPath=\"limits.pinchToPanMax\"\r\n            />\r\n        </>\r\n    );\r\n};\r\n","import { PropertyLine } from \"./propertyLine\";\r\nimport { useEffect, useState } from \"react\";\r\nimport type { FunctionComponent } from \"react\";\r\nimport type { NumberInputPropertyLineProps } from \"./inputPropertyLine\";\r\nimport { TextInput } from \"../../primitives/textInput\";\r\n\r\nexport type HexPropertyLineProps = NumberInputPropertyLineProps & {\r\n    numBits?: 32 | 24 | 16 | 8;\r\n};\r\n\r\nconst MaskValidatorFn = (valueString: string) => {\r\n    if (valueString.substring(0, 2) != \"0x\") {\r\n        if (valueString.substring(0, 1) != \"0\") {\r\n            valueString = \"0x\" + valueString;\r\n        } else {\r\n            valueString = \"0x\" + valueString.substring(1);\r\n        }\r\n    }\r\n\r\n    const valueSubstr = valueString.substring(2);\r\n    if (valueSubstr != \"\" && /^[0-9A-Fa-f]+$/g.test(valueSubstr) == false) {\r\n        return false;\r\n    }\r\n\r\n    if (valueString.length > 10) {\r\n        return false;\r\n    }\r\n\r\n    return true;\r\n};\r\n\r\nconst GetHexValFromNumber = (val: number, numBits?: number): string => {\r\n    const numDigits = (numBits ?? 32) >> 2;\r\n    let valueAsHex = val.toString(16);\r\n    let hex0String = \"\";\r\n    for (let i = 0; i < numDigits - valueAsHex.length; i++) {\r\n        // padding the '0's\r\n        hex0String = \"0\" + hex0String;\r\n    }\r\n    const finalHexValue = hex0String + valueAsHex;\r\n    valueAsHex = \"0x\" + finalHexValue.substring(finalHexValue.length - numDigits);\r\n    return valueAsHex;\r\n};\r\n\r\n/**\r\n * Takes a number representing a Hex value and converts it to a hex string then wraps the TextInput in a PropertyLine\r\n * @param props - PropertyLineProps\r\n * @returns property-line wrapped textbox that converts to/from hex number representation\r\n */\r\nexport const HexPropertyLine: FunctionComponent<HexPropertyLineProps> = (props) => {\r\n    HexPropertyLine.displayName = \"HexPropertyLine\";\r\n    const [hexVal, setHexVal] = useState(GetHexValFromNumber(props.value, props.numBits));\r\n\r\n    const onStrValChange = (val: string) => {\r\n        const numBits = props.numBits ?? 32;\r\n        setHexVal(val);\r\n        props.onChange(parseInt(val) & (2 ** numBits - 1));\r\n    };\r\n\r\n    useEffect(() => {\r\n        setHexVal(GetHexValFromNumber(props.value, props.numBits));\r\n    }, []);\r\n\r\n    return (\r\n        <PropertyLine {...props}>\r\n            <TextInput {...props} validator={MaskValidatorFn} value={hexVal} onChange={onStrValChange} validateOnlyOnBlur={true} />\r\n        </PropertyLine>\r\n    );\r\n};\r\n","import type { FunctionComponent } from \"react\";\r\n\r\nimport type { DropdownOption } from \"shared-ui-components/fluent/primitives/dropdown\";\r\nimport type { ISettingsContext } from \"../../../services/settingsContext\";\r\n\r\nimport { Camera } from \"core/Cameras/camera\";\r\nimport { Collapse } from \"shared-ui-components/fluent/primitives/collapse\";\r\nimport { NumberInputPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/inputPropertyLine\";\r\nimport { SyncedSliderPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/syncedSliderPropertyLine\";\r\nimport { BoundProperty } from \"../boundProperty\";\r\nimport { NumberDropdownPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/dropdownPropertyLine\";\r\nimport { useProperty } from \"../../../hooks/compoundPropertyHooks\";\r\nimport { useAngleConverters } from \"../../../hooks/settingsHooks\";\r\nimport { HexPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/hexPropertyLine\";\r\n\r\nconst CameraModes = [\r\n    { label: \"Perspective\", value: Camera.PERSPECTIVE_CAMERA },\r\n    { label: \"Orthographic\", value: Camera.ORTHOGRAPHIC_CAMERA },\r\n] as const satisfies DropdownOption<number>[];\r\n\r\n/**\r\n * The general properties component for a camera.\r\n * @param props - The component props containing the camera and settings context.\r\n * @returns JSX.Element\r\n */\r\nexport const CameraGeneralProperties: FunctionComponent<{ camera: Camera; settings: ISettingsContext }> = (props) => {\r\n    const { camera, settings } = props;\r\n\r\n    const [toDisplayAngle, fromDisplayAngle, useDegrees] = useAngleConverters(settings);\r\n\r\n    const mode = useProperty(camera, \"mode\");\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty component={NumberInputPropertyLine} label=\"Near Plane\" description=\"Anything closer than this will not be drawn.\" target={camera} propertyKey=\"minZ\" />\r\n            <BoundProperty component={NumberInputPropertyLine} label=\"Far Plane\" description=\"Anything further than this will not be drawn.\" target={camera} propertyKey=\"maxZ\" />\r\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"Inertia\" target={camera} propertyKey=\"inertia\" min={0} max={1} step={0.01} />\r\n            <BoundProperty component={HexPropertyLine} label=\"Layer Mask\" target={camera} propertyKey=\"layerMask\" />\r\n            <BoundProperty component={NumberDropdownPropertyLine} label=\"Mode\" options={CameraModes} target={camera} propertyKey=\"mode\" />\r\n            <Collapse visible={mode === Camera.PERSPECTIVE_CAMERA}>\r\n                <BoundProperty\r\n                    component={SyncedSliderPropertyLine}\r\n                    label=\"FOV\"\r\n                    description={`Field of view in ${useDegrees ? \"degrees\" : \"radians\"}`}\r\n                    target={camera}\r\n                    propertyKey=\"fov\"\r\n                    min={toDisplayAngle(0.1)}\r\n                    max={toDisplayAngle(Math.PI)}\r\n                    step={toDisplayAngle(0.01)}\r\n                    convertTo={toDisplayAngle}\r\n                    convertFrom={fromDisplayAngle}\r\n                />\r\n            </Collapse>\r\n            <Collapse visible={mode === Camera.ORTHOGRAPHIC_CAMERA}>\r\n                <div>\r\n                    <BoundProperty component={NumberInputPropertyLine} label=\"Left\" target={camera} step={0.1} propertyKey=\"orthoLeft\" nullable defaultValue={0} />\r\n                    <BoundProperty component={NumberInputPropertyLine} label=\"Right\" target={camera} step={0.1} propertyKey=\"orthoRight\" nullable defaultValue={0} />\r\n                    <BoundProperty component={NumberInputPropertyLine} label=\"Top\" target={camera} step={0.1} propertyKey=\"orthoTop\" nullable defaultValue={0} />\r\n                    <BoundProperty component={NumberInputPropertyLine} label=\"Bottom\" target={camera} step={0.1} propertyKey=\"orthoBottom\" nullable defaultValue={0} />\r\n                </div>\r\n            </Collapse>\r\n        </>\r\n    );\r\n};\r\n","import type { FunctionComponent } from \"react\";\r\n\r\nimport type { FollowCamera } from \"core/index\";\r\n\r\nimport { NumberInputPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/inputPropertyLine\";\r\nimport { BoundProperty } from \"../boundProperty\";\r\n\r\nexport const FollowCameraTransformProperties: FunctionComponent<{ camera: FollowCamera }> = (props) => {\r\n    const { camera } = props;\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty component={NumberInputPropertyLine} label=\"Radius\" target={camera} propertyKey=\"radius\" />\r\n            <BoundProperty component={NumberInputPropertyLine} label=\"Rotation Offset\" target={camera} propertyKey=\"rotationOffset\" />\r\n            <BoundProperty component={NumberInputPropertyLine} label=\"Height Offset\" target={camera} propertyKey=\"heightOffset\" />\r\n            <BoundProperty component={NumberInputPropertyLine} label=\"Camera Acceleration\" target={camera} propertyKey=\"cameraAcceleration\" />\r\n        </>\r\n    );\r\n};\r\n\r\nexport const FollowCameraLimitsProperties: FunctionComponent<{ camera: FollowCamera }> = (props) => {\r\n    const { camera } = props;\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty component={NumberInputPropertyLine} label=\"Lower Radius Limit\" target={camera} propertyKey=\"lowerRadiusLimit\" nullable defaultValue={0} />\r\n            <BoundProperty component={NumberInputPropertyLine} label=\"Upper Radius Limit\" target={camera} propertyKey=\"upperRadiusLimit\" nullable defaultValue={0} />\r\n            <BoundProperty\r\n                component={NumberInputPropertyLine}\r\n                label=\"Lower Rotation Offset Limit\"\r\n                target={camera}\r\n                propertyKey=\"lowerRotationOffsetLimit\"\r\n                nullable\r\n                defaultValue={0}\r\n            />\r\n            <BoundProperty\r\n                component={NumberInputPropertyLine}\r\n                label=\"Upper Rotation Offset Limit\"\r\n                target={camera}\r\n                propertyKey=\"upperRotationOffsetLimit\"\r\n                nullable\r\n                defaultValue={0}\r\n            />\r\n            <BoundProperty component={NumberInputPropertyLine} label=\"Lower Height Offset Limit\" target={camera} propertyKey=\"lowerHeightOffsetLimit\" nullable defaultValue={0} />\r\n            <BoundProperty component={NumberInputPropertyLine} label=\"Upper Height Offset Limit\" target={camera} propertyKey=\"upperHeightOffsetLimit\" nullable defaultValue={0} />\r\n            <BoundProperty component={NumberInputPropertyLine} label=\"Max Camera Speed\" target={camera} propertyKey=\"maxCameraSpeed\" />\r\n        </>\r\n    );\r\n};\r\n","import type { FunctionComponent } from \"react\";\r\n\r\nimport type { FreeCamera } from \"core/index\";\r\nimport type { ISettingsContext } from \"../../../services/settingsContext\";\r\n\r\nimport { NumberInputPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/inputPropertyLine\";\r\nimport { SwitchPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/switchPropertyLine\";\r\nimport { QuaternionPropertyLine, RotationVectorPropertyLine, Vector3PropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/vectorPropertyLine\";\r\nimport { useProperty } from \"../../../hooks/compoundPropertyHooks\";\r\nimport { useObservableState } from \"../../../hooks/observableHooks\";\r\nimport { BoundProperty, Property } from \"../boundProperty\";\r\n\r\nexport const FreeCameraTransformProperties: FunctionComponent<{ camera: FreeCamera; settings: ISettingsContext }> = (props) => {\r\n    const { camera, settings } = props;\r\n\r\n    const useDegrees = useObservableState(() => settings.useDegrees, settings.settingsChangedObservable);\r\n    const useEuler = useObservableState(() => settings.useEuler, settings.settingsChangedObservable);\r\n\r\n    const quatRotation = useProperty(camera, \"rotationQuaternion\");\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty component={Vector3PropertyLine} label=\"Position\" target={camera} propertyKey=\"position\" />\r\n            {quatRotation ? (\r\n                <Property\r\n                    component={QuaternionPropertyLine}\r\n                    propertyPath=\"rotationQuaternion\"\r\n                    label=\"Rotation (Quat)\"\r\n                    value={quatRotation}\r\n                    onChange={(val) => (camera.rotationQuaternion = val)}\r\n                    useDegrees={useDegrees}\r\n                    useEuler={useEuler}\r\n                />\r\n            ) : (\r\n                <BoundProperty component={RotationVectorPropertyLine} label=\"Rotation\" target={camera} propertyKey=\"rotation\" useDegrees={useDegrees} />\r\n            )}\r\n        </>\r\n    );\r\n};\r\n\r\nexport const FreeCameraControlProperties: FunctionComponent<{ camera: FreeCamera }> = (props) => {\r\n    const { camera } = props;\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty component={NumberInputPropertyLine} label=\"Angular Sensitivity \" target={camera} propertyKey=\"angularSensibility\" />\r\n        </>\r\n    );\r\n};\r\n\r\nexport const FreeCameraCollisionProperties: FunctionComponent<{ camera: FreeCamera }> = (props) => {\r\n    const { camera } = props;\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Check Collisions\" target={camera} propertyKey=\"checkCollisions\" />\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Apply Gravity\" target={camera} propertyKey=\"applyGravity\" />\r\n            <BoundProperty component={Vector3PropertyLine} label=\"Ellipsoid\" target={camera} propertyKey=\"ellipsoid\" />\r\n            <BoundProperty component={Vector3PropertyLine} label=\"Ellipsoid Offset\" target={camera} propertyKey=\"ellipsoidOffset\" />\r\n        </>\r\n    );\r\n};\r\n","import type { FunctionComponent } from \"react\";\r\n\r\nimport type { TargetCamera } from \"core/index\";\r\n\r\nimport { NumberInputPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/inputPropertyLine\";\r\nimport { Vector3PropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/vectorPropertyLine\";\r\nimport { BoundProperty } from \"../boundProperty\";\r\n\r\nexport const TargetCameraTransformProperties: FunctionComponent<{ camera: TargetCamera }> = (props) => {\r\n    const { camera } = props;\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty component={Vector3PropertyLine} label=\"Target\" description=\"The point the camera looks at.\" target={camera} propertyKey=\"target\" />\r\n        </>\r\n    );\r\n};\r\n\r\nexport const TargetCameraControlProperties: FunctionComponent<{ camera: TargetCamera }> = (props) => {\r\n    const { camera } = props;\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty component={NumberInputPropertyLine} label=\"Speed\" target={camera} propertyKey=\"speed\" />\r\n        </>\r\n    );\r\n};\r\n","import type { ServiceDefinition } from \"../../../modularity/serviceDefinition\";\r\nimport type { ISettingsContext } from \"../../../services/settingsContext\";\r\nimport type { IPropertiesService } from \"./propertiesService\";\r\n\r\n// import { Scene } from \"core/scene\";\r\nimport { ArcRotateCamera } from \"core/Cameras/arcRotateCamera\";\r\nimport { Camera } from \"core/Cameras/camera\";\r\nimport { FollowCamera } from \"core/Cameras/followCamera\";\r\nimport { FreeCamera } from \"core/Cameras/freeCamera\";\r\nimport { GeospatialCamera } from \"core/Cameras/geospatialCamera\";\r\nimport { TargetCamera } from \"core/Cameras/targetCamera\";\r\nimport {\r\n    ArcRotateCameraTransformProperties,\r\n    ArcRotateCameraBehaviorsProperties,\r\n    ArcRotateCameraCollisionProperties,\r\n    ArcRotateCameraControlProperties,\r\n    ArcRotateCameraLimitsProperties,\r\n} from \"../../../components/properties/cameras/arcRotateCameraProperties\";\r\nimport {\r\n    GeospatialCameraTransformProperties,\r\n    GeospatialCameraCollisionProperties,\r\n    GeospatialCameraLimitsProperties,\r\n} from \"../../../components/properties/cameras/geospatialCameraProperties\";\r\nimport { CameraGeneralProperties } from \"../../../components/properties/cameras/cameraProperties\";\r\nimport { FollowCameraLimitsProperties, FollowCameraTransformProperties } from \"../../../components/properties/cameras/followCameraProperties\";\r\nimport { FreeCameraCollisionProperties, FreeCameraControlProperties, FreeCameraTransformProperties } from \"../../../components/properties/cameras/freeCameraProperties\";\r\nimport { TargetCameraControlProperties, TargetCameraTransformProperties } from \"../../../components/properties/cameras/targetCameraProperties\";\r\nimport { SettingsContextIdentity } from \"../../../services/settingsContext\";\r\nimport { PropertiesServiceIdentity } from \"./propertiesService\";\r\n\r\nexport const ControlPropertiesSectionIdentity = Symbol(\"Control\");\r\nexport const CollisionPropertiesSectionIdentity = Symbol(\"Collision\");\r\nexport const LimitsPropertiesSectionIdentity = Symbol(\"Limits\");\r\nexport const BehaviorsPropertiesSectionIdentity = Symbol(\"Behaviors\");\r\n\r\nexport const CameraPropertiesServiceDefinition: ServiceDefinition<[], [IPropertiesService, ISettingsContext]> = {\r\n    friendlyName: \"Camera Properties\",\r\n    consumes: [PropertiesServiceIdentity, SettingsContextIdentity],\r\n    factory: (propertiesService, settingsContext) => {\r\n        const cameraContentRegistration = propertiesService.addSectionContent({\r\n            key: \"Camera Properties\",\r\n            predicate: (entity: unknown) => entity instanceof Camera,\r\n            content: [\r\n                {\r\n                    section: \"General\",\r\n                    component: ({ context }) => <CameraGeneralProperties camera={context} settings={settingsContext} />,\r\n                },\r\n            ],\r\n        });\r\n\r\n        const targetCameraContentRegistration = propertiesService.addSectionContent({\r\n            key: \"Target Camera Properties\",\r\n            predicate: (entity: unknown) => entity instanceof TargetCamera,\r\n            content: [\r\n                {\r\n                    section: \"Transform\",\r\n                    component: ({ context }) => <TargetCameraTransformProperties camera={context} />,\r\n                },\r\n                {\r\n                    section: \"Control\",\r\n                    component: ({ context }) => <TargetCameraControlProperties camera={context} />,\r\n                },\r\n            ],\r\n        });\r\n\r\n        const arcRotateCameraContentRegistration = propertiesService.addSectionContent({\r\n            key: \"Arc Rotate Camera Properties\",\r\n            predicate: (entity: unknown) => entity instanceof ArcRotateCamera,\r\n            content: [\r\n                {\r\n                    section: \"Transform\",\r\n                    component: ({ context }) => <ArcRotateCameraTransformProperties camera={context} settings={settingsContext} />,\r\n                },\r\n                {\r\n                    section: \"Control\",\r\n                    component: ({ context }) => <ArcRotateCameraControlProperties camera={context} />,\r\n                },\r\n                {\r\n                    section: \"Collision\",\r\n                    component: ({ context }) => <ArcRotateCameraCollisionProperties camera={context} />,\r\n                },\r\n                {\r\n                    section: \"Limits\",\r\n                    component: ({ context }) => <ArcRotateCameraLimitsProperties camera={context} />,\r\n                },\r\n                {\r\n                    section: \"Behaviors\",\r\n                    component: ({ context }) => <ArcRotateCameraBehaviorsProperties camera={context} />,\r\n                },\r\n            ],\r\n        });\r\n\r\n        const freeCameraContentRegistration = propertiesService.addSectionContent({\r\n            key: \"Free Camera Properties\",\r\n            predicate: (entity: unknown) => entity instanceof FreeCamera,\r\n            content: [\r\n                {\r\n                    section: \"Transform\",\r\n                    component: ({ context }) => <FreeCameraTransformProperties camera={context} settings={settingsContext} />,\r\n                },\r\n                {\r\n                    section: \"Control\",\r\n                    component: ({ context }) => <FreeCameraControlProperties camera={context} />,\r\n                },\r\n                {\r\n                    section: \"Collision\",\r\n                    component: ({ context }) => <FreeCameraCollisionProperties camera={context} />,\r\n                },\r\n            ],\r\n        });\r\n\r\n        const followCameraContentRegistration = propertiesService.addSectionContent({\r\n            key: \"Follow Camera Properties\",\r\n            predicate: (entity: unknown) => entity instanceof FollowCamera,\r\n            content: [\r\n                {\r\n                    section: \"Transform\",\r\n                    component: ({ context }) => <FollowCameraTransformProperties camera={context} />,\r\n                },\r\n                {\r\n                    section: \"Limits\",\r\n                    component: ({ context }) => <FollowCameraLimitsProperties camera={context} />,\r\n                },\r\n            ],\r\n        });\r\n\r\n        const geospatialCameraContentRegistration = propertiesService.addSectionContent({\r\n            key: \"Geospatial Camera Properties\",\r\n            predicate: (entity: unknown) => entity instanceof GeospatialCamera,\r\n            content: [\r\n                {\r\n                    section: \"Transform\",\r\n                    component: ({ context }) => <GeospatialCameraTransformProperties camera={context} settings={settingsContext} />,\r\n                },\r\n                {\r\n                    section: \"Collision\",\r\n                    component: ({ context }) => <GeospatialCameraCollisionProperties camera={context} />,\r\n                },\r\n                {\r\n                    section: \"Limits\",\r\n                    component: ({ context }) => <GeospatialCameraLimitsProperties camera={context} />,\r\n                },\r\n            ],\r\n        });\r\n\r\n        return {\r\n            dispose: () => {\r\n                cameraContentRegistration.dispose();\r\n                targetCameraContentRegistration.dispose();\r\n                arcRotateCameraContentRegistration.dispose();\r\n                freeCameraContentRegistration.dispose();\r\n                followCameraContentRegistration.dispose();\r\n                geospatialCameraContentRegistration.dispose();\r\n            },\r\n        };\r\n    },\r\n};\r\n","import type { FunctionComponent } from \"react\";\r\n\r\nimport type { IDisposable } from \"core/index\";\r\n\r\nimport { DeleteRegular } from \"@fluentui/react-icons\";\r\nimport { useMemo } from \"react\";\r\n\r\nimport { ButtonLine } from \"shared-ui-components/fluent/hoc/buttonLine\";\r\nimport { TextInputPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/inputPropertyLine\";\r\nimport { StringifiedPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/stringifiedPropertyLine\";\r\nimport { TextPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/textPropertyLine\";\r\nimport { GetPropertyDescriptor, IsPropertyReadonly } from \"../../instrumentation/propertyInstrumentation\";\r\nimport { BoundProperty } from \"./boundProperty\";\r\n\r\nfunction IsEntityWithProperty<ObjectT, PropertyT extends keyof ObjectT>(entity: ObjectT, property: PropertyT): entity is ObjectT & Required<Pick<ObjectT, PropertyT>> {\r\n    return !!entity && typeof entity === \"object\" && property in entity && entity[property] !== undefined;\r\n}\r\n\r\ntype CommonEntity = {\r\n    readonly id?: number;\r\n    readonly uniqueId?: number;\r\n    name?: string;\r\n    getClassName?: () => string;\r\n};\r\n\r\nexport function IsCommonEntity(entity: unknown): entity is CommonEntity {\r\n    return (\r\n        IsEntityWithProperty(entity as CommonEntity, \"id\") ||\r\n        IsEntityWithProperty(entity as CommonEntity, \"uniqueId\") ||\r\n        IsEntityWithProperty(entity as CommonEntity, \"name\") ||\r\n        IsEntityWithProperty(entity as CommonEntity, \"getClassName\")\r\n    );\r\n}\r\n\r\nexport const CommonGeneralProperties: FunctionComponent<{ commonEntity: CommonEntity }> = (props) => {\r\n    const { commonEntity } = props;\r\n\r\n    const namePropertyDescriptor = useMemo(() => GetPropertyDescriptor(commonEntity, \"name\")?.[1], [commonEntity]);\r\n    const isNameReadonly = !namePropertyDescriptor || IsPropertyReadonly(namePropertyDescriptor);\r\n\r\n    const className = commonEntity.getClassName?.();\r\n\r\n    return (\r\n        <>\r\n            {IsEntityWithProperty(commonEntity, \"id\") && (\r\n                <BoundProperty component={StringifiedPropertyLine} label=\"ID\" description=\"The id of the node.\" target={commonEntity} propertyKey=\"id\" />\r\n            )}\r\n            {IsEntityWithProperty(commonEntity, \"name\") && (\r\n                <BoundProperty\r\n                    component={isNameReadonly ? TextPropertyLine : TextInputPropertyLine}\r\n                    label=\"Name\"\r\n                    description=\"The name of the node.\"\r\n                    target={commonEntity}\r\n                    propertyKey=\"name\"\r\n                />\r\n            )}\r\n            {IsEntityWithProperty(commonEntity, \"uniqueId\") && (\r\n                <BoundProperty component={StringifiedPropertyLine} label=\"Unique ID\" description=\"The unique id of the node.\" target={commonEntity} propertyKey=\"uniqueId\" />\r\n            )}\r\n            {className !== undefined && <TextPropertyLine label=\"Class\" description=\"The class of the node.\" value={className} />}\r\n        </>\r\n    );\r\n};\r\n\r\nexport const DisposableGeneralProperties: FunctionComponent<{ disposableEntity: IDisposable }> = (props) => {\r\n    const { disposableEntity } = props;\r\n\r\n    return (\r\n        <>\r\n            <ButtonLine label=\"Dispose\" icon={DeleteRegular} onClick={() => disposableEntity.dispose()} />\r\n        </>\r\n    );\r\n};\r\n","import type { IDisposable } from \"core/index\";\r\nimport type { ServiceDefinition } from \"../../../modularity/serviceDefinition\";\r\nimport type { IPropertiesService } from \"./propertiesService\";\r\n\r\nimport { Scene } from \"core/scene\";\r\n\r\nimport { CommonGeneralProperties, DisposableGeneralProperties, IsCommonEntity } from \"../../../components/properties/commonGeneralProperties\";\r\nimport { PropertiesServiceIdentity } from \"./propertiesService\";\r\n\r\ntype CommonEntity = {\r\n    id?: number;\r\n    name?: string;\r\n    uniqueId?: number;\r\n    getClassName?: () => string;\r\n};\r\n\r\nexport const CommonPropertiesServiceDefinition: ServiceDefinition<[], [IPropertiesService]> = {\r\n    friendlyName: \"Common Properties\",\r\n    consumes: [PropertiesServiceIdentity],\r\n    factory: (propertiesService) => {\r\n        const commonContentRegistration = propertiesService.addSectionContent({\r\n            key: \"Common Properties\",\r\n            predicate: (entity: unknown): entity is CommonEntity => {\r\n                // Common properties are not useful for the scene.\r\n                if (entity instanceof Scene) {\r\n                    return false;\r\n                }\r\n\r\n                return IsCommonEntity(entity);\r\n            },\r\n            content: [\r\n                {\r\n                    section: \"General\",\r\n                    component: ({ context }) => <CommonGeneralProperties commonEntity={context} />,\r\n                },\r\n            ],\r\n        });\r\n\r\n        const disposableContentRegistration = propertiesService.addSectionContent({\r\n            key: \"Disposable Properties\",\r\n            predicate: (entity: unknown): entity is IDisposable => {\r\n                const disposable = entity as Partial<IDisposable>;\r\n                return typeof disposable.dispose === \"function\";\r\n            },\r\n            content: [\r\n                {\r\n                    section: \"General\",\r\n                    order: 100000,\r\n                    component: ({ context }) => <DisposableGeneralProperties disposableEntity={context} />,\r\n                },\r\n            ],\r\n        });\r\n\r\n        return {\r\n            dispose: () => {\r\n                commonContentRegistration.dispose();\r\n                disposableContentRegistration.dispose();\r\n            },\r\n        };\r\n    },\r\n};\r\n","import type { ServiceDefinition } from \"../../../modularity/serviceDefinition\";\r\nimport type { IPropertiesService } from \"./propertiesService\";\r\n\r\nimport { PropertiesServiceIdentity } from \"./propertiesService\";\r\n\r\nexport const EffectLayerPropertiesServiceDefinition: ServiceDefinition<[], [IPropertiesService]> = {\r\n    friendlyName: \"Effect Layer Properties\",\r\n    consumes: [PropertiesServiceIdentity],\r\n    factory: (propertiesService) => {\r\n        // TODO: Add content registrations for each section and for each type in the EffectLayer class hierarchy.\r\n\r\n        return {\r\n            dispose: () => {\r\n                // TODO: Dispose content registrations.\r\n            },\r\n        };\r\n    },\r\n};\r\n","import type { FrameGraph } from \"core/index\";\r\n\r\nimport type { FunctionComponent } from \"react\";\r\n\r\nimport { EditRegular, PlayRegular } from \"@fluentui/react-icons\";\r\n\r\nimport { ButtonLine } from \"shared-ui-components/fluent/hoc/buttonLine\";\r\nimport { SwitchPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/switchPropertyLine\";\r\nimport { useProperty } from \"../../../hooks/compoundPropertyHooks\";\r\nimport { BoundProperty } from \"../boundProperty\";\r\n\r\nexport const FrameGraphTaskProperties: FunctionComponent<{ frameGraph: FrameGraph }> = (props) => {\r\n    const { frameGraph } = props;\r\n    const tasks = frameGraph.tasks;\r\n\r\n    return (\r\n        <>\r\n            {tasks.length > 0 &&\r\n                tasks.map((task, i) => {\r\n                    return (\r\n                        <BoundProperty\r\n                            component={SwitchPropertyLine}\r\n                            key={\"task\" + i}\r\n                            label={i + 1 + \". \" + task.name}\r\n                            target={frameGraph.tasks[i]}\r\n                            propertyKey=\"disabled\"\r\n                            convertTo={(v) => !v}\r\n                            convertFrom={(v) => !v}\r\n                        ></BoundProperty>\r\n                    );\r\n                })}\r\n        </>\r\n    );\r\n};\r\n\r\nexport const FrameGraphGeneralProperties: FunctionComponent<{ frameGraph: FrameGraph }> = (props) => {\r\n    const { frameGraph } = props;\r\n    const isSceneFrameGraph = useProperty(frameGraph.scene, \"frameGraph\");\r\n    const renderGraph = frameGraph.getLinkedNodeRenderGraph();\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty\r\n                component={SwitchPropertyLine}\r\n                label=\"Optimize Texture Allocation\"\r\n                description=\"Whether to optimize texture allocation.\"\r\n                target={frameGraph}\r\n                propertyKey=\"optimizeTextureAllocation\"\r\n            ></BoundProperty>\r\n            {isSceneFrameGraph !== frameGraph && <ButtonLine onClick={() => (frameGraph.scene.frameGraph = frameGraph)} label=\"Make Active\" icon={PlayRegular} />}\r\n            {renderGraph && (\r\n                <ButtonLine\r\n                    label=\"Edit Graph\"\r\n                    icon={EditRegular}\r\n                    onClick={async () => {\r\n                        // TODO: Figure out how to get all the various build steps to work with this.\r\n                        //       See the initial attempt here: https://github.com/BabylonJS/Babylon.js/pull/17646\r\n                        // const { NodeRenderGraphEditor } = await import(\"node-render-graph-editor/nodeRenderGraphEditor\");\r\n                        // NodeRenderGraphEditor.Show({ nodeRenderGraph: renderGraph, hostScene: frameGraph.scene });\r\n                        await renderGraph.edit({ nodeRenderGraphEditorConfig: { hostScene: frameGraph.scene } });\r\n                    }}\r\n                ></ButtonLine>\r\n            )}\r\n        </>\r\n    );\r\n};\r\n","import { FrameGraph } from \"core/FrameGraph/frameGraph\";\r\nimport type { ServiceDefinition } from \"../../../modularity/serviceDefinition\";\r\nimport type { IPropertiesService } from \"./propertiesService\";\r\n\r\nimport { PropertiesServiceIdentity } from \"./propertiesService\";\r\nimport { FrameGraphTaskProperties, FrameGraphGeneralProperties } from \"../../../components/properties/frameGraph/frameGraphProperties\";\r\n\r\nexport const FrameGraphPropertiesServiceDefinition: ServiceDefinition<[], [IPropertiesService]> = {\r\n    friendlyName: \"Frame Graph Properties\",\r\n    consumes: [PropertiesServiceIdentity],\r\n    factory: (propertiesService) => {\r\n        const frameGraphContentRegistration = propertiesService.addSectionContent({\r\n            key: \"Frame Graph General Properties\",\r\n            predicate: (entity: unknown) => entity instanceof FrameGraph,\r\n            content: [\r\n                {\r\n                    section: \"General\",\r\n                    component: ({ context }) => <FrameGraphGeneralProperties frameGraph={context} />,\r\n                },\r\n                {\r\n                    section: \"Tasks\",\r\n                    component: ({ context }) => <FrameGraphTaskProperties frameGraph={context} />,\r\n                },\r\n            ],\r\n        });\r\n\r\n        return {\r\n            dispose: () => {\r\n                frameGraphContentRegistration.dispose();\r\n            },\r\n        };\r\n    },\r\n};\r\n","import type { RectAreaLight } from \"core/index\";\r\nimport type { FunctionComponent } from \"react\";\r\n\r\nimport { Color3PropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/colorPropertyLine\";\r\nimport { NumberInputPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/inputPropertyLine\";\r\nimport { Vector3PropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/vectorPropertyLine\";\r\n\r\nimport { BoundProperty } from \"../boundProperty\";\r\n\r\nexport const AreaLightSetupProperties: FunctionComponent<{ context: RectAreaLight }> = ({ context: areaLight }) => {\r\n    return (\r\n        <>\r\n            <BoundProperty label=\"Diffuse\" component={Color3PropertyLine} target={areaLight} propertyKey=\"diffuse\" />\r\n            <BoundProperty label=\"Specular\" component={Color3PropertyLine} target={areaLight} propertyKey=\"specular\" />\r\n            <BoundProperty label=\"Position\" component={Vector3PropertyLine} target={areaLight} propertyKey=\"position\" />\r\n            <BoundProperty label=\"Width\" component={NumberInputPropertyLine} target={areaLight} propertyKey=\"width\" />\r\n            <BoundProperty label=\"Height\" component={NumberInputPropertyLine} target={areaLight} propertyKey=\"height\" />\r\n            <BoundProperty label=\"Intensity\" component={NumberInputPropertyLine} target={areaLight} propertyKey=\"intensity\" />\r\n        </>\r\n    );\r\n};\r\n","import type { DirectionalLight, Scene } from \"core/index\";\r\nimport type { FunctionComponent } from \"react\";\r\nimport type { Observer } from \"core/Misc/observable\";\r\n\r\nimport { useState } from \"react\";\r\n\r\nimport { CascadedShadowGenerator } from \"core/Lights/Shadows/cascadedShadowGenerator\";\r\nimport { DirectionalLightFrustumViewer } from \"core/Debug/directionalLightFrustumViewer\";\r\n\r\nimport { Color3PropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/colorPropertyLine\";\r\nimport { NumberInputPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/inputPropertyLine\";\r\nimport { SwitchPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/switchPropertyLine\";\r\nimport { Vector3PropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/vectorPropertyLine\";\r\n\r\nimport { BoundProperty } from \"../boundProperty\";\r\n\r\nexport const DirectionalLightSetupProperties: FunctionComponent<{ context: DirectionalLight }> = ({ context: directionalLight }) => {\r\n    const scene = directionalLight.getScene();\r\n    const camera = scene.activeCamera;\r\n\r\n    // Check if using CascadedShadowGenerator to hide autoCalcShadowZBounds\r\n    let generator = directionalLight.getShadowGenerator(camera) ?? null;\r\n    if (generator === null) {\r\n        const shadowGenerators = directionalLight.getShadowGenerators();\r\n        if (shadowGenerators && shadowGenerators.size > 0) {\r\n            generator = shadowGenerators.values().next().value ?? null;\r\n        }\r\n    }\r\n    const hideAutoCalcShadowZBounds = generator instanceof CascadedShadowGenerator;\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty label=\"Position\" component={Vector3PropertyLine} target={directionalLight} propertyKey=\"position\" />\r\n            <BoundProperty label=\"Direction\" component={Vector3PropertyLine} target={directionalLight} propertyKey=\"direction\" />\r\n            <BoundProperty label=\"Diffuse\" component={Color3PropertyLine} target={directionalLight} propertyKey=\"diffuse\" />\r\n            <BoundProperty label=\"Specular\" component={Color3PropertyLine} target={directionalLight} propertyKey=\"specular\" />\r\n            <BoundProperty label=\"Intensity\" component={NumberInputPropertyLine} target={directionalLight} propertyKey=\"intensity\" />\r\n            <BoundProperty\r\n                label=\"Auto Update Extends\"\r\n                description=\"Automatically compute the projection matrix to fit the light's shadow frustum to the scene.\"\r\n                component={SwitchPropertyLine}\r\n                target={directionalLight}\r\n                propertyKey=\"autoUpdateExtends\"\r\n            />\r\n            {!hideAutoCalcShadowZBounds && (\r\n                <BoundProperty\r\n                    label=\"Auto Calc Shadow ZBounds\"\r\n                    description=\"Automatically compute the shadow min/max z values.\"\r\n                    component={SwitchPropertyLine}\r\n                    target={directionalLight}\r\n                    propertyKey=\"autoCalcShadowZBounds\"\r\n                />\r\n            )}\r\n            <BoundProperty label=\"Ortho Left\" component={NumberInputPropertyLine} target={directionalLight} propertyKey=\"orthoLeft\" />\r\n            <BoundProperty label=\"Ortho Right\" component={NumberInputPropertyLine} target={directionalLight} propertyKey=\"orthoRight\" />\r\n            <BoundProperty label=\"Ortho Bottom\" component={NumberInputPropertyLine} target={directionalLight} propertyKey=\"orthoBottom\" />\r\n            <BoundProperty label=\"Ortho Top\" component={NumberInputPropertyLine} target={directionalLight} propertyKey=\"orthoTop\" />\r\n        </>\r\n    );\r\n};\r\n\r\ninterface IFrustumViewerState {\r\n    viewer: DirectionalLightFrustumViewer;\r\n    observer: Observer<Scene>;\r\n}\r\n\r\nconst FrustumViewerMap = new WeakMap<DirectionalLight, IFrustumViewerState>();\r\nexport const DirectionalLightDebugProperties: FunctionComponent<{ context: DirectionalLight }> = ({ context: directionalLight }) => {\r\n    const [displayFrustum, setDisplayFrustum] = useState(FrustumViewerMap.has(directionalLight));\r\n\r\n    const toggleDisplayFrustum = () => {\r\n        const light = directionalLight;\r\n        const camera = light.getScene().activeCamera;\r\n        const existingState = FrustumViewerMap.get(light);\r\n\r\n        if (existingState) {\r\n            // Clean up existing frustum viewer\r\n            light.getScene().onAfterRenderObservable.remove(existingState.observer);\r\n            existingState.viewer.dispose();\r\n            FrustumViewerMap.delete(light);\r\n            setDisplayFrustum(false);\r\n        } else {\r\n            // Create new frustum viewer\r\n            const viewer = new DirectionalLightFrustumViewer(light, camera);\r\n            const observer = light.getScene().onAfterRenderObservable.add(() => {\r\n                viewer.update();\r\n            });\r\n            FrustumViewerMap.set(light, { viewer, observer });\r\n            setDisplayFrustum(true);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <SwitchPropertyLine label=\"Display Frustum\" value={displayFrustum} onChange={toggleDisplayFrustum} />\r\n        </>\r\n    );\r\n};\r\n","import type { HemisphericLight } from \"core/index\";\r\nimport type { FunctionComponent } from \"react\";\r\n\r\nimport { Color3PropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/colorPropertyLine\";\r\nimport { NumberInputPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/inputPropertyLine\";\r\nimport { Vector3PropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/vectorPropertyLine\";\r\n\r\nimport { BoundProperty } from \"../boundProperty\";\r\n\r\nexport const HemisphericLightSetupProperties: FunctionComponent<{ context: HemisphericLight }> = ({ context: hemisphericLight }) => {\r\n    return (\r\n        <>\r\n            <BoundProperty label=\"Direction\" component={Vector3PropertyLine} target={hemisphericLight} propertyKey=\"direction\" />\r\n            <BoundProperty label=\"Diffuse\" component={Color3PropertyLine} target={hemisphericLight} propertyKey=\"diffuse\" />\r\n            <BoundProperty label=\"Ground\" component={Color3PropertyLine} target={hemisphericLight} propertyKey=\"groundColor\" />\r\n            <BoundProperty label=\"Intensity\" component={NumberInputPropertyLine} target={hemisphericLight} propertyKey=\"intensity\" />\r\n        </>\r\n    );\r\n};\r\n","import type { PointLight } from \"core/index\";\r\nimport type { FunctionComponent } from \"react\";\r\n\r\nimport { Color3PropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/colorPropertyLine\";\r\nimport { NumberInputPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/inputPropertyLine\";\r\nimport { Vector3PropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/vectorPropertyLine\";\r\n\r\nimport { BoundProperty } from \"../boundProperty\";\r\n\r\nexport const PointLightSetupProperties: FunctionComponent<{ context: PointLight }> = ({ context: pointLight }) => {\r\n    return (\r\n        <>\r\n            <BoundProperty label=\"Diffuse\" component={Color3PropertyLine} target={pointLight} propertyKey=\"diffuse\" />\r\n            <BoundProperty label=\"Specular\" component={Color3PropertyLine} target={pointLight} propertyKey=\"specular\" />\r\n            <BoundProperty label=\"Position\" component={Vector3PropertyLine} target={pointLight} propertyKey=\"position\" />\r\n            <BoundProperty label=\"Intensity\" component={NumberInputPropertyLine} target={pointLight} propertyKey=\"intensity\" />\r\n        </>\r\n    );\r\n};\r\n","import type { FunctionComponent } from \"react\";\r\n\r\nimport type { Camera, IShadowGenerator, Nullable, ShadowLight } from \"core/index\";\r\nimport type { DropdownOption } from \"shared-ui-components/fluent/primitives/dropdown\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\n\r\nimport { DirectionalLight } from \"core/Lights/directionalLight\";\r\nimport { CascadedShadowGenerator } from \"core/Lights/Shadows/cascadedShadowGenerator\";\r\nimport { ShadowGenerator } from \"core/Lights/Shadows/shadowGenerator\";\r\nimport { ButtonLine } from \"shared-ui-components/fluent/hoc/buttonLine\";\r\nimport { NumberDropdownPropertyLine, StringDropdownPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/dropdownPropertyLine\";\r\nimport { NumberInputPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/inputPropertyLine\";\r\nimport { SwitchPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/switchPropertyLine\";\r\nimport { SyncedSliderPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/syncedSliderPropertyLine\";\r\nimport { Collapse } from \"shared-ui-components/fluent/primitives/collapse\";\r\nimport { useObservableState } from \"../../../hooks/observableHooks\";\r\nimport { useProperty } from \"../../../hooks/compoundPropertyHooks\";\r\nimport { BoundProperty } from \"../boundProperty\";\r\n\r\nimport \"core/Lights/Shadows/shadowGeneratorSceneComponent\";\r\n\r\ntype ShadowGeneratorType = \"Default\" | \"Cascade\";\r\n\r\nconst DefaultShadowGeneratorOptions = [{ label: \"Shadow Generator\", value: \"Default\" satisfies ShadowGeneratorType }] as const satisfies DropdownOption<ShadowGeneratorType>[];\r\n\r\nconst DirectionalLightGeneratorOptions = [\r\n    ...DefaultShadowGeneratorOptions,\r\n    { label: \"Cascaded Shadow Generator\", value: \"Cascade\" satisfies ShadowGeneratorType },\r\n] as const satisfies DropdownOption<ShadowGeneratorType>[];\r\n\r\nconst MapSizeOptions = [\r\n    { label: \"4096 x 4096\", value: 4096 },\r\n    { label: \"2048 x 2048\", value: 2048 },\r\n    { label: \"1024 x 1024\", value: 1024 },\r\n    { label: \"512 x 512\", value: 512 },\r\n    { label: \"256 x 256\", value: 256 },\r\n] as const satisfies DropdownOption<number>[];\r\n\r\nconst BlurModeOptions = [\r\n    { label: \"None\", value: ShadowGenerator.FILTER_NONE },\r\n    { label: \"PCF\", value: ShadowGenerator.FILTER_PCF },\r\n    { label: \"PCSS\", value: ShadowGenerator.FILTER_PCSS },\r\n    { label: \"Poisson\", value: ShadowGenerator.FILTER_POISSONSAMPLING },\r\n    { label: \"Exponential\", value: ShadowGenerator.FILTER_EXPONENTIALSHADOWMAP },\r\n    { label: \"Blurred Exponential\", value: ShadowGenerator.FILTER_BLUREXPONENTIALSHADOWMAP },\r\n    { label: \"Close Exponential\", value: ShadowGenerator.FILTER_CLOSEEXPONENTIALSHADOWMAP },\r\n    { label: \"Blurred Close Exponential\", value: ShadowGenerator.FILTER_BLURCLOSEEXPONENTIALSHADOWMAP },\r\n] as const satisfies DropdownOption<number>[];\r\n\r\nconst CSMBlurModeOptions = [\r\n    { label: \"None\", value: ShadowGenerator.FILTER_NONE },\r\n    { label: \"PCF\", value: ShadowGenerator.FILTER_PCF },\r\n    { label: \"PCSS\", value: ShadowGenerator.FILTER_PCSS },\r\n] as const satisfies DropdownOption<number>[];\r\n\r\nconst FilteringQualityOptions = [\r\n    { label: \"Low\", value: ShadowGenerator.QUALITY_LOW },\r\n    { label: \"Medium\", value: ShadowGenerator.QUALITY_MEDIUM },\r\n    { label: \"High\", value: ShadowGenerator.QUALITY_HIGH },\r\n] as const satisfies DropdownOption<number>[];\r\n\r\nconst NumCascadesOptions = [\r\n    { label: \"2\", value: 2 },\r\n    { label: \"3\", value: 3 },\r\n    { label: \"4\", value: 4 },\r\n] as const satisfies DropdownOption<number>[];\r\n\r\ntype ShadowGeneratorSettings = {\r\n    generatorType: ShadowGeneratorType; // Type of shadow generator\r\n    mapSize: number; // Size of the shadow map\r\n};\r\n\r\nfunction GetShadowGenerator(camera: Nullable<Camera>, shadowLight: ShadowLight): Nullable<IShadowGenerator> {\r\n    return shadowLight.getShadowGenerator(camera) ?? shadowLight.getShadowGenerators()?.values().next().value ?? null;\r\n}\r\n\r\nfunction CreateShadowGenerator(shadowLight: ShadowLight, settings: ShadowGeneratorSettings): void {\r\n    const light = shadowLight;\r\n    const scene = light.getScene();\r\n    const internals = settings;\r\n    const generatorType = internals.generatorType;\r\n    const mapSize = internals.mapSize;\r\n    const generator = generatorType === \"Default\" ? new ShadowGenerator(mapSize, light) : new CascadedShadowGenerator(mapSize, light as DirectionalLight);\r\n\r\n    for (const m of scene.meshes) {\r\n        if (m.infiniteDistance) {\r\n            continue;\r\n        }\r\n        generator.addShadowCaster(m);\r\n        if (!m.isAnInstance) {\r\n            m.receiveShadows = true;\r\n        }\r\n    }\r\n}\r\n\r\nfunction DisposeShadowGenerator(camera: Nullable<Camera>, shadowLight: ShadowLight): void {\r\n    GetShadowGenerator(camera, shadowLight)?.dispose();\r\n}\r\n\r\nexport const ShadowGeneratorSetupProperties: FunctionComponent<{ context: ShadowLight }> = ({ context: shadowLight }) => {\r\n    const defaultGeneratorType = DefaultShadowGeneratorOptions[0].value;\r\n    const defaultMapSize = MapSizeOptions[0].value;\r\n    const [shadowGeneratorSettings, setShadowGeneratorSettings] = useState<Readonly<ShadowGeneratorSettings>>({ generatorType: defaultGeneratorType, mapSize: defaultMapSize });\r\n    const shadowGeneratorOptions = shadowLight instanceof DirectionalLight ? DirectionalLightGeneratorOptions : DefaultShadowGeneratorOptions;\r\n    const camera = useObservableState(() => shadowLight.getScene().activeCamera, shadowLight.getScene().onActiveCameraChanged);\r\n    const shadowGenerator = GetShadowGenerator(camera, shadowLight) as ShadowGenerator | CascadedShadowGenerator | null;\r\n    const [hasShadowGenerator, setHasShadowGenerator] = useState(!!shadowGenerator);\r\n\r\n    useEffect(() => {\r\n        setHasShadowGenerator(!!shadowGenerator);\r\n    }, [shadowGenerator]);\r\n\r\n    const isCascaded = shadowGenerator instanceof CascadedShadowGenerator;\r\n    const isStandardGenerator = shadowGenerator instanceof ShadowGenerator && !isCascaded;\r\n\r\n    // Use useProperty to track filter changes and trigger re-renders for conditional UI\r\n    const filter = useProperty(shadowGenerator, \"filter\") ?? ShadowGenerator.FILTER_NONE;\r\n    const useKernelBlur = useProperty(shadowGenerator as ShadowGenerator | null, \"useKernelBlur\");\r\n\r\n    const blurModeOptions = isCascaded ? CSMBlurModeOptions : BlurModeOptions;\r\n\r\n    const near = camera?.minZ ?? 0;\r\n    const far = camera?.maxZ ?? 10000;\r\n\r\n    const isPCFOrPCSS = filter === ShadowGenerator.FILTER_PCF || filter === ShadowGenerator.FILTER_PCSS;\r\n    const isPCSS = filter === ShadowGenerator.FILTER_PCSS;\r\n    const isBlurExponential = filter === ShadowGenerator.FILTER_BLUREXPONENTIALSHADOWMAP || filter === ShadowGenerator.FILTER_BLURCLOSEEXPONENTIALSHADOWMAP;\r\n    const isExponential = filter === ShadowGenerator.FILTER_BLUREXPONENTIALSHADOWMAP || filter === ShadowGenerator.FILTER_EXPONENTIALSHADOWMAP;\r\n\r\n    return (\r\n        <>\r\n            {!hasShadowGenerator && (\r\n                <>\r\n                    <StringDropdownPropertyLine\r\n                        label=\"Type\"\r\n                        options={shadowGeneratorOptions}\r\n                        value={shadowGeneratorSettings.generatorType}\r\n                        onChange={(value) => setShadowGeneratorSettings((prev) => ({ ...prev, generatorType: value as ShadowGeneratorType }))}\r\n                    />\r\n                    <NumberDropdownPropertyLine\r\n                        label=\"Map Size\"\r\n                        options={MapSizeOptions}\r\n                        value={shadowGeneratorSettings.mapSize}\r\n                        onChange={(value) => setShadowGeneratorSettings((prev) => ({ ...prev, mapSize: value }))}\r\n                    />\r\n                    <ButtonLine\r\n                        label=\"Create Generator\"\r\n                        onClick={() => {\r\n                            CreateShadowGenerator(shadowLight, shadowGeneratorSettings);\r\n                            setHasShadowGenerator(true);\r\n                        }}\r\n                    />\r\n                </>\r\n            )}\r\n            {shadowGenerator && (\r\n                <>\r\n                    {isCascaded && <CascadedShadowGeneratorProperties generator={shadowGenerator} near={near} far={far} isPCSS={isPCSS} />}\r\n\r\n                    <BoundProperty\r\n                        component={NumberInputPropertyLine}\r\n                        label=\"Bias\"\r\n                        description=\"Bias to apply to the shadow map to avoid shadow acne.\"\r\n                        target={shadowGenerator}\r\n                        propertyKey=\"bias\"\r\n                        propertyPath=\"getShadowGenerator().bias\"\r\n                        step={0.0001}\r\n                    />\r\n                    <BoundProperty\r\n                        component={NumberInputPropertyLine}\r\n                        label=\"Normal Bias\"\r\n                        description=\"Normal bias to apply to avoid shadow acne.\"\r\n                        target={shadowGenerator}\r\n                        propertyKey=\"normalBias\"\r\n                        propertyPath=\"getShadowGenerator().normalBias\"\r\n                    />\r\n                    <BoundProperty\r\n                        component={SyncedSliderPropertyLine}\r\n                        label=\"Darkness\"\r\n                        description=\"Darkness of the shadow (0 = no shadow, 1 = full shadow).\"\r\n                        target={shadowGenerator}\r\n                        propertyKey=\"darkness\"\r\n                        propertyPath=\"getShadowGenerator().darkness\"\r\n                        min={0}\r\n                        max={1}\r\n                        step={0.01}\r\n                    />\r\n                    <BoundProperty\r\n                        component={SwitchPropertyLine}\r\n                        label=\"Transparent Shadows\"\r\n                        description=\"Allow transparent objects to cast shadows.\"\r\n                        target={shadowGenerator}\r\n                        propertyKey=\"transparencyShadow\"\r\n                        propertyPath=\"getShadowGenerator().transparencyShadow\"\r\n                    />\r\n\r\n                    <BoundProperty\r\n                        component={NumberDropdownPropertyLine}\r\n                        label=\"Filter\"\r\n                        description=\"Shadow filtering mode.\"\r\n                        target={shadowGenerator}\r\n                        propertyKey=\"filter\"\r\n                        propertyPath=\"getShadowGenerator().filter\"\r\n                        options={blurModeOptions}\r\n                    />\r\n                    <Collapse visible={isPCFOrPCSS}>\r\n                        <BoundProperty\r\n                            component={NumberDropdownPropertyLine}\r\n                            label=\"Filtering Quality\"\r\n                            target={shadowGenerator}\r\n                            propertyKey=\"filteringQuality\"\r\n                            propertyPath=\"getShadowGenerator().filteringQuality\"\r\n                            options={FilteringQualityOptions}\r\n                        />\r\n                    </Collapse>\r\n                    <Collapse visible={isPCSS}>\r\n                        <BoundProperty\r\n                            component={SyncedSliderPropertyLine}\r\n                            label=\"Penumbra Ratio\"\r\n                            description=\"Light size UV ratio for PCSS.\"\r\n                            target={shadowGenerator}\r\n                            propertyKey=\"contactHardeningLightSizeUVRatio\"\r\n                            propertyPath=\"getShadowGenerator().contactHardeningLightSizeUVRatio\"\r\n                            min={0}\r\n                            max={0.5}\r\n                            step={0.001}\r\n                        />\r\n                    </Collapse>\r\n                    {isStandardGenerator && (\r\n                        <>\r\n                            <Collapse visible={isBlurExponential}>\r\n                                <>\r\n                                    <BoundProperty\r\n                                        component={SwitchPropertyLine}\r\n                                        label=\"Use Kernel Blur\"\r\n                                        description=\"Use kernel-based blur instead of box blur.\"\r\n                                        target={shadowGenerator}\r\n                                        propertyKey=\"useKernelBlur\"\r\n                                        propertyPath=\"getShadowGenerator().useKernelBlur\"\r\n                                    />\r\n                                    {useKernelBlur ? (\r\n                                        <BoundProperty\r\n                                            component={SyncedSliderPropertyLine}\r\n                                            label=\"Blur Kernel\"\r\n                                            target={shadowGenerator}\r\n                                            propertyKey=\"blurKernel\"\r\n                                            propertyPath=\"getShadowGenerator().blurKernel\"\r\n                                            min={1}\r\n                                            max={64}\r\n                                            step={1}\r\n                                        />\r\n                                    ) : (\r\n                                        <BoundProperty\r\n                                            component={SyncedSliderPropertyLine}\r\n                                            label=\"Blur Box Offset\"\r\n                                            target={shadowGenerator}\r\n                                            propertyKey=\"blurBoxOffset\"\r\n                                            propertyPath=\"getShadowGenerator().blurBoxOffset\"\r\n                                            min={1}\r\n                                            max={64}\r\n                                            step={1}\r\n                                        />\r\n                                    )}\r\n                                </>\r\n                            </Collapse>\r\n                            <Collapse visible={isExponential}>\r\n                                <>\r\n                                    <BoundProperty\r\n                                        component={NumberInputPropertyLine}\r\n                                        label=\"Depth Scale\"\r\n                                        target={shadowGenerator}\r\n                                        propertyKey=\"depthScale\"\r\n                                        propertyPath=\"getShadowGenerator().depthScale\"\r\n                                    />\r\n                                    <BoundProperty\r\n                                        component={SyncedSliderPropertyLine}\r\n                                        label=\"Blur Scale\"\r\n                                        target={shadowGenerator}\r\n                                        propertyKey=\"blurScale\"\r\n                                        propertyPath=\"getShadowGenerator().blurScale\"\r\n                                        min={1}\r\n                                        max={4}\r\n                                        step={1}\r\n                                    />\r\n                                </>\r\n                            </Collapse>\r\n                        </>\r\n                    )}\r\n\r\n                    <ButtonLine\r\n                        label=\"Dispose Generator\"\r\n                        onClick={() => {\r\n                            DisposeShadowGenerator(camera, shadowLight);\r\n                            setHasShadowGenerator(false);\r\n                        }}\r\n                    />\r\n                </>\r\n            )}\r\n        </>\r\n    );\r\n};\r\n\r\nconst CascadedShadowGeneratorProperties: FunctionComponent<{ generator: CascadedShadowGenerator; near: number; far: number; isPCSS: boolean }> = ({\r\n    generator,\r\n    near,\r\n    far,\r\n    isPCSS,\r\n}) => {\r\n    return (\r\n        <>\r\n            <BoundProperty\r\n                component={NumberDropdownPropertyLine}\r\n                label=\"Num Cascades\"\r\n                description=\"Number of cascades for the cascaded shadow map.\"\r\n                target={generator}\r\n                propertyKey=\"numCascades\"\r\n                propertyPath=\"getShadowGenerator().numCascades\"\r\n                options={NumCascadesOptions}\r\n            />\r\n            <BoundProperty\r\n                component={SwitchPropertyLine}\r\n                label=\"Debug Mode\"\r\n                description=\"Colorize cascades for debugging.\"\r\n                target={generator}\r\n                propertyKey=\"debug\"\r\n                propertyPath=\"getShadowGenerator().debug\"\r\n            />\r\n            <BoundProperty\r\n                component={SwitchPropertyLine}\r\n                label=\"Stabilize Cascades\"\r\n                description=\"Stabilize the cascade splits to avoid shimmering.\"\r\n                target={generator}\r\n                propertyKey=\"stabilizeCascades\"\r\n                propertyPath=\"getShadowGenerator().stabilizeCascades\"\r\n            />\r\n            <BoundProperty\r\n                component={SyncedSliderPropertyLine}\r\n                label=\"Lambda\"\r\n                description=\"Balance between logarithmic and uniform cascade splits.\"\r\n                target={generator}\r\n                propertyKey=\"lambda\"\r\n                propertyPath=\"getShadowGenerator().lambda\"\r\n                min={0}\r\n                max={1}\r\n                step={0.01}\r\n            />\r\n            <BoundProperty\r\n                component={SyncedSliderPropertyLine}\r\n                label=\"Cascade Blend\"\r\n                description=\"Percentage of blending between cascades.\"\r\n                target={generator}\r\n                propertyKey=\"cascadeBlendPercentage\"\r\n                propertyPath=\"getShadowGenerator().cascadeBlendPercentage\"\r\n                min={0}\r\n                max={1}\r\n                step={0.01}\r\n            />\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Depth Clamp\" target={generator} propertyKey=\"depthClamp\" propertyPath=\"getShadowGenerator().depthClamp\" />\r\n            <BoundProperty\r\n                component={SwitchPropertyLine}\r\n                label=\"Auto-Calc Depth Bounds\"\r\n                target={generator}\r\n                propertyKey=\"autoCalcDepthBounds\"\r\n                propertyPath=\"getShadowGenerator().autoCalcDepthBounds\"\r\n            />\r\n            <BoundProperty\r\n                component={SyncedSliderPropertyLine}\r\n                label=\"Shadow MaxZ\"\r\n                target={generator}\r\n                propertyKey=\"shadowMaxZ\"\r\n                propertyPath=\"getShadowGenerator().shadowMaxZ\"\r\n                min={near}\r\n                max={far}\r\n                step={0.5}\r\n            />\r\n            <Collapse visible={isPCSS}>\r\n                <BoundProperty\r\n                    component={SyncedSliderPropertyLine}\r\n                    label=\"Penumbra Darkness\"\r\n                    description=\"Darkness of the penumbra for PCSS in CSM.\"\r\n                    target={generator}\r\n                    propertyKey=\"penumbraDarkness\"\r\n                    propertyPath=\"getShadowGenerator().penumbraDarkness\"\r\n                    min={0}\r\n                    max={1}\r\n                    step={0.01}\r\n                />\r\n            </Collapse>\r\n        </>\r\n    );\r\n};\r\n","import type { ShadowLight } from \"core/index\";\r\n\r\nimport type { FunctionComponent } from \"react\";\r\n\r\nimport { Collapse } from \"shared-ui-components/fluent/primitives/collapse\";\r\nimport { NumberInputPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/inputPropertyLine\";\r\nimport { SwitchPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/switchPropertyLine\";\r\nimport { useProperty } from \"../../../hooks/compoundPropertyHooks\";\r\nimport { BoundProperty, Property } from \"../boundProperty\";\r\n\r\nexport const ShadowsSetupProperties: FunctionComponent<{ context: ShadowLight }> = ({ context: shadowLight }) => {\r\n    const shadowsEnabled = useProperty(shadowLight, \"shadowEnabled\");\r\n    const shadowsMinZ = useProperty(shadowLight, \"shadowMinZ\");\r\n    const shadowsMaxZ = useProperty(shadowLight, \"shadowMaxZ\");\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Shadows Enabled\" target={shadowLight} propertyKey=\"shadowEnabled\" />\r\n            <Collapse visible={shadowsEnabled}>\r\n                <>\r\n                    <Property\r\n                        component={NumberInputPropertyLine}\r\n                        label=\"Shadows Near Plane\"\r\n                        propertyPath=\"shadowMinZ\"\r\n                        value={shadowsMinZ ?? 0}\r\n                        onChange={(value) => (shadowLight.shadowMinZ = value)}\r\n                    />\r\n                    <Property\r\n                        component={NumberInputPropertyLine}\r\n                        label=\"Shadows Far Plane\"\r\n                        propertyPath=\"shadowMaxZ\"\r\n                        value={shadowsMaxZ ?? 0}\r\n                        onChange={(value) => (shadowLight.shadowMaxZ = value)}\r\n                    />\r\n                </>\r\n            </Collapse>\r\n        </>\r\n    );\r\n};\r\n","import type { SpotLight } from \"core/index\";\r\nimport type { FunctionComponent } from \"react\";\r\n\r\nimport { Tools } from \"core/Misc/tools\";\r\nimport { Color3PropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/colorPropertyLine\";\r\nimport { NumberInputPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/inputPropertyLine\";\r\nimport { SyncedSliderPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/syncedSliderPropertyLine\";\r\nimport { Vector3PropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/vectorPropertyLine\";\r\n\r\nimport { BoundProperty } from \"../boundProperty\";\r\n\r\nexport const SpotLightSetupProperties: FunctionComponent<{ context: SpotLight }> = ({ context: spotLight }) => {\r\n    return (\r\n        <>\r\n            <BoundProperty label=\"Diffuse\" component={Color3PropertyLine} target={spotLight} propertyKey=\"diffuse\" />\r\n            <BoundProperty label=\"Specular\" component={Color3PropertyLine} target={spotLight} propertyKey=\"specular\" />\r\n            <BoundProperty label=\"Direction\" component={Vector3PropertyLine} target={spotLight} propertyKey=\"direction\" />\r\n            <BoundProperty label=\"Position\" component={Vector3PropertyLine} target={spotLight} propertyKey=\"position\" />\r\n            <BoundProperty\r\n                label=\"Angle\"\r\n                component={SyncedSliderPropertyLine}\r\n                target={spotLight}\r\n                propertyKey=\"angle\"\r\n                convertTo={Tools.ToDegrees}\r\n                convertFrom={Tools.ToRadians}\r\n                min={0}\r\n                max={90}\r\n                step={0.1}\r\n            />\r\n            <BoundProperty\r\n                label=\"InnerAngle\"\r\n                component={SyncedSliderPropertyLine}\r\n                target={spotLight}\r\n                propertyKey=\"innerAngle\"\r\n                convertTo={Tools.ToDegrees}\r\n                convertFrom={Tools.ToRadians}\r\n                min={0}\r\n                max={90}\r\n                step={0.1}\r\n            />\r\n            <BoundProperty label=\"Exponent\" component={NumberInputPropertyLine} target={spotLight} propertyKey=\"exponent\" />\r\n        </>\r\n    );\r\n};\r\n","import type { ServiceDefinition } from \"../../../modularity/serviceDefinition\";\r\nimport type { IPropertiesService } from \"./propertiesService\";\r\n\r\nimport { DirectionalLight } from \"core/Lights/directionalLight\";\r\nimport { HemisphericLight } from \"core/Lights/hemisphericLight\";\r\nimport { PointLight } from \"core/Lights/pointLight\";\r\nimport { RectAreaLight } from \"core/Lights/rectAreaLight\";\r\nimport { ShadowLight } from \"core/Lights/shadowLight\";\r\nimport { SpotLight } from \"core/Lights/spotLight\";\r\nimport { AreaLightSetupProperties } from \"../../../components/properties/lights/areaLightProperties\";\r\nimport { DirectionalLightSetupProperties, DirectionalLightDebugProperties } from \"../../../components/properties/lights/directionalLightProperties\";\r\nimport { HemisphericLightSetupProperties } from \"../../../components/properties/lights/hemisphericLightProperties\";\r\nimport { PointLightSetupProperties } from \"../../../components/properties/lights/pointLightProperties\";\r\nimport { ShadowGeneratorSetupProperties } from \"../../../components/properties/lights/shadowGeneratorProperties\";\r\nimport { ShadowsSetupProperties } from \"../../../components/properties/lights/shadowLightProperties\";\r\nimport { SpotLightSetupProperties } from \"../../../components/properties/lights/spotLightProperties\";\r\nimport { PropertiesServiceIdentity } from \"./propertiesService\";\r\n\r\nexport const LightPropertiesServiceDefinition: ServiceDefinition<[], [IPropertiesService]> = {\r\n    friendlyName: \"Light Properties\",\r\n    consumes: [PropertiesServiceIdentity],\r\n    factory: (propertiesService) => {\r\n        const directionalLightContentRegistration = propertiesService.addSectionContent({\r\n            key: \"Directional Light Properties\",\r\n            predicate: (entity: unknown) => entity instanceof DirectionalLight,\r\n            content: [\r\n                {\r\n                    section: \"Setup\",\r\n                    component: DirectionalLightSetupProperties,\r\n                },\r\n                {\r\n                    section: \"Debug\",\r\n                    component: DirectionalLightDebugProperties,\r\n                },\r\n            ],\r\n        });\r\n\r\n        const pointLightContentRegistration = propertiesService.addSectionContent({\r\n            key: \"Point Light Properties\",\r\n            predicate: (entity: unknown) => entity instanceof PointLight,\r\n            content: [\r\n                {\r\n                    section: \"Setup\",\r\n                    component: PointLightSetupProperties,\r\n                },\r\n            ],\r\n        });\r\n\r\n        const hemisphericLightContentRegistration = propertiesService.addSectionContent({\r\n            key: \"Hemispheric Light Properties\",\r\n            predicate: (entity: unknown) => entity instanceof HemisphericLight,\r\n            content: [\r\n                {\r\n                    section: \"Setup\",\r\n                    component: HemisphericLightSetupProperties,\r\n                },\r\n            ],\r\n        });\r\n\r\n        const spotLightContentRegistration = propertiesService.addSectionContent({\r\n            key: \"Spot Light Properties\",\r\n            predicate: (entity: unknown) => entity instanceof SpotLight,\r\n            content: [\r\n                {\r\n                    section: \"Setup\",\r\n                    component: SpotLightSetupProperties,\r\n                },\r\n            ],\r\n        });\r\n\r\n        const shadowLightContentRegistration = propertiesService.addSectionContent({\r\n            key: \"Shadow Light Properties\",\r\n            predicate: (entity: unknown) => entity instanceof ShadowLight,\r\n            content: [\r\n                {\r\n                    section: \"Shadows\",\r\n                    component: ShadowsSetupProperties,\r\n                },\r\n                {\r\n                    section: \"Shadow Generator\",\r\n                    component: ShadowGeneratorSetupProperties,\r\n                },\r\n            ],\r\n        });\r\n\r\n        const areaLightContentRegistration = propertiesService.addSectionContent({\r\n            key: \"Area Light Properties\",\r\n            predicate: (entity: unknown) => entity instanceof RectAreaLight,\r\n            content: [\r\n                {\r\n                    section: \"Setup\",\r\n                    component: AreaLightSetupProperties,\r\n                },\r\n            ],\r\n        });\r\n\r\n        return {\r\n            dispose: () => {\r\n                areaLightContentRegistration.dispose();\r\n                shadowLightContentRegistration.dispose();\r\n                spotLightContentRegistration.dispose();\r\n                hemisphericLightContentRegistration.dispose();\r\n                pointLightContentRegistration.dispose();\r\n                directionalLightContentRegistration.dispose();\r\n            },\r\n        };\r\n    },\r\n};\r\n","import { Constants } from \"core/Engines/constants\";\r\nimport { ParticleSystem } from \"core/Particles/particleSystem\";\r\n\r\n/**\r\n * Used by both particleSystem and alphaBlendModes\r\n */\r\nexport const CommonBlendModes = [\r\n    { label: \"Maximized\", value: Constants.ALPHA_MAXIMIZED },\r\n    { label: \"Pre-multiplied\", value: Constants.ALPHA_PREMULTIPLIED },\r\n    { label: \"Pre-multiplied Porter Duff\", value: Constants.ALPHA_PREMULTIPLIED_PORTERDUFF },\r\n    { label: \"Screen Mode\", value: Constants.ALPHA_SCREENMODE },\r\n    { label: \"OneOne OneOne\", value: Constants.ALPHA_ONEONE_ONEONE },\r\n    { label: \"Alpha to Color\", value: Constants.ALPHA_ALPHATOCOLOR },\r\n    { label: \"Reverse One Minus\", value: Constants.ALPHA_REVERSEONEMINUS },\r\n    { label: \"Source+Dest * (1 - SourceAlpha)\", value: Constants.ALPHA_SRC_DSTONEMINUSSRCALPHA },\r\n    { label: \"OneOne OneZero\", value: Constants.ALPHA_ONEONE_ONEZERO },\r\n    { label: \"Exclusion\", value: Constants.ALPHA_EXCLUSION },\r\n    { label: \"Layer Accumulate\", value: Constants.ALPHA_LAYER_ACCUMULATE },\r\n];\r\n\r\n/**\r\n * Used to populated the blendMode dropdown in our various tools (Node Editor, Inspector, etc.)\r\n * The below ParticleSystem consts were defined before new Engine alpha blend modes were added, so we have to reference\r\n * the ParticleSystem.FOO consts explicitly (as the underlying const values are different - they get mapped to engine consts within baseParticleSystem.ts)\r\n */\r\nexport const BlendModeOptions = [\r\n    { label: \"Add\", value: ParticleSystem.BLENDMODE_ADD },\r\n    { label: \"Multiply\", value: ParticleSystem.BLENDMODE_MULTIPLY },\r\n    { label: \"Multiply Add\", value: ParticleSystem.BLENDMODE_MULTIPLYADD },\r\n    { label: \"One One\", value: ParticleSystem.BLENDMODE_ONEONE },\r\n    { label: \"Standard\", value: ParticleSystem.BLENDMODE_STANDARD },\r\n    { label: \"Subtract\", value: ParticleSystem.BLENDMODE_SUBTRACT },\r\n].concat(CommonBlendModes);\r\n\r\n/**\r\n * Used to populated the alphaMode dropdown in our various tools (Node Editor, Inspector, etc.)\r\n */\r\nexport const AlphaModeOptions = [\r\n    { label: \"Combine\", value: Constants.ALPHA_COMBINE },\r\n    { label: \"One One\", value: Constants.ALPHA_ONEONE },\r\n    { label: \"Add\", value: Constants.ALPHA_ADD },\r\n    { label: \"Subtract\", value: Constants.ALPHA_SUBTRACT },\r\n    { label: \"Multiply\", value: Constants.ALPHA_MULTIPLY },\r\n].concat(CommonBlendModes);\r\n\r\n/**\r\n * Used to populate the billboardMode dropdown for particle systems.\r\n */\r\nexport const ParticleBillboardModeOptions = [\r\n    { label: \"All\", value: ParticleSystem.BILLBOARDMODE_ALL },\r\n    { label: \"Y\", value: ParticleSystem.BILLBOARDMODE_Y },\r\n    { label: \"Stretched\", value: ParticleSystem.BILLBOARDMODE_STRETCHED },\r\n    { label: \"Stretched Local\", value: ParticleSystem.BILLBOARDMODE_STRETCHED_LOCAL },\r\n];\r\n","import type { FunctionComponent } from \"react\";\r\n\r\nimport type { DropdownOption } from \"shared-ui-components/fluent/primitives/dropdown\";\r\n\r\nimport { Constants } from \"core/Engines/constants\";\r\nimport { Engine } from \"core/Engines/engine\";\r\nimport { Material } from \"core/Materials/material\";\r\nimport { AlphaModeOptions } from \"shared-ui-components/constToOptionsMaps\";\r\nimport { NumberDropdownPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/dropdownPropertyLine\";\r\nimport { NumberInputPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/inputPropertyLine\";\r\nimport { PropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/propertyLine\";\r\nimport { SwitchPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/switchPropertyLine\";\r\nimport { SyncedSliderPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/syncedSliderPropertyLine\";\r\nimport { Collapse } from \"shared-ui-components/fluent/primitives/collapse\";\r\nimport { useProperty } from \"../../../hooks/compoundPropertyHooks\";\r\nimport { BoundProperty } from \"../boundProperty\";\r\nimport { HexPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/hexPropertyLine\";\r\n\r\nconst OrientationOptions = [\r\n    { label: \"Clockwise\", value: Material.ClockWiseSideOrientation },\r\n    { label: \"Counterclockwise\", value: Material.CounterClockWiseSideOrientation },\r\n] as const satisfies DropdownOption<number>[];\r\n\r\nconst TransparencyModeOptions = [\r\n    { label: \"Opaque\", value: Material.MATERIAL_OPAQUE },\r\n    { label: \"Alpha test\", value: Material.MATERIAL_ALPHATEST },\r\n    { label: \"Alpha blend\", value: Material.MATERIAL_ALPHABLEND },\r\n    { label: \"Alpha blend and test\", value: Material.MATERIAL_ALPHATESTANDBLEND },\r\n] as const satisfies DropdownOption<number>[];\r\n\r\nconst DepthFunctionOptions = [\r\n    { label: \"<Engine Default>\", value: 0 },\r\n    { label: \"Never\", value: Engine.NEVER },\r\n    { label: \"Always\", value: Engine.ALWAYS },\r\n    { label: \"Equal\", value: Engine.EQUAL },\r\n    { label: \"Less\", value: Engine.LESS },\r\n    { label: \"Less or equal\", value: Engine.LEQUAL },\r\n    { label: \"Greater\", value: Engine.GREATER },\r\n    { label: \"Greater or equal\", value: Engine.GEQUAL },\r\n    { label: \"Not equal\", value: Engine.NOTEQUAL },\r\n] as const satisfies DropdownOption<number>[];\r\n\r\nconst StencilFunctionOptions = [\r\n    { label: \"Never\", value: Constants.NEVER },\r\n    { label: \"Always\", value: Constants.ALWAYS },\r\n    { label: \"Equal\", value: Constants.EQUAL },\r\n    { label: \"Less\", value: Constants.LESS },\r\n    { label: \"Less or equal\", value: Constants.LEQUAL },\r\n    { label: \"Greater\", value: Constants.GREATER },\r\n    { label: \"Greater or equal\", value: Constants.GEQUAL },\r\n    { label: \"Not equal\", value: Constants.NOTEQUAL },\r\n] as const satisfies DropdownOption<number>[];\r\n\r\nconst StencilOperationOptions = [\r\n    { label: \"Keep\", value: Constants.KEEP },\r\n    { label: \"Zero\", value: Constants.ZERO },\r\n    { label: \"Replace\", value: Constants.REPLACE },\r\n    { label: \"Incr\", value: Constants.INCR },\r\n    { label: \"Decr\", value: Constants.DECR },\r\n    { label: \"Invert\", value: Constants.INVERT },\r\n    { label: \"Incr wrap\", value: Constants.INCR_WRAP },\r\n    { label: \"Decr wrap\", value: Constants.DECR_WRAP },\r\n] as const satisfies DropdownOption<number>[];\r\n\r\nexport const MaterialGeneralProperties: FunctionComponent<{ material: Material }> = (props) => {\r\n    const { material } = props;\r\n\r\n    const pointsCloud = useProperty(material, \"pointsCloud\");\r\n    const faceCulling = useProperty(material, \"backFaceCulling\");\r\n    const isWebGPU = material.getScene().getEngine().isWebGPU;\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty\r\n                component={SwitchPropertyLine}\r\n                label=\"Face Culling\"\r\n                description=\"Enabling this will enable culling, default is to cull backfaces. To enable front face culling instead, you can disable 'cullBackfaces' using the below option\"\r\n                docLink=\"https://doc.babylonjs.com/features/featuresDeepDive/materials/using/materials_introduction#back-face-culling\"\r\n                target={material}\r\n                propertyKey=\"backFaceCulling\"\r\n            />\r\n            <Collapse visible={faceCulling}>\r\n                <BoundProperty\r\n                    component={SwitchPropertyLine}\r\n                    label=\"Cull Back Faces\"\r\n                    description=\"Culls back faces. If false, front faces are culled.\"\r\n                    target={material}\r\n                    propertyKey=\"cullBackFaces\"\r\n                />\r\n            </Collapse>\r\n            <BoundProperty\r\n                component={NumberDropdownPropertyLine}\r\n                label=\"Orientation\"\r\n                description=\"The front face side. Overrides mesh's orientation.\"\r\n                options={OrientationOptions}\r\n                target={material}\r\n                propertyKey=\"sideOrientation\"\r\n                nullable\r\n                defaultValue={material.getScene().useRightHandedSystem ? Material.CounterClockWiseSideOrientation : Material.ClockWiseSideOrientation}\r\n            />\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Disable Color Write\" target={material} propertyKey=\"disableColorWrite\" />\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Disable Depth Write\" target={material} propertyKey=\"disableDepthWrite\" />\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Force Depth Write\" target={material} propertyKey=\"forceDepthWrite\" />\r\n            <BoundProperty component={NumberDropdownPropertyLine} label=\"Depth Function\" options={DepthFunctionOptions} target={material} propertyKey=\"depthFunction\" />\r\n            <BoundProperty\r\n                component={SwitchPropertyLine}\r\n                label=\"Need Depth Pre-pass\"\r\n                docLink=\"https://doc.babylonjs.com/features/featuresDeepDive/materials/advanced/transparent_rendering/#depth-pre-pass-meshes\"\r\n                target={material}\r\n                propertyKey=\"needDepthPrePass\"\r\n            />\r\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"Z-offset Factor\" target={material} propertyKey=\"zOffset\" min={-10} max={10} step={0.1} />\r\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"Z-offset Units\" target={material} propertyKey=\"zOffsetUnits\" min={-10} max={10} step={0.1} />\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Wireframe\" target={material} propertyKey=\"wireframe\" />\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Point Cloud\" target={material} propertyKey=\"pointsCloud\" />\r\n            {pointsCloud && <BoundProperty component={SyncedSliderPropertyLine} label=\"Point Size\" target={material} propertyKey=\"pointSize\" min={0} max={100} step={0.1} />}\r\n            {isWebGPU && <BoundProperty component={SwitchPropertyLine} label=\"Use Vertex Pulling\" target={material} propertyKey=\"useVertexPulling\" />}\r\n            <BoundProperty\r\n                component={SwitchPropertyLine}\r\n                label=\"Support Fog\"\r\n                target={material}\r\n                propertyKey=\"fogEnabled\"\r\n                description=\"Indicates whether the material supports fog (however, fog must be enabled at the scene level to be effective).\"\r\n            />\r\n            <BoundProperty\r\n                component={SwitchPropertyLine}\r\n                label=\"Use Logarithmic Depth\"\r\n                target={material}\r\n                propertyKey=\"useLogarithmicDepth\"\r\n                docLink=\"https://doc.babylonjs.com/features/featuresDeepDive/materials/advanced/logarithmicDepthBuffer\"\r\n            />\r\n            <BoundProperty\r\n                component={SwitchPropertyLine}\r\n                label=\"Set Vertex Output Invariant\"\r\n                target={material}\r\n                propertyKey=\"isVertexOutputInvariant\"\r\n                description=\"Setting this property to true will force the shader compiler to disable some optimization to make sure the vertex output is always calculated the same way across different compilation units.\"\r\n            />\r\n        </>\r\n    );\r\n};\r\n\r\nexport const MaterialTransparencyProperties: FunctionComponent<{ material: Material }> = (props) => {\r\n    const { material } = props;\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"Alpha\" target={material} propertyKey=\"alpha\" min={0} max={1} step={0.01} />\r\n            <BoundProperty\r\n                component={NumberDropdownPropertyLine}\r\n                label=\"Transparency Mode\"\r\n                docLink=\"https://doc.babylonjs.com/features/featuresDeepDive/materials/advanced/transparent_rendering/#the-transparencymode-property\"\r\n                target={material}\r\n                propertyKey=\"transparencyMode\"\r\n                options={TransparencyModeOptions}\r\n                nullable\r\n                defaultValue={Material.MATERIAL_OPAQUE}\r\n            />\r\n            <BoundProperty\r\n                component={NumberDropdownPropertyLine}\r\n                label=\"Alpha Mode\"\r\n                docLink=\"https://doc.babylonjs.com/features/featuresDeepDive/materials/using/blendModes/#available-blend-modes\"\r\n                target={material}\r\n                propertyKey=\"alphaMode\"\r\n                options={AlphaModeOptions}\r\n            />\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Separate Culling Pass\" target={material} propertyKey=\"separateCullingPass\" />\r\n        </>\r\n    );\r\n};\r\n\r\nexport const MaterialStencilProperties: FunctionComponent<{ material: Material }> = (props) => {\r\n    const { material } = props;\r\n    const stencilEnabled = useProperty(material.stencil, \"enabled\");\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Enabled\" target={material.stencil} propertyKey=\"enabled\" propertyPath=\"stencil.enabled\" />\r\n            <Collapse visible={stencilEnabled}>\r\n                <>\r\n                    <BoundProperty component={HexPropertyLine} label=\"Write Mask\" target={material.stencil} propertyKey=\"mask\" propertyPath=\"stencil.mask\" numBits={8} />\r\n                    <BoundProperty component={HexPropertyLine} label=\"Read Mask\" target={material.stencil} propertyKey=\"funcMask\" propertyPath=\"stencil.funcMask\" numBits={8} />\r\n                    <BoundProperty\r\n                        component={NumberInputPropertyLine}\r\n                        label=\"Reference Value\"\r\n                        target={material.stencil}\r\n                        propertyKey=\"funcRef\"\r\n                        propertyPath=\"stencil.funcRef\"\r\n                        step={1}\r\n                        forceInt={true}\r\n                        min={0}\r\n                        max={255}\r\n                    />\r\n                    <PropertyLine\r\n                        label=\"Front\"\r\n                        expandByDefault={true}\r\n                        expandedContent={\r\n                            <>\r\n                                <BoundProperty\r\n                                    component={NumberDropdownPropertyLine}\r\n                                    label=\"Function\"\r\n                                    target={material.stencil}\r\n                                    propertyKey=\"func\"\r\n                                    propertyPath=\"stencil.func\"\r\n                                    options={StencilFunctionOptions}\r\n                                />\r\n                                <BoundProperty\r\n                                    component={NumberDropdownPropertyLine}\r\n                                    label=\"Stencil Fail Operation\"\r\n                                    target={material.stencil}\r\n                                    propertyKey=\"opStencilFail\"\r\n                                    propertyPath=\"stencil.opStencilFail\"\r\n                                    options={StencilOperationOptions}\r\n                                />\r\n                                <BoundProperty\r\n                                    component={NumberDropdownPropertyLine}\r\n                                    label=\"Depth Fail Operation\"\r\n                                    target={material.stencil}\r\n                                    propertyKey=\"opDepthFail\"\r\n                                    propertyPath=\"stencil.opDepthFail\"\r\n                                    options={StencilOperationOptions}\r\n                                />\r\n                                <BoundProperty\r\n                                    component={NumberDropdownPropertyLine}\r\n                                    label=\"Stencil & Depth Pass Operation\"\r\n                                    target={material.stencil}\r\n                                    propertyKey=\"opStencilDepthPass\"\r\n                                    propertyPath=\"stencil.opStencilDepthPass\"\r\n                                    options={StencilOperationOptions}\r\n                                />\r\n                            </>\r\n                        }\r\n                    />\r\n                    <PropertyLine\r\n                        label=\"Back\"\r\n                        expandByDefault={true}\r\n                        expandedContent={\r\n                            <>\r\n                                <BoundProperty\r\n                                    component={NumberDropdownPropertyLine}\r\n                                    label=\"Function\"\r\n                                    target={material.stencil}\r\n                                    propertyKey=\"backFunc\"\r\n                                    propertyPath=\"stencil.backFunc\"\r\n                                    options={StencilFunctionOptions}\r\n                                />\r\n                                <BoundProperty\r\n                                    component={NumberDropdownPropertyLine}\r\n                                    label=\"Stencil Fail Operation\"\r\n                                    target={material.stencil}\r\n                                    propertyKey=\"backOpStencilFail\"\r\n                                    propertyPath=\"stencil.backOpStencilFail\"\r\n                                    options={StencilOperationOptions}\r\n                                />\r\n                                <BoundProperty\r\n                                    component={NumberDropdownPropertyLine}\r\n                                    label=\"Depth Fail Operation\"\r\n                                    target={material.stencil}\r\n                                    propertyKey=\"backOpDepthFail\"\r\n                                    propertyPath=\"stencil.backOpDepthFail\"\r\n                                    options={StencilOperationOptions}\r\n                                />\r\n                                <BoundProperty\r\n                                    component={NumberDropdownPropertyLine}\r\n                                    label=\"Stencil & Depth Pass Operation\"\r\n                                    target={material.stencil}\r\n                                    propertyKey=\"backOpStencilDepthPass\"\r\n                                    propertyPath=\"stencil.backOpStencilDepthPass\"\r\n                                    options={StencilOperationOptions}\r\n                                />\r\n                            </>\r\n                        }\r\n                    />\r\n                </>\r\n            </Collapse>\r\n        </>\r\n    );\r\n};\r\n","import type { FunctionComponent } from \"react\";\r\n\r\nimport type { MultiMaterial } from \"core/Materials/multiMaterial\";\r\nimport type { ISelectionService } from \"../../../services/selectionService\";\r\n\r\nimport { LinkToEntityPropertyLine } from \"../linkToEntityPropertyLine\";\r\n\r\nexport const MultiMaterialChildrenProperties: FunctionComponent<{ multiMaterial: MultiMaterial; selectionService: ISelectionService }> = (props) => {\r\n    const { multiMaterial, selectionService } = props;\r\n\r\n    return (\r\n        <>\r\n            {multiMaterial.subMaterials\r\n                .filter((material) => !!material)\r\n                .map((material, index) => (\r\n                    <LinkToEntityPropertyLine key={material.uniqueId} label={`Material #${index + 1}`} entity={material} selectionService={selectionService} />\r\n                ))}\r\n        </>\r\n    );\r\n};\r\n","import type { ReactElement, ReactNode } from \"react\";\r\n\r\nimport { Body1Strong, makeStyles, tokens } from \"@fluentui/react-components\";\r\nimport { AddRegular, CopyRegular, DeleteRegular } from \"@fluentui/react-icons\";\r\nimport { useMemo } from \"react\";\r\n\r\nimport { ButtonLine } from \"../hoc/buttonLine\";\r\n\r\nconst useListStyles = makeStyles({\r\n    item: {\r\n        width: \"100%\",\r\n        display: \"flex\",\r\n        flexDirection: \"row\", // Arrange items horizontally\r\n        alignItems: \"center\", // Center items vertically\r\n        gap: tokens.spacingHorizontalS, // Add space between elements\r\n        borderBottom: `${tokens.strokeWidthThin} solid ${tokens.colorNeutralStroke1}`,\r\n    },\r\n    itemId: {\r\n        width: tokens.spacingHorizontalM,\r\n    },\r\n    itemContent: {\r\n        flex: 1, // Take up remaining space\r\n        minWidth: 0, // Prevent flex item from overflowing\r\n    },\r\n    iconContainer: {\r\n        display: \"flex\",\r\n        gap: tokens.spacingHorizontalXS, // Small gap between icons\r\n        alignItems: \"center\",\r\n        flexShrink: 0, // Prevent shrinking\r\n    },\r\n    list: {\r\n        padding: tokens.spacingVerticalS,\r\n    },\r\n});\r\n\r\n/**\r\n * Represents an item in a list\r\n */\r\nexport type ListItem<T> = {\r\n    /** Unique identifier for the item */\r\n    id: number;\r\n    /** The data associated with the item */\r\n    data: T;\r\n    /** Value to use for sorting the list */\r\n    sortBy: number;\r\n};\r\n\r\ntype ListProps<T> = {\r\n    items: ListItem<T>[];\r\n    renderItem: (item: ListItem<T>, index: number) => ReactNode;\r\n    onDelete?: (item: ListItem<T>, index: number) => void;\r\n    onAdd?: (item?: ListItem<T>) => void;\r\n    addButtonLabel?: string;\r\n};\r\n\r\n/**\r\n * For cases where you may want to add / remove items from a list via a trash can button / copy button, this HOC can be used\r\n * @returns A React component that renders a list of items with add/delete functionality\r\n * @param props - The properties for the List component\r\n */\r\nexport function List<T>(props: ListProps<T>): ReactElement {\r\n    const { items, renderItem, onDelete, onAdd, addButtonLabel = \"Add new item\" } = props;\r\n    const classes = useListStyles();\r\n\r\n    const sortedItems = useMemo(() => [...items].sort((a, b) => a.sortBy - b.sortBy), [items]);\r\n\r\n    return (\r\n        <div>\r\n            {onAdd && <ButtonLine label={addButtonLabel} icon={AddRegular} onClick={() => onAdd()} />}\r\n\r\n            <div className={classes.list}>\r\n                {sortedItems.map((item: ListItem<T>, index: number) => (\r\n                    <div key={item.id} className={classes.item}>\r\n                        <Body1Strong className={classes.itemId}>#{index}</Body1Strong>\r\n                        <div className={classes.itemContent}>{renderItem(item, items.indexOf(sortedItems[index]))}</div>\r\n                        {(onAdd || onDelete) && (\r\n                            <div className={classes.iconContainer}>\r\n                                {onAdd && <CopyRegular onClick={() => onAdd(item)} />}\r\n                                {onDelete && <DeleteRegular onClick={() => onDelete(item, items.indexOf(sortedItems[index]))} />}\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","import type { FunctionComponent } from \"react\";\r\nimport type { PrimitiveProps } from \"./primitive\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { makeStyles, tokens } from \"@fluentui/react-components\";\r\n\r\nimport { SyncedSliderInput } from \"./syncedSlider\";\r\nimport { Color3, Color4 } from \"core/Maths/math.color\";\r\nimport { ColorPickerPopup } from \"./colorPicker\";\r\nimport { Color3Gradient, ColorGradient as Color4Gradient, FactorGradient } from \"core/Misc/gradients\";\r\nimport { GradientBlockColorStep } from \"core/Materials/Node/Blocks/gradientBlock\";\r\n\r\nconst useGradientStyles = makeStyles({\r\n    container: {\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        gap: tokens.spacingHorizontalXS, // Reduced gap\r\n        width: \"100%\",\r\n        minWidth: 0,\r\n        overflow: \"hidden\",\r\n    },\r\n    // Wrapper for factor spin buttons - fixed width, doesn't grow\r\n    valueWrapper: {\r\n        flex: \"0 0 auto\", // Fixed size, no grow, no shrink\r\n    },\r\n    // Wrapper for color pickers - fixed size since they're just swatches\r\n    colorWrapper: {\r\n        flex: \"0 0 auto\",\r\n        alignContent: \"center\",\r\n    },\r\n    // Wrapper for the step slider - takes remaining space and can shrink\r\n    stepSliderWrapper: {\r\n        flex: \"1 1 0\", // Grow to fill available space\r\n        minWidth: \"100px\", // Minimum to fit slider + spinbutton\r\n    },\r\n});\r\n\r\ntype GradientProps<T extends number | Color3 | Color4> = {\r\n    value1: T;\r\n    value2?: T;\r\n    step: number;\r\n};\r\n\r\n/**\r\n * Gradient component that displays 1 or 2 color or number inputs next to a slider\r\n * @param props - Component props containing gradient value and change handlers\r\n * @returns A React component\r\n */\r\nconst Gradient: FunctionComponent<PrimitiveProps<GradientProps<number | Color3 | Color4>>> = (props) => {\r\n    Gradient.displayName = \"Gradient\";\r\n    const [gradient, setGradient] = useState(props.value);\r\n    const classes = useGradientStyles();\r\n\r\n    useEffect(() => {\r\n        setGradient(props.value); // Re-render if props.value changes\r\n    }, [props.value]);\r\n\r\n    const gradientChange = (newGradient: GradientProps<number | Color3 | Color4>) => {\r\n        setGradient(newGradient);\r\n        props.onChange(newGradient);\r\n    };\r\n    // Only use compact mode when there are numeric values (spinbuttons) taking up space\r\n    const hasNumericValues =\r\n        !(gradient.value1 instanceof Color3 || gradient.value1 instanceof Color4) ||\r\n        (gradient.value2 !== undefined && !(gradient.value2 instanceof Color3 || gradient.value2 instanceof Color4));\r\n\r\n    return (\r\n        <div id=\"gradientContainer\" className={classes.container}>\r\n            <div className={gradient.value1 instanceof Color3 || gradient.value1 instanceof Color4 ? classes.colorWrapper : classes.valueWrapper}>\r\n                {gradient.value1 instanceof Color3 || gradient.value1 instanceof Color4 ? (\r\n                    <ColorPickerPopup value={gradient.value1} onChange={(color) => gradientChange({ ...gradient, value1: color })} />\r\n                ) : (\r\n                    <SyncedSliderInput step={0.01} value={gradient.value1} onChange={(val) => gradientChange({ ...gradient, value1: val })} compact />\r\n                )}\r\n            </div>\r\n            {gradient.value2 !== undefined && (\r\n                <div className={gradient.value2 instanceof Color3 || gradient.value2 instanceof Color4 ? classes.colorWrapper : classes.valueWrapper}>\r\n                    {gradient.value2 instanceof Color3 || gradient.value2 instanceof Color4 ? (\r\n                        <ColorPickerPopup value={gradient.value2} onChange={(color) => gradientChange({ ...gradient, value2: color })} />\r\n                    ) : (\r\n                        <SyncedSliderInput step={0.01} value={gradient.value2} onChange={(val) => gradientChange({ ...gradient, value2: val })} compact />\r\n                    )}\r\n                </div>\r\n            )}\r\n\r\n            <div className={classes.stepSliderWrapper}>\r\n                <SyncedSliderInput\r\n                    notifyOnlyOnRelease={true}\r\n                    min={0}\r\n                    max={1}\r\n                    step={0.01}\r\n                    value={gradient.step}\r\n                    onChange={(val) => gradientChange({ ...gradient, step: val })}\r\n                    compact={hasNumericValues}\r\n                    growSlider={!hasNumericValues}\r\n                />\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst FactorGradientCast = Gradient as FunctionComponent<PrimitiveProps<GradientProps<number>>>;\r\nconst Color3GradientCast = Gradient as FunctionComponent<PrimitiveProps<GradientProps<Color3>>>;\r\nconst Color4GradientCast = Gradient as FunctionComponent<PrimitiveProps<GradientProps<Color4>>>;\r\n\r\n/**\r\n * Component wrapper for FactorGradient that provides slider inputs for factor1, factor2, and gradient step\r\n * @param props - Component props containing FactorGradient value and change handler\r\n * @returns A React component\r\n */\r\nexport const FactorGradientComponent: FunctionComponent<PrimitiveProps<FactorGradient>> = (props) => {\r\n    return (\r\n        <FactorGradientCast\r\n            {...props}\r\n            value={{ value1: props.value.factor1, value2: props.value.factor2, step: props.value.gradient }}\r\n            onChange={(gradient) => props.onChange(new FactorGradient(gradient.step, gradient.value1, gradient.value2))}\r\n        />\r\n    );\r\n};\r\n/**\r\n * Component wrapper for Color3Gradient that provides color picker and gradient step slider\r\n * @param props - Component props containing Color3Gradient value and change handler\r\n * @returns A React component\r\n */\r\nexport const Color3GradientComponent: FunctionComponent<PrimitiveProps<Color3Gradient>> = (props) => {\r\n    return (\r\n        <Color3GradientCast\r\n            {...props}\r\n            value={{ value1: props.value.color, step: props.value.gradient }}\r\n            onChange={(gradient) => props.onChange(new Color3Gradient(gradient.step, gradient.value1))}\r\n        />\r\n    );\r\n};\r\n/**\r\n * Component wrapper for Color4Gradient that provides color pickers for color1, color2, and gradient step slider\r\n * @param props - Component props containing Color4Gradient value and change handler\r\n * @returns A React component\r\n */\r\nexport const Color4GradientComponent: FunctionComponent<PrimitiveProps<Color4Gradient>> = (props) => {\r\n    return (\r\n        <Color4GradientCast\r\n            {...props}\r\n            value={{ value1: props.value.color1, value2: props.value.color2, step: props.value.gradient }}\r\n            onChange={(gradient) => props.onChange(new Color4Gradient(gradient.step, gradient.value1, gradient.value2))}\r\n        />\r\n    );\r\n};\r\n/**\r\n * Component wrapper for GradientBlockColorStep that provides color picker and step slider\r\n * @param props - Component props containing GradientBlockColorStep value and change handler\r\n * @returns A React component\r\n */\r\nexport const ColorStepGradientComponent: FunctionComponent<PrimitiveProps<GradientBlockColorStep>> = (props) => {\r\n    return (\r\n        <Color3GradientCast\r\n            {...props}\r\n            value={{ value1: props.value.color, step: props.value.step }}\r\n            onChange={(gradient) => props.onChange(new GradientBlockColorStep(gradient.step, gradient.value1))}\r\n        />\r\n    );\r\n};\r\n","import type { FunctionComponent } from \"react\";\r\n\r\nimport { useMemo } from \"react\";\r\n\r\nimport { List } from \"../primitives/list\";\r\nimport { Color3GradientComponent, Color4GradientComponent, FactorGradientComponent } from \"../primitives/gradient\";\r\nimport { Color3Gradient, ColorGradient as Color4Gradient, FactorGradient } from \"core/Misc/gradients\";\r\nimport type { IValueGradient } from \"core/Misc/gradients\";\r\nimport type { Nullable } from \"core/types\";\r\nimport { Color3, Color4 } from \"core/Maths/math.color\";\r\n\r\ntype GradientListProps<T extends FactorGradient | Color3Gradient | Color4Gradient> = {\r\n    label: string;\r\n    gradients: Nullable<Array<T>>;\r\n    addGradient: (step?: T) => void;\r\n    removeGradient: (step: T, index: number) => void;\r\n    onChange: (newGradient: T, index: number) => void;\r\n};\r\n\r\n// Convert gradients to LineList items and sort by gradient value\r\nfunction GradientsToListItems<T extends IValueGradient>(gradients: Nullable<Array<T>>) {\r\n    return (\r\n        gradients?.map((gradient, index) => ({\r\n            id: index,\r\n            data: gradient,\r\n            sortBy: gradient.gradient,\r\n        })) ?? []\r\n    );\r\n}\r\nexport const FactorGradientList: FunctionComponent<GradientListProps<FactorGradient>> = (props) => {\r\n    FactorGradientList.displayName = \"FactorGradientList\";\r\n    const { gradients } = props;\r\n    const items = useMemo(() => GradientsToListItems<FactorGradient>(gradients), [gradients]);\r\n    return (\r\n        <List\r\n            key=\"Factor\"\r\n            addButtonLabel={items.length > 0 ? `Add new ${props.label}` : `Use ${props.label}s`}\r\n            items={items}\r\n            onDelete={(item, index) => props.removeGradient(item.data, index)}\r\n            onAdd={() => {\r\n                if (items.length === 0) {\r\n                    props.addGradient(); // Default\r\n                } else {\r\n                    props.addGradient(new FactorGradient(1, 1, 1));\r\n                }\r\n            }}\r\n            renderItem={(item, index) => {\r\n                return (\r\n                    <FactorGradientComponent\r\n                        value={item.data}\r\n                        onChange={(newGradient: FactorGradient) => {\r\n                            item.data.gradient = newGradient.gradient;\r\n                            item.data.factor1 = newGradient.factor1;\r\n                            item.data.factor2 = newGradient.factor2;\r\n                            props.onChange(newGradient, index);\r\n                        }}\r\n                    />\r\n                );\r\n            }}\r\n        />\r\n    );\r\n};\r\n\r\nexport const Color3GradientList: FunctionComponent<GradientListProps<Color3Gradient>> = (props) => {\r\n    Color3GradientList.displayName = \"Color3GradientList\";\r\n    const { gradients } = props;\r\n    const items = useMemo(() => GradientsToListItems<Color3Gradient>(gradients), [gradients]);\r\n    return (\r\n        <List\r\n            key=\"Color3\"\r\n            addButtonLabel={items.length > 0 ? `Add new ${props.label}` : `Use ${props.label}s`}\r\n            items={items}\r\n            onDelete={(item, index) => props.removeGradient(item.data, index)}\r\n            onAdd={() => {\r\n                if (items.length === 0) {\r\n                    props.addGradient(); // Default\r\n                } else {\r\n                    props.addGradient(new Color3Gradient(1, Color3.White()));\r\n                }\r\n            }}\r\n            renderItem={(item, index) => {\r\n                return (\r\n                    <Color3GradientComponent\r\n                        value={item.data}\r\n                        onChange={(newGradient: Color3Gradient) => {\r\n                            item.data.gradient = newGradient.gradient;\r\n                            item.data.color = newGradient.color;\r\n                            props.onChange(newGradient, index);\r\n                        }}\r\n                    />\r\n                );\r\n            }}\r\n        />\r\n    );\r\n};\r\n\r\nexport const Color4GradientList: FunctionComponent<GradientListProps<Color4Gradient>> = (props) => {\r\n    Color4GradientList.displayName = \"Color4GradientList\";\r\n    const { gradients } = props;\r\n    const items = useMemo(() => GradientsToListItems<Color4Gradient>(gradients), [gradients]);\r\n    return (\r\n        <List\r\n            key=\"Color4\"\r\n            addButtonLabel={items.length > 0 ? `Add new ${props.label}` : `Use ${props.label}s`}\r\n            items={items}\r\n            onDelete={(item, index) => props.removeGradient(item.data, index)}\r\n            onAdd={() => {\r\n                if (items.length === 0) {\r\n                    props.addGradient(); // Default\r\n                } else {\r\n                    props.addGradient(new Color4Gradient(1, new Color4(1, 1, 1, 1), new Color4(1, 1, 1, 1)));\r\n                }\r\n            }}\r\n            renderItem={(item, index) => {\r\n                return (\r\n                    <Color4GradientComponent\r\n                        value={item.data}\r\n                        onChange={(newGradient: Color4Gradient) => {\r\n                            item.data.gradient = newGradient.gradient;\r\n                            item.data.color1 = newGradient.color1;\r\n                            item.data.color2 = newGradient.color2;\r\n                            props.onChange(newGradient, index);\r\n                        }}\r\n                    />\r\n                );\r\n            }}\r\n        />\r\n    );\r\n};\r\n","export function GroupBy<T, K>(items: T[], getKey: (item: T) => K): { key: K; items: T[] }[] {\r\n    const map = items.reduce((map, item) => {\r\n        const key = getKey(item);\r\n        let group = map.get(key);\r\n        if (!group) {\r\n            map.set(key, (group = []));\r\n        }\r\n        group.push(item);\r\n        return map;\r\n    }, new Map<K, T[]>());\r\n\r\n    return Array.from(map, ([key, items]) => ({ key, items }));\r\n}\r\n","import type { FunctionComponent } from \"react\";\r\n\r\nimport type { GradientBlock, InputBlock, NodeMaterial } from \"core/index\";\r\n\r\nimport { makeStyles, Subtitle2, tokens } from \"@fluentui/react-components\";\r\nimport { EditRegular } from \"@fluentui/react-icons\";\r\nimport { Fragment, useCallback } from \"react\";\r\n\r\nimport { GradientBlockColorStep } from \"core/Materials/Node/Blocks/gradientBlock\";\r\nimport { NodeMaterialBlockConnectionPointTypes } from \"core/Materials/Node/Enums/nodeMaterialBlockConnectionPointTypes\";\r\nimport { Color3 } from \"core/Maths/math.color\";\r\nimport { Color3Gradient } from \"core/Misc/gradients\";\r\nimport { ButtonLine } from \"shared-ui-components/fluent/hoc/buttonLine\";\r\nimport { Color3GradientList } from \"shared-ui-components/fluent/hoc/gradientList\";\r\nimport { Color3PropertyLine, Color4PropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/colorPropertyLine\";\r\nimport { NumberInputPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/inputPropertyLine\";\r\nimport { SwitchPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/switchPropertyLine\";\r\nimport { SyncedSliderPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/syncedSliderPropertyLine\";\r\nimport { Vector2PropertyLine, Vector3PropertyLine, Vector4PropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/vectorPropertyLine\";\r\nimport { MessageBar } from \"shared-ui-components/fluent/primitives/messageBar\";\r\nimport { useProperty } from \"../../../hooks/compoundPropertyHooks\";\r\nimport { useObservableState } from \"../../../hooks/observableHooks\";\r\nimport { GroupBy } from \"../../../misc/arrayUtils\";\r\nimport { BoundProperty } from \"../boundProperty\";\r\n\r\nconst useStyles = makeStyles({\r\n    subsection: {\r\n        marginTop: tokens.spacingVerticalM,\r\n    },\r\n});\r\n\r\nexport const NodeMaterialGeneralProperties: FunctionComponent<{ material: NodeMaterial }> = (props) => {\r\n    const { material } = props;\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Ignore Alpha\" target={material} propertyKey=\"ignoreAlpha\" />\r\n            <ButtonLine\r\n                label=\"Edit\"\r\n                icon={EditRegular}\r\n                onClick={async () => {\r\n                    // TODO: Figure out how to get all the various build steps to work with this.\r\n                    //       See the initial attempt here: https://github.com/BabylonJS/Babylon.js/pull/17646\r\n                    // const { NodeEditor } = await import(\"node-editor/nodeEditor\");\r\n                    // NodeEditor.Show({ nodeMaterial: material });\r\n                    await material.edit();\r\n                }}\r\n            ></ButtonLine>\r\n        </>\r\n    );\r\n};\r\n\r\n// A modified InputBlock type where the value is `NonNullable<unknown>` instead of `any` so it works correctly with BoundProperty.\r\ntype SafeInputBlock = Omit<InputBlock, \"value\"> & { value: NonNullable<unknown> };\r\n\r\nconst InputBlockPropertyLine: FunctionComponent<{ block: SafeInputBlock }> = (props) => {\r\n    const { block } = props;\r\n\r\n    // We need to re-evaluate this outer component when type/isBoolean/min/max change since that determines what type of property line we render.\r\n    const type = useProperty(block, \"type\");\r\n    const isBoolean = useProperty(block, \"isBoolean\");\r\n    const min = useProperty(block, \"min\");\r\n    const max = useProperty(block, \"max\");\r\n\r\n    const commonProps = {\r\n        label: block.name,\r\n        target: block,\r\n        propertyKey: \"value\",\r\n    } as const;\r\n\r\n    if (type === NodeMaterialBlockConnectionPointTypes.Float) {\r\n        if (isBoolean) {\r\n            return <BoundProperty key={`${block.uniqueId} (Switch)`} component={SwitchPropertyLine} {...commonProps} />;\r\n        } else {\r\n            const hasMinMax = !isNaN(min) && !isNaN(max) && min !== max;\r\n            if (hasMinMax) {\r\n                return <BoundProperty key={`${block.uniqueId} (Slider)`} component={SyncedSliderPropertyLine} {...commonProps} min={min} max={max} step={(max - min) / 100.0} />;\r\n            } else {\r\n                return <BoundProperty key={`${block.uniqueId} (Number)`} component={NumberInputPropertyLine} {...commonProps} />;\r\n            }\r\n        }\r\n    } else if (type === NodeMaterialBlockConnectionPointTypes.Color3) {\r\n        return <BoundProperty key={`${block.uniqueId} (Color3)`} component={Color3PropertyLine} {...commonProps} />;\r\n    } else if (type === NodeMaterialBlockConnectionPointTypes.Color4) {\r\n        return <BoundProperty key={`${block.uniqueId} (Color4)`} component={Color4PropertyLine} {...commonProps} />;\r\n    } else if (type === NodeMaterialBlockConnectionPointTypes.Vector2) {\r\n        return <BoundProperty key={`${block.uniqueId} (Vector2)`} component={Vector2PropertyLine} {...commonProps} />;\r\n    } else if (type === NodeMaterialBlockConnectionPointTypes.Vector3) {\r\n        return <BoundProperty key={`${block.uniqueId} (Vector3)`} component={Vector3PropertyLine} {...commonProps} />;\r\n    } else if (type === NodeMaterialBlockConnectionPointTypes.Vector4) {\r\n        return <BoundProperty key={`${block.uniqueId} (Vector4)`} component={Vector4PropertyLine} {...commonProps} />;\r\n    } else {\r\n        return null;\r\n    }\r\n};\r\n\r\nconst GradientBlockPropertyLine: FunctionComponent<{ material: NodeMaterial; block: GradientBlock }> = (props) => {\r\n    const { material, block } = props;\r\n\r\n    const gradients = useObservableState(\r\n        useCallback(() => block.colorSteps.map((step) => new Color3Gradient(step.step, step.color)), [block.colorSteps]),\r\n        block.onValueChangedObservable\r\n    );\r\n\r\n    return (\r\n        <Color3GradientList\r\n            label=\"step\"\r\n            gradients={gradients}\r\n            addGradient={(gradient) => {\r\n                block.colorSteps.push(gradient ? new GradientBlockColorStep(gradient.gradient, gradient.color) : new GradientBlockColorStep(1.0, Color3.White()));\r\n                block.colorStepsUpdated();\r\n                material.build();\r\n            }}\r\n            removeGradient={(_, index) => {\r\n                block.colorSteps.splice(index, 1);\r\n                block.colorStepsUpdated();\r\n                material.build();\r\n            }}\r\n            onChange={(gradient, index) => {\r\n                block.colorSteps[index].step = gradient.gradient;\r\n                block.colorSteps[index].color = gradient.color;\r\n                block.colorStepsUpdated();\r\n                material.build();\r\n            }}\r\n        />\r\n    );\r\n};\r\n\r\nexport const NodeMaterialInputProperties: FunctionComponent<{ material: NodeMaterial }> = (props) => {\r\n    const { material } = props;\r\n\r\n    const classes = useStyles();\r\n\r\n    const inputBlocks = useObservableState(\r\n        useCallback(() => {\r\n            const inspectorVisibleInputBlocks = material\r\n                .getInputBlocks()\r\n                .filter((block) => block.visibleInInspector)\r\n                .map((block) => block as SafeInputBlock);\r\n            const groupedInputBlocks = GroupBy(inspectorVisibleInputBlocks, (block) => block.groupInInspector);\r\n            return groupedInputBlocks.sort((a, b) => a.key.localeCompare(b.key));\r\n        }, [material]),\r\n        material.onBuildObservable,\r\n        material.onBuildErrorObservable\r\n    );\r\n\r\n    const gradientBlocks = useObservableState(\r\n        useCallback(\r\n            () => material.attachedBlocks.filter((block) => block.visibleInInspector && block.getClassName() === \"GradientBlock\").map((block) => block as GradientBlock),\r\n            [material]\r\n        ),\r\n        material.onBuildObservable,\r\n        material.onBuildErrorObservable\r\n    );\r\n\r\n    return (\r\n        <>\r\n            {inputBlocks.length === 0 && gradientBlocks.length === 0 ? (\r\n                <MessageBar\r\n                    key=\"no-visible-input-blocks\"\r\n                    intent=\"info\"\r\n                    title=\"No Visible Input Blocks\"\r\n                    message=\"To see input blocks, mark them as visibleInInspector.\"\r\n                    docLink=\"https://doc.babylonjs.com/features/featuresDeepDive/materials/node_material/nodeMaterial/#adding-blocks\"\r\n                />\r\n            ) : (\r\n                <>\r\n                    {inputBlocks.map((group) => (\r\n                        <Fragment key={`${group.key || \"default\"} (Group)`}>\r\n                            {group.key && <Subtitle2 className={classes.subsection}>{group.key}</Subtitle2>}\r\n                            {group.items.map((block) => (\r\n                                <InputBlockPropertyLine key={block.uniqueId} block={block} />\r\n                            ))}\r\n                        </Fragment>\r\n                    ))}\r\n                    {gradientBlocks.map((block) => (\r\n                        <Fragment key={`${block.uniqueId} (Gradient)`}>\r\n                            <Subtitle2 className={classes.subsection}>{block.name}</Subtitle2>\r\n                            <GradientBlockPropertyLine material={material} block={block} />\r\n                        </Fragment>\r\n                    ))}\r\n                </>\r\n            )}\r\n        </>\r\n    );\r\n};\r\n","import type { FunctionComponent } from \"react\";\r\n\r\nimport { BoundProperty } from \"../boundProperty\";\r\nimport { SwitchPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/switchPropertyLine\";\r\n\r\ntype MaterialWithPublicNormalMaps = {\r\n    invertNormalMapX: boolean;\r\n    invertNormalMapY: boolean;\r\n};\r\n\r\ntype MaterialWithInternalNormalMaps = {\r\n    _invertNormalMapX: boolean;\r\n    _invertNormalMapY: boolean;\r\n};\r\n\r\nexport type MaterialWithNormalMaps = MaterialWithPublicNormalMaps | MaterialWithInternalNormalMaps;\r\n\r\nfunction IsMaterialWithPublicNormalMaps(mat: MaterialWithNormalMaps): mat is MaterialWithPublicNormalMaps {\r\n    return (mat as MaterialWithPublicNormalMaps).invertNormalMapX !== undefined;\r\n}\r\n\r\n/**\r\n * Displays the normal map properties of a standard material.\r\n * @param props - The required properties\r\n * @returns A JSX element representing the normal map properties.\r\n */\r\nexport const NormalMapProperties: FunctionComponent<{ material: MaterialWithNormalMaps }> = (props) => {\r\n    const { material } = props;\r\n\r\n    return (\r\n        <>\r\n            {IsMaterialWithPublicNormalMaps(material) ? (\r\n                <>\r\n                    <BoundProperty component={SwitchPropertyLine} label=\"Invert X Axis\" target={material} propertyKey=\"invertNormalMapX\" />\r\n                    <BoundProperty component={SwitchPropertyLine} label=\"Invert Y Axis\" target={material} propertyKey=\"invertNormalMapY\" />\r\n                </>\r\n            ) : (\r\n                <>\r\n                    <BoundProperty component={SwitchPropertyLine} label=\"Invert X Axis\" target={material} propertyKey=\"_invertNormalMapX\" />\r\n                    <BoundProperty component={SwitchPropertyLine} label=\"Invert Y Axis\" target={material} propertyKey=\"_invertNormalMapY\" />\r\n                </>\r\n            )}\r\n        </>\r\n    );\r\n};\r\n","import type { FunctionComponent } from \"react\";\n\nimport type { OpenPBRMaterial } from \"core/Materials/PBR/openpbrMaterial\";\nimport type { BaseTexture } from \"core/Materials/Textures/baseTexture\";\nimport { BoundProperty } from \"../boundProperty\";\nimport { Color3PropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/colorPropertyLine\";\nimport { SyncedSliderPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/syncedSliderPropertyLine\";\nimport { FileUploadLine } from \"shared-ui-components/fluent/hoc/fileUploadLine\";\nimport { ReadFile } from \"core/Misc/fileTools\";\nimport { Texture } from \"core/Materials/Textures/texture\";\n\n// TODO: ryamtrem / gehalper This function is temporal until there is a line control to handle texture links (similar to the old TextureLinkLineComponent)\nconst UpdateTexture = (file: File, material: OpenPBRMaterial, textureSetter: (texture: BaseTexture) => void) => {\n    ReadFile(\n        file,\n        (data) => {\n            const blob = new Blob([data], { type: \"octet/stream\" });\n            const url = URL.createObjectURL(blob);\n            textureSetter(new Texture(url, material.getScene(), false, false));\n        },\n        undefined,\n        true\n    );\n};\n\n/**\n * Displays the base layer properties of an OpenPBR material.\n * @param props - The required properties\n * @returns A JSX element representing the base layer properties.\n */\nexport const OpenPBRMaterialBaseProperties: FunctionComponent<{ material: OpenPBRMaterial }> = (props) => {\n    const { material } = props;\n\n    return (\n        <>\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"Base Weight\" target={material} propertyKey=\"baseWeight\" min={0} max={1} step={0.01} />\n            <FileUploadLine\n                label=\"Base Weight\"\n                accept=\".jpg, .png, .tga, .dds, .env, .exr\"\n                onClick={(files) => {\n                    if (files.length > 0) {\n                        UpdateTexture(files[0], material, (texture) => (material.baseWeightTexture = texture));\n                    }\n                }}\n            />\n            <BoundProperty component={Color3PropertyLine} label=\"Base Color\" target={material} propertyKey=\"baseColor\" isLinearMode />\n            <FileUploadLine\n                label=\"Base Color\"\n                accept=\".jpg, .png, .tga, .dds, .env, .exr\"\n                onClick={(files) => {\n                    if (files.length > 0) {\n                        UpdateTexture(files[0], material, (texture) => (material.baseColorTexture = texture));\n                    }\n                }}\n            />\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"Base Metalness\" target={material} propertyKey=\"baseMetalness\" min={0} max={1} step={0.01} />\n            <FileUploadLine\n                label=\"Base Metalness\"\n                accept=\".jpg, .png, .tga, .dds, .env, .exr\"\n                onClick={(files) => {\n                    if (files.length > 0) {\n                        UpdateTexture(files[0], material, (texture) => (material.baseMetalnessTexture = texture));\n                    }\n                }}\n            />\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"Base Diffuse Roughness\" target={material} propertyKey=\"baseDiffuseRoughness\" min={0} max={1} step={0.01} />\n            <FileUploadLine\n                label=\"Base Diffuse Roughness\"\n                accept=\".jpg, .png, .tga, .dds, .env, .exr\"\n                onClick={(files) => {\n                    if (files.length > 0) {\n                        UpdateTexture(files[0], material, (texture) => (material.baseDiffuseRoughnessTexture = texture));\n                    }\n                }}\n            />\n        </>\n    );\n};\n\n/**\n * Displays the specular layer properties of an OpenPBR material.\n * @param props - The required properties\n * @returns A JSX element representing the specular layer properties.\n */\nexport const OpenPBRMaterialSpecularProperties: FunctionComponent<{ material: OpenPBRMaterial }> = (props) => {\n    const { material } = props;\n\n    return (\n        <>\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"Specular Weight\" target={material} propertyKey=\"specularWeight\" min={0} max={1} step={0.01} />\n            <FileUploadLine\n                label=\"Specular Weight\"\n                accept=\".jpg, .png, .tga, .dds, .env, .exr\"\n                onClick={(files) => {\n                    if (files.length > 0) {\n                        UpdateTexture(files[0], material, (texture) => (material.specularWeightTexture = texture));\n                    }\n                }}\n            />\n            <BoundProperty component={Color3PropertyLine} label=\"Specular Color\" target={material} propertyKey=\"specularColor\" isLinearMode />\n            <FileUploadLine\n                label=\"Specular Color\"\n                accept=\".jpg, .png, .tga, .dds, .env, .exr\"\n                onClick={(files) => {\n                    if (files.length > 0) {\n                        UpdateTexture(files[0], material, (texture) => (material.specularColorTexture = texture));\n                    }\n                }}\n            />\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"Specular Roughness\" target={material} propertyKey=\"specularRoughness\" min={0} max={1} step={0.01} />\n            <FileUploadLine\n                label=\"Specular Roughness\"\n                accept=\".jpg, .png, .tga, .dds, .env, .exr\"\n                onClick={(files) => {\n                    if (files.length > 0) {\n                        UpdateTexture(files[0], material, (texture) => (material.specularRoughnessTexture = texture));\n                    }\n                }}\n            />\n            <BoundProperty\n                component={SyncedSliderPropertyLine}\n                label=\"Specular Roughness Anisotropy\"\n                target={material}\n                propertyKey=\"specularRoughnessAnisotropy\"\n                min={0}\n                max={1}\n                step={0.01}\n            />\n            <FileUploadLine\n                label=\"Specular Roughness Anisotropy\"\n                accept=\".jpg, .png, .tga, .dds, .env, .exr\"\n                onClick={(files) => {\n                    if (files.length > 0) {\n                        UpdateTexture(files[0], material, (texture) => (material.specularRoughnessAnisotropyTexture = texture));\n                    }\n                }}\n            />\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"Specular IOR\" target={material} propertyKey=\"specularIor\" min={1} max={3} step={0.01} />\n        </>\n    );\n};\n\nexport const OpenPBRMaterialTransmissionProperties: FunctionComponent<{ material: OpenPBRMaterial }> = (props) => {\n    const { material } = props;\n\n    return (\n        <>\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"Transmission Weight\" target={material} propertyKey=\"transmissionWeight\" min={0} max={1} step={0.01} />\n            <FileUploadLine\n                label=\"Transmission Weight\"\n                accept=\".jpg, .png, .tga, .dds, .env, .exr\"\n                onClick={(files) => {\n                    if (files.length > 0) {\n                        UpdateTexture(files[0], material, (texture) => (material.transmissionWeightTexture = texture));\n                    }\n                }}\n            />\n            <BoundProperty component={Color3PropertyLine} label=\"Transmission Color\" target={material} propertyKey=\"transmissionColor\" isLinearMode />\n            <FileUploadLine\n                label=\"Transmission Color\"\n                accept=\".jpg, .png, .tga, .dds, .env, .exr\"\n                onClick={(files) => {\n                    if (files.length > 0) {\n                        UpdateTexture(files[0], material, (texture) => (material.transmissionColorTexture = texture));\n                    }\n                }}\n            />\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"Transmission Depth\" target={material} propertyKey=\"transmissionDepth\" min={0} step={0.01} />\n            <FileUploadLine\n                label=\"Transmission Depth\"\n                accept=\".jpg, .png, .tga, .dds, .env, .exr\"\n                onClick={(files) => {\n                    if (files.length > 0) {\n                        UpdateTexture(files[0], material, (texture) => (material.transmissionDepthTexture = texture));\n                    }\n                }}\n            />\n            <BoundProperty component={Color3PropertyLine} label=\"Transmission Scatter\" target={material} propertyKey=\"transmissionScatter\" isLinearMode />\n            <FileUploadLine\n                label=\"Transmission Scatter\"\n                accept=\".jpg, .png, .tga, .dds, .env, .exr\"\n                onClick={(files) => {\n                    if (files.length > 0) {\n                        UpdateTexture(files[0], material, (texture) => (material.transmissionScatterTexture = texture));\n                    }\n                }}\n            />\n            <BoundProperty\n                component={SyncedSliderPropertyLine}\n                label=\"Transmission Scatter Anisotropy\"\n                target={material}\n                propertyKey=\"transmissionScatterAnisotropy\"\n                min={-1}\n                max={1}\n                step={0.01}\n            />\n            <BoundProperty\n                component={SyncedSliderPropertyLine}\n                label=\"Transmission Dispersion Abbe Number\"\n                target={material}\n                propertyKey=\"transmissionDispersionAbbeNumber\"\n                min={1}\n                max={100}\n                step={1}\n            />\n            <BoundProperty\n                component={SyncedSliderPropertyLine}\n                label=\"Transmission Dispersion Scale\"\n                target={material}\n                propertyKey=\"transmissionDispersionScale\"\n                min={0}\n                max={1}\n                step={0.01}\n            />\n            <FileUploadLine\n                label=\"Transmission Dispersion Scale\"\n                accept=\".jpg, .png, .tga, .dds, .env, .exr\"\n                onClick={(files) => {\n                    if (files.length > 0) {\n                        UpdateTexture(files[0], material, (texture) => (material.transmissionDispersionScaleTexture = texture));\n                    }\n                }}\n            />\n        </>\n    );\n};\n\n/**\n * Displays the coat layer properties of an OpenPBR material.\n * @param props - The required properties\n * @returns A JSX element representing the coat layer properties.\n */\nexport const OpenPBRMaterialCoatProperties: FunctionComponent<{ material: OpenPBRMaterial }> = (props) => {\n    const { material } = props;\n\n    return (\n        <>\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"Coat Weight\" target={material} propertyKey=\"coatWeight\" min={0} max={1} step={0.01} />\n            <FileUploadLine\n                label=\"Coat Weight\"\n                accept=\".jpg, .png, .tga, .dds, .env, .exr\"\n                onClick={(files) => {\n                    if (files.length > 0) {\n                        UpdateTexture(files[0], material, (texture) => (material.coatWeightTexture = texture));\n                    }\n                }}\n            />\n            <BoundProperty component={Color3PropertyLine} label=\"Coat Color\" target={material} propertyKey=\"coatColor\" isLinearMode />\n            <FileUploadLine\n                label=\"Coat Color\"\n                accept=\".jpg, .png, .tga, .dds, .env, .exr\"\n                onClick={(files) => {\n                    if (files.length > 0) {\n                        UpdateTexture(files[0], material, (texture) => (material.coatColorTexture = texture));\n                    }\n                }}\n            />\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"Coat Roughness\" target={material} propertyKey=\"coatRoughness\" min={0} max={1} step={0.01} />\n            <FileUploadLine\n                label=\"Coat Roughness\"\n                accept=\".jpg, .png, .tga, .dds, .env, .exr\"\n                onClick={(files) => {\n                    if (files.length > 0) {\n                        UpdateTexture(files[0], material, (texture) => (material.coatRoughnessTexture = texture));\n                    }\n                }}\n            />\n            <BoundProperty\n                component={SyncedSliderPropertyLine}\n                label=\"Coat Roughness Anisotropy\"\n                target={material}\n                propertyKey=\"coatRoughnessAnisotropy\"\n                min={0}\n                max={1}\n                step={0.01}\n            />\n            <FileUploadLine\n                label=\"Coat Roughness Anisotropy\"\n                accept=\".jpg, .png, .tga, .dds, .env, .exr\"\n                onClick={(files) => {\n                    if (files.length > 0) {\n                        UpdateTexture(files[0], material, (texture) => (material.coatRoughnessAnisotropyTexture = texture));\n                    }\n                }}\n            />\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"Coat IOR\" target={material} propertyKey=\"coatIor\" min={1} max={3} step={0.01} />\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"Coat Darkening\" target={material} propertyKey=\"coatDarkening\" min={0} max={1} step={0.01} />\n            <FileUploadLine\n                label=\"Coat Darkening\"\n                accept=\".jpg, .png, .tga, .dds, .env, .exr\"\n                onClick={(files) => {\n                    if (files.length > 0) {\n                        UpdateTexture(files[0], material, (texture) => (material.coatDarkeningTexture = texture));\n                    }\n                }}\n            />\n        </>\n    );\n};\n\n/**\n * Displays the fuzz layer properties of an OpenPBR material.\n * @param props - The required properties\n * @returns A JSX element representing the fuzz layer properties.\n */\nexport const OpenPBRMaterialFuzzProperties: FunctionComponent<{ material: OpenPBRMaterial }> = (props) => {\n    const { material } = props;\n\n    return (\n        <>\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"Fuzz Weight\" target={material} propertyKey=\"fuzzWeight\" min={0} max={1} step={0.01} />\n            <FileUploadLine\n                label=\"Fuzz Weight\"\n                accept=\".jpg, .png, .tga, .dds, .env, .exr\"\n                onClick={(files) => {\n                    if (files.length > 0) {\n                        UpdateTexture(files[0], material, (texture) => (material.fuzzWeightTexture = texture));\n                    }\n                }}\n            />\n            <BoundProperty component={Color3PropertyLine} label=\"Fuzz Color\" target={material} propertyKey=\"fuzzColor\" isLinearMode />\n            <FileUploadLine\n                label=\"Fuzz Color\"\n                accept=\".jpg, .png, .tga, .dds, .env, .exr\"\n                onClick={(files) => {\n                    if (files.length > 0) {\n                        UpdateTexture(files[0], material, (texture) => (material.fuzzColorTexture = texture));\n                    }\n                }}\n            />\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"Fuzz Roughness\" target={material} propertyKey=\"fuzzRoughness\" min={0} max={1} step={0.01} />\n            <FileUploadLine\n                label=\"Fuzz Roughness\"\n                accept=\".jpg, .png, .tga, .dds, .env, .exr\"\n                onClick={(files) => {\n                    if (files.length > 0) {\n                        UpdateTexture(files[0], material, (texture) => (material.fuzzRoughnessTexture = texture));\n                    }\n                }}\n            />\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"Number of Samples\" target={material} propertyKey=\"fuzzSampleNumber\" min={4} max={64} step={1} />\n        </>\n    );\n};\n\n/**\n * Displays the emission properties of an OpenPBR material.\n * @param props - The required properties\n * @returns A JSX element representing the emission properties.\n */\nexport const OpenPBRMaterialEmissionProperties: FunctionComponent<{ material: OpenPBRMaterial }> = (props) => {\n    const { material } = props;\n\n    return (\n        <>\n            <BoundProperty component={Color3PropertyLine} label=\"Emission Color\" target={material} propertyKey=\"emissionColor\" isLinearMode />\n            <FileUploadLine\n                label=\"Emission Color\"\n                accept=\".jpg, .png, .tga, .dds, .env, .exr\"\n                onClick={(files) => {\n                    if (files.length > 0) {\n                        UpdateTexture(files[0], material, (texture) => (material.emissionColorTexture = texture));\n                    }\n                }}\n            />\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"Emission Luminance\" target={material} propertyKey=\"emissionLuminance\" min={0} max={10} step={0.01} />\n        </>\n    );\n};\n\n/**\n * Displays the thin film properties of an OpenPBR material.\n * @param props - The required properties\n * @returns A JSX element representing the thin film properties.\n */\nexport const OpenPBRMaterialThinFilmProperties: FunctionComponent<{ material: OpenPBRMaterial }> = (props) => {\n    const { material } = props;\n\n    return (\n        <>\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"Thin Film Weight\" target={material} propertyKey=\"thinFilmWeight\" min={0} max={1} step={0.01} />\n            <FileUploadLine\n                label=\"Thin Film Weight\"\n                accept=\".jpg, .png, .tga, .dds, .env, .exr\"\n                onClick={(files) => {\n                    if (files.length > 0) {\n                        UpdateTexture(files[0], material, (texture) => (material.thinFilmWeightTexture = texture));\n                    }\n                }}\n            />\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"Thin Film Thickness\" target={material} propertyKey=\"thinFilmThickness\" min={0} max={1} step={0.01} />\n            <FileUploadLine\n                label=\"Thin Film Thickness\"\n                accept=\".jpg, .png, .tga, .dds, .env, .exr\"\n                onClick={(files) => {\n                    if (files.length > 0) {\n                        UpdateTexture(files[0], material, (texture) => (material.thinFilmThicknessTexture = texture));\n                    }\n                }}\n            />\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"Thin Film IOR\" target={material} propertyKey=\"thinFilmIor\" min={1} max={3} step={0.01} />\n        </>\n    );\n};\n\n/**\n * Displays the geometry properties of an OpenPBR material.\n * @param props - The required properties\n * @returns A JSX element representing the geometry properties.\n */\nexport const OpenPBRMaterialGeometryProperties: FunctionComponent<{ material: OpenPBRMaterial }> = (props) => {\n    const { material } = props;\n\n    return (\n        <>\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"Opacity\" target={material} propertyKey=\"geometryOpacity\" min={0} max={1} step={0.01} />\n            <FileUploadLine\n                label=\"Geometry Opacity\"\n                accept=\".jpg, .png, .tga, .dds, .env, .exr\"\n                onClick={(files) => {\n                    if (files.length > 0) {\n                        UpdateTexture(files[0], material, (texture) => (material.geometryOpacityTexture = texture));\n                    }\n                }}\n            />\n            <FileUploadLine\n                label=\"Geometry Normal\"\n                accept=\".jpg, .png, .tga, .dds, .env, .exr\"\n                onClick={(files) => {\n                    if (files.length > 0) {\n                        UpdateTexture(files[0], material, (texture) => (material.geometryNormalTexture = texture));\n                    }\n                }}\n            />\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"Tangent Angle\" target={material} propertyKey=\"geometryTangentAngle\" min={0} max={Math.PI} step={0.01} />\n            <FileUploadLine\n                label=\"Geometry Tangent\"\n                accept=\".jpg, .png, .tga, .dds, .env, .exr\"\n                onClick={(files) => {\n                    if (files.length > 0) {\n                        UpdateTexture(files[0], material, (texture) => (material.geometryTangentTexture = texture));\n                    }\n                }}\n            />\n            <BoundProperty\n                component={SyncedSliderPropertyLine}\n                label=\"Coat Tangent Angle\"\n                target={material}\n                propertyKey=\"geometryCoatTangentAngle\"\n                min={0}\n                max={Math.PI}\n                step={0.01}\n            />\n            <FileUploadLine\n                label=\"Geometry Coat Normal\"\n                accept=\".jpg, .png, .tga, .dds, .env, .exr\"\n                onClick={(files) => {\n                    if (files.length > 0) {\n                        UpdateTexture(files[0], material, (texture) => (material.geometryCoatNormalTexture = texture));\n                    }\n                }}\n            />\n            <FileUploadLine\n                label=\"Geometry Coat Tangent\"\n                accept=\".jpg, .png, .tga, .dds, .env, .exr\"\n                onClick={(files) => {\n                    if (files.length > 0) {\n                        UpdateTexture(files[0], material, (texture) => (material.geometryCoatTangentTexture = texture));\n                    }\n                }}\n            />\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"Geometry Thickness\" target={material} propertyKey=\"geometryThickness\" min={0} step={0.1} />\n            <FileUploadLine\n                label=\"Geometry Thickness\"\n                accept=\".jpg, .png, .tga, .dds, .env, .exr\"\n                onClick={(files) => {\n                    if (files.length > 0) {\n                        UpdateTexture(files[0], material, (texture) => (material.geometryThicknessTexture = texture));\n                    }\n                }}\n            />\n        </>\n    );\n};\n","import type { FunctionComponent } from \"react\";\r\nimport { useState, useContext, useEffect } from \"react\";\r\nimport { Combobox as FluentComboBox, makeStyles, useComboboxFilter, useId, Option } from \"@fluentui/react-components\";\r\nimport type { OptionOnSelectData, SelectionEvents } from \"@fluentui/react-components\";\r\nimport { ToolContext } from \"../hoc/fluentToolWrapper\";\r\nimport { CustomTokens } from \"./utils\";\r\nimport type { PrimitiveProps } from \"./primitive\";\r\n\r\nconst useStyles = makeStyles({\r\n    root: {\r\n        display: \"grid\",\r\n        gridTemplateRows: \"repeat(1fr)\",\r\n        justifyItems: \"start\",\r\n        gap: \"2px\",\r\n        maxWidth: \"400px\",\r\n    },\r\n    comboBox: {\r\n        width: CustomTokens.inputWidth,\r\n        minWidth: CustomTokens.inputWidth,\r\n        boxSizing: \"border-box\",\r\n    },\r\n    input: {\r\n        minWidth: 0,\r\n    },\r\n    listbox: {\r\n        width: \"fit-content\",\r\n        minWidth: \"fit-content\",\r\n        maxWidth: \"350px\",\r\n    },\r\n});\r\n\r\n/**\r\n * An option object for the ComboBox with separate label and value.\r\n */\r\nexport type ComboBoxOption = {\r\n    /**\r\n     * Defines the visible part of the option\r\n     */\r\n    label: string;\r\n    /**\r\n     * Defines the value part of the option\r\n     */\r\n    value: string;\r\n};\r\n\r\nexport type ComboBoxProps = PrimitiveProps<string> & {\r\n    /**\r\n     * Label for the ComboBox\r\n     */\r\n    label: string;\r\n    /**\r\n     * Options to display as label/value pairs\r\n     */\r\n    options: ComboBoxOption[];\r\n};\r\n\r\n/**\r\n * Wrapper around a Fluent ComboBox that allows for filtering options.\r\n * @param props\r\n * @returns\r\n */\r\nexport const ComboBox: FunctionComponent<ComboBoxProps> = (props) => {\r\n    ComboBox.displayName = \"ComboBox\";\r\n    const comboId = useId();\r\n    const styles = useStyles();\r\n    const { size } = useContext(ToolContext);\r\n\r\n    // Find the label for the current value\r\n    const getLabel = (value: string) => props.options.find((opt) => opt.value === value)?.label ?? \"\";\r\n\r\n    const [query, setQuery] = useState(getLabel(props.value ?? \"\"));\r\n\r\n    useEffect(() => {\r\n        setQuery(getLabel(props.value ?? \"\"));\r\n    }, [props.value, props.options]);\r\n\r\n    // Convert to Fluent's { children, value } format\r\n    const normalizedOptions = props.options.map((opt) => ({ children: opt.label, value: opt.value }));\r\n\r\n    const children = useComboboxFilter(query, normalizedOptions, {\r\n        noOptionsMessage: \"No items match your search.\",\r\n        optionToReactKey: (option) => option.value,\r\n        optionToText: (option) => option.children,\r\n        renderOption: (option) => (\r\n            <Option key={option.value} value={option.value} text={option.children}>\r\n                {option.children}\r\n            </Option>\r\n        ),\r\n    });\r\n\r\n    const onOptionSelect = (_e: SelectionEvents, data: OptionOnSelectData) => {\r\n        setQuery(data.optionText ?? \"\");\r\n        data.optionValue && props.onChange(data.optionValue);\r\n    };\r\n\r\n    return (\r\n        <div className={styles.root}>\r\n            <label id={comboId}>{props.label}</label>\r\n            <FluentComboBox\r\n                size={size}\r\n                root={{ className: styles.comboBox }}\r\n                input={{ className: styles.input }}\r\n                listbox={{ className: styles.listbox }}\r\n                onOptionSelect={onOptionSelect}\r\n                aria-labelledby={comboId}\r\n                placeholder=\"Search..\"\r\n                onChange={(ev) => setQuery(ev.target.value)}\r\n                value={query}\r\n            >\r\n                {children}\r\n            </FluentComboBox>\r\n        </div>\r\n    );\r\n};\r\n","import type { Nullable } from \"core/types\";\r\nimport type { ImmutablePrimitiveProps, PrimitiveProps } from \"./primitive\";\r\n\r\nimport { useMemo, useState } from \"react\";\r\nimport { LinkDismissRegular, LinkEditRegular } from \"@fluentui/react-icons\";\r\nimport { ComboBox } from \"./comboBox\";\r\nimport { Link } from \"./link\";\r\nimport { Button } from \"./button\";\r\nimport { makeStyles, tokens, Tooltip } from \"@fluentui/react-components\";\r\n\r\ntype Entity = { uniqueId: number };\r\n\r\n/**\r\n * Props for the EntitySelector component\r\n */\r\nexport type EntitySelectorProps<T extends Entity> = (PrimitiveProps<Nullable<T>> | ImmutablePrimitiveProps<Nullable<T>>) & {\r\n    /**\r\n     * Function to get the list of entities to choose from\r\n     */\r\n    getEntities: () => T[];\r\n    /**\r\n     * Function to get the display name from an entity\r\n     */\r\n    getName: (entity: T) => string;\r\n    /**\r\n     * Optional filter function to filter which entities are shown\r\n     */\r\n    filter?: (entity: T) => boolean;\r\n    /**\r\n     * Callback when the entity link is clicked\r\n     */\r\n    onLink: (entity: T) => void;\r\n    /**\r\n     * Optional default value that enables clearing the current linked entity\r\n     */\r\n    defaultValue?: T;\r\n};\r\n\r\nconst useStyles = makeStyles({\r\n    linkDiv: {\r\n        display: \"flex\",\r\n        flexDirection: \"row\",\r\n        alignItems: \"center\",\r\n        gap: tokens.spacingHorizontalS,\r\n        minWidth: 0,\r\n        overflow: \"hidden\",\r\n    },\r\n    link: {\r\n        minWidth: 0,\r\n        overflow: \"hidden\",\r\n        textOverflow: \"ellipsis\",\r\n        whiteSpace: \"nowrap\",\r\n    },\r\n});\r\n\r\n/**\r\n * A generic primitive component with a ComboBox for selecting from a list of entities.\r\n * Supports entities with duplicate names by using uniqueId for identity.\r\n * @param props ChooseEntityProps\r\n * @returns EntitySelector component\r\n */\r\nexport function EntitySelector<T extends Entity>(props: EntitySelectorProps<T>): JSX.Element {\r\n    const { value, onLink, getEntities, getName, filter, defaultValue } = props;\r\n\r\n    const onChange = (props as PrimitiveProps<Nullable<T>>).onChange as PrimitiveProps<Nullable<T>>[\"onChange\"] | undefined;\r\n\r\n    const classes = useStyles();\r\n\r\n    // Build options with uniqueId as key\r\n    const options = useMemo(() => {\r\n        return getEntities()\r\n            .filter((e) => e.uniqueId !== undefined && (!filter || filter(e)))\r\n            .map((entity) => ({\r\n                label: getName(entity)?.toString() || \"\",\r\n                value: entity.uniqueId.toString(),\r\n            }))\r\n            .sort((a, b) => a.label.localeCompare(b.label));\r\n    }, [getEntities, getName, filter]);\r\n\r\n    const [isEditing, setIsEditing] = useState(false);\r\n\r\n    const handleEntitySelect = (key: string) => {\r\n        const entity = getEntities().find((e) => e.uniqueId.toString() === key);\r\n        onChange?.(entity ?? null);\r\n        setIsEditing(false);\r\n    };\r\n\r\n    // Get current entity key for display\r\n    const currentKey = value ? value.uniqueId.toString() : \"\";\r\n\r\n    if (value && !isEditing) {\r\n        // If there is a value and we are not editing, show the link view\r\n        return (\r\n            <div className={classes.linkDiv}>\r\n                <Tooltip content={getName(value)} relationship=\"label\">\r\n                    <Link className={classes.link} value={getName(value)} onLink={() => onLink(value)} />\r\n                </Tooltip>\r\n                {/* Only allow changing the linked entity if an onChange handler is provided */}\r\n                {onChange &&\r\n                    (defaultValue !== undefined ? (\r\n                        // If the defaultValue is specified, then allow resetting to the default\r\n                        <Tooltip content=\"Unlink\" relationship=\"label\">\r\n                            <Button icon={LinkDismissRegular} onClick={() => onChange(defaultValue)} />\r\n                        </Tooltip>\r\n                    ) : (\r\n                        // Otherwise, just allow editing to a new value\r\n                        <Tooltip content=\"Edit Link\" relationship=\"label\">\r\n                            <Button icon={LinkEditRegular} onClick={() => setIsEditing(true)} />\r\n                        </Tooltip>\r\n                    ))}\r\n            </div>\r\n        );\r\n    } else {\r\n        // Otherwise, show the ComboBox for selection\r\n        return <ComboBox label=\"\" options={options} value={currentKey} onChange={handleEntitySelect} />;\r\n    }\r\n}\r\nEntitySelector.displayName = \"EntitySelector\";\r\n","import type { FunctionComponent } from \"react\";\r\nimport type { Scene } from \"core/scene\";\r\nimport type { Nullable } from \"core/types\";\r\nimport type { Material } from \"core/Materials/material\";\r\nimport type { PrimitiveProps } from \"./primitive\";\r\nimport type { EntitySelectorProps } from \"./entitySelector\";\r\n\r\nimport { useCallback } from \"react\";\r\nimport { EntitySelector } from \"./entitySelector\";\r\n\r\nexport type MaterialSelectorProps = PrimitiveProps<Nullable<Material>> & {\r\n    /**\r\n     * The scene to get materials from\r\n     */\r\n    scene: Scene;\r\n    /**\r\n     * Optional filter function to filter which materials are shown\r\n     */\r\n    filter?: (material: Material) => boolean;\r\n} & Omit<EntitySelectorProps<Material>, \"getEntities\" | \"getName\">;\r\n\r\n/**\r\n * A primitive component with a ComboBox for selecting from existing scene materials.\r\n * @param props MaterialSelectorProps\r\n * @returns MaterialSelector component\r\n */\r\nexport const MaterialSelector: FunctionComponent<MaterialSelectorProps> = (props) => {\r\n    MaterialSelector.displayName = \"MaterialSelector\";\r\n    const { scene, ...rest } = props;\r\n\r\n    const getMaterials = useCallback(() => scene.materials, [scene.materials]);\r\n    const getName = useCallback((material: Material) => material.name, []);\r\n\r\n    return <EntitySelector {...rest} getEntities={getMaterials} getName={getName} />;\r\n};\r\n","import type { FunctionComponent } from \"react\";\r\nimport type { Scene } from \"core/scene\";\r\nimport type { Nullable } from \"core/types\";\r\nimport type { Node } from \"core/node\";\r\nimport type { PrimitiveProps } from \"./primitive\";\r\nimport type { EntitySelectorProps } from \"./entitySelector\";\r\n\r\nimport { useCallback } from \"react\";\r\nimport { EntitySelector } from \"./entitySelector\";\r\n\r\nexport type NodeSelectorProps = PrimitiveProps<Nullable<Node>> & {\r\n    /**\r\n     * The scene to get nodes from\r\n     */\r\n    scene: Scene;\r\n    /**\r\n     * Optional filter function to filter which nodes are shown\r\n     */\r\n    filter?: (node: Node) => boolean;\r\n} & Omit<EntitySelectorProps<Node>, \"getEntities\" | \"getName\">;\r\n\r\n/**\r\n * A primitive component with a ComboBox for selecting from existing scene nodes.\r\n * @param props NodeSelectorProps\r\n * @returns NodeSelector component\r\n */\r\nexport const NodeSelector: FunctionComponent<NodeSelectorProps> = (props) => {\r\n    NodeSelector.displayName = \"NodeSelector\";\r\n    const { scene, ...rest } = props;\r\n\r\n    const getNodes = useCallback(() => scene.getNodes(), [scene]);\r\n    const getName = useCallback((node: Node) => node.name, []);\r\n\r\n    return <EntitySelector {...rest} getEntities={getNodes} getName={getName} />;\r\n};\r\n","import type { FunctionComponent } from \"react\";\r\nimport { useCallback } from \"react\";\r\nimport type { BaseTexture } from \"core/Materials/Textures/baseTexture\";\r\nimport type { Scene } from \"core/scene\";\r\nimport { Texture } from \"core/Materials/Textures/texture\";\r\nimport { CubeTexture } from \"core/Materials/Textures/cubeTexture\";\r\nimport { ReadFile } from \"core/Misc/fileTools\";\r\nimport { UploadButton } from \"../primitives/uploadButton\";\r\n\r\ntype TextureUploadUpdateProps = {\r\n    /**\r\n     * Existing texture to update via updateURL\r\n     */\r\n    texture: BaseTexture;\r\n    /**\r\n     * Callback after texture is updated\r\n     */\r\n    onChange?: (texture: BaseTexture) => void;\r\n    scene?: never;\r\n    cubeOnly?: never;\r\n};\r\n\r\ntype TextureUploadCreateProps = {\r\n    /**\r\n     * The scene to create the texture in\r\n     */\r\n    scene: Scene;\r\n    /**\r\n     * Callback when a new texture is created\r\n     */\r\n    onChange: (texture: BaseTexture) => void;\r\n    /**\r\n     * Whether to create cube textures\r\n     */\r\n    cubeOnly?: boolean;\r\n    texture?: never;\r\n};\r\n\r\ntype TextureUploadProps = TextureUploadUpdateProps | TextureUploadCreateProps;\r\n\r\n/**\r\n * A button that uploads a file and either:\r\n * - Updates an existing Texture or CubeTexture via updateURL (if texture prop is provided)\r\n * - Creates a new Texture or CubeTexture (if scene/onChange props are provided)\r\n * @param props TextureUploadProps\r\n * @returns UploadButton component that handles texture upload\r\n */\r\nexport const TextureUpload: FunctionComponent<TextureUploadProps> = (props) => {\r\n    TextureUpload.displayName = \"TextureUpload\";\r\n    const label = props.texture ? \"Upload Texture\" : undefined;\r\n    // TODO: This should probably be dynamically fetching a list of supported texture extensions\r\n    const accept = \".jpg, .png, .tga, .dds, .env, .exr\";\r\n    const handleUpload = useCallback(\r\n        (files: FileList) => {\r\n            const file = files[0];\r\n            if (!file) {\r\n                return;\r\n            }\r\n\r\n            ReadFile(\r\n                file,\r\n                (data) => {\r\n                    const blob = new Blob([data], { type: \"octet/stream\" });\r\n\r\n                    // Update existing texture\r\n                    if (props.texture) {\r\n                        const { texture, onChange } = props;\r\n                        const reader = new FileReader();\r\n                        reader.readAsDataURL(blob);\r\n                        reader.onloadend = () => {\r\n                            const base64data = reader.result as string;\r\n\r\n                            if (texture instanceof CubeTexture) {\r\n                                let extension: string | undefined = undefined;\r\n                                if (file.name.toLowerCase().indexOf(\".dds\") > 0) {\r\n                                    extension = \".dds\";\r\n                                } else if (file.name.toLowerCase().indexOf(\".env\") > 0) {\r\n                                    extension = \".env\";\r\n                                }\r\n                                texture.updateURL(base64data, extension, () => onChange?.(texture));\r\n                            } else if (texture instanceof Texture) {\r\n                                texture.updateURL(base64data, null, () => onChange?.(texture));\r\n                            }\r\n                        };\r\n                    } else {\r\n                        // Create new texture\r\n                        const { scene, cubeOnly, onChange } = props;\r\n                        const url = URL.createObjectURL(blob);\r\n                        const extension = file.name.split(\".\").pop()?.toLowerCase();\r\n\r\n                        // Revoke the object URL after texture loads to prevent memory leak\r\n                        const revokeUrl = () => URL.revokeObjectURL(url);\r\n\r\n                        const newTexture = cubeOnly\r\n                            ? new CubeTexture(url, scene, [], false, undefined, revokeUrl, undefined, undefined, false, extension ? \".\" + extension : undefined)\r\n                            : new Texture(url, scene, false, false, undefined, revokeUrl);\r\n\r\n                        onChange(newTexture);\r\n                    }\r\n                },\r\n                undefined,\r\n                true\r\n            );\r\n        },\r\n        [props]\r\n    );\r\n\r\n    return <UploadButton onUpload={handleUpload} accept={accept} title={\"Upload Texture\"} label={label} />;\r\n};\r\n","import type { BaseTexture } from \"core/Materials/Textures/baseTexture\";\r\nimport type { Scene } from \"core/scene\";\r\nimport type { Nullable } from \"core/types\";\r\nimport type { FunctionComponent } from \"react\";\r\nimport type { PrimitiveProps } from \"./primitive\";\r\nimport type { EntitySelectorProps } from \"./entitySelector\";\r\n\r\nimport { makeStyles, tokens } from \"@fluentui/react-components\";\r\nimport { useCallback } from \"react\";\r\nimport { TextureUpload } from \"../hoc/textureUpload\";\r\nimport { EntitySelector } from \"./entitySelector\";\r\n\r\nconst useStyles = makeStyles({\r\n    container: {\r\n        display: \"flex\",\r\n        flexDirection: \"row\",\r\n        alignItems: \"center\",\r\n        gap: tokens.spacingHorizontalS,\r\n    },\r\n});\r\n\r\nexport type TextureSelectorProps = PrimitiveProps<Nullable<BaseTexture>> & {\r\n    /**\r\n     * The scene to get textures from\r\n     */\r\n    scene: Scene;\r\n    /**\r\n     * File types to accept for upload\r\n     */\r\n    accept?: string;\r\n    /**\r\n     * Whether to only allow cube textures\r\n     */\r\n    cubeOnly?: boolean;\r\n} & Omit<EntitySelectorProps<BaseTexture>, \"getEntities\" | \"getName\">;\r\n\r\n/**\r\n * A primitive component with a ComboBox for selecting from existing scene textures\r\n * and a button for uploading new texture files.\r\n * @param props TextureSelectorProps\r\n * @returns TextureSelector component\r\n */\r\nexport const TextureSelector: FunctionComponent<TextureSelectorProps> = (props) => {\r\n    TextureSelector.displayName = \"TextureSelector\";\r\n    const { scene, cubeOnly, value, onChange, onLink, defaultValue } = props;\r\n    const classes = useStyles();\r\n\r\n    const getTextures = useCallback(() => scene.textures, [scene.textures]);\r\n    const getName = useCallback((texture: BaseTexture) => texture.displayName || texture.name || `${texture.getClassName() || \"Unnamed Texture\"} (${texture.uniqueId})`, []);\r\n    const filter = useCallback((texture: BaseTexture) => !cubeOnly || texture.isCube, [cubeOnly]);\r\n\r\n    return (\r\n        <div className={classes.container}>\r\n            <EntitySelector value={value} onChange={onChange} onLink={onLink} defaultValue={defaultValue} getEntities={getTextures} getName={getName} filter={filter} />\r\n            {!value && <TextureUpload scene={scene} onChange={onChange} cubeOnly={cubeOnly} />}\r\n        </div>\r\n    );\r\n};\r\n","import type { FunctionComponent } from \"react\";\r\nimport type { Scene } from \"core/scene\";\r\nimport type { Nullable } from \"core/types\";\r\nimport type { Skeleton } from \"core/Bones/skeleton\";\r\nimport type { PrimitiveProps } from \"./primitive\";\r\nimport type { EntitySelectorProps } from \"./entitySelector\";\r\n\r\nimport { useCallback } from \"react\";\r\nimport { EntitySelector } from \"./entitySelector\";\r\n\r\nexport type SkeletonSelectorProps = PrimitiveProps<Nullable<Skeleton>> & {\r\n    /**\r\n     * The scene to get skeletons from\r\n     */\r\n    scene: Scene;\r\n    /**\r\n     * Optional filter function to filter which skeletons are shown\r\n     */\r\n    filter?: (skeleton: Skeleton) => boolean;\r\n} & Omit<EntitySelectorProps<Skeleton>, \"getEntities\" | \"getName\">;\r\n\r\n/**\r\n * A primitive component with a ComboBox for selecting from existing scene skeletons.\r\n * @param props SkeletonSelectorProps\r\n * @returns SkeletonSelector component\r\n */\r\nexport const SkeletonSelector: FunctionComponent<SkeletonSelectorProps> = (props) => {\r\n    SkeletonSelector.displayName = \"SkeletonSelector\";\r\n    const { scene, ...rest } = props;\r\n\r\n    const getSkeletons = useCallback(() => scene.skeletons, [scene.skeletons]);\r\n    const getName = useCallback((skeleton: Skeleton) => skeleton.name, []);\r\n\r\n    return <EntitySelector {...rest} getEntities={getSkeletons} getName={getName} />;\r\n};\r\n","import type { Node } from \"core/node\";\r\nimport type { Nullable } from \"core/types\";\r\nimport type { PropertyLineProps } from \"./propertyLine\";\r\nimport type { NodeSelectorProps } from \"../../primitives/nodeSelector\";\r\nimport type { MaterialSelectorProps } from \"../../primitives/materialSelector\";\r\nimport type { TextureSelectorProps } from \"../../primitives/textureSelector\";\r\nimport type { SkeletonSelectorProps } from \"../../primitives/skeletonSelector\";\r\nimport type { Material } from \"core/Materials/material\";\r\nimport type { BaseTexture } from \"core/Materials/Textures/baseTexture\";\r\nimport type { Skeleton } from \"core/Bones/skeleton\";\r\n\r\nimport { MaterialSelector } from \"../../primitives/materialSelector\";\r\nimport { PropertyLine } from \"./propertyLine\";\r\nimport { NodeSelector } from \"../../primitives/nodeSelector\";\r\nimport { TextureSelector } from \"../../primitives/textureSelector\";\r\nimport { SkeletonSelector } from \"../../primitives/skeletonSelector\";\r\n\r\ntype NodeSelectorPropertyLineProps = PropertyLineProps<Nullable<Node>> & NodeSelectorProps;\r\ntype MaterialSelectorPropertyLineProps = PropertyLineProps<Nullable<Material>> & MaterialSelectorProps;\r\ntype TextureSelectorPropertyLineProps = PropertyLineProps<Nullable<BaseTexture>> & TextureSelectorProps;\r\ntype SkeletonSelectorPropertyLineProps = PropertyLineProps<Nullable<Skeleton>> & SkeletonSelectorProps;\r\n\r\nexport const NodeSelectorPropertyLine = (props: NodeSelectorPropertyLineProps) => <PropertyLine {...props} children={<NodeSelector {...props} />} />;\r\nexport const MaterialSelectorPropertyLine = (props: MaterialSelectorPropertyLineProps) => <PropertyLine {...props} children={<MaterialSelector {...props} />} />;\r\nexport const TextureSelectorPropertyLine = (props: TextureSelectorPropertyLineProps) => <PropertyLine {...props} children={<TextureSelector {...props} />} />;\r\nexport const SkeletonSelectorPropertyLine = (props: SkeletonSelectorPropertyLineProps) => <PropertyLine {...props} children={<SkeletonSelector {...props} />} />;\r\n","import type { FunctionComponent } from \"react\";\r\n\r\nimport { BoundProperty } from \"../boundProperty\";\r\nimport { useProperty } from \"../../../hooks/compoundPropertyHooks\";\r\n\r\nimport { SyncedSliderPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/syncedSliderPropertyLine\";\r\nimport { SwitchPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/switchPropertyLine\";\r\n\r\nimport { PBRBaseMaterial } from \"core/Materials/PBR/pbrBaseMaterial\";\r\nimport { Color3PropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/colorPropertyLine\";\r\nimport { Vector2PropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/vectorPropertyLine\";\r\n\r\nimport { Collapse } from \"shared-ui-components/fluent/primitives/collapse\";\r\nimport { NumberDropdownPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/dropdownPropertyLine\";\r\nimport type { DropdownOption } from \"shared-ui-components/fluent/primitives/dropdown\";\r\nimport { Constants } from \"core/Engines/constants\";\r\nimport { TextureSelectorPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/entitySelectorPropertyLine\";\r\nimport type { ISelectionService } from \"../../../services/selectionService\";\r\nimport { Color3 } from \"core/Maths/math.color\";\r\n\r\ndeclare module \"core/Materials/PBR/pbrSheenConfiguration\" {\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    interface PBRSheenConfiguration {\r\n        _useRoughness: boolean;\r\n    }\r\n}\r\n\r\nexport const LightFalloffOptions = [\r\n    { label: \"Physical\", value: PBRBaseMaterial.LIGHTFALLOFF_PHYSICAL },\r\n    { label: \"glTF\", value: PBRBaseMaterial.LIGHTFALLOFF_GLTF },\r\n    { label: \"Standard\", value: PBRBaseMaterial.LIGHTFALLOFF_STANDARD },\r\n] as const satisfies DropdownOption<number>[];\r\n\r\nexport const RealTimeFilteringQualityOptions = [\r\n    { label: \"Low\", value: Constants.TEXTURE_FILTERING_QUALITY_LOW },\r\n    { label: \"Medium\", value: Constants.TEXTURE_FILTERING_QUALITY_MEDIUM },\r\n    { label: \"High\", value: Constants.TEXTURE_FILTERING_QUALITY_HIGH },\r\n] as const satisfies DropdownOption<number>[];\r\n\r\nexport const BaseDiffuseModelOptions = [\r\n    { label: \"Lambert\", value: Constants.MATERIAL_DIFFUSE_MODEL_LAMBERT },\r\n    { label: \"Burley\", value: Constants.MATERIAL_DIFFUSE_MODEL_BURLEY },\r\n    { label: \"OpenPBR\", value: Constants.MATERIAL_DIFFUSE_MODEL_E_OREN_NAYAR },\r\n] as const satisfies DropdownOption<number>[];\r\n\r\nexport const DielectricSpecularModelOptions = [\r\n    { label: \"glTF\", value: Constants.MATERIAL_DIELECTRIC_SPECULAR_MODEL_GLTF },\r\n    { label: \"OpenPBR\", value: Constants.MATERIAL_DIELECTRIC_SPECULAR_MODEL_OPENPBR },\r\n] as const satisfies DropdownOption<number>[];\r\n\r\nexport const ConductorSpecularModelOptions = [\r\n    { label: \"glTF\", value: Constants.MATERIAL_CONDUCTOR_SPECULAR_MODEL_GLTF },\r\n    { label: \"OpenPBR\", value: Constants.MATERIAL_CONDUCTOR_SPECULAR_MODEL_OPENPBR },\r\n] as const satisfies DropdownOption<number>[];\r\n\r\nexport const DebugMode = [\r\n    { label: \"None\", value: 0 },\r\n    // Geometry\r\n    { label: \"Normalized position\", value: 1 },\r\n    { label: \"Normals\", value: 2 },\r\n    { label: \"Tangents\", value: 3 },\r\n    { label: \"Bitangents\", value: 4 },\r\n    { label: \"Bump Normals\", value: 5 },\r\n    { label: \"UV1\", value: 6 },\r\n    { label: \"UV2\", value: 7 },\r\n    { label: \"ClearCoat Normals\", value: 8 },\r\n    { label: \"ClearCoat Tangents\", value: 9 },\r\n    { label: \"ClearCoat Bitangents\", value: 10 },\r\n    { label: \"Anisotropic Normals\", value: 11 },\r\n    { label: \"Anisotropic Tangents\", value: 12 },\r\n    { label: \"Anisotropic Bitangents\", value: 13 },\r\n    // Maps\r\n    { label: \"Albedo Map\", value: 20 },\r\n    { label: \"Ambient Map\", value: 21 },\r\n    { label: \"Opacity Map\", value: 22 },\r\n    { label: \"Emissive Map\", value: 23 },\r\n    { label: \"Light Map\", value: 24 },\r\n    { label: \"Metallic Map\", value: 25 },\r\n    { label: \"Reflectivity Map\", value: 26 },\r\n    { label: \"ClearCoat Map\", value: 27 },\r\n    { label: \"ClearCoat Tint Map\", value: 28 },\r\n    { label: \"Sheen Map\", value: 29 },\r\n    { label: \"Anisotropic Map\", value: 30 },\r\n    { label: \"Thickness Map\", value: 31 },\r\n    { label: \"Bump Map\", value: 32 },\r\n    // Env\r\n    { label: \"Env Refraction\", value: 40 },\r\n    { label: \"Env Reflection\", value: 41 },\r\n    { label: \"Env Clear Coat\", value: 42 },\r\n    // Lighting\r\n    { label: \"Direct Diffuse\", value: 50 },\r\n    { label: \"Direct Specular\", value: 51 },\r\n    { label: \"Direct Clear Coat\", value: 52 },\r\n    { label: \"Direct Sheen\", value: 53 },\r\n    { label: \"Env Irradiance\", value: 54 },\r\n    // Lighting Params\r\n    { label: \"Surface Albedo\", value: 60 },\r\n    { label: \"Reflectance 0\", value: 61 },\r\n    { label: \"Metallic\", value: 62 },\r\n    { label: \"Metallic F0\", value: 71 },\r\n    { label: \"Roughness\", value: 63 },\r\n    { label: \"AlphaG\", value: 64 },\r\n    { label: \"NdotV\", value: 65 },\r\n    { label: \"ClearCoat Color\", value: 66 },\r\n    { label: \"ClearCoat Roughness\", value: 67 },\r\n    { label: \"ClearCoat NdotV\", value: 68 },\r\n    { label: \"Transmittance\", value: 69 },\r\n    { label: \"Refraction Transmittance\", value: 70 },\r\n    { label: \"Glossiness\", value: 72 },\r\n    { label: \"Base Color\", value: 73 },\r\n    { label: \"Specular Color\", value: 74 },\r\n    { label: \"Emissive Color\", value: 75 },\r\n    // Misc\r\n    { label: \"SEO\", value: 80 },\r\n    { label: \"EHO\", value: 81 },\r\n    { label: \"Energy Factor\", value: 82 },\r\n    { label: \"Specular Reflectance\", value: 83 },\r\n    { label: \"Clear Coat Reflectance\", value: 84 },\r\n    { label: \"Sheen Reflectance\", value: 85 },\r\n    { label: \"Luminance Over Alpha\", value: 86 },\r\n    { label: \"Alpha\", value: 87 },\r\n    { label: \"Albedo Alpha\", value: 88 },\r\n    { label: \"Ambient occlusion color\", value: 89 },\r\n] as const satisfies DropdownOption<number>[];\r\n\r\nexport const PBRBaseMaterialGeneralProperties: FunctionComponent<{ material: PBRBaseMaterial }> = (props) => {\r\n    const { material } = props;\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Disable Lighting\" target={material} propertyKey=\"_disableLighting\" />\r\n        </>\r\n    );\r\n};\r\n\r\nexport const PBRBaseMaterialTransparencyProperties: FunctionComponent<{ material: PBRBaseMaterial }> = (props) => {\r\n    const { material } = props;\r\n\r\n    return (\r\n        <>\r\n            {material._albedoTexture && (\r\n                <>\r\n                    <BoundProperty\r\n                        component={SwitchPropertyLine}\r\n                        label=\"Albedo texture has alpha\"\r\n                        target={material._albedoTexture}\r\n                        propertyKey=\"hasAlpha\"\r\n                        propertyPath=\"_albedoTexture.hasAlpha\"\r\n                    />\r\n                </>\r\n            )}\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Use alpha from albedo texture\" target={material} propertyKey=\"_useAlphaFromAlbedoTexture\" />\r\n        </>\r\n    );\r\n};\r\n\r\nexport const PBRBaseMaterialChannelsProperties: FunctionComponent<{ material: PBRBaseMaterial; selectionService: ISelectionService }> = (props) => {\r\n    const { material, selectionService } = props;\r\n    const scene = material.getScene();\r\n\r\n    const selectEntity = (entity: unknown) => (selectionService.selectedEntity = entity);\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty\r\n                component={TextureSelectorPropertyLine}\r\n                label=\"Albedo\"\r\n                target={material}\r\n                propertyKey=\"_albedoTexture\"\r\n                scene={scene}\r\n                onLink={selectEntity}\r\n                defaultValue={null}\r\n            />\r\n            <BoundProperty\r\n                component={TextureSelectorPropertyLine}\r\n                label=\"Base Weight\"\r\n                target={material}\r\n                propertyKey=\"_baseWeightTexture\"\r\n                scene={scene}\r\n                onLink={selectEntity}\r\n                defaultValue={null}\r\n            />\r\n            <BoundProperty\r\n                component={TextureSelectorPropertyLine}\r\n                label=\"Base Diffuse Roughness\"\r\n                target={material}\r\n                propertyKey=\"_baseDiffuseRoughnessTexture\"\r\n                scene={scene}\r\n                onLink={selectEntity}\r\n                defaultValue={null}\r\n            />\r\n            <BoundProperty\r\n                component={TextureSelectorPropertyLine}\r\n                label=\"Metallic Roughness\"\r\n                target={material}\r\n                propertyKey=\"_metallicTexture\"\r\n                scene={scene}\r\n                onLink={selectEntity}\r\n                defaultValue={null}\r\n            />\r\n            <BoundProperty\r\n                component={TextureSelectorPropertyLine}\r\n                label=\"Reflection\"\r\n                target={material}\r\n                propertyKey=\"_reflectionTexture\"\r\n                scene={scene}\r\n                cubeOnly\r\n                onLink={selectEntity}\r\n                defaultValue={null}\r\n            />\r\n            <BoundProperty\r\n                component={TextureSelectorPropertyLine}\r\n                label=\"Refraction\"\r\n                target={material.subSurface}\r\n                propertyKey=\"refractionTexture\"\r\n                propertyPath=\"subSurface.refractionTexture\"\r\n                scene={scene}\r\n                onLink={selectEntity}\r\n                defaultValue={null}\r\n            />\r\n            <BoundProperty\r\n                component={TextureSelectorPropertyLine}\r\n                label=\"Reflectivity\"\r\n                target={material}\r\n                propertyKey=\"_reflectivityTexture\"\r\n                scene={scene}\r\n                onLink={selectEntity}\r\n                defaultValue={null}\r\n            />\r\n            <BoundProperty\r\n                component={TextureSelectorPropertyLine}\r\n                label=\"Micro Surface\"\r\n                target={material}\r\n                propertyKey=\"_microSurfaceTexture\"\r\n                scene={scene}\r\n                onLink={selectEntity}\r\n                defaultValue={null}\r\n            />\r\n            <BoundProperty\r\n                component={TextureSelectorPropertyLine}\r\n                label=\"Bump\"\r\n                target={material}\r\n                propertyKey=\"_bumpTexture\"\r\n                scene={scene}\r\n                onLink={selectEntity}\r\n                defaultValue={null}\r\n            />\r\n            <BoundProperty\r\n                component={TextureSelectorPropertyLine}\r\n                label=\"Emissive\"\r\n                target={material}\r\n                propertyKey=\"_emissiveTexture\"\r\n                scene={scene}\r\n                onLink={selectEntity}\r\n                defaultValue={null}\r\n            />\r\n            <BoundProperty\r\n                component={TextureSelectorPropertyLine}\r\n                label=\"Opacity\"\r\n                target={material}\r\n                propertyKey=\"_opacityTexture\"\r\n                scene={scene}\r\n                onLink={selectEntity}\r\n                defaultValue={null}\r\n            />\r\n            <BoundProperty\r\n                component={TextureSelectorPropertyLine}\r\n                label=\"Ambient\"\r\n                target={material}\r\n                propertyKey=\"_ambientTexture\"\r\n                scene={scene}\r\n                onLink={selectEntity}\r\n                defaultValue={null}\r\n            />\r\n            <BoundProperty\r\n                component={TextureSelectorPropertyLine}\r\n                label=\"Lightmap\"\r\n                target={material}\r\n                propertyKey=\"_lightmapTexture\"\r\n                scene={scene}\r\n                onLink={selectEntity}\r\n                defaultValue={null}\r\n            />\r\n            <BoundProperty\r\n                component={TextureSelectorPropertyLine}\r\n                label=\"Detailmap\"\r\n                target={material.detailMap}\r\n                propertyKey=\"texture\"\r\n                propertyPath=\"detailMap.texture\"\r\n                scene={scene}\r\n                onLink={selectEntity}\r\n                defaultValue={null}\r\n            />\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Use Lightmap as Shadowmap\" target={material} propertyKey=\"_useLightmapAsShadowmap\" />\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Use Detailmap\" target={material.detailMap} propertyKey=\"isEnabled\" propertyPath=\"detailMap.isEnabled\" />\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Use Decalmap\" target={material.decalMap} propertyKey=\"isEnabled\" propertyPath=\"decalMap.isEnabled\" />\r\n        </>\r\n    );\r\n};\r\n\r\nexport const PBRBaseMaterialLightingAndColorProperties: FunctionComponent<{ material: PBRBaseMaterial }> = (props) => {\r\n    const { material } = props;\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty component={Color3PropertyLine} label=\"Albedo\" target={material} propertyKey=\"_albedoColor\" isLinearMode />\r\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"Base Weight\" target={material} propertyKey=\"_baseWeight\" min={0} max={1} step={0.01} />\r\n            <BoundProperty component={Color3PropertyLine} label=\"Reflectivity\" target={material} propertyKey=\"_reflectivityColor\" isLinearMode />\r\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"Micro Surface\" target={material} propertyKey=\"_microSurface\" min={0} max={1} step={0.01} />\r\n            <BoundProperty component={Color3PropertyLine} label=\"Emissive\" target={material} propertyKey=\"_emissiveColor\" isLinearMode />\r\n            <BoundProperty component={Color3PropertyLine} label=\"Ambient\" target={material} propertyKey=\"_ambientColor\" isLinearMode />\r\n            <BoundProperty component={NumberDropdownPropertyLine} label=\"Light Falloff\" target={material} propertyKey=\"_lightFalloff\" options={LightFalloffOptions} />\r\n        </>\r\n    );\r\n};\r\n\r\nexport const PBRBaseMaterialMetallicWorkflowProperties: FunctionComponent<{ material: PBRBaseMaterial; selectionService: ISelectionService }> = (props) => {\r\n    const { material, selectionService } = props;\r\n    const scene = material.getScene();\r\n\r\n    const selectEntity = (entity: unknown) => (selectionService.selectedEntity = entity);\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"Metallic\" target={material} propertyKey=\"_metallic\" min={0} max={1} step={0.01} nullable defaultValue={0} />\r\n            <BoundProperty\r\n                component={SyncedSliderPropertyLine}\r\n                label=\"Roughness\"\r\n                target={material}\r\n                propertyKey=\"_roughness\"\r\n                min={0}\r\n                max={1}\r\n                step={0.01}\r\n                nullable\r\n                defaultValue={0}\r\n            />\r\n            <BoundProperty\r\n                component={SyncedSliderPropertyLine}\r\n                label=\"Base Diffuse Roughness\"\r\n                target={material}\r\n                propertyKey=\"_baseDiffuseRoughness\"\r\n                min={0}\r\n                max={1}\r\n                step={0.01}\r\n                nullable\r\n                defaultValue={0}\r\n            />\r\n            <BoundProperty\r\n                component={SyncedSliderPropertyLine}\r\n                label=\"Index of Refraction\"\r\n                target={material.subSurface}\r\n                propertyKey=\"indexOfRefraction\"\r\n                propertyPath=\"subSurface.indexOfRefraction\"\r\n                min={1}\r\n                max={3}\r\n                step={0.01}\r\n            />\r\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"F0 Factor\" target={material} propertyKey=\"_metallicF0Factor\" min={0} max={1} step={0.01} />\r\n            <BoundProperty component={Color3PropertyLine} label=\"Reflectance Color\" target={material} propertyKey=\"_metallicReflectanceColor\" isLinearMode />\r\n            <BoundProperty\r\n                component={SwitchPropertyLine}\r\n                label=\"Metallic Only\"\r\n                description=\"Use only metallic from MetallicReflectance texture\"\r\n                target={material}\r\n                propertyKey=\"_useOnlyMetallicFromMetallicReflectanceTexture\"\r\n            />\r\n            <BoundProperty\r\n                component={TextureSelectorPropertyLine}\r\n                label=\"Metallic Reflectance\"\r\n                target={material}\r\n                propertyKey=\"_metallicReflectanceTexture\"\r\n                scene={scene}\r\n                onLink={selectEntity}\r\n                defaultValue={null}\r\n            />\r\n            <BoundProperty\r\n                component={TextureSelectorPropertyLine}\r\n                label=\"Reflectance\"\r\n                target={material}\r\n                propertyKey=\"_reflectanceTexture\"\r\n                scene={scene}\r\n                onLink={selectEntity}\r\n                defaultValue={null}\r\n            />\r\n        </>\r\n    );\r\n};\r\n\r\nexport const PBRBaseMaterialClearCoatProperties: FunctionComponent<{ material: PBRBaseMaterial; selectionService: ISelectionService }> = (props) => {\r\n    const { material, selectionService } = props;\r\n    const scene = material.getScene();\r\n\r\n    const selectEntity = (entity: unknown) => (selectionService.selectedEntity = entity);\r\n\r\n    const isEnabled = useProperty(material.clearCoat, \"isEnabled\");\r\n    const isTintEnabled = useProperty(material.clearCoat, \"isTintEnabled\");\r\n    const bumpTexture = useProperty(material.clearCoat, \"bumpTexture\");\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Enabled\" target={material.clearCoat} propertyKey=\"isEnabled\" propertyPath=\"clearCoat.isEnabled\" />\r\n            <Collapse visible={isEnabled}>\r\n                <BoundProperty\r\n                    component={SyncedSliderPropertyLine}\r\n                    label=\"Intensity\"\r\n                    target={material.clearCoat}\r\n                    propertyKey=\"intensity\"\r\n                    propertyPath=\"clearCoat.intensity\"\r\n                    min={0}\r\n                    max={1}\r\n                    step={0.01}\r\n                />\r\n                <BoundProperty\r\n                    component={SyncedSliderPropertyLine}\r\n                    label=\"Roughness\"\r\n                    target={material.clearCoat}\r\n                    propertyKey=\"roughness\"\r\n                    propertyPath=\"clearCoat.roughness\"\r\n                    min={0}\r\n                    max={1}\r\n                    step={0.01}\r\n                />\r\n                <BoundProperty\r\n                    component={SyncedSliderPropertyLine}\r\n                    label=\"IOR\"\r\n                    description=\"Index of Refraction\"\r\n                    target={material.clearCoat}\r\n                    propertyKey=\"indexOfRefraction\"\r\n                    propertyPath=\"clearCoat.indexOfRefraction\"\r\n                    min={1}\r\n                    max={3}\r\n                    step={0.01}\r\n                />\r\n                <BoundProperty\r\n                    component={SwitchPropertyLine}\r\n                    label=\"Remap F0\"\r\n                    target={material.clearCoat}\r\n                    propertyKey=\"remapF0OnInterfaceChange\"\r\n                    propertyPath=\"clearCoat.remapF0OnInterfaceChange\"\r\n                />\r\n                <BoundProperty\r\n                    component={TextureSelectorPropertyLine}\r\n                    label=\"Clear Coat\"\r\n                    target={material.clearCoat}\r\n                    propertyKey=\"texture\"\r\n                    propertyPath=\"clearCoat.texture\"\r\n                    scene={scene}\r\n                    onLink={selectEntity}\r\n                    defaultValue={null}\r\n                />\r\n                <BoundProperty\r\n                    component={TextureSelectorPropertyLine}\r\n                    label=\"Roughness\"\r\n                    target={material.clearCoat}\r\n                    propertyKey=\"textureRoughness\"\r\n                    propertyPath=\"clearCoat.textureRoughness\"\r\n                    scene={scene}\r\n                    onLink={selectEntity}\r\n                    defaultValue={null}\r\n                />\r\n                <BoundProperty\r\n                    component={TextureSelectorPropertyLine}\r\n                    label=\"Bump\"\r\n                    target={material.clearCoat}\r\n                    propertyKey=\"bumpTexture\"\r\n                    propertyPath=\"clearCoat.bumpTexture\"\r\n                    scene={scene}\r\n                    onLink={selectEntity}\r\n                    defaultValue={null}\r\n                />\r\n                <Collapse visible={bumpTexture !== null}>\r\n                    <BoundProperty\r\n                        component={SyncedSliderPropertyLine}\r\n                        label=\"Bump Strength\"\r\n                        target={bumpTexture}\r\n                        propertyKey=\"level\"\r\n                        propertyPath=\"clearCoat.bumpTexture.level\"\r\n                        min={0}\r\n                        max={2}\r\n                        step={0.01}\r\n                    />\r\n                </Collapse>\r\n                <BoundProperty\r\n                    component={SwitchPropertyLine}\r\n                    label=\"Use Roughness from Main Texture\"\r\n                    target={material.clearCoat}\r\n                    propertyKey=\"useRoughnessFromMainTexture\"\r\n                    propertyPath=\"clearCoat.useRoughnessFromMainTexture\"\r\n                />\r\n                <BoundProperty component={SwitchPropertyLine} label=\"Tint\" target={material.clearCoat} propertyKey=\"isTintEnabled\" propertyPath=\"clearCoat.isTintEnabled\" />\r\n                <Collapse visible={isTintEnabled}>\r\n                    <BoundProperty\r\n                        component={Color3PropertyLine}\r\n                        label=\"Tint Color\"\r\n                        target={material.clearCoat}\r\n                        propertyKey=\"tintColor\"\r\n                        propertyPath=\"clearCoat.tintColor\"\r\n                        isLinearMode={true}\r\n                    />\r\n                    <BoundProperty\r\n                        component={SyncedSliderPropertyLine}\r\n                        label=\"At Distance\"\r\n                        target={material.clearCoat}\r\n                        propertyKey=\"tintColorAtDistance\"\r\n                        propertyPath=\"clearCoat.tintColorAtDistance\"\r\n                        min={0}\r\n                        max={20}\r\n                        step={0.1}\r\n                    />\r\n                    <BoundProperty\r\n                        component={SyncedSliderPropertyLine}\r\n                        label=\"Tint Thickness\"\r\n                        target={material.clearCoat}\r\n                        propertyKey=\"tintThickness\"\r\n                        propertyPath=\"clearCoat.tintThickness\"\r\n                        min={0}\r\n                        max={20}\r\n                        step={0.1}\r\n                    />\r\n                    <BoundProperty\r\n                        component={TextureSelectorPropertyLine}\r\n                        label=\"Tint\"\r\n                        target={material.clearCoat}\r\n                        propertyKey=\"tintTexture\"\r\n                        propertyPath=\"clearCoat.tintTexture\"\r\n                        scene={scene}\r\n                        onLink={selectEntity}\r\n                        defaultValue={null}\r\n                    />\r\n                </Collapse>\r\n            </Collapse>\r\n        </>\r\n    );\r\n};\r\n\r\nexport const PBRBaseMaterialIridescenceProperties: FunctionComponent<{ material: PBRBaseMaterial; selectionService: ISelectionService }> = (props) => {\r\n    const { material, selectionService } = props;\r\n    const scene = material.getScene();\r\n\r\n    const selectEntity = (entity: unknown) => (selectionService.selectedEntity = entity);\r\n\r\n    const isEnabled = useProperty(material.iridescence, \"isEnabled\");\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Enabled\" target={material.iridescence} propertyKey=\"isEnabled\" propertyPath=\"iridescence.isEnabled\" />\r\n            <Collapse visible={isEnabled}>\r\n                <BoundProperty\r\n                    component={SyncedSliderPropertyLine}\r\n                    label=\"Intensity\"\r\n                    target={material.iridescence}\r\n                    propertyKey=\"intensity\"\r\n                    propertyPath=\"iridescence.intensity\"\r\n                    min={0}\r\n                    max={1}\r\n                    step={0.01}\r\n                />\r\n                <BoundProperty\r\n                    component={SyncedSliderPropertyLine}\r\n                    label=\"IOR\"\r\n                    description=\"Index of Refraction\"\r\n                    target={material.iridescence}\r\n                    propertyKey=\"indexOfRefraction\"\r\n                    propertyPath=\"iridescence.indexOfRefraction\"\r\n                    min={1}\r\n                    max={3}\r\n                    step={0.01}\r\n                />\r\n                <BoundProperty\r\n                    component={SyncedSliderPropertyLine}\r\n                    label=\"Min Thickness\"\r\n                    target={material.iridescence}\r\n                    propertyKey=\"minimumThickness\"\r\n                    propertyPath=\"iridescence.minimumThickness\"\r\n                    min={0}\r\n                    max={1000}\r\n                    step={10}\r\n                />\r\n                <BoundProperty\r\n                    component={SyncedSliderPropertyLine}\r\n                    label=\"Max Thickness\"\r\n                    target={material.iridescence}\r\n                    propertyKey=\"maximumThickness\"\r\n                    propertyPath=\"iridescence.maximumThickness\"\r\n                    min={0}\r\n                    max={1000}\r\n                    step={10}\r\n                />\r\n                <BoundProperty\r\n                    component={TextureSelectorPropertyLine}\r\n                    label=\"Iridescence\"\r\n                    target={material.iridescence}\r\n                    propertyKey=\"texture\"\r\n                    propertyPath=\"iridescence.texture\"\r\n                    scene={scene}\r\n                    onLink={selectEntity}\r\n                    defaultValue={null}\r\n                />\r\n                <BoundProperty\r\n                    component={TextureSelectorPropertyLine}\r\n                    label=\"Thickness\"\r\n                    target={material.iridescence}\r\n                    propertyKey=\"thicknessTexture\"\r\n                    propertyPath=\"iridescence.thicknessTexture\"\r\n                    scene={scene}\r\n                    onLink={selectEntity}\r\n                    defaultValue={null}\r\n                />\r\n            </Collapse>\r\n        </>\r\n    );\r\n};\r\n\r\nexport const PBRBaseMaterialAnisotropicProperties: FunctionComponent<{ material: PBRBaseMaterial; selectionService: ISelectionService }> = (props) => {\r\n    const { material, selectionService } = props;\r\n    const scene = material.getScene();\r\n\r\n    const selectEntity = (entity: unknown) => (selectionService.selectedEntity = entity);\r\n\r\n    const isEnabled = useProperty(material.anisotropy, \"isEnabled\");\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Enabled\" target={material.anisotropy} propertyKey=\"isEnabled\" propertyPath=\"anisotropy.isEnabled\" />\r\n            <Collapse visible={isEnabled}>\r\n                <BoundProperty component={SwitchPropertyLine} label=\"Legacy Mode\" target={material.anisotropy} propertyKey=\"legacy\" propertyPath=\"anisotropy.legacy\" />\r\n                <BoundProperty\r\n                    component={SyncedSliderPropertyLine}\r\n                    label=\"Intensity\"\r\n                    target={material.anisotropy}\r\n                    propertyKey=\"intensity\"\r\n                    propertyPath=\"anisotropy.intensity\"\r\n                    min={0}\r\n                    max={1}\r\n                    step={0.01}\r\n                />\r\n                <BoundProperty component={Vector2PropertyLine} label=\"Direction\" target={material.anisotropy} propertyKey=\"direction\" propertyPath=\"anisotropy.direction\" />\r\n                <BoundProperty\r\n                    component={TextureSelectorPropertyLine}\r\n                    label=\"Anisotropic\"\r\n                    target={material.anisotropy}\r\n                    propertyKey=\"texture\"\r\n                    propertyPath=\"anisotropy.texture\"\r\n                    scene={scene}\r\n                    onLink={selectEntity}\r\n                    defaultValue={null}\r\n                />\r\n            </Collapse>\r\n        </>\r\n    );\r\n};\r\n\r\nexport const PBRBaseMaterialSheenProperties: FunctionComponent<{ material: PBRBaseMaterial; selectionService: ISelectionService }> = (props) => {\r\n    const { material, selectionService } = props;\r\n    const scene = material.getScene();\r\n\r\n    const selectEntity = (entity: unknown) => (selectionService.selectedEntity = entity);\r\n\r\n    const isEnabled = useProperty(material.sheen, \"isEnabled\");\r\n    const useRoughness = useProperty(material.sheen, \"_useRoughness\");\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Enabled\" target={material.sheen} propertyKey=\"isEnabled\" propertyPath=\"sheen.isEnabled\" />\r\n            <Collapse visible={isEnabled}>\r\n                <BoundProperty\r\n                    component={SwitchPropertyLine}\r\n                    label=\"Link to Albedo\"\r\n                    target={material.sheen}\r\n                    propertyKey=\"linkSheenWithAlbedo\"\r\n                    propertyPath=\"sheen.linkSheenWithAlbedo\"\r\n                />\r\n                <BoundProperty\r\n                    component={SyncedSliderPropertyLine}\r\n                    label=\"Intensity\"\r\n                    target={material.sheen}\r\n                    propertyKey=\"intensity\"\r\n                    propertyPath=\"sheen.intensity\"\r\n                    min={0}\r\n                    max={1}\r\n                    step={0.01}\r\n                />\r\n                <BoundProperty component={Color3PropertyLine} label=\"Color\" target={material.sheen} propertyKey=\"color\" propertyPath=\"sheen.color\" isLinearMode={true} />\r\n                <BoundProperty\r\n                    component={TextureSelectorPropertyLine}\r\n                    label=\"Sheen\"\r\n                    target={material.sheen}\r\n                    propertyKey=\"texture\"\r\n                    propertyPath=\"sheen.texture\"\r\n                    scene={scene}\r\n                    onLink={selectEntity}\r\n                    defaultValue={null}\r\n                />\r\n                <BoundProperty\r\n                    component={TextureSelectorPropertyLine}\r\n                    label=\"Roughness\"\r\n                    target={material.sheen}\r\n                    propertyKey=\"textureRoughness\"\r\n                    propertyPath=\"sheen.textureRoughness\"\r\n                    scene={scene}\r\n                    onLink={selectEntity}\r\n                    defaultValue={null}\r\n                />\r\n                <BoundProperty component={SwitchPropertyLine} label=\"Use Roughness\" target={material.sheen} propertyKey=\"_useRoughness\" propertyPath=\"sheen._useRoughness\" />\r\n                <Collapse visible={useRoughness}>\r\n                    <BoundProperty\r\n                        nullable\r\n                        component={SyncedSliderPropertyLine}\r\n                        label=\"Roughness\"\r\n                        target={material.sheen}\r\n                        propertyKey=\"roughness\"\r\n                        propertyPath=\"sheen.roughness\"\r\n                        defaultValue={0}\r\n                        min={0}\r\n                        max={1}\r\n                        step={0.01}\r\n                    />\r\n                </Collapse>\r\n                <BoundProperty\r\n                    component={SwitchPropertyLine}\r\n                    label=\"Use Roughness from Main Texture\"\r\n                    target={material.sheen}\r\n                    propertyKey=\"useRoughnessFromMainTexture\"\r\n                    propertyPath=\"sheen.useRoughnessFromMainTexture\"\r\n                />\r\n                <BoundProperty component={SwitchPropertyLine} label=\"Albedo Scaling\" target={material.sheen} propertyKey=\"albedoScaling\" propertyPath=\"sheen.albedoScaling\" />\r\n            </Collapse>\r\n        </>\r\n    );\r\n};\r\n\r\nexport const PBRBaseMaterialSubSurfaceProperties: FunctionComponent<{ material: PBRBaseMaterial; selectionService: ISelectionService }> = (props) => {\r\n    const { material, selectionService } = props;\r\n    const scene = material.getScene();\r\n\r\n    const selectEntity = (entity: unknown) => (selectionService.selectedEntity = entity);\r\n\r\n    const useScattering = useProperty(material.subSurface, \"isScatteringEnabled\") && !!material.getScene().prePassRenderer && !!material.getScene().subSurfaceConfiguration;\r\n    const useRefraction = useProperty(material.subSurface, \"isRefractionEnabled\");\r\n    const useDispersion = useProperty(material.subSurface, \"isDispersionEnabled\");\r\n    const useTranslucency = useProperty(material.subSurface, \"isTranslucencyEnabled\");\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty\r\n                component={TextureSelectorPropertyLine}\r\n                label=\"Thickness\"\r\n                target={material.subSurface}\r\n                propertyKey=\"thicknessTexture\"\r\n                propertyPath=\"subSurface.thicknessTexture\"\r\n                scene={scene}\r\n                onLink={selectEntity}\r\n                defaultValue={null}\r\n            />\r\n            <BoundProperty\r\n                component={SyncedSliderPropertyLine}\r\n                label=\"Min Thickness\"\r\n                target={material.subSurface}\r\n                propertyKey=\"minimumThickness\"\r\n                propertyPath=\"subSurface.minimumThickness\"\r\n                min={0}\r\n                max={10}\r\n                step={0.1}\r\n            />\r\n            <BoundProperty\r\n                component={SyncedSliderPropertyLine}\r\n                label=\"Max Thickness\"\r\n                target={material.subSurface}\r\n                propertyKey=\"maximumThickness\"\r\n                propertyPath=\"subSurface.maximumThickness\"\r\n                min={0}\r\n                max={10}\r\n                step={0.1}\r\n            />\r\n            <BoundProperty\r\n                component={SwitchPropertyLine}\r\n                label=\"Mask From Thickness\"\r\n                target={material.subSurface}\r\n                propertyKey=\"useMaskFromThicknessTexture\"\r\n                propertyPath=\"subSurface.useMaskFromThicknessTexture\"\r\n            />\r\n            <BoundProperty\r\n                component={SwitchPropertyLine}\r\n                label=\"glTF-Style Textures\"\r\n                target={material.subSurface}\r\n                propertyKey=\"useGltfStyleTextures\"\r\n                propertyPath=\"subSurface.useGltfStyleTextures\"\r\n            />\r\n            <BoundProperty\r\n                component={SwitchPropertyLine}\r\n                label=\"Use Thickness as Depth\"\r\n                target={material.subSurface}\r\n                propertyKey=\"useThicknessAsDepth\"\r\n                propertyPath=\"subSurface.useThicknessAsDepth\"\r\n            />\r\n            <BoundProperty\r\n                component={Color3PropertyLine}\r\n                label=\"Tint Color\"\r\n                target={material.subSurface}\r\n                propertyKey=\"tintColor\"\r\n                propertyPath=\"subSurface.tintColor\"\r\n                isLinearMode={true}\r\n            />\r\n            <BoundProperty\r\n                component={SwitchPropertyLine}\r\n                label=\"Scattering Enabled\"\r\n                target={material.subSurface}\r\n                propertyKey=\"isScatteringEnabled\"\r\n                propertyPath=\"subSurface.isScatteringEnabled\"\r\n            />\r\n            <Collapse visible={useScattering}>\r\n                <BoundProperty\r\n                    component={SyncedSliderPropertyLine}\r\n                    label=\"Meters Per Unit\"\r\n                    target={material.getScene().subSurfaceConfiguration}\r\n                    propertyKey=\"metersPerUnit\"\r\n                    propertyPath=\"getScene().subSurfaceConfiguration.metersPerUnit\"\r\n                    min={0.01}\r\n                    max={2}\r\n                    step={0.01}\r\n                />\r\n            </Collapse>\r\n            <BoundProperty\r\n                component={SwitchPropertyLine}\r\n                label=\"Refraction Enabled\"\r\n                target={material.subSurface}\r\n                propertyKey=\"isRefractionEnabled\"\r\n                propertyPath=\"subSurface.isRefractionEnabled\"\r\n            />\r\n            <Collapse visible={useRefraction}>\r\n                <BoundProperty\r\n                    component={SyncedSliderPropertyLine}\r\n                    label=\"Intensity\"\r\n                    target={material.subSurface}\r\n                    propertyKey=\"refractionIntensity\"\r\n                    propertyPath=\"subSurface.refractionIntensity\"\r\n                    min={0}\r\n                    max={1}\r\n                    step={0.01}\r\n                />\r\n                <BoundProperty\r\n                    component={TextureSelectorPropertyLine}\r\n                    label=\"Refraction Intensity\"\r\n                    target={material.subSurface}\r\n                    propertyKey=\"refractionIntensityTexture\"\r\n                    propertyPath=\"subSurface.refractionIntensityTexture\"\r\n                    scene={scene}\r\n                    onLink={selectEntity}\r\n                    defaultValue={null}\r\n                />\r\n                <BoundProperty\r\n                    component={TextureSelectorPropertyLine}\r\n                    label=\"Refraction\"\r\n                    target={material.subSurface}\r\n                    propertyKey=\"refractionTexture\"\r\n                    propertyPath=\"subSurface.refractionTexture\"\r\n                    scene={scene}\r\n                    onLink={selectEntity}\r\n                    defaultValue={null}\r\n                />\r\n                <BoundProperty\r\n                    component={SyncedSliderPropertyLine}\r\n                    label=\"Volume Index of Refraction\"\r\n                    target={material.subSurface}\r\n                    propertyKey=\"volumeIndexOfRefraction\"\r\n                    propertyPath=\"subSurface.volumeIndexOfRefraction\"\r\n                    min={1}\r\n                    max={3}\r\n                    step={0.01}\r\n                />\r\n                <BoundProperty\r\n                    component={SyncedSliderPropertyLine}\r\n                    label=\"Tint at Distance\"\r\n                    target={material.subSurface}\r\n                    propertyKey=\"tintColorAtDistance\"\r\n                    propertyPath=\"subSurface.tintColorAtDistance\"\r\n                    min={0}\r\n                    max={10}\r\n                    step={0.1}\r\n                />\r\n                <BoundProperty\r\n                    component={SwitchPropertyLine}\r\n                    label=\"Link Refraction with Transparency\"\r\n                    target={material.subSurface}\r\n                    propertyKey=\"linkRefractionWithTransparency\"\r\n                    propertyPath=\"subSurface.linkRefractionWithTransparency\"\r\n                />\r\n                <BoundProperty\r\n                    component={SwitchPropertyLine}\r\n                    label=\"Use Albedo to Tint Surface Transparency\"\r\n                    target={material.subSurface}\r\n                    propertyKey=\"useAlbedoToTintRefraction\"\r\n                    propertyPath=\"subSurface.useAlbedoToTintRefraction\"\r\n                />\r\n            </Collapse>\r\n            <BoundProperty\r\n                component={SwitchPropertyLine}\r\n                label=\"Dispersion Enabled\"\r\n                target={material.subSurface}\r\n                propertyKey=\"isDispersionEnabled\"\r\n                propertyPath=\"subSurface.isDispersionEnabled\"\r\n            />\r\n            <Collapse visible={useDispersion}>\r\n                <BoundProperty\r\n                    component={SyncedSliderPropertyLine}\r\n                    label=\"Intensity\"\r\n                    target={material.subSurface}\r\n                    propertyKey=\"dispersion\"\r\n                    propertyPath=\"subSurface.dispersion\"\r\n                    min={0}\r\n                    max={5}\r\n                    step={0.01}\r\n                />\r\n            </Collapse>\r\n            <BoundProperty\r\n                component={SwitchPropertyLine}\r\n                label=\"Translucency Enabled\"\r\n                target={material.subSurface}\r\n                propertyKey=\"isTranslucencyEnabled\"\r\n                propertyPath=\"subSurface.isTranslucencyEnabled\"\r\n            />\r\n            <Collapse visible={useTranslucency}>\r\n                <BoundProperty\r\n                    component={SyncedSliderPropertyLine}\r\n                    label=\"Intensity\"\r\n                    target={material.subSurface}\r\n                    propertyKey=\"translucencyIntensity\"\r\n                    propertyPath=\"subSurface.translucencyIntensity\"\r\n                    min={0}\r\n                    max={1}\r\n                    step={0.01}\r\n                />\r\n                <BoundProperty\r\n                    component={TextureSelectorPropertyLine}\r\n                    label=\"Intensity Texture\"\r\n                    target={material.subSurface}\r\n                    propertyKey=\"translucencyIntensityTexture\"\r\n                    propertyPath=\"subSurface.translucencyIntensityTexture\"\r\n                    scene={scene}\r\n                    onLink={selectEntity}\r\n                    defaultValue={null}\r\n                />\r\n                <BoundProperty\r\n                    component={Color3PropertyLine}\r\n                    label=\"Diffusion Distance\"\r\n                    target={material.subSurface}\r\n                    propertyKey=\"diffusionDistance\"\r\n                    propertyPath=\"subSurface.diffusionDistance\"\r\n                    isLinearMode={true}\r\n                />\r\n                <BoundProperty\r\n                    component={SwitchPropertyLine}\r\n                    label=\"Use Albedo to Tint Surface Translucency\"\r\n                    target={material.subSurface}\r\n                    propertyKey=\"useAlbedoToTintTranslucency\"\r\n                    propertyPath=\"subSurface.useAlbedoToTintTranslucency\"\r\n                />\r\n                <BoundProperty\r\n                    component={Color3PropertyLine}\r\n                    label=\"Translucency Tint\"\r\n                    target={material.subSurface}\r\n                    propertyKey=\"translucencyColor\"\r\n                    propertyPath=\"subSurface.translucencyColor\"\r\n                    isLinearMode={true}\r\n                    nullable\r\n                    defaultValue={Color3.White()}\r\n                />\r\n                <BoundProperty\r\n                    component={TextureSelectorPropertyLine}\r\n                    label=\"Translucency Tint Texture\"\r\n                    target={material.subSurface}\r\n                    propertyKey=\"translucencyColorTexture\"\r\n                    propertyPath=\"subSurface.translucencyColorTexture\"\r\n                    scene={scene}\r\n                    onLink={selectEntity}\r\n                    defaultValue={null}\r\n                />\r\n            </Collapse>\r\n        </>\r\n    );\r\n};\r\n\r\nexport const PBRBaseMaterialLevelProperties: FunctionComponent<{ material: PBRBaseMaterial }> = (props) => {\r\n    const { material } = props;\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"Environment\" target={material} propertyKey=\"_environmentIntensity\" min={0} max={1} step={0.01} />\r\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"Specular\" target={material} propertyKey=\"_specularIntensity\" min={0} max={1} step={0.01} />\r\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"Emissive\" target={material} propertyKey=\"_emissiveIntensity\" min={0} max={1} step={0.01} />\r\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"Direct\" target={material} propertyKey=\"_directIntensity\" min={0} max={1} step={0.01} />\r\n            <BoundProperty\r\n                component={SyncedSliderPropertyLine}\r\n                label=\"Bump Strength\"\r\n                target={material._bumpTexture}\r\n                propertyKey=\"level\"\r\n                propertyPath=\"_bumpTexture.level\"\r\n                min={0}\r\n                max={2}\r\n                step={0.01}\r\n            />\r\n            <Collapse visible={!!material._ambientTexture}>\r\n                <BoundProperty component={SyncedSliderPropertyLine} label=\"Ambient Strength\" target={material} propertyKey=\"_ambientTextureStrength\" min={0} max={1} step={0.01} />\r\n            </Collapse>\r\n            <BoundProperty\r\n                component={SyncedSliderPropertyLine}\r\n                label=\"Reflection Strength\"\r\n                target={material._reflectionTexture}\r\n                propertyKey=\"level\"\r\n                propertyPath=\"_reflectionTexture.level\"\r\n                min={0}\r\n                max={1}\r\n                step={0.01}\r\n            />\r\n            <BoundProperty\r\n                component={SyncedSliderPropertyLine}\r\n                label=\"Clear Coat\"\r\n                target={material.clearCoat.texture}\r\n                propertyKey=\"level\"\r\n                propertyPath=\"clearCoat.texture.level\"\r\n                min={0}\r\n                max={1}\r\n                step={0.01}\r\n            />\r\n            <BoundProperty\r\n                component={SyncedSliderPropertyLine}\r\n                label=\"Clear Coat Bump\"\r\n                target={material.clearCoat.bumpTexture}\r\n                propertyKey=\"level\"\r\n                propertyPath=\"clearCoat.bumpTexture.level\"\r\n                min={0}\r\n                max={2}\r\n                step={0.01}\r\n            />\r\n            <BoundProperty\r\n                component={SyncedSliderPropertyLine}\r\n                label=\"Anisotropic\"\r\n                target={material.anisotropy.texture}\r\n                propertyKey=\"level\"\r\n                propertyPath=\"anisotropy.texture.level\"\r\n                min={0}\r\n                max={1}\r\n                step={0.01}\r\n            />\r\n            <BoundProperty\r\n                component={SyncedSliderPropertyLine}\r\n                label=\"Sheen\"\r\n                target={material.sheen.texture}\r\n                propertyKey=\"level\"\r\n                propertyPath=\"sheen.texture.level\"\r\n                min={0}\r\n                max={1}\r\n                step={0.01}\r\n            />\r\n            <BoundProperty\r\n                component={SyncedSliderPropertyLine}\r\n                label=\"Thickness\"\r\n                target={material.subSurface.thicknessTexture}\r\n                propertyKey=\"level\"\r\n                propertyPath=\"subSurface.thicknessTexture.level\"\r\n                min={0}\r\n                max={1}\r\n                step={0.01}\r\n            />\r\n            <BoundProperty\r\n                component={SyncedSliderPropertyLine}\r\n                label=\"Refraction\"\r\n                target={material.subSurface.refractionTexture}\r\n                propertyKey=\"level\"\r\n                propertyPath=\"subSurface.refractionTexture.level\"\r\n                min={0}\r\n                max={1}\r\n                step={0.01}\r\n            />\r\n            <Collapse visible={material.detailMap.isEnabled}>\r\n                <BoundProperty\r\n                    component={SyncedSliderPropertyLine}\r\n                    label=\"Detailmap Diffuse\"\r\n                    target={material.detailMap}\r\n                    propertyKey=\"diffuseBlendLevel\"\r\n                    propertyPath=\"detailMap.diffuseBlendLevel\"\r\n                    min={0}\r\n                    max={1}\r\n                    step={0.01}\r\n                />\r\n                <BoundProperty\r\n                    component={SyncedSliderPropertyLine}\r\n                    label=\"Detailmap Bump\"\r\n                    target={material.detailMap}\r\n                    propertyKey=\"bumpLevel\"\r\n                    propertyPath=\"detailMap.bumpLevel\"\r\n                    min={0}\r\n                    max={1}\r\n                    step={0.01}\r\n                />\r\n                <BoundProperty\r\n                    component={SyncedSliderPropertyLine}\r\n                    label=\"Detailmap Roughness\"\r\n                    target={material.detailMap}\r\n                    propertyKey=\"roughnessBlendLevel\"\r\n                    propertyPath=\"detailMap.roughnessBlendLevel\"\r\n                    min={0}\r\n                    max={1}\r\n                    step={0.01}\r\n                />\r\n            </Collapse>\r\n        </>\r\n    );\r\n};\r\n\r\nexport const PBRBaseMaterialRenderingProperties: FunctionComponent<{ material: PBRBaseMaterial }> = (props) => {\r\n    const { material } = props;\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Alpha from Albedo\" target={material} propertyKey=\"_useAlphaFromAlbedoTexture\" />\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Ambient in Grayscale\" target={material} propertyKey=\"_useAmbientInGrayScale\" />\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Radiance over Alpha\" target={material} propertyKey=\"_useRadianceOverAlpha\" />\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Micro-surface from Ref. Map Alpha\" target={material} propertyKey=\"_useMicroSurfaceFromReflectivityMapAlpha\" />\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Specular over Alpha\" target={material} propertyKey=\"_useSpecularOverAlpha\" />\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Specular Anti-aliasing\" target={material} propertyKey=\"_enableSpecularAntiAliasing\" />\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Realtime Filtering\" target={material} propertyKey=\"realTimeFiltering\" />\r\n            <BoundProperty\r\n                component={NumberDropdownPropertyLine}\r\n                label=\"Realtime Filtering Quality\"\r\n                target={material}\r\n                propertyKey=\"realTimeFilteringQuality\"\r\n                options={RealTimeFilteringQualityOptions}\r\n            />\r\n            <BoundProperty\r\n                component={NumberDropdownPropertyLine}\r\n                label=\"Base Diffuse Model\"\r\n                target={material.brdf}\r\n                propertyKey=\"baseDiffuseModel\"\r\n                propertyPath=\"brdf.baseDiffuseModel\"\r\n                options={BaseDiffuseModelOptions}\r\n            />\r\n            <BoundProperty\r\n                component={NumberDropdownPropertyLine}\r\n                label=\"Dielectric Specular Model\"\r\n                target={material.brdf}\r\n                propertyKey=\"dielectricSpecularModel\"\r\n                propertyPath=\"brdf.dielectricSpecularModel\"\r\n                options={DielectricSpecularModelOptions}\r\n            />\r\n            <BoundProperty\r\n                component={NumberDropdownPropertyLine}\r\n                label=\"Conductor Specular Model\"\r\n                target={material.brdf}\r\n                propertyKey=\"conductorSpecularModel\"\r\n                propertyPath=\"brdf.conductorSpecularModel\"\r\n                options={ConductorSpecularModelOptions}\r\n            />\r\n        </>\r\n    );\r\n};\r\n\r\nexport const PBRBaseMaterialAdvancedProperties: FunctionComponent<{ material: PBRBaseMaterial }> = (props) => {\r\n    const { material } = props;\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty\r\n                component={SwitchPropertyLine}\r\n                label=\"Energy Conservation\"\r\n                target={material.brdf}\r\n                propertyKey=\"useEnergyConservation\"\r\n                propertyPath=\"brdf.useEnergyConservation\"\r\n            />\r\n            <BoundProperty\r\n                component={SwitchPropertyLine}\r\n                label=\"Spherical Harmonics\"\r\n                target={material.brdf}\r\n                propertyKey=\"useSphericalHarmonics\"\r\n                propertyPath=\"brdf.useSphericalHarmonics\"\r\n            />\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Radiance Occlusion\" target={material} propertyKey=\"_useRadianceOcclusion\" />\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Horizon Occlusion\" target={material} propertyKey=\"_useHorizonOcclusion\" />\r\n            <BoundProperty\r\n                component={SwitchPropertyLine}\r\n                label=\"Mix Irradiance with Rough Radiance\"\r\n                target={material.brdf}\r\n                propertyKey=\"mixIblRadianceWithIrradiance\"\r\n                propertyPath=\"brdf.mixIblRadianceWithIrradiance\"\r\n            />\r\n            <BoundProperty\r\n                component={SwitchPropertyLine}\r\n                label=\"Use Legacy Specular Energy Conservation\"\r\n                target={material.brdf}\r\n                propertyKey=\"useLegacySpecularEnergyConservation\"\r\n                propertyPath=\"brdf.useLegacySpecularEnergyConservation\"\r\n            />\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Unlit\" target={material} propertyKey=\"_unlit\" />\r\n        </>\r\n    );\r\n};\r\n\r\nexport const PBRBaseMaterialDebugProperties: FunctionComponent<{ material: PBRBaseMaterial }> = (props) => {\r\n    const { material } = props;\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty component={NumberDropdownPropertyLine} label=\"Debug Mode\" target={material} propertyKey=\"debugMode\" options={DebugMode} />\r\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"Split Position\" target={material} propertyKey=\"debugLimit\" min={-1} max={1} step={0.01} />\r\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"Output Factor\" target={material} propertyKey=\"debugFactor\" min={0} max={5} step={0.01} />\r\n        </>\r\n    );\r\n};\r\n","import type { FunctionComponent } from \"react\";\r\n\r\nimport type { SkyMaterial } from \"materials/sky/skyMaterial\";\r\nimport type { ISettingsContext } from \"../../../services/settingsContext\";\r\n\r\nimport { SwitchPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/switchPropertyLine\";\r\nimport { SyncedSliderPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/syncedSliderPropertyLine\";\r\nimport { Vector3PropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/vectorPropertyLine\";\r\nimport { useAngleConverters } from \"../../../hooks/settingsHooks\";\r\nimport { BoundProperty } from \"../boundProperty\";\r\n\r\nexport const SkyMaterialProperties: FunctionComponent<{ material: SkyMaterial; settings: ISettingsContext }> = (props) => {\r\n    const { material, settings } = props;\r\n    const [toDisplayAngle, fromDisplayAngle, useDegrees] = useAngleConverters(settings);\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty\r\n                component={SyncedSliderPropertyLine}\r\n                label=\"Azimuth\"\r\n                description={`Azimuth angle in ${useDegrees ? \"degrees\" : \"radians\"}`}\r\n                target={material}\r\n                propertyKey=\"azimuth\"\r\n                min={toDisplayAngle(0)}\r\n                max={toDisplayAngle(Math.PI * 2)}\r\n                step={toDisplayAngle(0.001)}\r\n                convertTo={toDisplayAngle}\r\n                convertFrom={fromDisplayAngle}\r\n                docLink=\"https://doc.babylonjs.com/toolsAndResources/assetLibraries/materialsLibrary/skyMat/#configuring-the-sky-material\"\r\n            />\r\n            <BoundProperty\r\n                component={SyncedSliderPropertyLine}\r\n                label=\"Inclination\"\r\n                description={`Inclination angle in ${useDegrees ? \"degrees\" : \"radians\"}`}\r\n                target={material}\r\n                propertyKey=\"inclination\"\r\n                min={toDisplayAngle(0)}\r\n                max={toDisplayAngle(Math.PI / 2)}\r\n                step={toDisplayAngle(0.001)}\r\n                convertTo={toDisplayAngle}\r\n                convertFrom={fromDisplayAngle}\r\n                docLink=\"https://doc.babylonjs.com/toolsAndResources/assetLibraries/materialsLibrary/skyMat/#configuring-the-sky-material\"\r\n            />\r\n            <BoundProperty\r\n                component={SyncedSliderPropertyLine}\r\n                label=\"Turbidity\"\r\n                description=\"Atmospheric turbidity.\"\r\n                target={material}\r\n                propertyKey=\"turbidity\"\r\n                min={0}\r\n                max={100}\r\n                step={0.1}\r\n                docLink=\"https://doc.babylonjs.com/toolsAndResources/assetLibraries/materialsLibrary/skyMat/#configuring-the-sky-material\"\r\n            />\r\n            <BoundProperty\r\n                component={SyncedSliderPropertyLine}\r\n                label=\"Luminance\"\r\n                description=\"Brightness of the sky (0 to 1).\"\r\n                target={material}\r\n                propertyKey=\"luminance\"\r\n                min={0}\r\n                max={1}\r\n                step={0.001}\r\n                docLink=\"https://doc.babylonjs.com/toolsAndResources/assetLibraries/materialsLibrary/skyMat/#configuring-the-sky-material\"\r\n            />\r\n            <BoundProperty\r\n                component={SyncedSliderPropertyLine}\r\n                label=\"Rayleigh\"\r\n                description=\"Rayleigh scattering coefficient (0 to 4).\"\r\n                target={material}\r\n                propertyKey=\"rayleigh\"\r\n                min={0}\r\n                max={4}\r\n                step={0.001}\r\n                docLink=\"https://doc.babylonjs.com/toolsAndResources/assetLibraries/materialsLibrary/skyMat/#configuring-the-sky-material\"\r\n            />\r\n            <BoundProperty\r\n                component={SyncedSliderPropertyLine}\r\n                label=\"Mie Directional G\"\r\n                description=\"Mie directional scattering (0 to 1).\"\r\n                target={material}\r\n                propertyKey=\"mieDirectionalG\"\r\n                min={0}\r\n                max={1}\r\n                step={0.001}\r\n                docLink=\"https://doc.babylonjs.com/toolsAndResources/assetLibraries/materialsLibrary/skyMat/#configuring-the-sky-material\"\r\n            />\r\n            <BoundProperty\r\n                component={SyncedSliderPropertyLine}\r\n                label=\"Mie Coefficient\"\r\n                description=\"Mie scattering coefficient (0 to 1).\"\r\n                target={material}\r\n                propertyKey=\"mieCoefficient\"\r\n                min={0}\r\n                max={1}\r\n                step={0.001}\r\n                docLink=\"https://doc.babylonjs.com/toolsAndResources/assetLibraries/materialsLibrary/skyMat/#configuring-the-sky-material\"\r\n            />\r\n            <BoundProperty\r\n                component={SyncedSliderPropertyLine}\r\n                label=\"Distance\"\r\n                description=\"Distance to the sky dome (0 to 1000 units).\"\r\n                target={material}\r\n                propertyKey=\"distance\"\r\n                min={0}\r\n                max={1000}\r\n                step={0.1}\r\n                docLink=\"https://doc.babylonjs.com/toolsAndResources/assetLibraries/materialsLibrary/skyMat/#configuring-the-sky-material\"\r\n            />\r\n            <BoundProperty\r\n                component={SwitchPropertyLine}\r\n                label=\"Use Sun Pos\"\r\n                description=\"Enable custom sun position.\"\r\n                target={material}\r\n                propertyKey=\"useSunPosition\"\r\n                docLink=\"https://doc.babylonjs.com/toolsAndResources/assetLibraries/materialsLibrary/skyMat/#configuring-the-sky-material\"\r\n            />\r\n            <BoundProperty\r\n                component={Vector3PropertyLine}\r\n                label=\"Sun Position\"\r\n                description=\"Custom sun position (Vector3).\"\r\n                target={material}\r\n                propertyKey=\"sunPosition\"\r\n                docLink=\"https://doc.babylonjs.com/toolsAndResources/assetLibraries/materialsLibrary/skyMat/#configuring-the-sky-material\"\r\n            />\r\n            <BoundProperty\r\n                component={Vector3PropertyLine}\r\n                label=\"Camera Offset\"\r\n                description=\"Offset for the camera (Vector3).\"\r\n                target={material}\r\n                propertyKey=\"cameraOffset\"\r\n                docLink=\"https://doc.babylonjs.com/toolsAndResources/assetLibraries/materialsLibrary/skyMat/#keeping-the-horizon-relative-to-the-camera-elevation\"\r\n            />\r\n        </>\r\n    );\r\n};\r\n","import type { FunctionComponent } from \"react\";\r\n\r\nimport type { StandardMaterial } from \"core/Materials/standardMaterial\";\r\n\r\nimport { Color3PropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/colorPropertyLine\";\r\nimport { SwitchPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/switchPropertyLine\";\r\nimport { SyncedSliderPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/syncedSliderPropertyLine\";\r\nimport { Collapse } from \"shared-ui-components/fluent/primitives/collapse\";\r\nimport { useProperty } from \"../../../hooks/compoundPropertyHooks\";\r\nimport { BoundProperty } from \"../boundProperty\";\r\nimport { TextureSelectorPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/entitySelectorPropertyLine\";\r\nimport type { ISelectionService } from \"../../../services/selectionService\";\r\n\r\nexport const StandardMaterialGeneralProperties: FunctionComponent<{ material: StandardMaterial }> = (props) => {\r\n    const { material } = props;\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Disable Lighting\" target={material} propertyKey=\"disableLighting\" />\r\n        </>\r\n    );\r\n};\r\n\r\nexport const StandardMaterialTransparencyProperties: FunctionComponent<{ material: StandardMaterial }> = (props) => {\r\n    const { material } = props;\r\n\r\n    return (\r\n        <>\r\n            {material.diffuseTexture && (\r\n                <>\r\n                    <BoundProperty\r\n                        component={SwitchPropertyLine}\r\n                        label=\"Diffuse Texture has Alpha\"\r\n                        target={material.diffuseTexture}\r\n                        propertyKey=\"hasAlpha\"\r\n                        propertyPath=\"diffuseTexture.hasAlpha\"\r\n                    />\r\n                </>\r\n            )}\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Use Alpha from Diffuse Texture\" target={material} propertyKey=\"useAlphaFromDiffuseTexture\" />\r\n        </>\r\n    );\r\n};\r\n\r\nexport const StandardMaterialTexturesProperties: FunctionComponent<{ material: StandardMaterial; selectionService: ISelectionService }> = (props) => {\r\n    const { material, selectionService } = props;\r\n    const scene = material.getScene();\r\n\r\n    const selectEntity = (entity: unknown) => (selectionService.selectedEntity = entity);\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty\r\n                component={TextureSelectorPropertyLine}\r\n                label=\"Diffuse\"\r\n                target={material}\r\n                propertyKey=\"diffuseTexture\"\r\n                scene={scene}\r\n                onLink={selectEntity}\r\n                defaultValue={null}\r\n            />\r\n            <BoundProperty\r\n                component={TextureSelectorPropertyLine}\r\n                label=\"Specular\"\r\n                target={material}\r\n                propertyKey=\"specularTexture\"\r\n                scene={scene}\r\n                onLink={selectEntity}\r\n                defaultValue={null}\r\n            />\r\n            <BoundProperty\r\n                component={TextureSelectorPropertyLine}\r\n                label=\"Reflection\"\r\n                target={material}\r\n                propertyKey=\"reflectionTexture\"\r\n                scene={scene}\r\n                onLink={selectEntity}\r\n                defaultValue={null}\r\n            />\r\n            <BoundProperty\r\n                component={TextureSelectorPropertyLine}\r\n                label=\"Refraction\"\r\n                target={material}\r\n                propertyKey=\"refractionTexture\"\r\n                scene={scene}\r\n                onLink={selectEntity}\r\n                defaultValue={null}\r\n            />\r\n            <BoundProperty\r\n                component={TextureSelectorPropertyLine}\r\n                label=\"Emissive\"\r\n                target={material}\r\n                propertyKey=\"emissiveTexture\"\r\n                scene={scene}\r\n                onLink={selectEntity}\r\n                defaultValue={null}\r\n            />\r\n            <BoundProperty\r\n                component={TextureSelectorPropertyLine}\r\n                label=\"Bump\"\r\n                target={material}\r\n                propertyKey=\"bumpTexture\"\r\n                scene={scene}\r\n                onLink={selectEntity}\r\n                defaultValue={null}\r\n            />\r\n            <BoundProperty\r\n                component={TextureSelectorPropertyLine}\r\n                label=\"Opacity\"\r\n                target={material}\r\n                propertyKey=\"opacityTexture\"\r\n                scene={scene}\r\n                onLink={selectEntity}\r\n                defaultValue={null}\r\n            />\r\n            <BoundProperty\r\n                component={TextureSelectorPropertyLine}\r\n                label=\"Ambient\"\r\n                target={material}\r\n                propertyKey=\"ambientTexture\"\r\n                scene={scene}\r\n                onLink={selectEntity}\r\n                defaultValue={null}\r\n            />\r\n            <BoundProperty\r\n                component={TextureSelectorPropertyLine}\r\n                label=\"Lightmap\"\r\n                target={material}\r\n                propertyKey=\"lightmapTexture\"\r\n                scene={scene}\r\n                onLink={selectEntity}\r\n                defaultValue={null}\r\n            />\r\n            <BoundProperty\r\n                component={TextureSelectorPropertyLine}\r\n                label=\"Detailmap\"\r\n                target={material.detailMap}\r\n                propertyKey=\"texture\"\r\n                propertyPath=\"detailMap.texture\"\r\n                scene={scene}\r\n                onLink={selectEntity}\r\n                defaultValue={null}\r\n            />\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Use Lightmap as Shadowmap\" target={material} propertyKey=\"useLightmapAsShadowmap\" />\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Use Detailmap\" target={material.detailMap} propertyKey=\"isEnabled\" propertyPath=\"detailMap.isEnabled\" />\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Use Decalmap\" target={material.decalMap} propertyKey=\"isEnabled\" propertyPath=\"decalMap.isEnabled\" />\r\n        </>\r\n    );\r\n};\r\n\r\n/**\r\n * Displays the levels properties of a standard material.\r\n * @param props - The required properties\r\n * @returns A JSX element representing the levels properties.\r\n */\r\nexport const StandardMaterialLevelsProperties: FunctionComponent<{ standardMaterial: StandardMaterial }> = (props) => {\r\n    const { standardMaterial } = props;\r\n\r\n    const isDetailMapEnabled = useProperty(standardMaterial.detailMap, \"isEnabled\");\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty\r\n                component={SyncedSliderPropertyLine}\r\n                label=\"Diffuse Level\"\r\n                target={standardMaterial.diffuseTexture}\r\n                propertyKey=\"level\"\r\n                propertyPath=\"diffuseTexture.level\"\r\n                min={0}\r\n                max={2}\r\n                step={0.01}\r\n            />\r\n            <BoundProperty\r\n                component={SyncedSliderPropertyLine}\r\n                label=\"Specular Level\"\r\n                target={standardMaterial.specularTexture}\r\n                propertyKey=\"level\"\r\n                propertyPath=\"specularTexture.level\"\r\n                min={0}\r\n                max={2}\r\n                step={0.01}\r\n            />\r\n            <BoundProperty\r\n                component={SyncedSliderPropertyLine}\r\n                label=\"Reflection Level\"\r\n                target={standardMaterial.reflectionTexture}\r\n                propertyKey=\"level\"\r\n                propertyPath=\"reflectionTexture.level\"\r\n                min={0}\r\n                max={2}\r\n                step={0.01}\r\n            />\r\n            <BoundProperty\r\n                component={SyncedSliderPropertyLine}\r\n                label=\"Refraction Level\"\r\n                target={standardMaterial.refractionTexture}\r\n                propertyKey=\"level\"\r\n                propertyPath=\"refractionTexture.level\"\r\n                min={0}\r\n                max={2}\r\n                step={0.01}\r\n            />\r\n            <BoundProperty\r\n                component={SyncedSliderPropertyLine}\r\n                label=\"Emissive Level\"\r\n                target={standardMaterial.emissiveTexture}\r\n                propertyKey=\"level\"\r\n                propertyPath=\"emissiveTexture.level\"\r\n                min={0}\r\n                max={2}\r\n                step={0.01}\r\n            />\r\n            <BoundProperty\r\n                component={SyncedSliderPropertyLine}\r\n                label=\"Bump Level\"\r\n                target={standardMaterial.bumpTexture}\r\n                propertyKey=\"level\"\r\n                propertyPath=\"bumpTexture.level\"\r\n                min={0}\r\n                max={2}\r\n                step={0.01}\r\n            />\r\n            <BoundProperty\r\n                component={SyncedSliderPropertyLine}\r\n                label=\"Opacity Level\"\r\n                target={standardMaterial.opacityTexture}\r\n                propertyKey=\"level\"\r\n                propertyPath=\"opacityTexture.level\"\r\n                min={0}\r\n                max={2}\r\n                step={0.01}\r\n            />\r\n            <BoundProperty\r\n                component={SyncedSliderPropertyLine}\r\n                label=\"Ambient Level\"\r\n                target={standardMaterial.ambientTexture}\r\n                propertyKey=\"level\"\r\n                propertyPath=\"ambientTexture.level\"\r\n                min={0}\r\n                max={2}\r\n                step={0.01}\r\n            />\r\n            <BoundProperty\r\n                component={SyncedSliderPropertyLine}\r\n                label=\"Lightmap Level\"\r\n                target={standardMaterial.lightmapTexture}\r\n                propertyKey=\"level\"\r\n                propertyPath=\"lightmapTexture.level\"\r\n                min={0}\r\n                max={2}\r\n                step={0.01}\r\n            />\r\n            <Collapse visible={isDetailMapEnabled}>\r\n                <BoundProperty\r\n                    component={SyncedSliderPropertyLine}\r\n                    label=\"Detailmap Diffuse\"\r\n                    target={standardMaterial.detailMap}\r\n                    propertyKey=\"diffuseBlendLevel\"\r\n                    propertyPath=\"detailMap.diffuseBlendLevel\"\r\n                    min={0}\r\n                    max={1}\r\n                    step={0.01}\r\n                />\r\n                <BoundProperty\r\n                    component={SyncedSliderPropertyLine}\r\n                    label=\"Detailmap Bump\"\r\n                    target={standardMaterial.detailMap}\r\n                    propertyKey=\"bumpLevel\"\r\n                    propertyPath=\"detailMap.bumpLevel\"\r\n                    min={0}\r\n                    max={1}\r\n                    step={0.01}\r\n                />\r\n            </Collapse>\r\n        </>\r\n    );\r\n};\r\n\r\n/**\r\n * Displays the lighting and color properties of a standard material.\r\n * @param props - The required properties\r\n * @returns A JSX element representing the lighting and color properties.\r\n */\r\nexport const StandardMaterialLightingAndColorProperties: FunctionComponent<{ standardMaterial: StandardMaterial }> = (props) => {\r\n    const { standardMaterial } = props;\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty component={Color3PropertyLine} label=\"Diffuse Color\" target={standardMaterial} propertyKey=\"diffuseColor\" />\r\n            <BoundProperty component={Color3PropertyLine} label=\"Specular Color\" target={standardMaterial} propertyKey=\"specularColor\" />\r\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"Specular Power\" target={standardMaterial} propertyKey=\"specularPower\" min={0} max={128} step={0.1} />\r\n            <BoundProperty component={Color3PropertyLine} label=\"Emissive Color\" target={standardMaterial} propertyKey=\"emissiveColor\" />\r\n            <BoundProperty component={Color3PropertyLine} label=\"Ambient Color\" target={standardMaterial} propertyKey=\"ambientColor\" />\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Use Specular Over Alpha\" target={standardMaterial} propertyKey=\"useSpecularOverAlpha\" />\r\n        </>\r\n    );\r\n};\r\n","import type { ServiceDefinition } from \"../../../modularity/serviceDefinition\";\r\nimport type { ISettingsContext } from \"../../../services/settingsContext\";\r\nimport type { ISelectionService } from \"../../selectionService\";\r\nimport type { IPropertiesService } from \"./propertiesService\";\r\n\r\nimport { Material } from \"core/Materials/material\";\r\nimport { MultiMaterial } from \"core/Materials/multiMaterial\";\r\nimport { NodeMaterial } from \"core/Materials/Node/nodeMaterial\";\r\nimport { OpenPBRMaterial } from \"core/Materials/PBR/openpbrMaterial\";\r\nimport { PBRBaseMaterial } from \"core/Materials/PBR/pbrBaseMaterial\";\r\nimport { StandardMaterial } from \"core/Materials/standardMaterial\";\r\nimport { SkyMaterial } from \"materials/sky/skyMaterial\";\r\nimport { MaterialGeneralProperties, MaterialStencilProperties, MaterialTransparencyProperties } from \"../../../components/properties/materials/materialProperties\";\r\nimport { MultiMaterialChildrenProperties } from \"../../../components/properties/materials/multiMaterialProperties\";\r\nimport { NodeMaterialGeneralProperties, NodeMaterialInputProperties } from \"../../../components/properties/materials/nodeMaterialProperties\";\r\nimport { NormalMapProperties } from \"../../../components/properties/materials/normalMapProperties\";\r\nimport {\r\n    OpenPBRMaterialBaseProperties,\r\n    OpenPBRMaterialSpecularProperties,\r\n    OpenPBRMaterialTransmissionProperties,\r\n    OpenPBRMaterialCoatProperties,\r\n    OpenPBRMaterialFuzzProperties,\r\n    OpenPBRMaterialEmissionProperties,\r\n    OpenPBRMaterialThinFilmProperties,\r\n    OpenPBRMaterialGeometryProperties,\r\n} from \"../../../components/properties/materials/openpbrMaterialProperties\";\r\nimport {\r\n    PBRBaseMaterialAdvancedProperties,\r\n    PBRBaseMaterialAnisotropicProperties,\r\n    PBRBaseMaterialChannelsProperties,\r\n    PBRBaseMaterialClearCoatProperties,\r\n    PBRBaseMaterialDebugProperties,\r\n    PBRBaseMaterialGeneralProperties,\r\n    PBRBaseMaterialIridescenceProperties,\r\n    PBRBaseMaterialLevelProperties,\r\n    PBRBaseMaterialLightingAndColorProperties,\r\n    PBRBaseMaterialMetallicWorkflowProperties,\r\n    PBRBaseMaterialRenderingProperties,\r\n    PBRBaseMaterialSheenProperties,\r\n    PBRBaseMaterialSubSurfaceProperties,\r\n    PBRBaseMaterialTransparencyProperties,\r\n} from \"../../../components/properties/materials/pbrBaseMaterialProperties\";\r\nimport { SkyMaterialProperties } from \"../../../components/properties/materials/skyMaterialProperties\";\r\nimport {\r\n    StandardMaterialGeneralProperties,\r\n    StandardMaterialLevelsProperties,\r\n    StandardMaterialLightingAndColorProperties,\r\n    StandardMaterialTexturesProperties,\r\n    StandardMaterialTransparencyProperties,\r\n} from \"../../../components/properties/materials/standardMaterialProperties\";\r\nimport { SelectionServiceIdentity } from \"../../selectionService\";\r\nimport { SettingsContextIdentity } from \"../../settingsContext\";\r\nimport { PropertiesServiceIdentity } from \"./propertiesService\";\r\n\r\nexport const MaterialPropertiesServiceDefinition: ServiceDefinition<[], [IPropertiesService, ISelectionService, ISettingsContext]> = {\r\n    friendlyName: \"Material Properties\",\r\n    consumes: [PropertiesServiceIdentity, SelectionServiceIdentity, SettingsContextIdentity],\r\n    factory: (propertiesService, selectionService, settingsContext) => {\r\n        const materialContentRegistration = propertiesService.addSectionContent({\r\n            key: \"Material Properties\",\r\n            predicate: (entity: unknown) => entity instanceof Material,\r\n            content: [\r\n                {\r\n                    section: \"General\",\r\n                    component: ({ context }) => <MaterialGeneralProperties material={context} />,\r\n                },\r\n                {\r\n                    section: \"Transparency\",\r\n                    component: ({ context }) => <MaterialTransparencyProperties material={context} />,\r\n                },\r\n                {\r\n                    section: \"Stencil\",\r\n                    component: ({ context }) => <MaterialStencilProperties material={context} />,\r\n                },\r\n            ],\r\n        });\r\n\r\n        const standardMaterialContentRegistration = propertiesService.addSectionContent({\r\n            key: \"Standard Material Properties\",\r\n            predicate: (entity: unknown) => entity instanceof StandardMaterial,\r\n            content: [\r\n                {\r\n                    section: \"General\",\r\n                    component: ({ context }) => <StandardMaterialGeneralProperties material={context} />,\r\n                },\r\n                {\r\n                    section: \"Transparency\",\r\n                    component: ({ context }) => <StandardMaterialTransparencyProperties material={context} />,\r\n                },\r\n                {\r\n                    section: \"Textures\",\r\n                    component: ({ context }) => <StandardMaterialTexturesProperties material={context} selectionService={selectionService} />,\r\n                },\r\n                {\r\n                    section: \"Lighting & Colors\",\r\n                    component: ({ context }) => <StandardMaterialLightingAndColorProperties standardMaterial={context} />,\r\n                },\r\n                {\r\n                    section: \"Levels\",\r\n                    component: ({ context }) => <StandardMaterialLevelsProperties standardMaterial={context} />,\r\n                },\r\n                {\r\n                    section: \"Normal Map\",\r\n                    component: ({ context }) => <NormalMapProperties material={context} />,\r\n                },\r\n            ],\r\n        });\r\n\r\n        const pbrMaterialPropertyChangedObserver = propertiesService.onPropertyChanged.add((changeInfo) => {\r\n            /**\r\n             * In Inspector V2, all PBR materials (PBRMaterial, PBRMetallicRoughnessMaterial, PBRSpecularGlossinessMaterial) are edited using the PBRBaseMaterial properties.\r\n             * Therefore, when a property of PBRBaseMaterial is changed, we need to mark the material as dirty to ensure the changes are reflected correctly because none of the properties\r\n             * of PBRBaseMaterial are tagged with a decorator that would automatically mark the material as dirty.\r\n             */\r\n            if (changeInfo.entity instanceof PBRBaseMaterial) {\r\n                changeInfo.entity.markAsDirty(Material.AllDirtyFlag);\r\n            }\r\n        });\r\n\r\n        const pbrBaseMaterialPropertiesRegistration = propertiesService.addSectionContent({\r\n            key: \"PBR Base Material Properties\",\r\n            predicate: (entity: unknown) => entity instanceof PBRBaseMaterial,\r\n            content: [\r\n                {\r\n                    section: \"General\",\r\n                    component: ({ context }) => <PBRBaseMaterialGeneralProperties material={context} />,\r\n                },\r\n                {\r\n                    section: \"Transparency\",\r\n                    component: ({ context }) => <PBRBaseMaterialTransparencyProperties material={context} />,\r\n                },\r\n                {\r\n                    section: \"Textures\",\r\n                    component: ({ context }) => <PBRBaseMaterialChannelsProperties material={context} selectionService={selectionService} />,\r\n                },\r\n                {\r\n                    section: \"Lighting & Colors\",\r\n                    component: ({ context }) => <PBRBaseMaterialLightingAndColorProperties material={context} />,\r\n                },\r\n                {\r\n                    section: \"Metallic Workflow\",\r\n                    component: ({ context }) => <PBRBaseMaterialMetallicWorkflowProperties material={context} selectionService={selectionService} />,\r\n                },\r\n                {\r\n                    section: \"Clear Coat\",\r\n                    component: ({ context }) => <PBRBaseMaterialClearCoatProperties material={context} selectionService={selectionService} />,\r\n                },\r\n                {\r\n                    section: \"Iridescence\",\r\n                    component: ({ context }) => <PBRBaseMaterialIridescenceProperties material={context} selectionService={selectionService} />,\r\n                },\r\n                {\r\n                    section: \"Anisotropic\",\r\n                    component: ({ context }) => <PBRBaseMaterialAnisotropicProperties material={context} selectionService={selectionService} />,\r\n                },\r\n                {\r\n                    section: \"Sheen\",\r\n                    component: ({ context }) => <PBRBaseMaterialSheenProperties material={context} selectionService={selectionService} />,\r\n                },\r\n                {\r\n                    section: \"SubSurface\",\r\n                    component: ({ context }) => <PBRBaseMaterialSubSurfaceProperties material={context} selectionService={selectionService} />,\r\n                },\r\n                {\r\n                    section: \"Levels\",\r\n                    component: ({ context }) => <PBRBaseMaterialLevelProperties material={context} />,\r\n                },\r\n                {\r\n                    section: \"Rendering\",\r\n                    component: ({ context }) => <PBRBaseMaterialRenderingProperties material={context} />,\r\n                },\r\n                {\r\n                    section: \"Normal Map\",\r\n                    component: ({ context }) => <NormalMapProperties material={context} />,\r\n                },\r\n                {\r\n                    section: \"Advanced\",\r\n                    component: ({ context }) => <PBRBaseMaterialAdvancedProperties material={context} />,\r\n                },\r\n                {\r\n                    section: \"Debug\",\r\n                    component: ({ context }) => <PBRBaseMaterialDebugProperties material={context} />,\r\n                },\r\n            ],\r\n        });\r\n\r\n        const openPBRMaterialPropertiesRegistration = propertiesService.addSectionContent({\r\n            key: \"OpenPBR Material Properties\",\r\n            predicate: (entity: unknown) => entity instanceof OpenPBRMaterial,\r\n            content: [\r\n                {\r\n                    section: \"Base\",\r\n                    component: ({ context }) => <OpenPBRMaterialBaseProperties material={context} />,\r\n                },\r\n                {\r\n                    section: \"Specular\",\r\n                    component: ({ context }) => <OpenPBRMaterialSpecularProperties material={context} />,\r\n                },\r\n                {\r\n                    section: \"Transmission\",\r\n                    component: ({ context }) => <OpenPBRMaterialTransmissionProperties material={context} />,\r\n                },\r\n                {\r\n                    section: \"Coat\",\r\n                    component: ({ context }) => <OpenPBRMaterialCoatProperties material={context} />,\r\n                },\r\n                {\r\n                    section: \"Fuzz\",\r\n                    component: ({ context }) => <OpenPBRMaterialFuzzProperties material={context} />,\r\n                },\r\n                {\r\n                    section: \"Emission\",\r\n                    component: ({ context }) => <OpenPBRMaterialEmissionProperties material={context} />,\r\n                },\r\n                {\r\n                    section: \"Thin Film\",\r\n                    component: ({ context }) => <OpenPBRMaterialThinFilmProperties material={context} />,\r\n                },\r\n                {\r\n                    section: \"Geometry\",\r\n                    component: ({ context }) => <OpenPBRMaterialGeometryProperties material={context} />,\r\n                },\r\n            ],\r\n        });\r\n\r\n        const skyMaterialRegistration = propertiesService.addSectionContent({\r\n            key: \"Sky Material Properties\",\r\n            predicate: (entity: unknown) => entity instanceof SkyMaterial,\r\n            content: [\r\n                {\r\n                    section: \"Sky\",\r\n                    component: ({ context }) => <SkyMaterialProperties material={context} settings={settingsContext} />,\r\n                },\r\n            ],\r\n        });\r\n\r\n        const multiMaterialContentRegistration = propertiesService.addSectionContent({\r\n            key: \"Multi Material Properties\",\r\n            predicate: (entity: unknown) => entity instanceof MultiMaterial,\r\n            content: [\r\n                {\r\n                    section: \"Children\",\r\n                    component: ({ context }) => <MultiMaterialChildrenProperties multiMaterial={context} selectionService={selectionService} />,\r\n                },\r\n            ],\r\n        });\r\n\r\n        const nodeMaterialContentRegistration = propertiesService.addSectionContent({\r\n            key: \"Node Material Properties\",\r\n            predicate: (entity: unknown) => entity instanceof NodeMaterial,\r\n            content: [\r\n                {\r\n                    section: \"General\",\r\n                    component: ({ context }) => <NodeMaterialGeneralProperties material={context} />,\r\n                },\r\n                {\r\n                    section: \"Inputs\",\r\n                    component: ({ context }) => <NodeMaterialInputProperties material={context} />,\r\n                },\r\n            ],\r\n        });\r\n\r\n        return {\r\n            dispose: () => {\r\n                pbrMaterialPropertyChangedObserver.remove();\r\n                materialContentRegistration.dispose();\r\n                standardMaterialContentRegistration.dispose();\r\n                pbrBaseMaterialPropertiesRegistration.dispose();\r\n                openPBRMaterialPropertiesRegistration.dispose();\r\n                skyMaterialRegistration.dispose();\r\n                multiMaterialContentRegistration.dispose();\r\n                nodeMaterialContentRegistration.dispose();\r\n            },\r\n        };\r\n    },\r\n};\r\n","import type { TextareaOnChangeData } from \"@fluentui/react-components\";\r\nimport { Textarea as FluentTextarea, makeStyles } from \"@fluentui/react-components\";\r\nimport type { FunctionComponent, KeyboardEvent, ChangeEvent } from \"react\";\r\nimport type { PrimitiveProps } from \"./primitive\";\r\n\r\nconst useInputStyles = makeStyles({\r\n    textarea: {\r\n        minHeight: \"100px\",\r\n        maxHeight: \"500px\",\r\n    },\r\n});\r\n\r\nexport type TextareaProps = PrimitiveProps<string> & {\r\n    placeholder?: string;\r\n};\r\n\r\n/**\r\n * This is a texarea box that stops propagation of change/keydown events\r\n * @param props\r\n * @returns\r\n */\r\nexport const Textarea: FunctionComponent<TextareaProps> = (props) => {\r\n    Textarea.displayName = \"Textarea\";\r\n\r\n    const classes = useInputStyles();\r\n    const handleChange = (event: ChangeEvent<HTMLTextAreaElement>, _data: TextareaOnChangeData) => {\r\n        event.stopPropagation(); // Prevent event propagation\r\n        if (props.onChange) {\r\n            props.onChange(event.target.value); // Call the original onChange handler passed as prop\r\n        }\r\n    };\r\n\r\n    const handleKeyDown = (event: KeyboardEvent<HTMLTextAreaElement>) => {\r\n        event.stopPropagation(); // Prevent event propagation\r\n    };\r\n\r\n    return <FluentTextarea {...props} textarea={{ className: classes.textarea }} onChange={handleChange} onKeyDown={handleKeyDown} />;\r\n};\r\n","import type { FunctionComponent } from \"react\";\r\n\r\nimport { Body1, Button, makeStyles, tokens, Tooltip } from \"@fluentui/react-components\";\r\nimport { ArrowUndoRegular, BracesDismiss16Regular, BracesRegular, SaveRegular } from \"@fluentui/react-icons\";\r\nimport { useContext, useMemo, useState } from \"react\";\r\n\r\nimport { ButtonLine } from \"shared-ui-components/fluent/hoc/buttonLine\";\r\nimport { ToolContext } from \"shared-ui-components/fluent/hoc/fluentToolWrapper\";\r\nimport { LineContainer } from \"shared-ui-components/fluent/hoc/propertyLines/propertyLine\";\r\nimport { SwitchPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/switchPropertyLine\";\r\nimport { TextPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/textPropertyLine\";\r\nimport { Collapse } from \"shared-ui-components/fluent/primitives/collapse\";\r\nimport { Textarea } from \"shared-ui-components/fluent/primitives/textarea\";\r\nimport { useProperty } from \"../../hooks/compoundPropertyHooks\";\r\n\r\ntype MetadataTypes = \"null\" | \"string\" | \"object\" | \"JSON\";\r\n\r\nconst PrettyJSONIndent = 2;\r\n\r\nfunction IsParsable(metadata: unknown): metadata is string {\r\n    try {\r\n        const parsed = JSON.parse(metadata as string);\r\n        return !!parsed && !IsString(parsed);\r\n    } catch {\r\n        return false;\r\n    }\r\n}\r\n\r\n/**\r\n * Checks if the input is a string.\r\n * @param input - any input to check\r\n * @returns boolean - true if the input is a string, false otherwise\r\n */\r\nfunction IsString(input: unknown): input is string {\r\n    return typeof input === \"string\" || input instanceof String;\r\n}\r\n\r\n/**\r\n * Checks recursively for functions on an object and returns `false` if any are found.\r\n * @param o any object, string or number\r\n * @returns boolean\r\n */\r\nfunction ObjectCanSafelyStringify(o: unknown): boolean {\r\n    if (typeof o === \"function\") {\r\n        return false;\r\n    }\r\n    if (o === null || o === true || o === false || typeof o === \"number\" || IsString(o)) {\r\n        return true;\r\n    }\r\n\r\n    if (typeof o === \"object\") {\r\n        if (Object.values(o).length === 0) {\r\n            return true;\r\n        }\r\n        return Object.values(o as Record<string, unknown>).every((value) => ObjectCanSafelyStringify(value));\r\n    }\r\n\r\n    if (Array.isArray(o)) {\r\n        return o.every((value) => ObjectCanSafelyStringify(value));\r\n    }\r\n\r\n    return false;\r\n}\r\n\r\nfunction GetMetadataEntityType(metadata: unknown): MetadataTypes {\r\n    if (metadata == null) {\r\n        return \"null\";\r\n    } else if (IsString(metadata)) {\r\n        return \"string\";\r\n    } else if (!ObjectCanSafelyStringify(metadata)) {\r\n        return \"object\";\r\n    } else {\r\n        return \"JSON\";\r\n    }\r\n}\r\n\r\nfunction HasGltfExtras(metadata: string) {\r\n    return IsParsable(metadata) && !!JSON.parse(metadata).gltf;\r\n}\r\n\r\nfunction StringifyMetadata(metadata: unknown, format: boolean) {\r\n    if (IsString(metadata)) {\r\n        return metadata;\r\n    }\r\n\r\n    if (metadata) {\r\n        if (ObjectCanSafelyStringify(metadata)) {\r\n            return JSON.stringify(metadata, undefined, format ? PrettyJSONIndent : undefined);\r\n        } else {\r\n            return String(metadata);\r\n        }\r\n    }\r\n\r\n    return null;\r\n}\r\n\r\nfunction Restringify(value: string, format: boolean) {\r\n    return IsParsable(value) ? JSON.stringify(JSON.parse(value), undefined, format ? PrettyJSONIndent : undefined) : value;\r\n}\r\n\r\nfunction PopulateGLTFExtras(metadata: string) {\r\n    if (!metadata) {\r\n        metadata = \"{}\";\r\n    }\r\n\r\n    if (!IsParsable(metadata)) {\r\n        return metadata;\r\n    }\r\n\r\n    try {\r\n        const parsedJson = JSON.parse(metadata);\r\n        if (parsedJson) {\r\n            if (Reflect.has(parsedJson, \"gltf\")) {\r\n                if (!Reflect.has(parsedJson.gltf, \"extras\")) {\r\n                    parsedJson.gltf.extras = {};\r\n                }\r\n            } else {\r\n                parsedJson.gltf = { extras: {} };\r\n            }\r\n        }\r\n\r\n        return JSON.stringify(parsedJson);\r\n    } catch {\r\n        return metadata;\r\n    }\r\n}\r\n\r\nfunction SaveMetadata(entity: IMetadataContainer, metadata: string) {\r\n    if (IsParsable(metadata)) {\r\n        entity.metadata = JSON.parse(metadata);\r\n    } else {\r\n        entity.metadata = metadata;\r\n    }\r\n}\r\n\r\nexport interface IMetadataContainer {\r\n    metadata: unknown;\r\n}\r\n\r\nconst useStyles = makeStyles({\r\n    mainDiv: {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        gap: tokens.spacingVerticalXS,\r\n    },\r\n    buttonDiv: {\r\n        display: \"grid\",\r\n        gridAutoFlow: \"column\",\r\n        gridTemplateColumns: \"1fr auto auto auto\",\r\n        gap: tokens.spacingHorizontalXS,\r\n    },\r\n});\r\n\r\n/**\r\n * Component to display metadata properties of an entity.\r\n * @param props - The properties for the component.\r\n * @returns A React component that displays metadata properties.\r\n */\r\nexport const MetadataProperties: FunctionComponent<{ entity: IMetadataContainer }> = (props) => {\r\n    const { entity } = props;\r\n\r\n    const classes = useStyles();\r\n\r\n    const { size } = useContext(ToolContext);\r\n\r\n    const metadata = useProperty(entity, \"metadata\");\r\n    const stringifiedMetadata = useMemo(() => StringifyMetadata(metadata, false) ?? \"\", [metadata]);\r\n    const metadataType = useMemo(() => GetMetadataEntityType(metadata), [metadata]);\r\n    const canPreventObjectCorruption = metadataType === \"object\";\r\n\r\n    const [preventObjectCorruption, setPreventObjectCorruption] = useState(false);\r\n    const isReadonly = canPreventObjectCorruption && preventObjectCorruption;\r\n\r\n    const [editedMetadata, setEditedMetadata] = useState(stringifiedMetadata);\r\n    const isEditedMetadataJSON = useMemo(() => IsParsable(editedMetadata), [editedMetadata]);\r\n    const unformattedEditedMetadata = useMemo(() => Restringify(editedMetadata, false), [editedMetadata]);\r\n\r\n    return (\r\n        <>\r\n            <TextPropertyLine label=\"Property Type\" value={metadataType} />\r\n            <Collapse visible={canPreventObjectCorruption}>\r\n                <SwitchPropertyLine label=\"Prevent Object Corruption\" value={isReadonly} onChange={setPreventObjectCorruption} />\r\n            </Collapse>\r\n            <LineContainer>\r\n                <Textarea disabled={isReadonly} value={editedMetadata} onChange={setEditedMetadata} />\r\n            </LineContainer>\r\n            <ButtonLine\r\n                label=\"Populate glTF extras\"\r\n                disabled={!!editedMetadata && (!IsParsable(editedMetadata) || HasGltfExtras(editedMetadata))}\r\n                onClick={() => {\r\n                    const isFormatted = Restringify(editedMetadata, true) === editedMetadata;\r\n                    let withGLTFExtras = PopulateGLTFExtras(editedMetadata);\r\n                    if (isFormatted) {\r\n                        withGLTFExtras = Restringify(withGLTFExtras, true);\r\n                    }\r\n                    setEditedMetadata(withGLTFExtras);\r\n                }}\r\n            />\r\n            <LineContainer>\r\n                <div className={classes.buttonDiv}>\r\n                    {/* TODO: gehalper - need to update our Button primitive to accommodate these scenarios. */}\r\n                    <Button size={size} icon={<SaveRegular />} disabled={stringifiedMetadata === unformattedEditedMetadata} onClick={() => SaveMetadata(entity, editedMetadata)}>\r\n                        <Body1>Save</Body1>\r\n                    </Button>\r\n                    <Tooltip content=\"Undo Changes\" relationship=\"label\">\r\n                        <Button\r\n                            size={size}\r\n                            icon={<ArrowUndoRegular />}\r\n                            disabled={stringifiedMetadata === unformattedEditedMetadata}\r\n                            onClick={() => setEditedMetadata(stringifiedMetadata)}\r\n                        />\r\n                    </Tooltip>\r\n                    <Tooltip content=\"Format (Pretty Print)\" relationship=\"label\">\r\n                        <Button size={size} icon={<BracesRegular />} disabled={!isEditedMetadataJSON} onClick={() => setEditedMetadata(Restringify(editedMetadata, true))}></Button>\r\n                    </Tooltip>\r\n                    <Tooltip content=\"Clear Formatting (Undo Pretty Print)\" relationship=\"label\">\r\n                        <Button\r\n                            size={size}\r\n                            icon={<BracesDismiss16Regular />}\r\n                            disabled={!isEditedMetadataJSON}\r\n                            onClick={() => setEditedMetadata(Restringify(editedMetadata, false))}\r\n                        />\r\n                    </Tooltip>\r\n                </div>\r\n            </LineContainer>\r\n        </>\r\n    );\r\n};\r\n","import type { IMetadataContainer } from \"../../../components/properties/metadataProperties\";\r\nimport type { ServiceDefinition } from \"../../../modularity/serviceDefinition\";\r\nimport type { IPropertiesService } from \"./propertiesService\";\r\n\r\nimport { MetadataProperties } from \"../../../components/properties/metadataProperties\";\r\nimport { PropertiesServiceIdentity } from \"./propertiesService\";\r\n\r\nfunction IsMetadataContainer(entity: unknown): entity is IMetadataContainer {\r\n    return (entity as IMetadataContainer).metadata !== undefined;\r\n}\r\n\r\nexport const MetadataPropertiesServiceDefinition: ServiceDefinition<[], [IPropertiesService]> = {\r\n    friendlyName: \"Metadata Properties\",\r\n    consumes: [PropertiesServiceIdentity],\r\n    factory: (propertiesService) => {\r\n        const contentRegistration = propertiesService.addSectionContent({\r\n            key: \"Metadata Properties\",\r\n            // TransformNode and Bone don't share a common base class, but both have the same transform related properties.\r\n            predicate: (entity: unknown) => IsMetadataContainer(entity),\r\n            content: [\r\n                {\r\n                    section: \"Metadata\",\r\n                    component: ({ context }) => <MetadataProperties entity={context} />,\r\n                },\r\n            ],\r\n        });\r\n\r\n        return {\r\n            dispose: () => {\r\n                contentRegistration.dispose();\r\n            },\r\n        };\r\n    },\r\n};\r\n","import type { FunctionComponent } from \"react\";\r\n\r\nimport type { AbstractMesh, ShaderMaterial } from \"core/index\";\r\nimport type { DropdownOption } from \"shared-ui-components/fluent/primitives/dropdown\";\r\nimport type { ISelectionService } from \"../../../services/selectionService\";\r\n\r\nimport { useState } from \"react\";\r\n\r\nimport { SkeletonViewer } from \"core/Debug/skeletonViewer\";\r\nimport { FrameGraphUtils } from \"core/FrameGraph/frameGraphUtils\";\r\nimport { StandardMaterial } from \"core/Materials/standardMaterial\";\r\nimport { Color3 } from \"core/Maths/math.color\";\r\nimport { TmpVectors, Vector3 } from \"core/Maths/math.vector\";\r\nimport { VertexBuffer } from \"core/Meshes/buffer\";\r\nimport { CreateLineSystem } from \"core/Meshes/Builders/linesBuilder\";\r\nimport { InstancedMesh } from \"core/Meshes/instancedMesh\";\r\nimport { Tools } from \"core/Misc/tools\";\r\nimport { RenderingManager } from \"core/Rendering/renderingManager\";\r\nimport { Collapse } from \"shared-ui-components/fluent/primitives/collapse\";\r\nimport { BooleanBadgePropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/booleanBadgePropertyLine\";\r\nimport { Color3PropertyLine, Color4PropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/colorPropertyLine\";\r\nimport { NumberDropdownPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/dropdownPropertyLine\";\r\nimport { NumberInputPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/inputPropertyLine\";\r\nimport { StringifiedPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/stringifiedPropertyLine\";\r\nimport { SwitchPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/switchPropertyLine\";\r\nimport { SyncedSliderPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/syncedSliderPropertyLine\";\r\nimport { TextPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/textPropertyLine\";\r\nimport { useProperty } from \"../../../hooks/compoundPropertyHooks\";\r\nimport { BoundProperty } from \"../boundProperty\";\r\nimport { MaterialSelectorPropertyLine, NodeSelectorPropertyLine, SkeletonSelectorPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/entitySelectorPropertyLine\";\r\nimport { Constants } from \"core/Engines/constants\";\r\n\r\n// Ensures that the outlineRenderer and edgesRenderer properties exist on the prototype of the Mesh\r\nimport \"core/Rendering/edgesRenderer\";\r\nimport \"core/Rendering/outlineRenderer\";\r\nimport { HexPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/hexPropertyLine\";\r\n\r\nexport const AbstractMeshGeneralProperties: FunctionComponent<{ mesh: AbstractMesh; selectionService: ISelectionService }> = (props) => {\r\n    const { mesh, selectionService } = props;\r\n\r\n    // Use the observable to keep keep state up-to-date and re-render the component when it changes.\r\n    const isAnInstance = useProperty(mesh, \"isAnInstance\");\r\n    // TODO: Handle case where array is mutated\r\n    const subMeshes = useProperty(mesh, \"subMeshes\");\r\n\r\n    return (\r\n        <>\r\n            <StringifiedPropertyLine label=\"Vertices\" value={mesh.getTotalVertices()} />\r\n            <StringifiedPropertyLine label=\"Faces\" value={mesh.getTotalIndices() / 3} />\r\n            <StringifiedPropertyLine label=\"Sub-Meshes\" value={subMeshes.length} />\r\n            <BoundProperty\r\n                defaultValue={null}\r\n                component={SkeletonSelectorPropertyLine}\r\n                label=\"Skeleton\"\r\n                description=\"The skeleton associated with the mesh.\"\r\n                target={mesh}\r\n                propertyKey=\"skeleton\"\r\n                scene={mesh.getScene()}\r\n                onLink={(skeleton) => (selectionService.selectedEntity = skeleton)}\r\n            />\r\n            {!mesh.isAnInstance && (\r\n                <BoundProperty\r\n                    defaultValue={null}\r\n                    component={MaterialSelectorPropertyLine}\r\n                    label=\"Material\"\r\n                    description=\"The material used by the mesh.\"\r\n                    target={mesh}\r\n                    propertyKey=\"material\"\r\n                    scene={mesh.getScene()}\r\n                    onLink={(material) => (selectionService.selectedEntity = material)}\r\n                />\r\n            )}\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Is Pickable\" target={mesh} propertyKey={\"isPickable\"} />\r\n            {isAnInstance && mesh instanceof InstancedMesh && (\r\n                <BoundProperty\r\n                    component={NodeSelectorPropertyLine}\r\n                    label=\"Source\"\r\n                    description=\"The source mesh from which this instance was created.\"\r\n                    target={mesh}\r\n                    propertyKey=\"sourceMesh\"\r\n                    scene={mesh.getScene()}\r\n                    onLink={(node) => (selectionService.selectedEntity = node)}\r\n                />\r\n            )}\r\n        </>\r\n    );\r\n};\r\n\r\nexport const AbstractMeshDisplayProperties: FunctionComponent<{ mesh: AbstractMesh }> = (props) => {\r\n    const { mesh } = props;\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty component={NumberInputPropertyLine} label=\"Alpha Index\" target={mesh} propertyKey=\"alphaIndex\" />\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Receive Shadows\" target={mesh} propertyKey=\"receiveShadows\" />\r\n\r\n            {mesh.isVerticesDataPresent(VertexBuffer.ColorKind) && (\r\n                <>\r\n                    <BoundProperty label=\"Use Vertex Colors\" component={SwitchPropertyLine} target={mesh} propertyKey=\"useVertexColors\" />\r\n                    <BoundProperty label=\"Has Vertex Alpha\" component={SwitchPropertyLine} target={mesh} propertyKey=\"hasVertexAlpha\" />\r\n                </>\r\n            )}\r\n            {mesh.getScene().fogMode !== Constants.FOGMODE_NONE && <BoundProperty label=\"Apply Fog\" component={SwitchPropertyLine} target={mesh} propertyKey=\"applyFog\" />}\r\n            {!mesh.parent && <BoundProperty component={SwitchPropertyLine} label=\"Infinite distance\" target={mesh} propertyKey=\"infiniteDistance\" />}\r\n            <BoundProperty\r\n                component={SyncedSliderPropertyLine}\r\n                label=\"Rendering Group Id\"\r\n                target={mesh}\r\n                propertyKey=\"renderingGroupId\"\r\n                min={RenderingManager.MIN_RENDERINGGROUPS}\r\n                max={RenderingManager.MAX_RENDERINGGROUPS - 1}\r\n                step={1}\r\n            />\r\n            <BoundProperty component={HexPropertyLine} label=\"Layer Mask\" target={mesh} propertyKey=\"layerMask\" />\r\n        </>\r\n    );\r\n};\r\n\r\nexport const AbstractMeshAdvancedProperties: FunctionComponent<{ mesh: AbstractMesh }> = (props) => {\r\n    const { mesh } = props;\r\n\r\n    return (\r\n        <>\r\n            {mesh.useBones && (\r\n                <BoundProperty\r\n                    component={SwitchPropertyLine}\r\n                    label=\"Compute Bones Using Shaders\"\r\n                    description=\"Whether to compute bones using shaders.\"\r\n                    target={mesh}\r\n                    propertyKey={\"computeBonesUsingShaders\"}\r\n                />\r\n            )}\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Check Collisions\" description=\"Whether to check for collisions.\" target={mesh} propertyKey={\"checkCollisions\"} />\r\n            <TextPropertyLine label=\"Geometry ID\" value={mesh.geometry?.uniqueId.toString() ?? \"N/A\"} />\r\n            <BooleanBadgePropertyLine label=\"Has Normals\" value={mesh.isVerticesDataPresent(VertexBuffer.NormalKind)} />\r\n            <BooleanBadgePropertyLine label=\"Has Vertex Colors\" value={mesh.isVerticesDataPresent(VertexBuffer.ColorKind)} />\r\n            <BooleanBadgePropertyLine label=\"Has UV Set 0\" value={mesh.isVerticesDataPresent(VertexBuffer.UVKind)} />\r\n            <BooleanBadgePropertyLine label=\"Has UV Set 1\" value={mesh.isVerticesDataPresent(VertexBuffer.UV2Kind)} />\r\n            <BooleanBadgePropertyLine label=\"Has UV Set 2\" value={mesh.isVerticesDataPresent(VertexBuffer.UV3Kind)} />\r\n            <BooleanBadgePropertyLine label=\"Has UV Set 3\" value={mesh.isVerticesDataPresent(VertexBuffer.UV4Kind)} />\r\n            <BooleanBadgePropertyLine label=\"Has Tangents\" value={mesh.isVerticesDataPresent(VertexBuffer.TangentKind)} />\r\n            <BooleanBadgePropertyLine label=\"Has Matrix Weights\" value={mesh.isVerticesDataPresent(VertexBuffer.MatricesWeightsKind)} />\r\n            <BooleanBadgePropertyLine label=\"Has Matrix Indices\" value={mesh.isVerticesDataPresent(VertexBuffer.MatricesIndicesKind)} />\r\n        </>\r\n    );\r\n};\r\n\r\nexport const AbstractMeshOutlineOverlayProperties: FunctionComponent<{ mesh: AbstractMesh }> = (props) => {\r\n    const { mesh } = props;\r\n\r\n    const renderOverlay = useProperty(mesh, \"renderOverlay\");\r\n    const renderOutline = useProperty(mesh, \"renderOutline\");\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Render Overlay\" target={mesh} propertyKey=\"renderOverlay\" />\r\n            <Collapse visible={renderOverlay}>\r\n                <BoundProperty label=\"Overlay Color\" component={Color3PropertyLine} target={mesh} propertyKey=\"overlayColor\" />\r\n            </Collapse>\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Render Outline\" target={mesh} propertyKey=\"renderOutline\" />\r\n            <Collapse visible={renderOutline}>\r\n                <BoundProperty label=\"Outline Color\" component={Color3PropertyLine} target={mesh} propertyKey=\"outlineColor\" />\r\n                <BoundProperty label=\"Outline Width\" component={NumberInputPropertyLine} target={mesh} propertyKey=\"outlineWidth\" step={0.001} />\r\n            </Collapse>\r\n        </>\r\n    );\r\n};\r\n\r\nconst OcclusionTypes = [\r\n    { label: \"None\", value: 0 },\r\n    { label: \"Optimistic\", value: 1 },\r\n    { label: \"Strict\", value: 2 },\r\n] as const satisfies readonly DropdownOption<number>[];\r\n\r\nconst OcclusionQueryAlgorithmTypes = [\r\n    { label: \"Conservative\", value: 0 },\r\n    { label: \"Accurate\", value: 1 },\r\n] as const satisfies readonly DropdownOption<number>[];\r\n\r\nexport const AbstractMeshOcclusionsProperties: FunctionComponent<{ mesh: AbstractMesh }> = ({ mesh }) => {\r\n    const occlusionType = useProperty(mesh, \"occlusionType\");\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty\r\n                component={NumberDropdownPropertyLine}\r\n                label=\"Type\"\r\n                description=\"Occlusion type for the mesh.\"\r\n                target={mesh}\r\n                propertyKey=\"occlusionType\"\r\n                options={OcclusionTypes}\r\n            />\r\n            <Collapse visible={occlusionType !== 0}>\r\n                <>\r\n                    <BoundProperty\r\n                        component={NumberInputPropertyLine}\r\n                        label=\"Occlusion Retry Count\"\r\n                        description=\"Number of retries for occlusion (-1 disables retries).\"\r\n                        target={mesh}\r\n                        propertyKey=\"occlusionRetryCount\"\r\n                        min={-1}\r\n                        max={10}\r\n                        step={1}\r\n                    />\r\n                    <BoundProperty\r\n                        component={NumberDropdownPropertyLine}\r\n                        label=\"Algorithm\"\r\n                        description=\"Occlusion query algorithm type.\"\r\n                        target={mesh}\r\n                        propertyKey=\"occlusionQueryAlgorithmType\"\r\n                        options={OcclusionQueryAlgorithmTypes}\r\n                    />\r\n                </>\r\n            </Collapse>\r\n        </>\r\n    );\r\n};\r\n\r\nexport const AbstractMeshEdgeRenderingProperties: FunctionComponent<{ mesh: AbstractMesh }> = ({ mesh }) => {\r\n    const edgesRenderer = useProperty(mesh, \"_edgesRenderer\");\r\n\r\n    return (\r\n        <>\r\n            <SwitchPropertyLine\r\n                label=\"Enable\"\r\n                value={!!edgesRenderer}\r\n                onChange={(isEnabled: boolean) => {\r\n                    if (isEnabled) {\r\n                        mesh.enableEdgesRendering();\r\n                    } else {\r\n                        mesh.disableEdgesRendering();\r\n                    }\r\n                }}\r\n            />\r\n            <Collapse visible={!!edgesRenderer}>\r\n                <BoundProperty\r\n                    component={SyncedSliderPropertyLine}\r\n                    label=\"Edges Width\"\r\n                    description=\"Width of the rendered edges (0 to 10).\"\r\n                    target={mesh}\r\n                    propertyKey=\"edgesWidth\"\r\n                    min={0}\r\n                    max={10}\r\n                    step={0.1}\r\n                />\r\n                <BoundProperty component={Color4PropertyLine} label=\"Edge Color\" target={mesh} propertyKey=\"edgesColor\" />\r\n            </Collapse>\r\n        </>\r\n    );\r\n};\r\n\r\nexport const AbstractMeshDebugProperties: FunctionComponent<{ mesh: AbstractMesh }> = (props) => {\r\n    const { mesh } = props;\r\n\r\n    const skeleton = useProperty(mesh, \"skeleton\");\r\n\r\n    const [displayNormals, setDisplayNormals] = useState(mesh.material?.getClassName() === \"NormalMaterial\");\r\n    const [displayVertexColors, setDisplayVertexColors] = useState(mesh.material?.reservedDataStore?.isVertexColorMaterial ? true : false);\r\n    const [renderNormalVectors] = useState(mesh.reservedDataStore?.normalLines ? true : false);\r\n    const [renderWireframeOver] = useState(mesh.reservedDataStore?.wireframeOver ? true : false);\r\n    const [displayBoneWeights, setDisplayBoneWeights] = useState(mesh.material?.getClassName() === \"BoneWeightShader\");\r\n    const [displaySkeletonMap, setDisplaySkeletonMap] = useState(mesh.material?.getClassName() === \"SkeletonMapShader\");\r\n    const [displayBoneIndex, setDisplayBoneIndex] = useState(mesh.reservedDataStore?.displayBoneIndex ?? 0);\r\n\r\n    const [targetBoneOptions] = useState<DropdownOption<number>[]>(\r\n        mesh.skeleton\r\n            ? mesh.skeleton.bones\r\n                  .filter((bone) => bone.getIndex() >= 0)\r\n                  .sort((bone1, bone2) => bone1.getIndex() - bone2.getIndex())\r\n                  .map((bone) => {\r\n                      return {\r\n                          label: bone.name,\r\n                          value: bone.getIndex(),\r\n                      };\r\n                  })\r\n            : []\r\n    );\r\n\r\n    const displayNormalsHandlerAsync = async function () {\r\n        const scene = mesh.getScene();\r\n\r\n        if (mesh.material?.getClassName() === \"NormalMaterial\") {\r\n            mesh.material.dispose();\r\n\r\n            mesh.material = mesh.reservedDataStore.originalMaterial;\r\n            mesh.reservedDataStore.originalMaterial = null;\r\n            setDisplayNormals(false);\r\n        } else {\r\n            try {\r\n                const { NormalMaterial } = await import(\"materials/normal/normalMaterial\");\r\n\r\n                if (!mesh.reservedDataStore) {\r\n                    mesh.reservedDataStore = {};\r\n                }\r\n\r\n                if (!mesh.reservedDataStore.originalMaterial) {\r\n                    mesh.reservedDataStore.originalMaterial = mesh.material;\r\n                }\r\n\r\n                const normalMaterial = new NormalMaterial(\"normalMaterial\", scene);\r\n                normalMaterial.disableLighting = true;\r\n                if (mesh.material) {\r\n                    normalMaterial.sideOrientation = mesh.material.sideOrientation;\r\n                }\r\n                normalMaterial.reservedDataStore = { hidden: true };\r\n                mesh.material = normalMaterial;\r\n\r\n                setDisplayVertexColors(false);\r\n                setDisplayBoneWeights(false);\r\n                setDisplaySkeletonMap(false);\r\n                setDisplayNormals(true);\r\n            } catch {\r\n                Tools.Warn(\"NormalMaterial could not be loaded.\");\r\n            }\r\n        }\r\n    };\r\n\r\n    const displayVertexColorsHandler = function () {\r\n        const scene = mesh.getScene();\r\n\r\n        if (mesh.material?.reservedDataStore?.isVertexColorMaterial) {\r\n            mesh.material.dispose();\r\n\r\n            mesh.material = mesh.reservedDataStore.originalMaterial;\r\n            mesh.reservedDataStore.originalMaterial = null;\r\n            setDisplayVertexColors(false);\r\n        } else {\r\n            if (!mesh.reservedDataStore) {\r\n                mesh.reservedDataStore = {};\r\n            }\r\n\r\n            if (!mesh.reservedDataStore.originalMaterial) {\r\n                mesh.reservedDataStore.originalMaterial = mesh.material;\r\n            }\r\n            const vertexColorMaterial = new StandardMaterial(\"vertex colors\", scene);\r\n            vertexColorMaterial.disableLighting = true;\r\n            vertexColorMaterial.emissiveColor = Color3.White();\r\n            if (mesh.material) {\r\n                vertexColorMaterial.sideOrientation = mesh.material.sideOrientation;\r\n            }\r\n            vertexColorMaterial.reservedDataStore = { hidden: true, isVertexColorMaterial: true };\r\n            mesh.useVertexColors = true;\r\n            mesh.material = vertexColorMaterial;\r\n\r\n            setDisplayNormals(false);\r\n            setDisplayBoneWeights(false);\r\n            setDisplaySkeletonMap(false);\r\n            setDisplayVertexColors(true);\r\n        }\r\n    };\r\n\r\n    const renderNormalVectorsHandler = function () {\r\n        const scene = mesh.getScene();\r\n\r\n        if (mesh.reservedDataStore && mesh.reservedDataStore.normalLines) {\r\n            mesh.reservedDataStore.normalLines.dispose();\r\n            mesh.reservedDataStore.normalLines = null;\r\n\r\n            return;\r\n        }\r\n\r\n        const normals = mesh.getVerticesData(VertexBuffer.NormalKind);\r\n        const positions = mesh.getVerticesData(VertexBuffer.PositionKind);\r\n\r\n        const color = Color3.White();\r\n        const bbox = mesh.getBoundingInfo();\r\n        const diag = bbox.maximum.subtractToRef(bbox.minimum, TmpVectors.Vector3[0]);\r\n        const size = diag.length() * 0.05;\r\n\r\n        const lines: [Vector3, Vector3][] = [];\r\n        for (let i = 0; i < normals!.length; i += 3) {\r\n            const v1 = Vector3.FromArray(positions!, i);\r\n            const v2 = v1.add(Vector3.FromArray(normals!, i).scaleInPlace(size));\r\n            lines.push([v1, v2]);\r\n        }\r\n\r\n        const normalLines = CreateLineSystem(\"normalLines\", { lines: lines }, scene);\r\n        normalLines.color = color;\r\n        normalLines.parent = mesh;\r\n        normalLines.reservedDataStore = { hidden: true };\r\n\r\n        if (!mesh.reservedDataStore) {\r\n            mesh.reservedDataStore = {};\r\n        }\r\n\r\n        mesh.reservedDataStore.normalLines = normalLines;\r\n    };\r\n\r\n    const renderWireframeOverHandler = function () {\r\n        const scene = mesh.getScene();\r\n\r\n        if (mesh.reservedDataStore?.wireframeOver) {\r\n            const frameGraph = scene.frameGraph;\r\n            if (frameGraph) {\r\n                const objectRenderer = FrameGraphUtils.FindMainObjectRenderer(frameGraph);\r\n                if (objectRenderer && objectRenderer.objectList.meshes) {\r\n                    const idx = objectRenderer.objectList.meshes.indexOf(mesh.reservedDataStore.wireframeOver);\r\n                    if (idx !== -1) {\r\n                        objectRenderer.objectList.meshes!.splice(idx, 1);\r\n                    }\r\n                }\r\n            }\r\n\r\n            mesh.reservedDataStore.wireframeOver.dispose(false, true);\r\n            mesh.reservedDataStore.wireframeOver = null;\r\n\r\n            return;\r\n        }\r\n\r\n        const wireframeOver = mesh.clone(mesh.name + \"_wireframeover\", null, true);\r\n        if (wireframeOver === null) {\r\n            return;\r\n        }\r\n\r\n        wireframeOver.reservedDataStore = { hidden: true };\r\n\r\n        // Sets up the mesh to be attached to the parent.\r\n        // So all neutral in local space.\r\n        wireframeOver.parent = mesh;\r\n        wireframeOver.position = Vector3.Zero();\r\n        wireframeOver.scaling = new Vector3(1, 1, 1);\r\n        wireframeOver.rotation = Vector3.Zero();\r\n        wireframeOver.rotationQuaternion = null;\r\n\r\n        const material = new StandardMaterial(\"wireframeOver\", scene);\r\n        material.reservedDataStore = { hidden: true };\r\n        wireframeOver.material = material;\r\n        material.disableLighting = true;\r\n        material.backFaceCulling = false;\r\n        material.emissiveColor = Color3.White();\r\n\r\n        material.wireframe = true;\r\n\r\n        if (!mesh.reservedDataStore) {\r\n            mesh.reservedDataStore = {};\r\n        }\r\n\r\n        mesh.reservedDataStore.wireframeOver = wireframeOver;\r\n\r\n        const frameGraph = scene.frameGraph;\r\n        if (frameGraph) {\r\n            const objectRenderer = FrameGraphUtils.FindMainObjectRenderer(frameGraph);\r\n            if (objectRenderer && objectRenderer.objectList.meshes) {\r\n                objectRenderer.objectList.meshes.push(wireframeOver);\r\n            }\r\n        }\r\n    };\r\n\r\n    const displayBoneWeightsHandler = function () {\r\n        const scene = mesh.getScene();\r\n\r\n        if (mesh.material?.getClassName() === \"BoneWeightShader\") {\r\n            mesh.material.dispose();\r\n            mesh.material = mesh.reservedDataStore.originalMaterial;\r\n            mesh.reservedDataStore.originalMaterial = null;\r\n            setDisplayBoneWeights(false);\r\n        } else {\r\n            if (!mesh.reservedDataStore) {\r\n                mesh.reservedDataStore = {};\r\n            }\r\n            if (!mesh.reservedDataStore.originalMaterial) {\r\n                mesh.reservedDataStore.originalMaterial = mesh.material;\r\n            }\r\n            if (!mesh.reservedDataStore.displayBoneIndex) {\r\n                //mesh.reservedDataStore.displayBoneIndex = this.state.displayBoneIndex;\r\n            }\r\n            if (mesh.skeleton) {\r\n                const boneWeightsShader = SkeletonViewer.CreateBoneWeightShader({ skeleton: mesh.skeleton }, scene);\r\n                boneWeightsShader.reservedDataStore = { hidden: true };\r\n                mesh.material = boneWeightsShader;\r\n            }\r\n            setDisplayNormals(false);\r\n            setDisplayVertexColors(false);\r\n            setDisplaySkeletonMap(false);\r\n            setDisplayBoneWeights(true);\r\n        }\r\n    };\r\n\r\n    const displaySkeletonMapHandler = function () {\r\n        const scene = mesh.getScene();\r\n\r\n        if (mesh.material?.getClassName() === \"SkeletonMapShader\") {\r\n            mesh.material.dispose();\r\n            mesh.material = mesh.reservedDataStore.originalMaterial;\r\n            mesh.reservedDataStore.originalMaterial = null;\r\n            setDisplaySkeletonMap(false);\r\n        } else {\r\n            if (!mesh.reservedDataStore) {\r\n                mesh.reservedDataStore = {};\r\n            }\r\n            if (!mesh.reservedDataStore.originalMaterial) {\r\n                mesh.reservedDataStore.originalMaterial = mesh.material;\r\n            }\r\n            if (mesh.skeleton) {\r\n                const skeletonMapShader = SkeletonViewer.CreateSkeletonMapShader({ skeleton: mesh.skeleton }, scene);\r\n                skeletonMapShader.reservedDataStore = { hidden: true };\r\n                mesh.material = skeletonMapShader;\r\n            }\r\n            setDisplayNormals(false);\r\n            setDisplayVertexColors(false);\r\n            setDisplayBoneWeights(false);\r\n            setDisplaySkeletonMap(true);\r\n        }\r\n    };\r\n\r\n    const onBoneDisplayIndexChangeHandler = function (value: number): void {\r\n        mesh.reservedDataStore.displayBoneIndex = value;\r\n        setDisplayBoneIndex(value);\r\n        if (mesh.material && mesh.material.getClassName() === \"BoneWeightShader\") {\r\n            (mesh.material as ShaderMaterial).setFloat(\"targetBoneIndex\", value);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <SwitchPropertyLine label=\"Display Normals\" value={displayNormals} onChange={async () => await displayNormalsHandlerAsync()} />\r\n            <SwitchPropertyLine label=\"Display Vertex Colors\" value={displayVertexColors} onChange={() => displayVertexColorsHandler()} />\r\n            <SwitchPropertyLine label=\"Render Vertex Normals\" value={renderNormalVectors} onChange={() => renderNormalVectorsHandler()} />\r\n            <SwitchPropertyLine label=\"Render Wireframe over Mesh\" value={renderWireframeOver} onChange={() => renderWireframeOverHandler()} />\r\n            {skeleton && <SwitchPropertyLine label=\"Display Bone Weights\" value={displayBoneWeights} onChange={() => displayBoneWeightsHandler()} />}\r\n            <Collapse visible={displayBoneWeights}>\r\n                <div>\r\n                    <NumberDropdownPropertyLine\r\n                        label=\"Target Bone Name\"\r\n                        options={targetBoneOptions}\r\n                        value={displayBoneIndex}\r\n                        onChange={(value) => {\r\n                            onBoneDisplayIndexChangeHandler(value);\r\n                        }}\r\n                    />\r\n                    <SyncedSliderPropertyLine\r\n                        label=\"Target Bone\"\r\n                        value={displayBoneIndex}\r\n                        min={0}\r\n                        max={targetBoneOptions.length - 1}\r\n                        step={1}\r\n                        onChange={(value) => onBoneDisplayIndexChangeHandler(value)}\r\n                    />\r\n                </div>\r\n            </Collapse>\r\n            {skeleton && <SwitchPropertyLine label=\"Display Skeleton Map\" value={displaySkeletonMap} onChange={() => displaySkeletonMapHandler()} />}\r\n        </>\r\n    );\r\n};\r\n","import type { FunctionComponent } from \"react\";\r\n\r\nimport type { GaussianSplattingMesh } from \"core/index\";\r\n\r\nimport { StringifiedPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/stringifiedPropertyLine\";\r\nimport { BooleanBadgePropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/booleanBadgePropertyLine\";\r\n\r\nexport const GaussianSplattingDisplayProperties: FunctionComponent<{ mesh: GaussianSplattingMesh }> = (props) => {\r\n    const { mesh } = props;\r\n\r\n    return (\r\n        <>\r\n            <StringifiedPropertyLine label=\"Splat Count\" value={mesh.splatCount ?? 0} />\r\n            <StringifiedPropertyLine label=\"SH Parameter Count\" value={(mesh.shDegree + 1) * (mesh.shDegree + 1) - 1} />\r\n            <BooleanBadgePropertyLine label=\"Has Compensation\" value={mesh.compensation} />\r\n            <StringifiedPropertyLine label=\"Kernel Size\" value={mesh.kernelSize} />\r\n        </>\r\n    );\r\n};\r\n","import type { FunctionComponent } from \"react\";\r\n\r\nimport type { Mesh, MorphTarget, NodeGeometry } from \"core/index\";\r\n\r\nimport { EditRegular } from \"@fluentui/react-icons\";\r\n\r\nimport { Constants } from \"core/Engines/constants\";\r\nimport { ButtonLine } from \"shared-ui-components/fluent/hoc/buttonLine\";\r\nimport { NumberDropdownPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/dropdownPropertyLine\";\r\nimport { SyncedSliderPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/syncedSliderPropertyLine\";\r\nimport { BoundProperty } from \"../boundProperty\";\r\n\r\nexport const MeshGeneralProperties: FunctionComponent<{ mesh: Mesh }> = (props) => {\r\n    const { mesh } = props;\r\n\r\n    const nodeGeometry = mesh._internalMetadata?.nodeGeometry as NodeGeometry | undefined;\r\n\r\n    return (\r\n        <>\r\n            {nodeGeometry && (\r\n                <ButtonLine\r\n                    label=\"Edit\"\r\n                    icon={EditRegular}\r\n                    onClick={async () => {\r\n                        // TODO: Figure out how to get all the various build steps to work with this.\r\n                        //       See the initial attempt here: https://github.com/BabylonJS/Babylon.js/pull/17646\r\n                        // const { NodeGeometryEditor } = await import(\"node-geometry-editor/nodeGeometryEditor\");\r\n                        // NodeGeometryEditor.Show({ nodeGeometry: nodeGeometry, hostScene: mesh.getScene() });\r\n                        await nodeGeometry.edit({ nodeGeometryEditorConfig: { hostScene: mesh.getScene() } });\r\n                    }}\r\n                />\r\n            )}\r\n        </>\r\n    );\r\n};\r\n\r\nexport const MeshDisplayProperties: FunctionComponent<{ mesh: Mesh }> = (props) => {\r\n    const { mesh } = props;\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty\r\n                component={SyncedSliderPropertyLine}\r\n                label=\"Visibility\"\r\n                description={\"Controls the visibility of the mesh. 0 is invisible, 1 is fully visible.\"}\r\n                target={mesh}\r\n                propertyKey=\"visibility\"\r\n                min={0}\r\n                max={1}\r\n                step={0.01}\r\n            />\r\n            <BoundProperty\r\n                component={NumberDropdownPropertyLine}\r\n                label=\"Orientation\"\r\n                description={\"Controls the side orientation or winding order of the mesh.\"}\r\n                target={mesh}\r\n                propertyKey=\"sideOrientation\"\r\n                options={[\r\n                    { value: Constants.MATERIAL_ClockWiseSideOrientation, label: \"Clockwise\" },\r\n                    { value: Constants.MATERIAL_CounterClockWiseSideOrientation, label: \"CounterClockwise\" },\r\n                ]}\r\n            />\r\n        </>\r\n    );\r\n};\r\n\r\nexport const MeshMorphTargetsProperties: FunctionComponent<{ mesh: Mesh }> = (props) => {\r\n    const { mesh } = props;\r\n\r\n    if (!mesh.morphTargetManager) {\r\n        return null;\r\n    }\r\n\r\n    const morphTargets: MorphTarget[] = [];\r\n    for (let index = 0; index < mesh.morphTargetManager.numTargets; index++) {\r\n        const target = mesh.morphTargetManager.getTarget(index);\r\n        if (target.hasPositions) {\r\n            morphTargets.push(target);\r\n        }\r\n    }\r\n\r\n    if (morphTargets.length === 0) {\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {morphTargets.map((target, index) => (\r\n                <BoundProperty\r\n                    key={index}\r\n                    component={SyncedSliderPropertyLine}\r\n                    label={target.name || `Target ${index}`}\r\n                    description={`Influence of morph target \"${target.name || `Target ${index}`}\"`}\r\n                    target={target}\r\n                    propertyKey=\"influence\"\r\n                    min={0}\r\n                    max={1}\r\n                    step={0.01}\r\n                />\r\n            ))}\r\n        </>\r\n    );\r\n};\r\n","import type { FunctionComponent } from \"react\";\r\n\r\nimport type { Node } from \"core/index\";\r\nimport type { ISelectionService } from \"../../../services/selectionService\";\r\n\r\nimport { NodeSelectorPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/entitySelectorPropertyLine\";\r\nimport { SwitchPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/switchPropertyLine\";\r\nimport { useObservableState } from \"../../../hooks/observableHooks\";\r\nimport { BoundProperty, Property } from \"../boundProperty\";\r\n\r\nexport const NodeGeneralProperties: FunctionComponent<{ node: Node; selectionService: ISelectionService }> = (props) => {\r\n    const { node, selectionService } = props;\r\n\r\n    const isEnabled = useObservableState(() => node.isEnabled(false), node.onEnabledStateChangedObservable);\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty\r\n                component={NodeSelectorPropertyLine}\r\n                label=\"Parent\"\r\n                target={node}\r\n                propertyKey=\"parent\"\r\n                scene={node.getScene()}\r\n                defaultValue={null}\r\n                onLink={(parentNode) => (selectionService.selectedEntity = parentNode)}\r\n            />\r\n            <Property\r\n                component={SwitchPropertyLine}\r\n                label=\"Is Enabled\"\r\n                description=\"Whether the node is enabled or not.\"\r\n                value={isEnabled}\r\n                onChange={(checked) => node.setEnabled(checked)}\r\n                functionPath=\"setEnabled\"\r\n            />\r\n            <BoundProperty\r\n                component={SwitchPropertyLine}\r\n                label=\"Inherit Visibility\"\r\n                description=\"Whether the node inherits visibility from its parent.\"\r\n                target={node}\r\n                propertyKey=\"inheritVisibility\"\r\n            />\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Is Visible\" description=\"Whether the node is visible or not.\" target={node} propertyKey=\"isVisible\" />\r\n        </>\r\n    );\r\n};\r\n","import type { ServiceDefinition } from \"../../../modularity/serviceDefinition\";\r\nimport type { ISelectionService } from \"../../selectionService\";\r\nimport type { IPropertiesService } from \"./propertiesService\";\r\n\r\nimport { AbstractMesh } from \"core/Meshes/abstractMesh\";\r\nimport { GaussianSplattingMesh } from \"core/Meshes/GaussianSplatting/gaussianSplattingMesh\";\r\nimport { Mesh } from \"core/Meshes/mesh\";\r\nimport { Node } from \"core/node\";\r\nimport {\r\n    AbstractMeshAdvancedProperties,\r\n    AbstractMeshDebugProperties,\r\n    AbstractMeshDisplayProperties,\r\n    AbstractMeshEdgeRenderingProperties,\r\n    AbstractMeshGeneralProperties,\r\n    AbstractMeshOcclusionsProperties,\r\n    AbstractMeshOutlineOverlayProperties,\r\n} from \"../../../components/properties/nodes/abstractMeshProperties\";\r\nimport { GaussianSplattingDisplayProperties } from \"../../../components/properties/nodes/gaussianSplattingProperties\";\r\nimport { MeshDisplayProperties, MeshGeneralProperties, MeshMorphTargetsProperties } from \"../../../components/properties/nodes/meshProperties\";\r\nimport { NodeGeneralProperties } from \"../../../components/properties/nodes/nodeProperties\";\r\nimport { SelectionServiceIdentity } from \"../../selectionService\";\r\nimport { PropertiesServiceIdentity } from \"./propertiesService\";\r\n\r\nexport const NodePropertiesServiceDefinition: ServiceDefinition<[], [IPropertiesService, ISelectionService]> = {\r\n    friendlyName: \"Mesh Properties\",\r\n    consumes: [PropertiesServiceIdentity, SelectionServiceIdentity],\r\n    factory: (propertiesService, selectionService) => {\r\n        const nodeContentRegistration = propertiesService.addSectionContent({\r\n            key: \"Node Properties\",\r\n            predicate: (entity: unknown) => entity instanceof Node,\r\n            content: [\r\n                {\r\n                    section: \"General\",\r\n                    component: ({ context }) => <NodeGeneralProperties node={context} selectionService={selectionService} />,\r\n                },\r\n            ],\r\n        });\r\n\r\n        const abstractMeshContentRegistration = propertiesService.addSectionContent({\r\n            key: \"Abstract Mesh Properties\",\r\n            // Meshes without vertices are effectively TransformNodes, so don't add mesh properties for them.\r\n            predicate: (entity: unknown): entity is AbstractMesh => entity instanceof AbstractMesh && entity.getTotalVertices() > 0,\r\n            content: [\r\n                {\r\n                    section: \"General\",\r\n                    component: ({ context }) => <AbstractMeshGeneralProperties mesh={context} selectionService={selectionService} />,\r\n                },\r\n                {\r\n                    section: \"Display\",\r\n                    component: ({ context }) => <AbstractMeshDisplayProperties mesh={context} />,\r\n                },\r\n                {\r\n                    section: \"Advanced\",\r\n                    component: ({ context }) => <AbstractMeshAdvancedProperties mesh={context} />,\r\n                },\r\n                {\r\n                    section: \"Outlines & Overlays\",\r\n                    component: ({ context }) => <AbstractMeshOutlineOverlayProperties mesh={context} />,\r\n                },\r\n                {\r\n                    section: \"Occlusions\",\r\n                    component: ({ context }) => <AbstractMeshOcclusionsProperties mesh={context} />,\r\n                },\r\n                {\r\n                    section: \"Edge Rendering\",\r\n                    component: ({ context }) => <AbstractMeshEdgeRenderingProperties mesh={context} />,\r\n                },\r\n                {\r\n                    section: \"Debug\",\r\n                    component: ({ context }) => <AbstractMeshDebugProperties mesh={context} />,\r\n                },\r\n            ],\r\n        });\r\n\r\n        const meshContentRegistration = propertiesService.addSectionContent({\r\n            key: \"Mesh Properties\",\r\n            predicate: (entity: unknown): entity is Mesh => entity instanceof Mesh && entity.getTotalVertices() > 0,\r\n            content: [\r\n                {\r\n                    section: \"General\",\r\n                    component: ({ context }) => <MeshGeneralProperties mesh={context} />,\r\n                },\r\n                {\r\n                    section: \"Display\",\r\n                    component: ({ context }) => <MeshDisplayProperties mesh={context} />,\r\n                },\r\n                {\r\n                    section: \"Morph Targets\",\r\n                    component: ({ context }) => <MeshMorphTargetsProperties mesh={context} />,\r\n                },\r\n            ],\r\n        });\r\n\r\n        const gaussianSplattingContentRegistration = propertiesService.addSectionContent({\r\n            key: \"Gaussian Splatting Properties\",\r\n            predicate: (entity: unknown): entity is GaussianSplattingMesh => entity instanceof GaussianSplattingMesh && entity.getTotalVertices() > 0,\r\n            content: [\r\n                {\r\n                    section: \"Gaussian Splatting\",\r\n                    component: ({ context }) => <GaussianSplattingDisplayProperties mesh={context} />,\r\n                },\r\n            ],\r\n        });\r\n\r\n        return {\r\n            dispose: () => {\r\n                nodeContentRegistration.dispose();\r\n                abstractMeshContentRegistration.dispose();\r\n                meshContentRegistration.dispose();\r\n                gaussianSplattingContentRegistration.dispose();\r\n            },\r\n        };\r\n    },\r\n};\r\n","import type { FunctionComponent } from \"react\";\r\nimport type { GPUParticleSystem } from \"core/Particles/gpuParticleSystem\";\r\nimport type { ISelectionService } from \"../../../services/selectionService\";\r\nimport { EditRegular, EyeRegular } from \"@fluentui/react-icons\";\r\n\r\nimport { ParticleSystem } from \"core/Particles/particleSystem\";\r\nimport { ConvertToNodeParticleSystemSetAsync } from \"core/Particles/Node/nodeParticleSystemSet.helper\";\r\nimport { BlendModeOptions, ParticleBillboardModeOptions } from \"shared-ui-components/constToOptionsMaps\";\r\nimport { ButtonLine } from \"shared-ui-components/fluent/hoc/buttonLine\";\r\nimport { NumberDropdownPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/dropdownPropertyLine\";\r\nimport { NumberInputPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/inputPropertyLine\";\r\nimport { StringifiedPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/stringifiedPropertyLine\";\r\nimport { SwitchPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/switchPropertyLine\";\r\nimport { TextPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/textPropertyLine\";\r\nimport { Vector3PropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/vectorPropertyLine\";\r\nimport { TextureSelectorPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/entitySelectorPropertyLine\";\r\nimport { useProperty } from \"../../../hooks/compoundPropertyHooks\";\r\nimport { useObservableState } from \"../../../hooks/observableHooks\";\r\nimport { BoundProperty } from \"../boundProperty\";\r\n\r\n/**\r\n * Display general (high-level) information about a particle system.\r\n * @param props Component props.\r\n * @returns Render property lines.\r\n */\r\nexport const ParticleSystemSystemProperties: FunctionComponent<{ particleSystem: ParticleSystem | GPUParticleSystem; selectionService: ISelectionService }> = (props) => {\r\n    const { particleSystem: system, selectionService } = props;\r\n    const isCpuParticleSystem = system instanceof ParticleSystem;\r\n    const isNodeGenerated = isCpuParticleSystem && system.isNodeGenerated;\r\n\r\n    const scene = system.getScene();\r\n    const isBillboardBased = useProperty(system, \"isBillboardBased\");\r\n    const capacity = useObservableState(() => system.getCapacity());\r\n    const activeCount = useObservableState(() => system.getActiveCount(), scene?.onBeforeRenderObservable);\r\n\r\n    const selectEntity = (entity: unknown) => (selectionService.selectedEntity = entity);\r\n\r\n    return (\r\n        <>\r\n            {isCpuParticleSystem && (\r\n                <TextPropertyLine\r\n                    label=\"Is Node Generated\"\r\n                    description=\"Indicates if the particle system was created from a node-based particle system.\"\r\n                    value={String(isNodeGenerated)}\r\n                />\r\n            )}\r\n\r\n            <StringifiedPropertyLine label=\"Capacity\" description=\"Maximum number of particles in the system.\" value={capacity} />\r\n            <StringifiedPropertyLine label=\"Active Particles\" description=\"Current number of active particles.\" value={activeCount} />\r\n\r\n            {scene && !isNodeGenerated && (\r\n                <BoundProperty\r\n                    component={TextureSelectorPropertyLine}\r\n                    label=\"Particle Texture\"\r\n                    target={system}\r\n                    propertyKey=\"particleTexture\"\r\n                    scene={scene}\r\n                    onLink={selectEntity}\r\n                    defaultValue={null}\r\n                />\r\n            )}\r\n\r\n            <BoundProperty component={NumberDropdownPropertyLine} label=\"Blend Mode\" target={system} propertyKey=\"blendMode\" options={BlendModeOptions} />\r\n            <BoundProperty component={Vector3PropertyLine} label=\"World Offset\" target={system} propertyKey=\"worldOffset\" />\r\n            <BoundProperty component={Vector3PropertyLine} label=\"Gravity\" target={system} propertyKey=\"gravity\" />\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Is Billboard\" target={system} propertyKey=\"isBillboardBased\" />\r\n            {isBillboardBased && (\r\n                <BoundProperty component={NumberDropdownPropertyLine} label=\"Billboard Mode\" target={system} propertyKey=\"billboardMode\" options={ParticleBillboardModeOptions} />\r\n            )}\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Is Local\" target={system} propertyKey=\"isLocal\" />\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Force Depth Write\" target={system} propertyKey=\"forceDepthWrite\" />\r\n            <BoundProperty component={NumberInputPropertyLine} label=\"Update Speed\" target={system} propertyKey=\"updateSpeed\" min={0} step={0.01} />\r\n\r\n            {isCpuParticleSystem && (\r\n                <ButtonLine\r\n                    label={isNodeGenerated ? \"Edit\" : \"View as Node-Based Particle System\"}\r\n                    icon={isNodeGenerated ? EditRegular : EyeRegular}\r\n                    onClick={async () => {\r\n                        const scene = system.getScene();\r\n                        if (!scene) {\r\n                            return;\r\n                        }\r\n\r\n                        const systemSet = isNodeGenerated ? system.source : await ConvertToNodeParticleSystemSetAsync(\"source\", [system]);\r\n                        if (systemSet) {\r\n                            await systemSet.editAsync({ nodeEditorConfig: { backgroundColor: scene.clearColor, disposeOnClose: !isNodeGenerated } });\r\n                        }\r\n                    }}\r\n                />\r\n            )}\r\n        </>\r\n    );\r\n};\r\n","/**\r\n * Shared utilities for snippet server operations (save/load).\r\n */\r\n\r\n/**\r\n * Persist a snippet ID to local storage for quick reuse.\r\n * @param storageKey The local storage key to use.\r\n * @param snippetId The snippet ID to persist.\r\n * @param maxItems Maximum number of items to store (default 50).\r\n */\r\nexport function PersistSnippetId(storageKey: string, snippetId: string, maxItems: number = 50): void {\r\n    try {\r\n        const existing = JSON.parse(localStorage.getItem(storageKey) || \"[]\");\r\n        const list = Array.isArray(existing) ? existing : [];\r\n        if (!list.includes(snippetId)) {\r\n            list.unshift(snippetId);\r\n        }\r\n        localStorage.setItem(storageKey, JSON.stringify(list.slice(0, maxItems)));\r\n    } catch {\r\n        // Ignore storage failures.\r\n    }\r\n}\r\n\r\n/**\r\n * Configuration for saving to the snippet server.\r\n */\r\nexport type SaveToSnippetConfig = {\r\n    /** The base URL of the snippet server. */\r\n    snippetUrl: string;\r\n    /** The current snippet ID (if updating an existing snippet). */\r\n    currentSnippetId?: string;\r\n    /** The serialized content to save. */\r\n    content: string;\r\n    /** The key name for the payload (e.g., \"particleSystem\", \"spriteManager\"). */\r\n    payloadKey: string;\r\n    /** Optional local storage key for persisting snippet IDs. */\r\n    storageKey?: string;\r\n    /** Optional friendly name for the entity type (used in alerts). */\r\n    entityName?: string;\r\n};\r\n\r\n/**\r\n * Result from saving to the snippet server.\r\n */\r\nexport type SaveToSnippetResult = {\r\n    /** The new snippet ID. */\r\n    snippetId: string;\r\n    /** The previous snippet ID (or \"_BLANK\" if none). */\r\n    oldSnippetId: string;\r\n};\r\n\r\n/**\r\n * Save content to the snippet server.\r\n * @param config Configuration for the save operation.\r\n * @returns Promise resolving to the save result.\r\n */\r\nexport async function SaveToSnippetServer(config: SaveToSnippetConfig): Promise<SaveToSnippetResult> {\r\n    const { snippetUrl, currentSnippetId, content, payloadKey, storageKey, entityName } = config;\r\n\r\n    const dataToSend = {\r\n        payload: JSON.stringify({\r\n            [payloadKey]: content,\r\n        }),\r\n        name: \"\",\r\n        description: \"\",\r\n        tags: \"\",\r\n    };\r\n\r\n    const headers = new Headers();\r\n    headers.append(\"Content-Type\", \"application/json\");\r\n\r\n    let response: Response;\r\n    try {\r\n        response = await fetch(snippetUrl + (currentSnippetId ? \"/\" + currentSnippetId : \"\"), {\r\n            method: \"POST\",\r\n            headers,\r\n            body: JSON.stringify(dataToSend),\r\n        });\r\n    } catch (e) {\r\n        const errorMsg = `Unable to save your ${entityName ?? \"content\"}: ${e}`;\r\n        alert(errorMsg);\r\n        throw new Error(errorMsg);\r\n    }\r\n\r\n    if (!response.ok) {\r\n        const errorMsg = `Unable to save your ${entityName ?? \"content\"}`;\r\n        alert(errorMsg);\r\n        throw new Error(errorMsg);\r\n    }\r\n\r\n    const snippet = await response.json();\r\n    const oldSnippetId = currentSnippetId || \"_BLANK\";\r\n    let newSnippetId = snippet.id;\r\n    if (snippet.version && snippet.version !== \"0\") {\r\n        newSnippetId += \"#\" + snippet.version;\r\n    }\r\n\r\n    // Copy to clipboard when available.\r\n    if (navigator.clipboard) {\r\n        await navigator.clipboard.writeText(newSnippetId);\r\n    }\r\n\r\n    // Persist to local storage if configured.\r\n    if (storageKey) {\r\n        PersistSnippetId(storageKey, newSnippetId);\r\n    }\r\n\r\n    // Show success alert\r\n    alert(`${entityName ?? \"Content\"} saved with ID: ${newSnippetId} (the id was also saved to your clipboard)`);\r\n\r\n    return {\r\n        snippetId: newSnippetId,\r\n        oldSnippetId,\r\n    };\r\n}\r\n\r\n/**\r\n * Configuration for loading from the snippet server.\r\n */\r\nexport type LoadFromSnippetConfig = {\r\n    /** The base URL of the snippet server. */\r\n    snippetUrl: string;\r\n    /** The snippet ID to load. */\r\n    snippetId: string;\r\n    /** Optional friendly name for the entity type (used in alerts). */\r\n    entityName?: string;\r\n};\r\n\r\n/**\r\n * Load content from the snippet server.\r\n * @param config Configuration for the load operation.\r\n * @returns Promise resolving to the parsed response object.\r\n */\r\nexport async function LoadFromSnippetServer(config: LoadFromSnippetConfig): Promise<any> {\r\n    const { snippetUrl, snippetId, entityName } = config;\r\n\r\n    let response: Response;\r\n    try {\r\n        response = await fetch(snippetUrl + \"/\" + snippetId.replace(/#/g, \"/\"));\r\n    } catch (e) {\r\n        const errorMsg = `Unable to load your ${entityName ?? \"content\"}: ${e}`;\r\n        alert(errorMsg);\r\n        throw new Error(errorMsg);\r\n    }\r\n\r\n    if (!response.ok) {\r\n        const errorMsg = `Unable to load your ${entityName ?? \"content\"}`;\r\n        alert(errorMsg);\r\n        throw new Error(errorMsg);\r\n    }\r\n\r\n    return await response.json();\r\n}\r\n\r\n/**\r\n * Prompt the user for a snippet ID.\r\n * @param message The prompt message.\r\n * @returns The trimmed snippet ID, or null if cancelled/empty.\r\n */\r\nexport function PromptForSnippetId(message: string = \"Please enter the snippet ID to use\"): string | null {\r\n    const requestedSnippetId = window.prompt(message);\r\n    const trimmed = requestedSnippetId?.trim();\r\n    return trimmed || null;\r\n}\r\n\r\n/**\r\n * Notify the playground about a snippet ID change (for code replacement).\r\n * NOTE this is an anti-pattern, instead playground should hook in and observe changes / update its own code\r\n * This is a legacy approach and should not be copied elsewhere\r\n * @param oldSnippetId The previous snippet ID.\r\n * @param newSnippetId The new snippet ID.\r\n * @param parseMethodName The name of the parse method (e.g., \"SpriteManager.ParseFromSnippetAsync\").\r\n */\r\nexport function NotifyPlaygroundOfSnippetChange(oldSnippetId: string, newSnippetId: string, parseMethodName: string): void {\r\n    const windowAsAny = window as any;\r\n    if (windowAsAny.Playground && oldSnippetId) {\r\n        windowAsAny.Playground.onRequestCodeChangeObservable.notifyObservers({\r\n            regex: new RegExp(`${parseMethodName}\\\\(\"${oldSnippetId}`, \"g\"),\r\n            replace: `${parseMethodName}(\"${newSnippetId}`,\r\n        });\r\n    }\r\n}\r\n","import type { FunctionComponent } from \"react\";\r\nimport type { ISelectionService } from \"../../../services/selectionService\";\r\nimport { ArrowDownloadRegular, CloudArrowDownRegular, CloudArrowUpRegular, PlayRegular, StopRegular } from \"@fluentui/react-icons\";\r\nimport { useCallback, useEffect, useState } from \"react\";\r\n\r\nimport { Tools } from \"core/Misc/tools\";\r\nimport { GPUParticleSystem } from \"core/Particles/gpuParticleSystem\";\r\nimport { ParticleHelper } from \"core/Particles/particleHelper\";\r\nimport { ParticleSystem } from \"core/Particles/particleSystem\";\r\nimport { ButtonLine } from \"shared-ui-components/fluent/hoc/buttonLine\";\r\nimport { FileUploadLine } from \"shared-ui-components/fluent/hoc/fileUploadLine\";\r\nimport { TextPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/textPropertyLine\";\r\nimport { useProperty } from \"../../../hooks/compoundPropertyHooks\";\r\nimport { useObservableState } from \"../../../hooks/observableHooks\";\r\nimport { NotifyPlaygroundOfSnippetChange, PersistSnippetId, PromptForSnippetId, SaveToSnippetServer } from \"../../../utils/snippetUtils\";\r\n\r\nconst SnippetDashboardStorageKey = \"Babylon/InspectorV2/SnippetDashboard/ParticleSystems\";\r\n\r\nfunction TryParseJsonString(value: string | undefined): any {\r\n    if (!value) {\r\n        return undefined;\r\n    }\r\n\r\n    try {\r\n        return JSON.parse(value);\r\n    } catch {\r\n        return undefined;\r\n    }\r\n}\r\n\r\nfunction ParseJsonLoadContents(contents: ArrayBuffer | string): any | undefined {\r\n    if (contents instanceof ArrayBuffer) {\r\n        const decoder = new TextDecoder(\"utf-8\");\r\n        return TryParseJsonString(decoder.decode(contents)) ?? undefined;\r\n    }\r\n\r\n    if (typeof contents === \"string\") {\r\n        return TryParseJsonString(contents) ?? undefined;\r\n    }\r\n\r\n    return undefined;\r\n}\r\n\r\nfunction NormalizeParticleSystemSerialization(rawData: any): any {\r\n    const jsonPayload = TryParseJsonString(rawData?.jsonPayload);\r\n    const particleSystem = TryParseJsonString(jsonPayload?.particleSystem);\r\n    return particleSystem ?? rawData;\r\n}\r\n\r\n/**\r\n * Display commands that can be applied to a particle system inside Inspector.\r\n * @param props Component props.\r\n * @returns Render property lines.\r\n */\r\nexport const ParticleSystemCommandProperties: FunctionComponent<{ particleSystem: ParticleSystem | GPUParticleSystem; selectionService: ISelectionService }> = (props) => {\r\n    const { particleSystem: system, selectionService } = props;\r\n\r\n    const scene = system.getScene();\r\n\r\n    const isCpuParticleSystem = system instanceof ParticleSystem;\r\n    const isAlive = useObservableState(() => (isCpuParticleSystem ? system.isAlive() : system.isStarted()), scene?.onBeforeRenderObservable);\r\n    const isStopping = useObservableState(() => system.isStopping(), scene?.onBeforeRenderObservable);\r\n    const snippetId = useProperty(system, \"snippetId\");\r\n    const [stopRequested, setStopRequested] = useState(false);\r\n\r\n    useEffect(() => {\r\n        if (!stopRequested) {\r\n            return;\r\n        }\r\n\r\n        // Clear stop flag once the system fully stops.\r\n        if (!isAlive && !isStopping) {\r\n            setStopRequested(false);\r\n        }\r\n    }, [stopRequested, isAlive, isStopping]);\r\n\r\n    const applyParticleSystemJsonToSystem = useCallback(\r\n        (jsonObject: any) => {\r\n            if (!scene) {\r\n                alert(\"No scene available.\");\r\n                return;\r\n            }\r\n\r\n            const candidate = NormalizeParticleSystemSerialization(jsonObject);\r\n\r\n            try {\r\n                let newSystem: GPUParticleSystem | ParticleSystem;\r\n                if (isCpuParticleSystem) {\r\n                    newSystem = ParticleSystem.Parse(candidate, scene, \"\");\r\n                } else {\r\n                    newSystem = GPUParticleSystem.Parse(candidate, scene, \"\");\r\n                }\r\n\r\n                system.dispose();\r\n                selectionService.selectedEntity = newSystem;\r\n            } catch (e) {\r\n                alert(\"Failed to load particle system: \" + e);\r\n            }\r\n        },\r\n        [scene, system, isCpuParticleSystem, selectionService]\r\n    );\r\n\r\n    const loadFromSnippetServer = useCallback(async () => {\r\n        if (!scene) {\r\n            alert(\"No scene available.\");\r\n            return;\r\n        }\r\n\r\n        const snippetId = PromptForSnippetId();\r\n        if (!snippetId) {\r\n            return;\r\n        }\r\n\r\n        const oldSnippetId = system.snippetId;\r\n\r\n        // Dispose the old system and clear selection (v1 behavior)\r\n        system.dispose();\r\n        selectionService.selectedEntity = null;\r\n\r\n        try {\r\n            const newSystem = await ParticleHelper.ParseFromSnippetAsync(snippetId, scene, !isCpuParticleSystem);\r\n            selectionService.selectedEntity = newSystem;\r\n\r\n            // Notify the playground to update its code with the new snippet ID.\r\n            NotifyPlaygroundOfSnippetChange(oldSnippetId, snippetId, \"ParticleHelper.ParseFromSnippetAsync\");\r\n        } catch (err) {\r\n            alert(\"Unable to load your particle system: \" + err);\r\n        }\r\n    }, [scene, selectionService, system]);\r\n\r\n    const saveToSnippetServer = useCallback(async () => {\r\n        try {\r\n            const content = JSON.stringify(system.serialize(true));\r\n            const currentSnippetId = system.snippetId;\r\n\r\n            const result = await SaveToSnippetServer({\r\n                snippetUrl: ParticleHelper.SnippetUrl,\r\n                currentSnippetId,\r\n                content,\r\n                payloadKey: \"particleSystem\",\r\n                storageKey: SnippetDashboardStorageKey,\r\n                entityName: \"particle system\",\r\n            });\r\n\r\n            // eslint-disable-next-line require-atomic-updates\r\n            system.snippetId = result.snippetId;\r\n            PersistSnippetId(SnippetDashboardStorageKey, result.snippetId);\r\n\r\n            NotifyPlaygroundOfSnippetChange(result.oldSnippetId, result.snippetId, \"ParticleSystem.ParseFromSnippetAsync\");\r\n        } catch {\r\n            // Alert already shown by SaveToSnippetServer\r\n        }\r\n    }, [system]);\r\n\r\n    return (\r\n        <>\r\n            {isStopping ? (\r\n                <TextPropertyLine label=\"System is stopping...\" value=\"\" />\r\n            ) : isAlive ? (\r\n                <ButtonLine\r\n                    label=\"Stop\"\r\n                    icon={StopRegular}\r\n                    onClick={() => {\r\n                        setStopRequested(true);\r\n                        system.stop();\r\n                        if (!isCpuParticleSystem) {\r\n                            system.reset();\r\n                        }\r\n                    }}\r\n                />\r\n            ) : (\r\n                <ButtonLine\r\n                    label=\"Start\"\r\n                    icon={PlayRegular}\r\n                    onClick={() => {\r\n                        setStopRequested(false);\r\n                        system.start();\r\n                    }}\r\n                />\r\n            )}\r\n\r\n            <FileUploadLine\r\n                label=\"Load from File\"\r\n                accept=\".json\"\r\n                onClick={(files) => {\r\n                    if (files.length === 0) {\r\n                        return;\r\n                    }\r\n\r\n                    const file = files[0];\r\n                    Tools.ReadFile(\r\n                        file,\r\n                        (data) => {\r\n                            const jsonObject = ParseJsonLoadContents(data);\r\n                            if (!jsonObject) {\r\n                                alert(\"Unable to load particle system from file.\");\r\n                                return;\r\n                            }\r\n\r\n                            applyParticleSystemJsonToSystem(jsonObject);\r\n                        },\r\n                        undefined,\r\n                        true\r\n                    );\r\n                }}\r\n            />\r\n\r\n            <ButtonLine\r\n                label=\"Save to File\"\r\n                icon={ArrowDownloadRegular}\r\n                onClick={() => {\r\n                    // Download serialization as a JSON file.\r\n                    const data = JSON.stringify(system.serialize(true), null, 2);\r\n                    const blob = new Blob([data], { type: \"application/json\" });\r\n                    const name = (system.name && system.name.trim().length > 0 ? system.name.trim() : \"particleSystem\") + \".json\";\r\n                    Tools.Download(blob, name);\r\n                }}\r\n            />\r\n\r\n            {snippetId && <TextPropertyLine label=\"Snippet ID\" value={snippetId} />}\r\n            <ButtonLine label=\"Load from Snippet Server\" onClick={loadFromSnippetServer} icon={CloudArrowUpRegular} />\r\n            <ButtonLine label=\"Save to Snippet Server\" onClick={saveToSnippetServer} icon={CloudArrowDownRegular} />\r\n        </>\r\n    );\r\n};\r\n","import type { FunctionComponent } from \"react\";\r\nimport type { AbstractMesh } from \"core/index\";\r\nimport type { GPUParticleSystem } from \"core/Particles/gpuParticleSystem\";\r\nimport type { ISelectionService } from \"../../../services/selectionService\";\r\n\r\nimport { useEffect, useMemo, useState } from \"react\";\r\n\r\nimport { Vector3 } from \"core/Maths/math.vector\";\r\nimport { ParticleSystem } from \"core/Particles/particleSystem\";\r\nimport { BoxParticleEmitter } from \"core/Particles/EmitterTypes/boxParticleEmitter\";\r\nimport { ConeParticleEmitter } from \"core/Particles/EmitterTypes/coneParticleEmitter\";\r\nimport { CylinderParticleEmitter } from \"core/Particles/EmitterTypes/cylinderParticleEmitter\";\r\nimport { HemisphericParticleEmitter } from \"core/Particles/EmitterTypes/hemisphericParticleEmitter\";\r\nimport { MeshParticleEmitter } from \"core/Particles/EmitterTypes/meshParticleEmitter\";\r\nimport { PointParticleEmitter } from \"core/Particles/EmitterTypes/pointParticleEmitter\";\r\nimport { SphereParticleEmitter } from \"core/Particles/EmitterTypes/sphereParticleEmitter\";\r\n\r\nimport { StringDropdownPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/dropdownPropertyLine\";\r\nimport { NumberInputPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/inputPropertyLine\";\r\nimport { SwitchPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/switchPropertyLine\";\r\nimport { TextPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/textPropertyLine\";\r\nimport { Vector3PropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/vectorPropertyLine\";\r\nimport { useProperty } from \"../../../hooks/compoundPropertyHooks\";\r\nimport { BoundProperty, Property } from \"../boundProperty\";\r\nimport { LinkToEntityPropertyLine } from \"../linkToEntityPropertyLine\";\r\n\r\n/**\r\n * Display emitter-related properties for a particle system.\r\n * @param props Component props.\r\n * @returns Render property lines.\r\n */\r\nexport const ParticleSystemEmitterProperties: FunctionComponent<{ particleSystem: ParticleSystem | GPUParticleSystem; selectionService: ISelectionService }> = (props) => {\r\n    const { particleSystem: system, selectionService } = props;\r\n\r\n    const scene = system.getScene();\r\n\r\n    // Node-generated particle systems don't expose emitter type configuration\r\n    const isNodeGenerated = system instanceof ParticleSystem && system.isNodeGenerated;\r\n\r\n    type EmitterSelectionValue = \"none\" | \"position\" | `node:${number}`;\r\n\r\n    const emitter = useProperty(system, \"emitter\");\r\n    const emitterObject = emitter && !(emitter instanceof Vector3) ? (emitter as AbstractMesh) : undefined;\r\n\r\n    const [sceneNodesVersion, setSceneNodesVersion] = useState(0);\r\n    useEffect(() => {\r\n        if (!scene) {\r\n            return;\r\n        }\r\n\r\n        // Bump a local version counter whenever nodes change to keep emitter options up-to-date.\r\n        const bump = () => setSceneNodesVersion((value) => value + 1);\r\n\r\n        const newMeshToken = scene.onNewMeshAddedObservable.add(bump);\r\n        const meshRemovedToken = scene.onMeshRemovedObservable.add(bump);\r\n        const newTransformNodeToken = scene.onNewTransformNodeAddedObservable.add(bump);\r\n        const transformNodeRemovedToken = scene.onTransformNodeRemovedObservable.add(bump);\r\n\r\n        return () => {\r\n            scene.onNewMeshAddedObservable.remove(newMeshToken);\r\n            scene.onMeshRemovedObservable.remove(meshRemovedToken);\r\n            scene.onNewTransformNodeAddedObservable.remove(newTransformNodeToken);\r\n            scene.onTransformNodeRemovedObservable.remove(transformNodeRemovedToken);\r\n        };\r\n    }, [scene]);\r\n\r\n    const sceneNodes = useMemo(() => {\r\n        if (!scene) {\r\n            return [] as AbstractMesh[];\r\n        }\r\n\r\n        const seenUniqueIds = new Set<number>();\r\n        const unique: AbstractMesh[] = [];\r\n\r\n        for (const mesh of scene.meshes) {\r\n            const uniqueId = mesh.uniqueId;\r\n            if (typeof uniqueId === \"number\") {\r\n                if (seenUniqueIds.has(uniqueId)) {\r\n                    continue;\r\n                }\r\n                seenUniqueIds.add(uniqueId);\r\n            }\r\n            unique.push(mesh);\r\n        }\r\n\r\n        const emitterUniqueId = emitterObject?.uniqueId;\r\n        if (emitterObject && emitterUniqueId !== undefined && !seenUniqueIds.has(emitterUniqueId)) {\r\n            // Keep the current emitter visible even if it isn't present in the scene arrays for any reason.\r\n            unique.unshift(emitterObject);\r\n        }\r\n\r\n        return unique;\r\n    }, [scene, sceneNodesVersion, emitterObject]);\r\n\r\n    const emitterSelectionValue: EmitterSelectionValue = !emitter ? \"none\" : emitter instanceof Vector3 ? \"position\" : (`node:${emitter.uniqueId}` as const);\r\n\r\n    const emitterVector = emitter instanceof Vector3 ? emitter : undefined;\r\n\r\n    // Subscribe to Vector3 internal components to re-render on in-place mutations.\r\n    useProperty(emitterVector as Vector3 | null | undefined, \"_x\");\r\n    useProperty(emitterVector as Vector3 | null | undefined, \"_y\");\r\n    useProperty(emitterVector as Vector3 | null | undefined, \"_z\");\r\n\r\n    const particleEmitterType = useProperty(system, \"particleEmitterType\");\r\n\r\n    // Use a simple string key for the dropdown, but store an emitter-type instance in the engine.\r\n    type EmitterTypeKey = \"box\" | \"sphere\" | \"cone\" | \"cylinder\" | \"hemispheric\" | \"point\" | \"mesh\";\r\n\r\n    // Derive the current dropdown value from the current instance to stay in sync with external changes.\r\n    const derivedEmitterTypeKey: EmitterTypeKey = (() => {\r\n        if (particleEmitterType instanceof SphereParticleEmitter) {\r\n            return \"sphere\";\r\n        }\r\n        if (particleEmitterType instanceof ConeParticleEmitter) {\r\n            return \"cone\";\r\n        }\r\n        if (particleEmitterType instanceof CylinderParticleEmitter) {\r\n            return \"cylinder\";\r\n        }\r\n        if (particleEmitterType instanceof HemisphericParticleEmitter) {\r\n            return \"hemispheric\";\r\n        }\r\n        if (particleEmitterType instanceof PointParticleEmitter) {\r\n            return \"point\";\r\n        }\r\n        if (particleEmitterType instanceof MeshParticleEmitter) {\r\n            return \"mesh\";\r\n        }\r\n        // Fall back to \"box\" for unknown emitter types to keep the dropdown valid.\r\n        return \"box\";\r\n    })();\r\n\r\n    const [emitterTypeKey, setEmitterTypeKey] = useState<EmitterTypeKey>(derivedEmitterTypeKey);\r\n\r\n    useEffect(() => {\r\n        // Keep local dropdown state aligned with the derived key when the engine changes underneath.\r\n        setEmitterTypeKey(derivedEmitterTypeKey);\r\n    }, [derivedEmitterTypeKey]);\r\n\r\n    return (\r\n        <>\r\n            <Property\r\n                component={StringDropdownPropertyLine}\r\n                label=\"Emitter\"\r\n                propertyPath=\"emitter\"\r\n                value={emitterSelectionValue}\r\n                options={[\r\n                    { label: \"None\", value: \"none\" },\r\n                    { label: \"Position\", value: \"position\" },\r\n                    ...sceneNodes.map((node) => {\r\n                        const uniqueId = node.uniqueId;\r\n                        const name = node.name ?? \"(unnamed)\";\r\n                        const label = `${name} (#${uniqueId})`;\r\n\r\n                        return {\r\n                            label,\r\n                            value: `node:${uniqueId}`,\r\n                        };\r\n                    }),\r\n                ]}\r\n                onChange={(value) => {\r\n                    const next = value as EmitterSelectionValue;\r\n\r\n                    if (next === \"none\") {\r\n                        system.emitter = null;\r\n                        return;\r\n                    }\r\n\r\n                    if (next === \"position\") {\r\n                        if (!(system.emitter instanceof Vector3)) {\r\n                            system.emitter = Vector3.Zero();\r\n                        }\r\n                        return;\r\n                    }\r\n\r\n                    const uniqueIdText = next.replace(\"node:\", \"\");\r\n                    const uniqueId = Number(uniqueIdText);\r\n                    const node = sceneNodes.find((candidate) => candidate.uniqueId === uniqueId);\r\n                    if (node) {\r\n                        system.emitter = node;\r\n                    }\r\n                }}\r\n            />\r\n\r\n            {emitterSelectionValue === \"position\" && emitterVector && (\r\n                <Property\r\n                    component={Vector3PropertyLine}\r\n                    label=\"Position\"\r\n                    propertyPath=\"emitter\"\r\n                    value={emitterVector}\r\n                    onChange={(value) => {\r\n                        if (system.emitter instanceof Vector3) {\r\n                            system.emitter.copyFrom(value);\r\n                        } else {\r\n                            system.emitter = value;\r\n                        }\r\n                    }}\r\n                />\r\n            )}\r\n\r\n            {emitterSelectionValue !== \"none\" && emitter && !(emitter instanceof Vector3) && (\r\n                <Property component={LinkToEntityPropertyLine} label=\"Entity\" propertyPath=\"emitter\" entity={emitter} selectionService={selectionService} />\r\n            )}\r\n\r\n            {!isNodeGenerated && (\r\n                <>\r\n                    <Property\r\n                        component={StringDropdownPropertyLine}\r\n                        label=\"Type\"\r\n                        propertyPath=\"emitterType\"\r\n                        value={emitterTypeKey}\r\n                        options={[\r\n                            { label: \"Box\", value: \"box\" },\r\n                            { label: \"Cone\", value: \"cone\" },\r\n                            { label: \"Cylinder\", value: \"cylinder\" },\r\n                            { label: \"Hemispheric\", value: \"hemispheric\" },\r\n                            { label: \"Point\", value: \"point\" },\r\n                            { label: \"Mesh\", value: \"mesh\" },\r\n                            { label: \"Sphere\", value: \"sphere\" },\r\n                        ]}\r\n                        onChange={(value) => {\r\n                            const next = value as EmitterTypeKey;\r\n                            setEmitterTypeKey(next);\r\n\r\n                            // Update the engine by swapping the particleEmitterType instance to match the selected key.\r\n                            switch (next) {\r\n                                case \"box\":\r\n                                    system.createBoxEmitter(new Vector3(0, 1, 0), new Vector3(0, 1, 0), new Vector3(-0.5, -0.5, -0.5), new Vector3(0.5, 0.5, 0.5));\r\n                                    break;\r\n                                case \"sphere\":\r\n                                    system.createSphereEmitter(1, 1);\r\n                                    break;\r\n                                case \"cone\":\r\n                                    system.createConeEmitter(1, Math.PI / 4);\r\n                                    break;\r\n                                case \"cylinder\":\r\n                                    system.createCylinderEmitter(1, 1, 1, 0);\r\n                                    break;\r\n                                case \"hemispheric\":\r\n                                    system.createHemisphericEmitter(1, 1);\r\n                                    break;\r\n                                case \"point\":\r\n                                    system.createPointEmitter(new Vector3(0, 1, 0), new Vector3(0, 1, 0));\r\n                                    break;\r\n                                case \"mesh\": {\r\n                                    // Default to the first mesh in the scene when available, then allow changes via \"Source\".\r\n                                    const defaultMesh = scene?.meshes?.[0] ?? null;\r\n                                    system.particleEmitterType = new MeshParticleEmitter(defaultMesh);\r\n                                    break;\r\n                                }\r\n                            }\r\n                        }}\r\n                    />\r\n\r\n                    {particleEmitterType instanceof MeshParticleEmitter && (\r\n                        <>\r\n                            {scene && scene.meshes.length > 0 ? (\r\n                                <Property\r\n                                    component={StringDropdownPropertyLine}\r\n                                    propertyPath=\"source\"\r\n                                    label=\"Source\"\r\n                                    value={particleEmitterType.mesh ? `mesh:${particleEmitterType.mesh.uniqueId}` : `mesh:${scene.meshes[0].uniqueId}`}\r\n                                    options={scene.meshes.map((mesh) => {\r\n                                        const uniqueId = mesh.uniqueId;\r\n                                        const name = mesh.name ?? \"(unnamed)\";\r\n                                        const label = `${name} (#${uniqueId})`;\r\n                                        return {\r\n                                            label,\r\n                                            value: `mesh:${uniqueId}`,\r\n                                        };\r\n                                    })}\r\n                                    onChange={(value) => {\r\n                                        const next = String(value);\r\n                                        const uniqueIdText = next.replace(\"mesh:\", \"\");\r\n                                        const uniqueId = Number(uniqueIdText);\r\n                                        const mesh = scene.meshes.find((candidate) => candidate.uniqueId === uniqueId) ?? null;\r\n                                        particleEmitterType.mesh = mesh;\r\n                                    }}\r\n                                />\r\n                            ) : (\r\n                                <Property component={TextPropertyLine} propertyPath=\"source\" label=\"Source\" value=\"No meshes in scene.\" />\r\n                            )}\r\n                        </>\r\n                    )}\r\n\r\n                    {particleEmitterType instanceof BoxParticleEmitter && (\r\n                        <>\r\n                            <BoundProperty component={Vector3PropertyLine} label=\"Direction1\" target={particleEmitterType} propertyKey=\"direction1\" />\r\n                            <BoundProperty component={Vector3PropertyLine} label=\"Direction2\" target={particleEmitterType} propertyKey=\"direction2\" />\r\n                            <BoundProperty component={Vector3PropertyLine} label=\"Min emit box\" target={particleEmitterType} propertyKey=\"minEmitBox\" />\r\n                            <BoundProperty component={Vector3PropertyLine} label=\"Max emit box\" target={particleEmitterType} propertyKey=\"maxEmitBox\" />\r\n                        </>\r\n                    )}\r\n\r\n                    {particleEmitterType instanceof ConeParticleEmitter && (\r\n                        <>\r\n                            <BoundProperty\r\n                                component={NumberInputPropertyLine}\r\n                                label=\"Radius range\"\r\n                                target={particleEmitterType}\r\n                                propertyKey=\"radiusRange\"\r\n                                min={0}\r\n                                max={1}\r\n                                step={0.01}\r\n                            />\r\n                            <BoundProperty\r\n                                component={NumberInputPropertyLine}\r\n                                label=\"Height range\"\r\n                                target={particleEmitterType}\r\n                                propertyKey=\"heightRange\"\r\n                                min={0}\r\n                                max={1}\r\n                                step={0.01}\r\n                            />\r\n                            <BoundProperty component={SwitchPropertyLine} label=\"Emit from spawn point only\" target={particleEmitterType} propertyKey=\"emitFromSpawnPointOnly\" />\r\n                            <BoundProperty\r\n                                component={NumberInputPropertyLine}\r\n                                label=\"Direction randomizer\"\r\n                                target={particleEmitterType}\r\n                                propertyKey=\"directionRandomizer\"\r\n                                min={0}\r\n                                max={1}\r\n                                step={0.01}\r\n                            />\r\n                        </>\r\n                    )}\r\n\r\n                    {particleEmitterType instanceof SphereParticleEmitter && (\r\n                        <>\r\n                            <BoundProperty component={NumberInputPropertyLine} label=\"Radius\" target={particleEmitterType} propertyKey=\"radius\" min={0} step={0.1} />\r\n                            <BoundProperty\r\n                                component={NumberInputPropertyLine}\r\n                                label=\"Radius range\"\r\n                                target={particleEmitterType}\r\n                                propertyKey=\"radiusRange\"\r\n                                min={0}\r\n                                max={1}\r\n                                step={0.01}\r\n                            />\r\n                            <BoundProperty\r\n                                component={NumberInputPropertyLine}\r\n                                label=\"Direction randomizer\"\r\n                                target={particleEmitterType}\r\n                                propertyKey=\"directionRandomizer\"\r\n                                min={0}\r\n                                max={1}\r\n                                step={0.01}\r\n                            />\r\n                        </>\r\n                    )}\r\n\r\n                    {particleEmitterType instanceof CylinderParticleEmitter && (\r\n                        <>\r\n                            <BoundProperty component={NumberInputPropertyLine} label=\"Radius\" target={particleEmitterType} propertyKey=\"radius\" min={0} step={0.1} />\r\n                            <BoundProperty component={NumberInputPropertyLine} label=\"Height\" target={particleEmitterType} propertyKey=\"height\" min={0} step={0.1} />\r\n                            <BoundProperty\r\n                                component={NumberInputPropertyLine}\r\n                                label=\"Radius range\"\r\n                                target={particleEmitterType}\r\n                                propertyKey=\"radiusRange\"\r\n                                min={0}\r\n                                max={1}\r\n                                step={0.01}\r\n                            />\r\n                            <BoundProperty\r\n                                component={NumberInputPropertyLine}\r\n                                label=\"Direction randomizer\"\r\n                                target={particleEmitterType}\r\n                                propertyKey=\"directionRandomizer\"\r\n                                min={0}\r\n                                max={1}\r\n                                step={0.01}\r\n                            />\r\n                        </>\r\n                    )}\r\n\r\n                    {particleEmitterType instanceof HemisphericParticleEmitter && (\r\n                        <>\r\n                            <BoundProperty component={NumberInputPropertyLine} label=\"Radius\" target={particleEmitterType} propertyKey=\"radius\" min={0} step={0.1} />\r\n                            <BoundProperty\r\n                                component={NumberInputPropertyLine}\r\n                                label=\"Radius range\"\r\n                                target={particleEmitterType}\r\n                                propertyKey=\"radiusRange\"\r\n                                min={0}\r\n                                max={1}\r\n                                step={0.01}\r\n                            />\r\n                            <BoundProperty\r\n                                component={NumberInputPropertyLine}\r\n                                label=\"Direction randomizer\"\r\n                                target={particleEmitterType}\r\n                                propertyKey=\"directionRandomizer\"\r\n                                min={0}\r\n                                max={1}\r\n                                step={0.01}\r\n                            />\r\n                        </>\r\n                    )}\r\n\r\n                    {particleEmitterType instanceof PointParticleEmitter && (\r\n                        <>\r\n                            <BoundProperty component={Vector3PropertyLine} label=\"Direction1\" target={particleEmitterType} propertyKey=\"direction1\" />\r\n                            <BoundProperty component={Vector3PropertyLine} label=\"Direction2\" target={particleEmitterType} propertyKey=\"direction2\" />\r\n                        </>\r\n                    )}\r\n                </>\r\n            )}\r\n\r\n            {!scene && <TextPropertyLine label=\"Emitter\" value=\"No scene available.\" />}\r\n        </>\r\n    );\r\n};\r\n","import { useCallback } from \"react\";\r\nimport { useInterceptObservable } from \"./instrumentationHooks\";\r\nimport { useObservableState } from \"./observableHooks\";\r\n\r\n/**\r\n * Return a copied array and re-render when array mutators run.\r\n * Intercept add/remove/change functions because the underlying APIs update internal arrays in-place.\r\n * @param target The target object containing the observable array, or null if the array is not applicable.\r\n * @param getItems A function to get the current items in the array.\r\n * @param addFn The name of the function to add an item to the array.\r\n * @param removeFn The name of the function to remove an item from the array.\r\n * @param changeFn The name of the function to change an item in the array.\r\n * @returns A copied array that re-renders when array mutators run.\r\n */\r\nexport function useObservableArray<TargetT extends object, ItemT>(\r\n    target: TargetT | null,\r\n    getItems: () => ReadonlyArray<ItemT> | null | undefined,\r\n    addFn: keyof TargetT,\r\n    removeFn: keyof TargetT,\r\n    changeFn?: keyof TargetT\r\n): ItemT[] {\r\n    return useObservableState(\r\n        useCallback(() => {\r\n            const value = getItems();\r\n            return [...(value ?? [])] as ItemT[];\r\n        }, [getItems]),\r\n        useInterceptObservable(\"function\", target, addFn),\r\n        useInterceptObservable(\"function\", target, removeFn),\r\n        changeFn ? useInterceptObservable(\"function\", target, changeFn) : undefined\r\n    );\r\n}\r\n","import type { FactorGradient } from \"core/Misc\";\r\nimport type { GPUParticleSystem } from \"core/Particles/gpuParticleSystem\";\r\nimport type { FunctionComponent } from \"react\";\r\n\r\nimport { makeStyles, Subtitle2, tokens } from \"@fluentui/react-components\";\r\nimport { ParticleSystem } from \"core/Particles/particleSystem\";\r\nimport { useCallback } from \"react\";\r\n\r\nimport { NumberInputPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/inputPropertyLine\";\r\nimport { ButtonLine } from \"shared-ui-components/fluent/hoc/buttonLine\";\r\nimport { FactorGradientList } from \"shared-ui-components/fluent/hoc/gradientList\";\r\nimport { BoundProperty } from \"../boundProperty\";\r\nimport { useObservableArray } from \"../../../hooks/useObservableArray\";\r\n\r\nconst useStyles = makeStyles({\r\n    subsection: {\r\n        marginTop: tokens.spacingVerticalM,\r\n    },\r\n});\r\n\r\n/**\r\n * Display size-related properties for a particle system.\r\n * @param props Component props.\r\n * @returns Render property lines.\r\n */\r\nexport const ParticleSystemSizeProperties: FunctionComponent<{ particleSystem: ParticleSystem | GPUParticleSystem }> = (props) => {\r\n    const { particleSystem: system } = props;\r\n    const isCpuParticleSystem = system instanceof ParticleSystem;\r\n\r\n    // Start size gradient is not supported in GPU particle systems, so the UI will be hidden below\r\n    const starSizeGradientGetter = useCallback(() => system.getStartSizeGradients(), [system]);\r\n    const startSizeGradient = useObservableArray<ParticleSystem | GPUParticleSystem, FactorGradient>(\r\n        system,\r\n        starSizeGradientGetter,\r\n        \"addStartSizeGradient\",\r\n        \"removeStartSizeGradient\",\r\n        \"forceRefreshGradients\"\r\n    );\r\n    const useStartSizeGradients = (startSizeGradient?.length ?? 0) > 0;\r\n\r\n    const sizeGradientGetter = useCallback(() => system.getSizeGradients(), [system]);\r\n    const sizeGradient = useObservableArray<ParticleSystem | GPUParticleSystem, FactorGradient>(\r\n        system,\r\n        sizeGradientGetter,\r\n        \"addSizeGradient\",\r\n        \"removeSizeGradient\",\r\n        \"forceRefreshGradients\"\r\n    );\r\n    const useSizeGradients = (sizeGradient?.length ?? 0) > 0;\r\n\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty component={NumberInputPropertyLine} label=\"Min size\" target={system} propertyKey=\"minSize\" min={0} step={0.1} />\r\n            <BoundProperty component={NumberInputPropertyLine} label=\"Max size\" target={system} propertyKey=\"maxSize\" min={0} step={0.1} />\r\n            <BoundProperty component={NumberInputPropertyLine} label=\"Min scale x\" target={system} propertyKey=\"minScaleX\" min={0} step={0.1} />\r\n            <BoundProperty component={NumberInputPropertyLine} label=\"Max scale x\" target={system} propertyKey=\"maxScaleX\" min={0} step={0.1} />\r\n            <BoundProperty component={NumberInputPropertyLine} label=\"Min scale y\" target={system} propertyKey=\"minScaleY\" min={0} step={0.1} />\r\n            <BoundProperty component={NumberInputPropertyLine} label=\"Max scale y\" target={system} propertyKey=\"maxScaleY\" min={0} step={0.1} />\r\n\r\n            {isCpuParticleSystem && !useStartSizeGradients && (\r\n                <ButtonLine\r\n                    label=\"Use Start Size gradients\"\r\n                    onClick={() => {\r\n                        system.addStartSizeGradient(0, system.minSize, system.maxSize);\r\n                        system.forceRefreshGradients();\r\n                    }}\r\n                />\r\n            )}\r\n\r\n            {useStartSizeGradients && (\r\n                <>\r\n                    <Subtitle2 className={classes.subsection}>Start Size Gradients</Subtitle2>\r\n                    <FactorGradientList\r\n                        gradients={startSizeGradient}\r\n                        label=\"Start Size Gradient\"\r\n                        removeGradient={(gradient: FactorGradient) => {\r\n                            system.removeStartSizeGradient(gradient.gradient);\r\n                            system.forceRefreshGradients();\r\n                        }}\r\n                        addGradient={(gradient?: FactorGradient) => {\r\n                            if (gradient) {\r\n                                system.addStartSizeGradient(gradient.gradient, gradient.factor1, gradient.factor2);\r\n                            } else {\r\n                                system.addStartSizeGradient(0, system.minSize, system.maxSize);\r\n                            }\r\n                            system.forceRefreshGradients();\r\n                        }}\r\n                        onChange={(_gradient: FactorGradient) => {\r\n                            system.forceRefreshGradients();\r\n                        }}\r\n                    />\r\n                </>\r\n            )}\r\n\r\n            {!useSizeGradients && (\r\n                <ButtonLine\r\n                    label=\"Use Size gradients\"\r\n                    onClick={() => {\r\n                        system.addSizeGradient(0, system.minSize, system.maxSize);\r\n                        system.forceRefreshGradients();\r\n                    }}\r\n                />\r\n            )}\r\n\r\n            {useSizeGradients && (\r\n                <>\r\n                    <Subtitle2 className={classes.subsection}>Size Gradients</Subtitle2>\r\n                    <FactorGradientList\r\n                        gradients={sizeGradient}\r\n                        label=\"Size Gradient\"\r\n                        removeGradient={(gradient: FactorGradient) => {\r\n                            system.removeSizeGradient(gradient.gradient);\r\n                            system.forceRefreshGradients();\r\n                        }}\r\n                        addGradient={(gradient?: FactorGradient) => {\r\n                            if (gradient) {\r\n                                system.addSizeGradient(gradient.gradient, gradient.factor1, gradient.factor2);\r\n                            } else {\r\n                                system.addSizeGradient(0, system.minSize, system.maxSize);\r\n                            }\r\n                            system.forceRefreshGradients();\r\n                        }}\r\n                        onChange={(_gradient: FactorGradient) => {\r\n                            system.forceRefreshGradients();\r\n                        }}\r\n                    />\r\n                </>\r\n            )}\r\n        </>\r\n    );\r\n};\r\n","import type { FactorGradient } from \"core/index\";\r\nimport type { GPUParticleSystem } from \"core/Particles/gpuParticleSystem\";\r\nimport type { FunctionComponent } from \"react\";\r\n\r\nimport { makeStyles, Subtitle2, tokens } from \"@fluentui/react-components\";\r\nimport { ParticleSystem } from \"core/Particles/particleSystem\";\r\nimport { useCallback } from \"react\";\r\n\r\nimport { ButtonLine } from \"shared-ui-components/fluent/hoc/buttonLine\";\r\nimport { FactorGradientList } from \"shared-ui-components/fluent/hoc/gradientList\";\r\nimport { NumberInputPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/inputPropertyLine\";\r\nimport { BoundProperty } from \"../boundProperty\";\r\nimport { useObservableArray } from \"../../../hooks/useObservableArray\";\r\n\r\nconst useStyles = makeStyles({\r\n    subsection: {\r\n        marginTop: tokens.spacingVerticalM,\r\n    },\r\n});\r\n\r\n/**\r\n * Display emission-related properties for a particle system.\r\n * @param props Component props.\r\n * @returns Render property lines.\r\n */\r\nexport const ParticleSystemEmissionProperties: FunctionComponent<{ particleSystem: ParticleSystem | GPUParticleSystem }> = (props) => {\r\n    const { particleSystem: system } = props;\r\n    const isCpuParticleSystem = system instanceof ParticleSystem;\r\n\r\n    // Emit rate gradient is not supported in GPU particle systems, so the UI will be hidden below\r\n    const emitRateGradientsGetter = useCallback(() => system.getEmitRateGradients(), [system]);\r\n    const emitRateGradients = useObservableArray<ParticleSystem | GPUParticleSystem, FactorGradient>(\r\n        system,\r\n        emitRateGradientsGetter,\r\n        \"addEmitRateGradient\",\r\n        \"removeEmitRateGradient\",\r\n        \"forceRefreshGradients\"\r\n    );\r\n\r\n    const velocityGradientsGetter = useCallback(() => system.getVelocityGradients(), [system]);\r\n    const velocityGradients = useObservableArray<ParticleSystem | GPUParticleSystem, FactorGradient>(\r\n        system,\r\n        velocityGradientsGetter,\r\n        \"addVelocityGradient\",\r\n        \"removeVelocityGradient\",\r\n        \"forceRefreshGradients\"\r\n    );\r\n\r\n    const limitVelocityGradientsGetter = useCallback(() => system.getLimitVelocityGradients(), [system]);\r\n    const limitVelocityGradients = useObservableArray<ParticleSystem | GPUParticleSystem, FactorGradient>(\r\n        system,\r\n        limitVelocityGradientsGetter,\r\n        \"addLimitVelocityGradient\",\r\n        \"removeLimitVelocityGradient\",\r\n        \"forceRefreshGradients\"\r\n    );\r\n\r\n    const dragGradientsGetter = useCallback(() => system.getDragGradients(), [system]);\r\n    const dragGradients = useObservableArray<ParticleSystem | GPUParticleSystem, FactorGradient>(\r\n        system,\r\n        dragGradientsGetter,\r\n        \"addDragGradient\",\r\n        \"removeDragGradient\",\r\n        \"forceRefreshGradients\"\r\n    );\r\n\r\n    const useEmitRateGradients = (emitRateGradients?.length ?? 0) > 0;\r\n    const useVelocityGradients = (velocityGradients?.length ?? 0) > 0;\r\n    const useLimitVelocityGradients = (limitVelocityGradients?.length ?? 0) > 0;\r\n    const useDragGradients = (dragGradients?.length ?? 0) > 0;\r\n\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty component={NumberInputPropertyLine} label=\"Emit rate\" target={system} propertyKey=\"emitRate\" min={0} step={1} />\r\n\r\n            {isCpuParticleSystem && !useEmitRateGradients && (\r\n                <ButtonLine\r\n                    label=\"Use Emit rate gradients\"\r\n                    onClick={() => {\r\n                        system.addEmitRateGradient(0, system.emitRate, system.emitRate);\r\n                        system.forceRefreshGradients();\r\n                    }}\r\n                />\r\n            )}\r\n\r\n            {useEmitRateGradients && (\r\n                <>\r\n                    <Subtitle2 className={classes.subsection}>Emit Rate Gradients</Subtitle2>\r\n                    <FactorGradientList\r\n                        gradients={emitRateGradients}\r\n                        label=\"Emit Rate Gradient\"\r\n                        removeGradient={(gradient: FactorGradient) => {\r\n                            system.removeEmitRateGradient(gradient.gradient);\r\n                            system.forceRefreshGradients();\r\n                        }}\r\n                        addGradient={(gradient?: FactorGradient) => {\r\n                            if (gradient) {\r\n                                system.addEmitRateGradient(gradient.gradient, gradient.factor1, gradient.factor2);\r\n                            } else {\r\n                                system.addEmitRateGradient(0, system.emitRate, system.emitRate);\r\n                            }\r\n                            system.forceRefreshGradients();\r\n                        }}\r\n                        onChange={(_gradient: FactorGradient) => {\r\n                            system.forceRefreshGradients();\r\n                        }}\r\n                    />\r\n                </>\r\n            )}\r\n\r\n            <BoundProperty component={NumberInputPropertyLine} label=\"Min Emit Power\" target={system} propertyKey=\"minEmitPower\" min={0} step={0.1} />\r\n            <BoundProperty component={NumberInputPropertyLine} label=\"Max Emit Power\" target={system} propertyKey=\"maxEmitPower\" min={0} step={0.1} />\r\n\r\n            {!useVelocityGradients && (\r\n                <ButtonLine\r\n                    label=\"Use Velocity gradients\"\r\n                    onClick={() => {\r\n                        system.addVelocityGradient(0, 1, 1);\r\n                        system.forceRefreshGradients();\r\n                    }}\r\n                />\r\n            )}\r\n\r\n            {useVelocityGradients && (\r\n                <>\r\n                    <Subtitle2 className={classes.subsection}>Velocity Gradients</Subtitle2>\r\n                    <FactorGradientList\r\n                        gradients={velocityGradients}\r\n                        label=\"Velocity Gradient\"\r\n                        removeGradient={(gradient: FactorGradient) => {\r\n                            system.removeVelocityGradient(gradient.gradient);\r\n                            system.forceRefreshGradients();\r\n                        }}\r\n                        addGradient={(gradient?: FactorGradient) => {\r\n                            if (gradient) {\r\n                                system.addVelocityGradient(gradient.gradient, gradient.factor1, gradient.factor2);\r\n                            } else {\r\n                                system.addVelocityGradient(0, 1, 1);\r\n                            }\r\n                            system.forceRefreshGradients();\r\n                        }}\r\n                        onChange={(_gradient: FactorGradient) => {\r\n                            system.forceRefreshGradients();\r\n                        }}\r\n                    />\r\n                </>\r\n            )}\r\n\r\n            {!useLimitVelocityGradients && (\r\n                <ButtonLine\r\n                    label=\"Use Limit Velocity gradients\"\r\n                    onClick={() => {\r\n                        system.addLimitVelocityGradient(0, 1, 1);\r\n                        system.forceRefreshGradients();\r\n                    }}\r\n                />\r\n            )}\r\n\r\n            {useLimitVelocityGradients && (\r\n                <>\r\n                    <Subtitle2 className={classes.subsection}>Limit Velocity Gradients</Subtitle2>\r\n                    <FactorGradientList\r\n                        gradients={limitVelocityGradients}\r\n                        label=\"Limit Velocity Gradient\"\r\n                        removeGradient={(gradient: FactorGradient) => {\r\n                            system.removeLimitVelocityGradient(gradient.gradient);\r\n                            system.forceRefreshGradients();\r\n                        }}\r\n                        addGradient={(gradient?: FactorGradient) => {\r\n                            if (gradient) {\r\n                                system.addLimitVelocityGradient(gradient.gradient, gradient.factor1, gradient.factor2);\r\n                            } else {\r\n                                system.addLimitVelocityGradient(0, 1, 1);\r\n                            }\r\n                            system.forceRefreshGradients();\r\n                        }}\r\n                        onChange={(_gradient: FactorGradient) => {\r\n                            system.forceRefreshGradients();\r\n                        }}\r\n                    />\r\n                </>\r\n            )}\r\n\r\n            {!useDragGradients && (\r\n                <ButtonLine\r\n                    label=\"Use Drag gradients\"\r\n                    onClick={() => {\r\n                        system.addDragGradient(0, 1, 1);\r\n                        system.forceRefreshGradients();\r\n                    }}\r\n                />\r\n            )}\r\n\r\n            {useDragGradients && (\r\n                <>\r\n                    <Subtitle2 className={classes.subsection}>Drag Gradients</Subtitle2>\r\n                    <FactorGradientList\r\n                        gradients={dragGradients}\r\n                        label=\"Drag Gradient\"\r\n                        removeGradient={(gradient: FactorGradient) => {\r\n                            system.removeDragGradient(gradient.gradient);\r\n                            system.forceRefreshGradients();\r\n                        }}\r\n                        addGradient={(gradient?: FactorGradient) => {\r\n                            if (gradient) {\r\n                                system.addDragGradient(gradient.gradient, gradient.factor1, gradient.factor2);\r\n                            } else {\r\n                                system.addDragGradient(0, 1, 1);\r\n                            }\r\n                            system.forceRefreshGradients();\r\n                        }}\r\n                        onChange={(_gradient: FactorGradient) => {\r\n                            system.forceRefreshGradients();\r\n                        }}\r\n                    />\r\n                </>\r\n            )}\r\n        </>\r\n    );\r\n};\r\n","import type { FactorGradient } from \"core/index\";\r\nimport { ParticleSystem } from \"core/Particles/particleSystem\";\r\nimport type { GPUParticleSystem } from \"core/Particles/gpuParticleSystem\";\r\nimport type { FunctionComponent } from \"react\";\r\n\r\nimport { makeStyles, Subtitle2, tokens } from \"@fluentui/react-components\";\r\nimport { useCallback } from \"react\";\r\n\r\nimport { ButtonLine } from \"shared-ui-components/fluent/hoc/buttonLine\";\r\nimport { FactorGradientList } from \"shared-ui-components/fluent/hoc/gradientList\";\r\nimport { NumberInputPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/inputPropertyLine\";\r\nimport { BoundProperty } from \"../boundProperty\";\r\nimport { useObservableArray } from \"../../../hooks/useObservableArray\";\r\n\r\nconst useStyles = makeStyles({\r\n    subsection: {\r\n        marginTop: tokens.spacingVerticalM,\r\n    },\r\n});\r\n\r\n/**\r\n * Display lifetime-related properties for a particle system.\r\n * @param props Component props.\r\n * @returns Render property lines.\r\n */\r\nexport const ParticleSystemLifetimeProperties: FunctionComponent<{ particleSystem: ParticleSystem | GPUParticleSystem }> = (props) => {\r\n    const { particleSystem: system } = props;\r\n    const isCpuParticleSystem = system instanceof ParticleSystem;\r\n\r\n    // Lifetime gradient is not supported in GPU particle systems, so the UI will be hidden below\r\n    const lifeTimeGradientsGetter = useCallback(() => system.getLifeTimeGradients(), [system]);\r\n    const lifeTimeGradients = useObservableArray<ParticleSystem | GPUParticleSystem, FactorGradient>(\r\n        system,\r\n        lifeTimeGradientsGetter,\r\n        \"addLifeTimeGradient\",\r\n        \"removeLifeTimeGradient\",\r\n        \"forceRefreshGradients\"\r\n    );\r\n    const useLifeTimeGradients = (lifeTimeGradients?.length ?? 0) > 0;\r\n\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty component={NumberInputPropertyLine} label=\"Min lifetime\" target={system} propertyKey=\"minLifeTime\" min={0} step={0.1} />\r\n            <BoundProperty component={NumberInputPropertyLine} label=\"Max lifetime\" target={system} propertyKey=\"maxLifeTime\" min={0} step={0.1} />\r\n\r\n            {isCpuParticleSystem && !useLifeTimeGradients && (\r\n                <ButtonLine\r\n                    label=\"Use Lifetime gradients\"\r\n                    onClick={() => {\r\n                        system.addLifeTimeGradient(0, system.minLifeTime, system.maxLifeTime);\r\n                        system.forceRefreshGradients();\r\n                    }}\r\n                />\r\n            )}\r\n\r\n            {useLifeTimeGradients && (\r\n                <>\r\n                    <Subtitle2 className={classes.subsection}>Lifetime Gradients</Subtitle2>\r\n                    <FactorGradientList\r\n                        gradients={lifeTimeGradients}\r\n                        label=\"Lifetime Gradient\"\r\n                        removeGradient={(gradient: FactorGradient) => {\r\n                            system.removeLifeTimeGradient(gradient.gradient);\r\n                            system.forceRefreshGradients();\r\n                        }}\r\n                        addGradient={(gradient?: FactorGradient) => {\r\n                            if (gradient) {\r\n                                system.addLifeTimeGradient(gradient.gradient, gradient.factor1, gradient.factor2);\r\n                            } else {\r\n                                system.addLifeTimeGradient(0, system.minLifeTime, system.maxLifeTime);\r\n                            }\r\n                            system.forceRefreshGradients();\r\n                        }}\r\n                        onChange={(_gradient: FactorGradient) => {\r\n                            system.forceRefreshGradients();\r\n                        }}\r\n                    />\r\n                </>\r\n            )}\r\n\r\n            <BoundProperty component={NumberInputPropertyLine} label=\"Target stop duration\" target={system} propertyKey=\"targetStopDuration\" min={0} step={0.1} />\r\n        </>\r\n    );\r\n};\r\n","import type { ColorGradient, FactorGradient } from \"core/index\";\r\nimport type { Color3Gradient } from \"core/Misc/gradients\";\r\nimport type { GPUParticleSystem } from \"core/Particles/gpuParticleSystem\";\r\nimport type { FunctionComponent } from \"react\";\r\n\r\nimport { makeStyles, Subtitle2, tokens } from \"@fluentui/react-components\";\r\nimport { useCallback } from \"react\";\r\nimport { Color3 } from \"core/Maths/math.color\";\r\nimport { ParticleSystem } from \"core/Particles/particleSystem\";\r\n\r\nimport { ButtonLine } from \"shared-ui-components/fluent/hoc/buttonLine\";\r\nimport { Color3GradientList, Color4GradientList, FactorGradientList } from \"shared-ui-components/fluent/hoc/gradientList\";\r\nimport { Color4PropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/colorPropertyLine\";\r\nimport { SwitchPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/switchPropertyLine\";\r\nimport { useProperty } from \"../../../hooks/compoundPropertyHooks\";\r\nimport { BoundProperty } from \"../boundProperty\";\r\nimport { useObservableArray } from \"../../../hooks/useObservableArray\";\r\n\r\nconst useStyles = makeStyles({\r\n    subsection: {\r\n        marginTop: tokens.spacingVerticalM,\r\n    },\r\n});\r\n\r\n/**\r\n * Display color-related properties for a particle system.\r\n * @param props Component props.\r\n * @returns Render property lines.\r\n */\r\nexport const ParticleSystemColorProperties: FunctionComponent<{ particleSystem: ParticleSystem | GPUParticleSystem }> = (props) => {\r\n    const { particleSystem: system } = props;\r\n    const isCpuParticleSystem = system instanceof ParticleSystem;\r\n    const useRampGradients = useProperty(system, \"useRampGradients\");\r\n\r\n    const colorGradientsGetter = useCallback(() => system.getColorGradients(), [system]);\r\n    const colorGradients = useObservableArray<ParticleSystem | GPUParticleSystem, ColorGradient>(\r\n        system,\r\n        colorGradientsGetter,\r\n        \"addColorGradient\",\r\n        \"removeColorGradient\",\r\n        \"forceRefreshGradients\"\r\n    );\r\n\r\n    // Ramp, Color Remap, and Alpha Remap gradients are only supported in CPU particle systems, they will be hidden in the UI for GPU particle systems\r\n    const rampGradientsGetter = useCallback(() => system.getRampGradients(), [system]);\r\n    const rampGradients = useObservableArray<ParticleSystem | GPUParticleSystem, Color3Gradient>(\r\n        system,\r\n        rampGradientsGetter,\r\n        \"addRampGradient\",\r\n        \"removeRampGradient\",\r\n        \"forceRefreshGradients\"\r\n    );\r\n\r\n    const colorRemapGradientsGetter = useCallback(() => system.getColorRemapGradients(), [system]);\r\n    const colorRemapGradients = useObservableArray<ParticleSystem | GPUParticleSystem, FactorGradient>(\r\n        system,\r\n        colorRemapGradientsGetter,\r\n        \"addColorRemapGradient\",\r\n        \"removeColorRemapGradient\",\r\n        \"forceRefreshGradients\"\r\n    );\r\n\r\n    const alphaRemapGradientsGetter = useCallback(() => system.getAlphaRemapGradients(), [system]);\r\n    const alphaRemapGradients = useObservableArray<ParticleSystem | GPUParticleSystem, FactorGradient>(\r\n        system,\r\n        alphaRemapGradientsGetter,\r\n        \"addAlphaRemapGradient\",\r\n        \"removeAlphaRemapGradient\",\r\n        \"forceRefreshGradients\"\r\n    );\r\n\r\n    const hasColorGradients = (colorGradients?.length ?? 0) > 0;\r\n    const hasRampGradients = (rampGradients?.length ?? 0) > 0;\r\n    const hasColorRemapGradients = (colorRemapGradients?.length ?? 0) > 0;\r\n    const hasAlphaRemapGradients = (alphaRemapGradients?.length ?? 0) > 0;\r\n\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty component={Color4PropertyLine} label=\"Color 1\" target={system} propertyKey=\"color1\" />\r\n            <BoundProperty component={Color4PropertyLine} label=\"Color 2\" target={system} propertyKey=\"color2\" />\r\n            <BoundProperty component={Color4PropertyLine} label=\"Color dead\" target={system} propertyKey=\"colorDead\" />\r\n\r\n            {!hasColorGradients && (\r\n                <ButtonLine\r\n                    label=\"Use Color gradients\"\r\n                    onClick={() => {\r\n                        system.addColorGradient(0, system.color1, system.color1);\r\n                        system.addColorGradient(1, system.color2, system.color2);\r\n                        system.forceRefreshGradients();\r\n                    }}\r\n                />\r\n            )}\r\n\r\n            {hasColorGradients && (\r\n                <>\r\n                    <Subtitle2 className={classes.subsection}>Color Gradients</Subtitle2>\r\n                    <Color4GradientList\r\n                        gradients={colorGradients}\r\n                        label=\"Color Gradient\"\r\n                        removeGradient={(gradient: ColorGradient) => {\r\n                            system.removeColorGradient(gradient.gradient);\r\n                            system.forceRefreshGradients();\r\n                        }}\r\n                        addGradient={(gradient?: ColorGradient) => {\r\n                            if (gradient) {\r\n                                system.addColorGradient(gradient.gradient, gradient.color1, gradient.color2);\r\n                            } else {\r\n                                system.addColorGradient(0, system.color1, system.color1);\r\n                                system.addColorGradient(1, system.color2, system.color2);\r\n                            }\r\n                            system.forceRefreshGradients();\r\n                        }}\r\n                        onChange={(_gradient: ColorGradient) => {\r\n                            system.forceRefreshGradients();\r\n                        }}\r\n                    />\r\n                </>\r\n            )}\r\n\r\n            {isCpuParticleSystem && <BoundProperty component={SwitchPropertyLine} label=\"Enable Ramp gradients\" target={system} propertyKey=\"useRampGradients\" />}\r\n            {useRampGradients && (\r\n                <>\r\n                    {!hasRampGradients && (\r\n                        <ButtonLine\r\n                            label=\"Use Ramp gradients\"\r\n                            onClick={() => {\r\n                                system.addRampGradient(0, Color3.Black());\r\n                                system.addRampGradient(1, Color3.White());\r\n                                system.forceRefreshGradients();\r\n                            }}\r\n                        />\r\n                    )}\r\n\r\n                    {hasRampGradients && (\r\n                        <>\r\n                            <Subtitle2 className={classes.subsection}>Ramp Gradients</Subtitle2>\r\n                            <Color3GradientList\r\n                                gradients={rampGradients}\r\n                                label=\"Ramp Gradient\"\r\n                                removeGradient={(gradient) => {\r\n                                    system.removeRampGradient(gradient.gradient);\r\n                                    system.forceRefreshGradients();\r\n                                }}\r\n                                addGradient={(gradient) => {\r\n                                    if (gradient) {\r\n                                        system.addRampGradient(gradient.gradient, gradient.color);\r\n                                    } else {\r\n                                        system.addRampGradient(0, Color3.Black());\r\n                                        system.addRampGradient(1, Color3.White());\r\n                                    }\r\n                                    system.forceRefreshGradients();\r\n                                }}\r\n                                onChange={() => {\r\n                                    system.forceRefreshGradients();\r\n                                }}\r\n                            />\r\n                        </>\r\n                    )}\r\n\r\n                    {!hasColorRemapGradients && (\r\n                        <ButtonLine\r\n                            label=\"Use Color remap gradients\"\r\n                            onClick={() => {\r\n                                system.addColorRemapGradient(0, 0, 1);\r\n                                system.forceRefreshGradients();\r\n                            }}\r\n                        />\r\n                    )}\r\n\r\n                    {hasColorRemapGradients && (\r\n                        <>\r\n                            <Subtitle2 className={classes.subsection}>Color Remap Gradients</Subtitle2>\r\n                            <FactorGradientList\r\n                                gradients={colorRemapGradients}\r\n                                label=\"Color Remap Gradient\"\r\n                                removeGradient={(gradient: FactorGradient) => {\r\n                                    system.removeColorRemapGradient(gradient.gradient);\r\n                                    system.forceRefreshGradients();\r\n                                }}\r\n                                addGradient={(gradient?: FactorGradient) => {\r\n                                    if (gradient) {\r\n                                        system.addColorRemapGradient(gradient.gradient, gradient.factor1 ?? 0, gradient.factor2 ?? 1);\r\n                                    } else {\r\n                                        system.addColorRemapGradient(0, 0, 1);\r\n                                    }\r\n                                    system.forceRefreshGradients();\r\n                                }}\r\n                                onChange={(_gradient: FactorGradient) => {\r\n                                    system.forceRefreshGradients();\r\n                                }}\r\n                            />\r\n                        </>\r\n                    )}\r\n\r\n                    {!hasAlphaRemapGradients && (\r\n                        <ButtonLine\r\n                            label=\"Use Alpha remap gradients\"\r\n                            onClick={() => {\r\n                                system.addAlphaRemapGradient(0, 0, 1);\r\n                                system.forceRefreshGradients();\r\n                            }}\r\n                        />\r\n                    )}\r\n\r\n                    {hasAlphaRemapGradients && (\r\n                        <>\r\n                            <Subtitle2 className={classes.subsection}>Alpha Remap Gradients</Subtitle2>\r\n                            <FactorGradientList\r\n                                gradients={alphaRemapGradients}\r\n                                label=\"Alpha Remap Gradient\"\r\n                                removeGradient={(gradient: FactorGradient) => {\r\n                                    system.removeAlphaRemapGradient(gradient.gradient);\r\n                                    system.forceRefreshGradients();\r\n                                }}\r\n                                addGradient={(gradient?: FactorGradient) => {\r\n                                    if (gradient) {\r\n                                        system.addAlphaRemapGradient(gradient.gradient, gradient.factor1 ?? 0, gradient.factor2 ?? 1);\r\n                                    } else {\r\n                                        system.addAlphaRemapGradient(0, 0, 1);\r\n                                    }\r\n                                    system.forceRefreshGradients();\r\n                                }}\r\n                                onChange={(_gradient: FactorGradient) => {\r\n                                    system.forceRefreshGradients();\r\n                                }}\r\n                            />\r\n                        </>\r\n                    )}\r\n                </>\r\n            )}\r\n        </>\r\n    );\r\n};\r\n","import type { FactorGradient } from \"core/index\";\r\nimport type { ParticleSystem } from \"core/Particles/particleSystem\";\r\nimport type { GPUParticleSystem } from \"core/Particles/gpuParticleSystem\";\r\nimport type { FunctionComponent } from \"react\";\r\n\r\nimport { makeStyles, Subtitle2, tokens } from \"@fluentui/react-components\";\r\nimport { useCallback } from \"react\";\r\n\r\nimport { ButtonLine } from \"shared-ui-components/fluent/hoc/buttonLine\";\r\nimport { FactorGradientList } from \"shared-ui-components/fluent/hoc/gradientList\";\r\nimport { NumberInputPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/inputPropertyLine\";\r\nimport { BoundProperty } from \"../boundProperty\";\r\nimport { useObservableArray } from \"../../../hooks/useObservableArray\";\r\n\r\nconst useStyles = makeStyles({\r\n    subsection: {\r\n        marginTop: tokens.spacingVerticalM,\r\n    },\r\n});\r\n\r\n/**\r\n * Display rotation-related properties for a particle system.\r\n * @param props Component props.\r\n * @returns Render property lines.\r\n */\r\nexport const ParticleSystemRotationProperties: FunctionComponent<{ particleSystem: ParticleSystem | GPUParticleSystem }> = (props) => {\r\n    const { particleSystem: system } = props;\r\n\r\n    const angularSpeedGradientsGetter = useCallback(() => system.getAngularSpeedGradients(), [system]);\r\n    const angularSpeedGradients = useObservableArray<ParticleSystem | GPUParticleSystem, FactorGradient>(\r\n        system,\r\n        angularSpeedGradientsGetter,\r\n        \"addAngularSpeedGradient\",\r\n        \"removeAngularSpeedGradient\",\r\n        \"forceRefreshGradients\"\r\n    );\r\n    const useAngularSpeedGradients = (angularSpeedGradients?.length ?? 0) > 0;\r\n\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty component={NumberInputPropertyLine} label=\"Min Angular speed\" target={system} propertyKey=\"minAngularSpeed\" step={0.01} />\r\n            <BoundProperty component={NumberInputPropertyLine} label=\"Max Angular speed\" target={system} propertyKey=\"maxAngularSpeed\" step={0.01} />\r\n            <BoundProperty component={NumberInputPropertyLine} label=\"Min initial rotation\" target={system} propertyKey=\"minInitialRotation\" step={0.01} />\r\n            <BoundProperty component={NumberInputPropertyLine} label=\"Max initial rotation\" target={system} propertyKey=\"maxInitialRotation\" step={0.01} />\r\n\r\n            {!useAngularSpeedGradients && (\r\n                <ButtonLine\r\n                    label=\"Use Angular speed gradients\"\r\n                    onClick={() => {\r\n                        system.addAngularSpeedGradient(0, system.minAngularSpeed, system.maxAngularSpeed);\r\n                        system.forceRefreshGradients();\r\n                    }}\r\n                />\r\n            )}\r\n\r\n            {useAngularSpeedGradients && (\r\n                <>\r\n                    <Subtitle2 className={classes.subsection}>Angular Speed Gradients</Subtitle2>\r\n                    <FactorGradientList\r\n                        gradients={angularSpeedGradients}\r\n                        label=\"Angular Speed Gradient\"\r\n                        removeGradient={(gradient: FactorGradient) => {\r\n                            system.removeAngularSpeedGradient(gradient.gradient);\r\n                            system.forceRefreshGradients();\r\n                        }}\r\n                        addGradient={(gradient?: FactorGradient) => {\r\n                            if (gradient) {\r\n                                system.addAngularSpeedGradient(gradient.gradient, gradient.factor1 ?? 0, gradient.factor2);\r\n                            } else {\r\n                                system.addAngularSpeedGradient(0, system.minAngularSpeed, system.maxAngularSpeed);\r\n                            }\r\n                            system.forceRefreshGradients();\r\n                        }}\r\n                        onChange={(_gradient: FactorGradient) => {\r\n                            system.forceRefreshGradients();\r\n                        }}\r\n                    />\r\n                </>\r\n            )}\r\n        </>\r\n    );\r\n};\r\n","import type { ParticleSystem } from \"core/Particles/particleSystem\";\r\nimport type { GPUParticleSystem } from \"core/Particles/gpuParticleSystem\";\r\nimport type { FunctionComponent } from \"react\";\r\n\r\nimport { NumberInputPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/inputPropertyLine\";\r\nimport { SwitchPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/switchPropertyLine\";\r\nimport { BoundProperty } from \"../boundProperty\";\r\n\r\n/**\r\n * Display spritesheet-related properties for a particle system.\r\n * @param props Component props.\r\n * @returns Render property lines.\r\n */\r\nexport const ParticleSystemSpritesheetProperties: FunctionComponent<{ particleSystem: ParticleSystem | GPUParticleSystem }> = (props) => {\r\n    const { particleSystem: system } = props;\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Animation sheet enabled\" target={system} propertyKey=\"isAnimationSheetEnabled\" />\r\n            <BoundProperty component={NumberInputPropertyLine} label=\"First sprite index\" target={system} propertyKey=\"startSpriteCellID\" min={0} step={1} />\r\n            <BoundProperty component={NumberInputPropertyLine} label=\"Last sprite index\" target={system} propertyKey=\"endSpriteCellID\" min={0} step={1} />\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Animation loop\" target={system} propertyKey=\"spriteCellLoop\" />\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Random cell start index\" target={system} propertyKey=\"spriteRandomStartCell\" />\r\n            <BoundProperty component={NumberInputPropertyLine} label=\"Cell width\" target={system} propertyKey=\"spriteCellWidth\" min={0} step={1} />\r\n            <BoundProperty component={NumberInputPropertyLine} label=\"Cell height\" target={system} propertyKey=\"spriteCellHeight\" min={0} step={1} />\r\n            <BoundProperty component={NumberInputPropertyLine} label=\"Cell change speed\" target={system} propertyKey=\"spriteCellChangeSpeed\" min={0} step={0.01} />\r\n        </>\r\n    );\r\n};\r\n","import { Body1, makeStyles, tokens } from \"@fluentui/react-components\";\r\nimport { ArrowMoveFilled, EyeFilled, EyeOffFilled } from \"@fluentui/react-icons\";\r\nimport { FontAsset } from \"addons/msdfText/fontAsset\";\r\nimport { TextRenderer } from \"addons/msdfText/textRenderer\";\r\nimport type { StandardMaterial } from \"core/Materials/standardMaterial\";\r\nimport type { Color3 } from \"core/Maths/math.color\";\r\nimport { Color4 } from \"core/Maths/math.color\";\r\nimport { Matrix } from \"core/Maths/math.vector\";\r\nimport type { AbstractMesh } from \"core/Meshes/abstractMesh\";\r\nimport { CreateSphere } from \"core/Meshes/Builders/sphereBuilder\";\r\nimport type { Scene } from \"core/scene\";\r\nimport { useCallback, useEffect, useState } from \"react\";\r\nimport type { FunctionComponent } from \"react\";\r\nimport { SyncedSliderInput } from \"shared-ui-components/fluent/primitives/syncedSlider\";\r\nimport { ToggleButton } from \"shared-ui-components/fluent/primitives/toggleButton\";\r\nimport { useAsyncResource, useResource } from \"../../../hooks/resourceHooks\";\r\nimport type { IAttractorData } from \"./attractorAdapter\";\r\n\r\ntype AttractorProps = {\r\n    attractorData: IAttractorData;\r\n    id: number;\r\n    impostorScale: number;\r\n    impostorColor: Color3;\r\n    impostorMaterial: StandardMaterial;\r\n    scene: Scene;\r\n    isControlled: (impostor: AbstractMesh) => boolean;\r\n    onControl: (impostor?: AbstractMesh) => void;\r\n};\r\n\r\nconst useAttractorStyles = makeStyles({\r\n    container: {\r\n        // top-level div used for lineContainer, in UI overhaul update to just use linecontainer\r\n        width: \"100%\",\r\n        display: \"flex\", // Makes this a flex container\r\n        flexDirection: \"row\", // Arranges children horizontally, main-axis=horizontal\r\n        padding: `${tokens.spacingVerticalXS} 0px`,\r\n        borderBottom: `${tokens.strokeWidthThin} solid ${tokens.colorNeutralStroke1}`,\r\n    },\r\n    strengthLabel: {\r\n        flex: 1,\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n    },\r\n});\r\n\r\nconst CreateImpostor = (id: number, scene: Scene, attractorData: IAttractorData, initialScale: number, initialMaterial: StandardMaterial) => {\r\n    const impostor = CreateSphere(\"Attractor impostor #\" + id, { diameter: 1 }, scene);\r\n    impostor.scaling.setAll(initialScale);\r\n    impostor.position.copyFrom(attractorData.position);\r\n    impostor.material = initialMaterial;\r\n    impostor.reservedDataStore = { hidden: true };\r\n    return impostor;\r\n};\r\n\r\nasync function CreateTextRendererAsync(id: number, scene: Scene, impostor: AbstractMesh, color: Color3) {\r\n    const sdfFontDefinition = await (await fetch(\"https://assets.babylonjs.com/fonts/roboto-regular.json\")).text();\r\n    const fontAsset = new FontAsset(sdfFontDefinition, \"https://assets.babylonjs.com/fonts/roboto-regular.png\");\r\n\r\n    const textRenderer = await TextRenderer.CreateTextRendererAsync(fontAsset, scene.getEngine());\r\n    textRenderer.addParagraph(\"#\" + id, {}, Matrix.Scaling(0.5, 0.5, 0.5).multiply(Matrix.Translation(0, 1, 0)));\r\n    textRenderer.isBillboard = true;\r\n    textRenderer.color = Color4.FromColor3(color, 1.0);\r\n    textRenderer.parent = impostor;\r\n    return textRenderer;\r\n}\r\n\r\n/**\r\n * Represents the UX of an attractor, a sphere with a color/size whose position matches that of the underlying attractor\r\n * @param props\r\n * @returns\r\n */\r\nexport const AttractorComponent: FunctionComponent<AttractorProps> = (props) => {\r\n    const { attractorData, id, impostorScale, impostorMaterial, impostorColor, scene, onControl, isControlled } = props;\r\n    const classes = useAttractorStyles();\r\n    // For read-only attractors (Node particles), start hidden by default\r\n    const [shown, setShown] = useState(!attractorData.isReadOnly);\r\n\r\n    // We only want to recreate the impostor mesh and associated if id, scene, or attractor/impostor changes\r\n    const impostor = useResource(useCallback(() => CreateImpostor(id, scene, attractorData, impostorScale, impostorMaterial), [id, scene, attractorData]));\r\n    const label = useAsyncResource(useCallback(async () => await CreateTextRendererAsync(id, scene, impostor, impostorColor), [id, scene, impostor]));\r\n\r\n    // Set initial visibility based on whether it should be shown\r\n    useEffect(() => {\r\n        impostor.visibility = shown ? 1 : 0;\r\n    }, [impostor, shown]);\r\n\r\n    // If impostor, color, or label change, recreate the observer function so that it isnt hooked to old state\r\n    // For read-only attractors, don't sync position back (it can't be moved)\r\n    useEffect(() => {\r\n        const onAfterRender = scene.onAfterRenderObservable.add(() => {\r\n            if (!attractorData.isReadOnly) {\r\n                attractorData.position.copyFrom(impostor.position);\r\n            }\r\n            if (label) {\r\n                label.color = Color4.FromColor3(impostorColor);\r\n                label.render(scene.getViewMatrix(), scene.getProjectionMatrix());\r\n            }\r\n        });\r\n        return () => {\r\n            onAfterRender.remove();\r\n        };\r\n    }, [impostor, scene, label, impostorColor, attractorData]);\r\n\r\n    // If impostor or impostorScale change, update impostor scaling\r\n    useEffect(() => {\r\n        impostor.scaling.setAll(impostorScale);\r\n    }, [impostor, impostorScale]);\r\n\r\n    return (\r\n        <div className={classes.container}>\r\n            {attractorData.isReadOnly ? (\r\n                <Body1 className={classes.strengthLabel}>Strength: {attractorData.strength !== null ? attractorData.strength : \"Dynamic\"}</Body1>\r\n            ) : (\r\n                <SyncedSliderInput value={attractorData.strength!} onChange={(value) => attractorData.setStrength(value)} min={-10} max={10} step={0.1} />\r\n            )}\r\n            <ToggleButton\r\n                title=\"Show / hide particle attractor.\"\r\n                checkedIcon={EyeFilled}\r\n                uncheckedIcon={EyeOffFilled}\r\n                value={shown}\r\n                onChange={(show: boolean) => {\r\n                    impostor.visibility = show ? 1 : 0;\r\n                    setShown(show);\r\n                }}\r\n            />\r\n            {!attractorData.isReadOnly && (\r\n                <ToggleButton\r\n                    title=\"Add / remove position gizmo from particle attractor\"\r\n                    checkedIcon={ArrowMoveFilled}\r\n                    value={isControlled(impostor)}\r\n                    onChange={(control: boolean) => onControl(control ? impostor : undefined)}\r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n","import type { FunctionComponent } from \"react\";\r\n\r\nimport { makeStyles, Subtitle2, tokens } from \"@fluentui/react-components\";\r\nimport { useCallback, useEffect, useState } from \"react\";\r\n\r\nimport type { AbstractMesh } from \"core/Meshes/abstractMesh\";\r\nimport type { Scene } from \"core/scene\";\r\nimport type { Nullable } from \"core/types\";\r\nimport type { ListItem } from \"shared-ui-components/fluent/primitives/list\";\r\n\r\nimport { GizmoManager } from \"core/Gizmos/gizmoManager\";\r\nimport { UtilityLayerRenderer } from \"core/Rendering/utilityLayerRenderer\";\r\nimport { StandardMaterial } from \"core/Materials/standardMaterial\";\r\nimport { Color3 } from \"core/Maths/math.color\";\r\nimport { Attractor } from \"core/Particles/attractor\";\r\nimport { Color3PropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/colorPropertyLine\";\r\nimport { SyncedSliderPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/syncedSliderPropertyLine\";\r\nimport { List } from \"shared-ui-components/fluent/primitives/list\";\r\nimport { useResource } from \"../../../hooks/resourceHooks\";\r\nimport { AttractorComponent } from \"./attractor\";\r\nimport type { IAttractorData, IAttractorSource } from \"./attractorAdapter\";\r\n\r\nconst useStyles = makeStyles({\r\n    subsection: {\r\n        marginTop: tokens.spacingVerticalM,\r\n    },\r\n});\r\n\r\ntype AttractorListProps = {\r\n    scene: Scene;\r\n    attractorSource: IAttractorSource;\r\n};\r\n\r\n// For each IAttractorData, create a listItem\r\nfunction AttractorsToListItems(attractors: IAttractorData[]) {\r\n    return attractors.map((attractor, index) => {\r\n        return {\r\n            id: index,\r\n            data: attractor,\r\n            sortBy: 0,\r\n        };\r\n    });\r\n}\r\n\r\nconst CreateGizmoManager = (scene: Scene) => {\r\n    const gizmoManager = new GizmoManager(\r\n        scene,\r\n        1,\r\n        UtilityLayerRenderer._CreateDefaultUtilityLayerFromScene(scene),\r\n        UtilityLayerRenderer._CreateDefaultKeepUtilityLayerFromScene(scene)\r\n    );\r\n    gizmoManager.positionGizmoEnabled = true;\r\n    gizmoManager.attachableMeshes = [];\r\n    return gizmoManager;\r\n};\r\nconst CreateSharedMaterial = (scene: Scene, impostorColor: Color3) => {\r\n    const material = new StandardMaterial(\"Attractor impostor material\", scene);\r\n    material.diffuseColor = impostorColor;\r\n    material.reservedDataStore = { hidden: true }; // Ensure scene explorer doesn't show the material\r\n    return material;\r\n};\r\n\r\n/**\r\n * Component that displays a list of attractors with debug visualization and editing controls.\r\n * Supports both CPU particle systems (editable) and Node particle systems (read-only).\r\n * @param props The component props containing the scene and attractor source.\r\n * @returns The rendered AttractorList component.\r\n */\r\nexport const AttractorList: FunctionComponent<AttractorListProps> = (props) => {\r\n    const { scene, attractorSource } = props;\r\n    const [items, setItems] = useState<Array<ListItem<IAttractorData>>>([]);\r\n\r\n    // All impostors share a scale and material/color (for now!)\r\n    const [impostorScale, setImpostorScale] = useState(1);\r\n    const [impostorColor, setImpostorColor] = useState(() => Color3.White());\r\n    const impostorMaterial = useResource(useCallback(() => CreateSharedMaterial(scene, impostorColor), [scene]));\r\n\r\n    // All impostors share a gizmoManager. controlledImpostor state ensures re-render of children so that their gizmoEnabled toggle is accurate\r\n    const gizmoManager = useResource(useCallback(() => CreateGizmoManager(scene), [scene]));\r\n    const [controlledImpostor, setControlledImpostor] = useState<Nullable<AbstractMesh>>(null);\r\n\r\n    // If attractors change, recreate the items to re-render attractor components\r\n    useEffect(() => {\r\n        setItems(AttractorsToListItems(attractorSource.attractors));\r\n    }, [attractorSource.attractors]);\r\n\r\n    // If color changes, update shared material to ensure children reflect new color\r\n    useEffect(() => {\r\n        impostorMaterial.diffuseColor = impostorColor;\r\n    }, [impostorColor]);\r\n\r\n    const onControlImpostor = (impostor?: AbstractMesh) => {\r\n        // If an impostor is passed, attach the gizmo to the current impostor, otherwise it will detach (i.e. set to null)\r\n        const attached = impostor ?? null;\r\n        gizmoManager.attachToMesh(attached);\r\n        setControlledImpostor(attached);\r\n    };\r\n\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <>\r\n            {items.length > 0 && (\r\n                <>\r\n                    <Color3PropertyLine label=\"Attractor Debug Color\" value={impostorColor} onChange={setImpostorColor} />\r\n                    <SyncedSliderPropertyLine label=\"Attractor Debug Size\" value={impostorScale} onChange={setImpostorScale} min={0} max={10} step={0.1} />\r\n                    <Subtitle2 className={classes.subsection}>Attractors list</Subtitle2>\r\n                </>\r\n            )}\r\n            <List\r\n                addButtonLabel={`Add New Attractor`}\r\n                items={items}\r\n                onDelete={\r\n                    attractorSource.removeAttractor\r\n                        ? (item, _index) => {\r\n                              // Only CPU attractors (Attractor instances) can be removed\r\n                              if (item.data.source instanceof Attractor) {\r\n                                  attractorSource.removeAttractor!(item.data.source);\r\n                              }\r\n                          }\r\n                        : undefined\r\n                }\r\n                onAdd={\r\n                    attractorSource.addAttractor\r\n                        ? (item) => {\r\n                              // Only CPU attractors can be added\r\n                              if (!item || item.data.source instanceof Attractor) {\r\n                                  attractorSource.addAttractor!(item?.data.source instanceof Attractor ? item.data.source : new Attractor());\r\n                              }\r\n                          }\r\n                        : undefined\r\n                }\r\n                renderItem={(item) => {\r\n                    return (\r\n                        <AttractorComponent\r\n                            attractorData={item.data}\r\n                            id={item.id}\r\n                            scene={scene}\r\n                            impostorColor={impostorColor}\r\n                            impostorScale={impostorScale}\r\n                            impostorMaterial={impostorMaterial}\r\n                            isControlled={(impostor: AbstractMesh) => impostor === controlledImpostor}\r\n                            onControl={onControlImpostor}\r\n                        />\r\n                    );\r\n                }}\r\n            />\r\n        </>\r\n    );\r\n};\r\n","import type { Vector3 } from \"core/Maths/math.vector\";\r\nimport { Attractor } from \"core/Particles/attractor\";\r\nimport type { ParticleSystem } from \"core/Particles/particleSystem\";\r\nimport type { NodeParticleSystemSet } from \"core/Particles/Node/nodeParticleSystemSet\";\r\nimport { ParticleInputBlock } from \"core/Particles/Node/Blocks/particleInputBlock\";\r\nimport { UpdateAttractorBlock } from \"core/Particles/Node/Blocks/Update/updateAttractorBlock\";\r\n\r\n/**\r\n * Represents an attractor in a normalized way that works for both CPU and Node particle systems.\r\n */\r\nexport interface IAttractorData {\r\n    /** The position of the attractor */\r\n    position: Vector3;\r\n    /** The strength of the attractor (null if dynamically computed) */\r\n    strength: number | null;\r\n    /** Sets the strength of the attractor */\r\n    setStrength: (value: number) => void;\r\n    /** The original attractor object (CPU) or UpdateAttractorBlock (Node) */\r\n    source: Attractor | UpdateAttractorBlock;\r\n    /** Whether this attractor is read-only (position and strength cannot be edited in inspector) */\r\n    isReadOnly: boolean;\r\n}\r\n\r\n/**\r\n * Interface for an attractor source that provides attractors from different particle system types.\r\n */\r\nexport interface IAttractorSource {\r\n    /** The attractors from the source */\r\n    attractors: IAttractorData[];\r\n    /** Add a new attractor (only for CPU particle systems) */\r\n    addAttractor?: (attractor?: Attractor) => void;\r\n    /** Remove an attractor (only for CPU particle systems) */\r\n    removeAttractor?: (attractor: Attractor) => void;\r\n}\r\n\r\n/**\r\n * Creates an IAttractorData adapter from a CPU particle system Attractor.\r\n * @param attractor The CPU particle system attractor\r\n * @returns The IAttractorData adapter\r\n */\r\nexport function CreateCPUAttractorData(attractor: Attractor): IAttractorData {\r\n    return {\r\n        position: attractor.position,\r\n        strength: attractor.strength,\r\n        setStrength: (value: number) => {\r\n            attractor.strength = value;\r\n        },\r\n        source: attractor,\r\n        isReadOnly: false,\r\n    };\r\n}\r\n\r\n/**\r\n * Creates an IAttractorData adapter from a Node particle system UpdateAttractorBlock.\r\n * @param block The UpdateAttractorBlock from a Node particle system\r\n * @returns The IAttractorData adapter\r\n */\r\nexport function CreateNodeAttractorData(block: UpdateAttractorBlock): IAttractorData {\r\n    // Get the connected blocks - only use values if they are InputBlocks (constant values)\r\n    // If the value is a dynamic calculation, fall back to the block's default values\r\n    const attractorConnected = block.attractor.connectedPoint?.ownerBlock;\r\n    const strengthConnected = block.strength.connectedPoint?.ownerBlock;\r\n\r\n    const attractorInput = attractorConnected instanceof ParticleInputBlock ? attractorConnected : undefined;\r\n    const strengthInput = strengthConnected instanceof ParticleInputBlock ? strengthConnected : undefined;\r\n\r\n    // Use InputBlock values if available, null if dynamic, otherwise use the block's default values\r\n    const position = attractorInput?.value ?? block.attractor.value;\r\n    const strength = strengthInput?.value ?? (strengthConnected ? null : block.strength.value);\r\n\r\n    return {\r\n        position: position,\r\n        strength: strength,\r\n        setStrength: (value: number) => {\r\n            if (strengthInput) {\r\n                strengthInput.value = value;\r\n            }\r\n        },\r\n        source: block,\r\n        isReadOnly: true,\r\n    };\r\n}\r\n\r\n/**\r\n * Creates an IAttractorSource for a CPU particle system.\r\n * @param system The CPU particle system\r\n * @param attractors The current attractors array (from useObservableArray hook)\r\n * @returns The IAttractorSource adapter\r\n */\r\nexport function CreateCPUAttractorSource(system: ParticleSystem, attractors: Attractor[]): IAttractorSource {\r\n    return {\r\n        attractors: attractors.map(CreateCPUAttractorData),\r\n        addAttractor: (attractor?: Attractor) => system.addAttractor(attractor ?? new Attractor()),\r\n        removeAttractor: (attractor: Attractor) => system.removeAttractor(attractor),\r\n    };\r\n}\r\n\r\n/**\r\n * Creates an IAttractorSource for a Node particle system.\r\n * @param nodeSet The NodeParticleSystemSet\r\n * @returns The IAttractorSource adapter\r\n */\r\nexport function CreateNodeAttractorSource(nodeSet: NodeParticleSystemSet): IAttractorSource {\r\n    const attractorBlocks = nodeSet.attachedBlocks.filter((block): block is UpdateAttractorBlock => block instanceof UpdateAttractorBlock);\r\n\r\n    return {\r\n        attractors: attractorBlocks.map(CreateNodeAttractorData),\r\n    };\r\n}\r\n","import type { Attractor } from \"core/Particles/attractor\";\r\nimport type { ParticleSystem } from \"core/Particles/particleSystem\";\r\nimport type { FunctionComponent } from \"react\";\r\n\r\nimport { useCallback } from \"react\";\r\n\r\nimport { MessageBar } from \"shared-ui-components/fluent/primitives/messageBar\";\r\nimport { AttractorList } from \"./attractorList\";\r\nimport { useObservableArray } from \"../../../hooks/useObservableArray\";\r\nimport { CreateCPUAttractorSource, CreateNodeAttractorSource } from \"./attractorAdapter\";\r\n\r\n/**\r\n * Display attractor-related properties for a particle system.\r\n * Supports both CPU particle systems (editable) and Node particle systems (read-only).\r\n * @param props Component props.\r\n * @returns Render property lines.\r\n */\r\nexport const ParticleSystemAttractorProperties: FunctionComponent<{ particleSystem: ParticleSystem }> = (props) => {\r\n    const { particleSystem: system } = props;\r\n    const scene = system.getScene();\r\n    const isNodeGenerated = system.isNodeGenerated;\r\n\r\n    // For non-node systems - Hook is called but inactive for Node systems\r\n    const attractorsGetter = useCallback(() => system.attractors ?? [], [system]);\r\n    const attractors = useObservableArray<ParticleSystem, Attractor>(isNodeGenerated ? null : system, attractorsGetter, \"addAttractor\", \"removeAttractor\");\r\n\r\n    // Create appropriate source based on the particle system type\r\n    const attractorSource = isNodeGenerated ? CreateNodeAttractorSource(system.source!) : CreateCPUAttractorSource(system, attractors);\r\n\r\n    // Show message for Node systems with no attractors\r\n    if (isNodeGenerated && attractorSource.attractors.length === 0) {\r\n        return <MessageBar intent=\"info\" title=\"No Attractors\" message=\"No attractor blocks found. Add them in the Node Particle Editor.\" />;\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {scene ? (\r\n                <AttractorList attractorSource={attractorSource} scene={scene} />\r\n            ) : (\r\n                <MessageBar intent=\"info\" title=\"No Scene Available\" message=\"Cannot display attractors without a scene\" />\r\n            )}\r\n        </>\r\n    );\r\n};\r\n","import type { FunctionComponent } from \"react\";\r\nimport type { ISelectionService } from \"../../../services/selectionService\";\r\n\r\nimport type { ParticleInputBlock } from \"core/Particles/Node/Blocks/particleInputBlock\";\r\nimport type { ParticleSystem } from \"core/Particles/particleSystem\";\r\nimport type { NodeParticleSystemSet } from \"core/Particles/Node/nodeParticleSystemSet\";\r\n\r\nimport { makeStyles, Subtitle2, tokens } from \"@fluentui/react-components\";\r\nimport { Fragment, useCallback } from \"react\";\r\n\r\nimport { NodeParticleBlockConnectionPointTypes } from \"core/Particles/Node/Enums/nodeParticleBlockConnectionPointTypes\";\r\nimport { Color4PropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/colorPropertyLine\";\r\nimport { NumberInputPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/inputPropertyLine\";\r\nimport { SyncedSliderPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/syncedSliderPropertyLine\";\r\nimport { Vector2PropertyLine, Vector3PropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/vectorPropertyLine\";\r\nimport { MessageBar } from \"shared-ui-components/fluent/primitives/messageBar\";\r\nimport { useProperty } from \"../../../hooks/compoundPropertyHooks\";\r\nimport { useObservableState } from \"../../../hooks/observableHooks\";\r\nimport { GroupBy } from \"../../../misc/arrayUtils\";\r\nimport { BoundProperty } from \"../boundProperty\";\r\n\r\nconst useStyles = makeStyles({\r\n    subsection: {\r\n        marginTop: tokens.spacingVerticalM,\r\n    },\r\n});\r\n\r\n// A modified ParticleInputBlock type where the value is `NonNullable<unknown>` instead of `any` so it works correctly with BoundProperty.\r\ntype SafeInputBlock = Omit<ParticleInputBlock, \"value\"> & { value: NonNullable<unknown> };\r\n\r\nconst InputBlockPropertyLine: FunctionComponent<{ block: SafeInputBlock }> = (props) => {\r\n    const { block } = props;\r\n\r\n    // We need to re-evaluate this outer component when type/min/max change since that determines what type of property line we render.\r\n    const type = useProperty(block, \"type\");\r\n    const min = useProperty(block, \"min\");\r\n    const max = useProperty(block, \"max\");\r\n\r\n    const commonProps = {\r\n        label: block.name,\r\n        target: block,\r\n        propertyKey: \"value\",\r\n    } as const;\r\n\r\n    if (type === NodeParticleBlockConnectionPointTypes.Int) {\r\n        const hasMinMax = !isNaN(min) && !isNaN(max) && min !== max;\r\n        if (hasMinMax) {\r\n            return <BoundProperty key={`${block.uniqueId} (Slider)`} component={SyncedSliderPropertyLine} {...commonProps} min={min} max={max} step={1} />;\r\n        } else {\r\n            return <BoundProperty key={`${block.uniqueId} (Number)`} component={NumberInputPropertyLine} {...commonProps} step={1} />;\r\n        }\r\n    } else if (type === NodeParticleBlockConnectionPointTypes.Float) {\r\n        const hasMinMax = !isNaN(min) && !isNaN(max) && min !== max;\r\n        if (hasMinMax) {\r\n            return <BoundProperty key={`${block.uniqueId} (Slider)`} component={SyncedSliderPropertyLine} {...commonProps} min={min} max={max} step={(max - min) / 100.0} />;\r\n        } else {\r\n            return <BoundProperty key={`${block.uniqueId} (Number)`} component={NumberInputPropertyLine} {...commonProps} />;\r\n        }\r\n    } else if (type === NodeParticleBlockConnectionPointTypes.Color4) {\r\n        return <BoundProperty key={`${block.uniqueId} (Color4)`} component={Color4PropertyLine} {...commonProps} />;\r\n    } else if (type === NodeParticleBlockConnectionPointTypes.Vector2) {\r\n        return <BoundProperty key={`${block.uniqueId} (Vector2)`} component={Vector2PropertyLine} {...commonProps} />;\r\n    } else if (type === NodeParticleBlockConnectionPointTypes.Vector3) {\r\n        return <BoundProperty key={`${block.uniqueId} (Vector3)`} component={Vector3PropertyLine} {...commonProps} />;\r\n    } else {\r\n        return null;\r\n    }\r\n};\r\n\r\n/**\r\n * Display the NPE blocks that are marked as visible in the inspector.\r\n * @param props Component props.\r\n * @returns Render property lines.\r\n */\r\nexport const ParticleSystemNodeEditorProperties: FunctionComponent<{ particleSystem: ParticleSystem; selectionService: ISelectionService }> = (props) => {\r\n    const { particleSystem: system } = props;\r\n\r\n    const classes = useStyles();\r\n    const source = system.source as NodeParticleSystemSet | null;\r\n\r\n    const inputBlocks = useObservableState(\r\n        useCallback(() => {\r\n            if (!source) {\r\n                return [];\r\n            }\r\n            const inspectorVisibleInputBlocks = source.inputBlocks\r\n                .filter((block) => block.displayInInspector && !block.isContextual && !block.isSystemSource && block.name)\r\n                .map((block) => block as SafeInputBlock);\r\n            const groupedInputBlocks = GroupBy(inspectorVisibleInputBlocks, (block) => block.groupInInspector);\r\n            return groupedInputBlocks.sort((a, b) => a.key.localeCompare(b.key));\r\n        }, [source]),\r\n        source?.onBuildObservable\r\n    );\r\n\r\n    if (!source) {\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {inputBlocks.length === 0 ? (\r\n                <MessageBar\r\n                    key=\"no-visible-input-blocks\"\r\n                    intent=\"info\"\r\n                    title=\"No Visible Input Blocks\"\r\n                    message=\"To see input blocks, mark them as displayInInspector in the Node Particle Editor.\"\r\n                    docLink=\"https://doc.babylonjs.com/features/featuresDeepDive/particles/particle_system/node_particle\"\r\n                />\r\n            ) : (\r\n                <>\r\n                    {inputBlocks.map((group) => (\r\n                        <Fragment key={`${group.key || \"default\"} (Group)`}>\r\n                            {group.key && <Subtitle2 className={classes.subsection}>{group.key}</Subtitle2>}\r\n                            {group.items.map((block) => (\r\n                                <InputBlockPropertyLine key={block.uniqueId} block={block} />\r\n                            ))}\r\n                        </Fragment>\r\n                    ))}\r\n                </>\r\n            )}\r\n        </>\r\n    );\r\n};\r\n","import type { ServiceDefinition } from \"../../../modularity/serviceDefinition\";\r\nimport type { IPropertiesService } from \"./propertiesService\";\r\nimport type { ISelectionService } from \"../../selectionService\";\r\n\r\nimport { PropertiesServiceIdentity } from \"./propertiesService\";\r\nimport { SelectionServiceIdentity } from \"../../selectionService\";\r\nimport { ParticleSystem } from \"core/Particles/particleSystem\";\r\nimport { GPUParticleSystem } from \"core/Particles/gpuParticleSystem\";\r\n\r\nimport { ParticleSystemSystemProperties } from \"../../../components/properties/particles/systemProperties\";\r\nimport { ParticleSystemCommandProperties } from \"../../../components/properties/particles/commandsProperties\";\r\nimport { ParticleSystemEmitterProperties } from \"../../../components/properties/particles/emitterProperties\";\r\nimport { ParticleSystemSizeProperties } from \"../../../components/properties/particles/sizeProperties\";\r\nimport { ParticleSystemEmissionProperties } from \"../../../components/properties/particles/emissionProperties\";\r\nimport { ParticleSystemLifetimeProperties } from \"../../../components/properties/particles/lifetimeProperties\";\r\nimport { ParticleSystemColorProperties } from \"../../../components/properties/particles/colorProperties\";\r\nimport { ParticleSystemRotationProperties } from \"../../../components/properties/particles/rotationProperties\";\r\nimport { ParticleSystemSpritesheetProperties } from \"../../../components/properties/particles/spritesheetProperties\";\r\nimport { ParticleSystemAttractorProperties } from \"../../../components/properties/particles/attractorProperties\";\r\nimport { ParticleSystemNodeEditorProperties } from \"../../../components/properties/particles/nodeEditorProperties\";\r\n\r\nfunction IsParticleSystem(entity: unknown): entity is ParticleSystem | GPUParticleSystem {\r\n    return entity instanceof ParticleSystem || entity instanceof GPUParticleSystem;\r\n}\r\n\r\nfunction IsNodeParticleSystem(entity: unknown): entity is ParticleSystem {\r\n    return entity instanceof ParticleSystem && entity.isNodeGenerated;\r\n}\r\n\r\nfunction IsCPUParticleSystem(entity: unknown): entity is ParticleSystem {\r\n    return entity instanceof ParticleSystem;\r\n}\r\n\r\nfunction IsNonNodeParticleSystem(entity: unknown): entity is ParticleSystem | GPUParticleSystem {\r\n    return (entity instanceof ParticleSystem && !entity.isNodeGenerated) || entity instanceof GPUParticleSystem;\r\n}\r\n\r\nexport const ParticleSystemPropertiesServiceDefinition: ServiceDefinition<[], [IPropertiesService, ISelectionService]> = {\r\n    friendlyName: \"Particle System Properties\",\r\n    consumes: [PropertiesServiceIdentity, SelectionServiceIdentity],\r\n    factory: (propertiesService, selectionService) => {\r\n        // Register each section in its own call to keep ordering predictable across registrations.\r\n        // Note: section `order` is not globally sorted across different registrations, so call order matters.\r\n\r\n        // Register sections for non-node-generated particle systems.\r\n        const particleSystemSystemContent = propertiesService.addSectionContent({\r\n            key: \"Particle System System Properties\",\r\n            predicate: IsParticleSystem,\r\n            content: [\r\n                {\r\n                    section: \"System\",\r\n                    order: 1,\r\n                    component: ({ context }) => <ParticleSystemSystemProperties particleSystem={context} selectionService={selectionService} />,\r\n                },\r\n            ],\r\n        });\r\n\r\n        // Register sections for non-node-generated particle systems.\r\n        const particleSystemCommandsContent = propertiesService.addSectionContent({\r\n            key: \"Particle System Commands Properties\",\r\n            predicate: IsParticleSystem,\r\n            content: [\r\n                {\r\n                    section: \"Commands\",\r\n                    order: 2,\r\n                    component: ({ context }) => <ParticleSystemCommandProperties particleSystem={context} selectionService={selectionService} />,\r\n                },\r\n            ],\r\n        });\r\n\r\n        // The Attractors section must not be visible at all (including the accordion entry) for CPU systems.\r\n        const particleSystemAttractorsContent = propertiesService.addSectionContent({\r\n            key: \"Particle System Attractors Properties\",\r\n            predicate: IsCPUParticleSystem,\r\n            content: [\r\n                {\r\n                    section: \"Attractors\",\r\n                    order: 3,\r\n                    component: ({ context }) => <ParticleSystemAttractorProperties particleSystem={context} />,\r\n                },\r\n            ],\r\n        });\r\n\r\n        const particleSystemEmitterContent = propertiesService.addSectionContent({\r\n            key: \"Particle System Emitter Properties\",\r\n            predicate: IsParticleSystem,\r\n            content: [\r\n                {\r\n                    section: \"Emitter\",\r\n                    order: 4,\r\n                    component: ({ context }) => <ParticleSystemEmitterProperties particleSystem={context} selectionService={selectionService} />,\r\n                },\r\n            ],\r\n        });\r\n\r\n        const particleSystemEmissionContent = propertiesService.addSectionContent({\r\n            key: \"Particle System Emission Properties\",\r\n            predicate: IsNonNodeParticleSystem,\r\n            content: [\r\n                {\r\n                    section: \"Emission\",\r\n                    order: 5,\r\n                    component: ({ context }) => <ParticleSystemEmissionProperties particleSystem={context} />,\r\n                },\r\n            ],\r\n        });\r\n\r\n        // The Size section must not be visible at all (including the accordion entry) for node-generated systems.\r\n        const particleSystemSizeContent = propertiesService.addSectionContent({\r\n            key: \"Particle System Size Properties\",\r\n            predicate: IsNonNodeParticleSystem,\r\n            content: [\r\n                {\r\n                    section: \"Size\",\r\n                    order: 6,\r\n                    component: ({ context }) => <ParticleSystemSizeProperties particleSystem={context} />,\r\n                },\r\n            ],\r\n        });\r\n\r\n        // Lifetime is registered for all systems; the component limits the visible fields for node-generated systems.\r\n        const particleSystemLifetimeContent = propertiesService.addSectionContent({\r\n            key: \"Particle System Lifetime Properties\",\r\n            predicate: IsNonNodeParticleSystem,\r\n            content: [\r\n                {\r\n                    section: \"Lifetime\",\r\n                    order: 7,\r\n                    component: ({ context }) => <ParticleSystemLifetimeProperties particleSystem={context} />,\r\n                },\r\n            ],\r\n        });\r\n\r\n        // Register Color after Lifetime.\r\n        const particleSystemColorContent = propertiesService.addSectionContent({\r\n            key: \"Particle System Color Properties\",\r\n            predicate: IsNonNodeParticleSystem,\r\n            content: [\r\n                {\r\n                    section: \"Colors\",\r\n                    order: 8,\r\n                    component: ({ context }) => <ParticleSystemColorProperties particleSystem={context} />,\r\n                },\r\n            ],\r\n        });\r\n\r\n        // Register Rotation after Colors.\r\n        const particleSystemRotationContent = propertiesService.addSectionContent({\r\n            key: \"Particle System Rotation Properties\",\r\n            predicate: IsNonNodeParticleSystem,\r\n            content: [\r\n                {\r\n                    section: \"Rotation\",\r\n                    order: 9,\r\n                    component: ({ context }) => <ParticleSystemRotationProperties particleSystem={context} />,\r\n                },\r\n            ],\r\n        });\r\n\r\n        // Register Spritesheet after Rotation.\r\n        const particleSystemSpritesheetContent = propertiesService.addSectionContent({\r\n            key: \"Particle System Spritesheet Properties\",\r\n            predicate: IsNonNodeParticleSystem,\r\n            content: [\r\n                {\r\n                    section: \"Spritesheet\",\r\n                    order: 10,\r\n                    component: ({ context }) => <ParticleSystemSpritesheetProperties particleSystem={context} />,\r\n                },\r\n            ],\r\n        });\r\n\r\n        const particleSystemNodeEditorContent = propertiesService.addSectionContent({\r\n            key: \"Node Particle System Inputs Properties\",\r\n            predicate: IsNodeParticleSystem,\r\n            content: [\r\n                {\r\n                    section: \"Inputs\",\r\n                    order: 12,\r\n                    component: ({ context }) => <ParticleSystemNodeEditorProperties particleSystem={context} selectionService={selectionService} />,\r\n                },\r\n            ],\r\n        });\r\n\r\n        return {\r\n            dispose: () => {\r\n                particleSystemSystemContent.dispose();\r\n                particleSystemCommandsContent.dispose();\r\n                particleSystemAttractorsContent.dispose();\r\n                particleSystemEmitterContent.dispose();\r\n                particleSystemEmissionContent.dispose();\r\n                particleSystemSizeContent.dispose();\r\n                particleSystemLifetimeContent.dispose();\r\n                particleSystemColorContent.dispose();\r\n                particleSystemRotationContent.dispose();\r\n                particleSystemSpritesheetContent.dispose();\r\n                particleSystemNodeEditorContent.dispose();\r\n            },\r\n        };\r\n    },\r\n};\r\n","import type { FunctionComponent } from \"react\";\r\n\r\nimport type { PhysicsBody, TransformNode } from \"core/index\";\r\nimport type { DropdownOption } from \"shared-ui-components/fluent/primitives/dropdown\";\r\n\r\nimport { useCallback } from \"react\";\r\nimport { MessageBar } from \"shared-ui-components/fluent/primitives/messageBar\";\r\n\r\nimport { Vector3 } from \"core/Maths/math.vector\";\r\nimport { PhysicsMotionType, PhysicsPrestepType, PhysicsShapeType } from \"core/Physics/v2/IPhysicsEnginePlugin\";\r\nimport { NumberDropdownPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/dropdownPropertyLine\";\r\nimport { NumberInputPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/inputPropertyLine\";\r\nimport { TextPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/textPropertyLine\";\r\nimport { Vector3PropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/vectorPropertyLine\";\r\nimport { useProperty, useVector3Property } from \"../../../hooks/compoundPropertyHooks\";\r\nimport { useInterceptObservable } from \"../../../hooks/instrumentationHooks\";\r\nimport { useObservableState } from \"../../../hooks/observableHooks\";\r\n\r\nimport \"core/Physics/v2/physicsEngineComponent\";\r\nimport { BoundProperty } from \"../boundProperty\";\r\n\r\nconst MotionOptions = [\r\n    { label: \"Static\", value: PhysicsMotionType.STATIC },\r\n    { label: \"Animated\", value: PhysicsMotionType.ANIMATED },\r\n    { label: \"Dynamic\", value: PhysicsMotionType.DYNAMIC },\r\n] as const satisfies readonly DropdownOption<number>[];\r\n\r\nconst PrestepOptions = [\r\n    { label: \"Disabled\", value: PhysicsPrestepType.DISABLED },\r\n    { label: \"Teleport\", value: PhysicsPrestepType.TELEPORT },\r\n    { label: \"Action\", value: PhysicsPrestepType.ACTION },\r\n] as const satisfies readonly DropdownOption<number>[];\r\n\r\n/**\r\n * Convert physics shape type to a human-readable string.\r\n * @param type The physics shape type.\r\n * @returns The human-readable string.\r\n */\r\nfunction GetShapeTypeString(type?: PhysicsShapeType): string {\r\n    switch (type) {\r\n        case PhysicsShapeType.BOX:\r\n            return \"Box\";\r\n        case PhysicsShapeType.SPHERE:\r\n            return \"Sphere\";\r\n        case PhysicsShapeType.CYLINDER:\r\n            return \"Cylinder\";\r\n        case PhysicsShapeType.CAPSULE:\r\n            return \"Capsule\";\r\n        case PhysicsShapeType.CONTAINER:\r\n            return \"Container\";\r\n        case PhysicsShapeType.CONVEX_HULL:\r\n            return \"Convex Hull\";\r\n        case PhysicsShapeType.MESH:\r\n            return \"Mesh\";\r\n        case PhysicsShapeType.HEIGHTFIELD:\r\n            return \"Heightfield\";\r\n        default:\r\n            return \"Unknown\";\r\n    }\r\n}\r\n\r\nexport const TransformNodePhysicsProperties: FunctionComponent<{ node: TransformNode }> = (props) => {\r\n    const { node } = props;\r\n\r\n    const physicsBody = useProperty(node, \"physicsBody\");\r\n\r\n    if (!physicsBody) {\r\n        return (\r\n            <MessageBar\r\n                intent=\"info\"\r\n                title=\"No Physics Body\"\r\n                message=\"To modify physics properties, attach a physics body to this node.\"\r\n                docLink=\"https://doc.babylonjs.com/features/featuresDeepDive/physics/rigidBodies\"\r\n            />\r\n        );\r\n    }\r\n\r\n    return <PhysicsBodyProperties physicsBody={physicsBody} />;\r\n};\r\n\r\n/**\r\n * Physics properties\r\n * @param props transform node\r\n * @returns controls\r\n */\r\nconst PhysicsBodyProperties: FunctionComponent<{ physicsBody: PhysicsBody }> = (props) => {\r\n    const { physicsBody } = props;\r\n\r\n    const massProperties = useObservableState(\r\n        useCallback(() => physicsBody.getMassProperties(), [physicsBody]),\r\n        useInterceptObservable(\"function\", physicsBody, \"setMassProperties\")\r\n    );\r\n\r\n    const centerOfMass = useVector3Property(massProperties, \"centerOfMass\") ?? Vector3.Zero();\r\n    const inertia = useVector3Property(massProperties, \"inertia\") ?? Vector3.Zero();\r\n\r\n    // Get current damping values\r\n    const linearDamping = useObservableState(() => physicsBody.getLinearDamping(), useInterceptObservable(\"function\", physicsBody, \"setLinearDamping\"));\r\n    const angularDamping = useObservableState(() => physicsBody.getAngularDamping(), useInterceptObservable(\"function\", physicsBody, \"setAngularDamping\"));\r\n\r\n    // Get motion and prestep types\r\n    const motionType = useObservableState(() => physicsBody.getMotionType(), useInterceptObservable(\"function\", physicsBody, \"setMotionType\"));\r\n    const prestepType = useObservableState(() => physicsBody.getPrestepType(), useInterceptObservable(\"function\", physicsBody, \"setPrestepType\"));\r\n\r\n    // Get current velocities\r\n    const linearVelocity = useObservableState(\r\n        useCallback(() => physicsBody.getLinearVelocity(), [physicsBody]),\r\n        useInterceptObservable(\"function\", physicsBody, \"setLinearVelocity\")\r\n    );\r\n    const angularVelocity = useObservableState(\r\n        useCallback(() => physicsBody.getAngularVelocity(), [physicsBody]),\r\n        useInterceptObservable(\"function\", physicsBody, \"setAngularVelocity\")\r\n    );\r\n\r\n    // Get shape and material properties\r\n    const shape = useProperty(physicsBody, \"shape\");\r\n    const type = useProperty(shape, \"type\");\r\n    const material = useProperty(shape, \"material\");\r\n\r\n    return (\r\n        <>\r\n            <NumberDropdownPropertyLine key=\"MotionType\" label=\"Motion Type\" options={MotionOptions} value={motionType} onChange={(value) => physicsBody.setMotionType(value)} />\r\n            <NumberDropdownPropertyLine label=\"Prestep Type\" options={PrestepOptions} value={prestepType} onChange={(value) => physicsBody.setPrestepType(value)} />\r\n            {shape && <TextPropertyLine label=\"Shape Type\" value={GetShapeTypeString(type)} />}\r\n            {/* Linear Damping */}\r\n            <NumberInputPropertyLine label=\"Linear Damping\" min={0} max={1} step={0.01} value={linearDamping} onChange={(value) => physicsBody.setLinearDamping(value)} />\r\n            {/* Angular Damping */}\r\n            <NumberInputPropertyLine label=\"Angular Damping\" min={0} max={1} step={0.01} value={angularDamping} onChange={(value) => physicsBody.setAngularDamping(value)} />\r\n            {/* Material Properties */}\r\n            {shape && (\r\n                <>\r\n                    <BoundProperty\r\n                        component={NumberInputPropertyLine}\r\n                        label=\"Dynamic Friction\"\r\n                        min={0}\r\n                        max={1}\r\n                        step={0.01}\r\n                        target={material}\r\n                        propertyKey=\"friction\"\r\n                        nullable\r\n                        defaultValue={0.5}\r\n                    />\r\n                    <BoundProperty\r\n                        component={NumberInputPropertyLine}\r\n                        label=\"Static Friction\"\r\n                        min={0}\r\n                        max={1}\r\n                        step={0.01}\r\n                        target={material}\r\n                        propertyKey=\"staticFriction\"\r\n                        nullable\r\n                        defaultValue={material?.friction ?? 0.5}\r\n                    />\r\n                    <BoundProperty\r\n                        component={NumberInputPropertyLine}\r\n                        label=\"Restitution\"\r\n                        min={0}\r\n                        max={1}\r\n                        step={0.01}\r\n                        target={material}\r\n                        propertyKey=\"restitution\"\r\n                        nullable\r\n                        defaultValue={0}\r\n                    />\r\n                </>\r\n            )}\r\n            <Vector3PropertyLine label=\"Linear Velocity\" value={linearVelocity} onChange={(value) => physicsBody.setLinearVelocity(value)} />\r\n            <Vector3PropertyLine label=\"Angular Velocity\" value={angularVelocity} onChange={(value) => physicsBody.setAngularVelocity(value)} />\r\n            {/* Physics Mass Properties Controls */}\r\n            {massProperties && (\r\n                <>\r\n                    <NumberInputPropertyLine\r\n                        label=\"Mass\"\r\n                        value={massProperties.mass ?? 0}\r\n                        min={0}\r\n                        step={0.01}\r\n                        onChange={(value) => {\r\n                            physicsBody.setMassProperties({ ...massProperties, mass: value });\r\n                        }}\r\n                    />\r\n                    <Vector3PropertyLine\r\n                        label=\"Center of Mass\"\r\n                        value={centerOfMass}\r\n                        onChange={(value) => {\r\n                            physicsBody.setMassProperties({ ...massProperties, centerOfMass: value });\r\n                        }}\r\n                    />\r\n                    <Vector3PropertyLine\r\n                        label=\"Inertia\"\r\n                        value={inertia}\r\n                        onChange={(value) => {\r\n                            physicsBody.setMassProperties({ ...massProperties, inertia: value });\r\n                        }}\r\n                    />\r\n                </>\r\n            )}\r\n        </>\r\n    );\r\n};\r\n","import type { ServiceDefinition } from \"../../../modularity/serviceDefinition\";\r\nimport type { IPropertiesService } from \"./propertiesService\";\r\n\r\nimport { TransformNode } from \"core/Meshes/transformNode\";\r\n\r\nimport { TransformNodePhysicsProperties } from \"../../../components/properties/physics/physicsProperties\";\r\nimport { PropertiesServiceIdentity } from \"./propertiesService\";\r\n\r\nexport const PhysicsPropertiesServiceDefinition: ServiceDefinition<[], [IPropertiesService]> = {\r\n    friendlyName: \"Physics Properties\",\r\n    consumes: [PropertiesServiceIdentity],\r\n    factory: (propertiesService) => {\r\n        const contentRegistration = propertiesService.addSectionContent({\r\n            key: \"Physics Properties\",\r\n            predicate: (entity: unknown) => entity instanceof TransformNode,\r\n            content: [\r\n                {\r\n                    section: \"Physics\",\r\n                    component: ({ context: node }) => <TransformNodePhysicsProperties node={node} />,\r\n                },\r\n            ],\r\n        });\r\n\r\n        return {\r\n            dispose: () => {\r\n                contentRegistration.dispose();\r\n            },\r\n        };\r\n    },\r\n};\r\n","import type { CheckboxOnChangeData } from \"@fluentui/react-components\";\r\nimport type { ChangeEvent, FunctionComponent } from \"react\";\r\n\r\nimport { Checkbox as FluentCheckbox, makeStyles } from \"@fluentui/react-components\";\r\nimport { useEffect, useState } from \"react\";\r\nimport type { PrimitiveProps } from \"./primitive\";\r\n\r\nconst useCheckboxStyles = makeStyles({\r\n    indicator: {\r\n        margin: 0,\r\n    },\r\n});\r\n/**\r\n * This is a primitive fluent checkbox that can both read and write checked state\r\n * @param props\r\n * @returns Checkbox component\r\n */\r\nexport const Checkbox: FunctionComponent<PrimitiveProps<boolean>> = (props) => {\r\n    Checkbox.displayName = \"Checkbox\";\r\n    const [checked, setChecked] = useState(() => props.value ?? false);\r\n    const classes = useCheckboxStyles();\r\n    useEffect(() => {\r\n        if (props.value != undefined) {\r\n            setChecked(props.value); // Update local state when props.checked changes\r\n        }\r\n    }, [props.value]);\r\n\r\n    const onChange = (ev: ChangeEvent<HTMLInputElement>, _: CheckboxOnChangeData) => {\r\n        props.onChange(ev.target.checked);\r\n        setChecked(ev.target.checked);\r\n    };\r\n\r\n    return <FluentCheckbox checked={checked} onChange={onChange} indicator={{ className: classes.indicator }} />;\r\n};\r\n","import { PropertyLine } from \"./propertyLine\";\r\nimport type { PrimitiveProps } from \"../../primitives/primitive\";\r\nimport type { PropertyLineProps } from \"./propertyLine\";\r\nimport type { FunctionComponent } from \"react\";\r\nimport { Checkbox } from \"../../primitives/checkbox\";\r\n\r\n/**\r\n * Wraps a checkbox in a property line\r\n * @param props - PropertyLineProps and CheckboxProps\r\n * @returns property-line wrapped checkbox\r\n */\r\nexport const CheckboxPropertyLine: FunctionComponent<PropertyLineProps<boolean> & PrimitiveProps<boolean>> = (props) => {\r\n    CheckboxPropertyLine.displayName = \"CheckboxPropertyLine\";\r\n    return (\r\n        <PropertyLine {...props}>\r\n            <Checkbox {...props} />\r\n        </PropertyLine>\r\n    );\r\n};\r\n","import type { PostProcess } from \"core/PostProcesses/postProcess\";\r\n\r\nimport type { FunctionComponent } from \"react\";\r\n\r\nimport { StringifiedPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/stringifiedPropertyLine\";\r\nimport { CheckboxPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/checkboxPropertyLine\";\r\nimport { BoundProperty } from \"../boundProperty\";\r\nimport { SyncedSliderPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/syncedSliderPropertyLine\";\r\nimport { Color4PropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/colorPropertyLine\";\r\n\r\n/**\r\n * The properties component for a post process.\r\n * @param props - The properties component props containing the post process.\r\n * @returns JSX.Element\r\n */\r\nexport const PostProcessProperties: FunctionComponent<{ postProcess: PostProcess }> = (props) => {\r\n    const { postProcess } = props;\r\n    return (\r\n        <>\r\n            <StringifiedPropertyLine label=\"Width\" description=\"The width of the post process\" value={postProcess.width} units=\"px\" />\r\n            <StringifiedPropertyLine label=\"Height\" description=\"The height of the post process\" value={postProcess.height} units=\"px\" />\r\n            <BoundProperty component={CheckboxPropertyLine} label=\"Auto Clear\" target={postProcess} propertyKey=\"autoClear\" />\r\n            {postProcess.clearColor && <BoundProperty component={Color4PropertyLine} label=\"Clear Color\" target={postProcess} propertyKey=\"clearColor\" />}\r\n            <BoundProperty component={CheckboxPropertyLine} label=\"Pixel Perfect\" target={postProcess} propertyKey=\"enablePixelPerfectMode\" />\r\n            <BoundProperty component={CheckboxPropertyLine} label=\"Fullscreen Viewport\" target={postProcess} propertyKey=\"forceFullscreenViewport\" />\r\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"Samples\" target={postProcess} propertyKey=\"samples\" min={1} max={8} step={1} />\r\n        </>\r\n    );\r\n};\r\n","import { PostProcess } from \"core/PostProcesses/postProcess\";\r\nimport { PostProcessProperties } from \"../../../components/properties/postProcesses/postProcessProperties\";\r\nimport type { ServiceDefinition } from \"../../../modularity/serviceDefinition\";\r\nimport type { IPropertiesService } from \"./propertiesService\";\r\n\r\nimport { PropertiesServiceIdentity } from \"./propertiesService\";\r\n\r\nexport const PostProcessPropertiesServiceDefinition: ServiceDefinition<[], [IPropertiesService]> = {\r\n    friendlyName: \"Post Process Properties\",\r\n    consumes: [PropertiesServiceIdentity],\r\n    factory: (propertiesService) => {\r\n        const postProcessContentRegistration = propertiesService.addSectionContent({\r\n            key: \"Post Process Properties\",\r\n            predicate: (entity: unknown) => entity instanceof PostProcess,\r\n            content: [\r\n                {\r\n                    section: \"General\",\r\n                    component: ({ context }) => <PostProcessProperties postProcess={context} />,\r\n                },\r\n            ],\r\n        });\r\n\r\n        return {\r\n            dispose: () => {\r\n                postProcessContentRegistration.dispose();\r\n            },\r\n        };\r\n    },\r\n};\r\n","import type { FunctionComponent } from \"react\";\r\n\r\nimport type { PostProcessRenderPipeline } from \"core/PostProcesses/RenderPipeline/postProcessRenderPipeline\";\r\n\r\nimport { SyncedSliderPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/syncedSliderPropertyLine\";\r\nimport { BoundProperty } from \"../boundProperty\";\r\n\r\nexport const PostProcessRenderPipelineSamplesProperties: FunctionComponent<{ pipeline: PostProcessRenderPipeline }> = (props) => {\r\n    const { pipeline } = props;\r\n\r\n    const hasSamples = \"samples\" in pipeline;\r\n\r\n    if (!hasSamples) {\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <BoundProperty\r\n            component={SyncedSliderPropertyLine}\r\n            label=\"Samples\"\r\n            description=\"MSAA sample count\"\r\n            target={pipeline as PostProcessRenderPipeline & { samples: number }}\r\n            propertyKey=\"samples\"\r\n            min={1}\r\n            step={1}\r\n        />\r\n    );\r\n};\r\n","import type { FunctionComponent } from \"react\";\r\n\r\nimport type { DefaultRenderingPipeline } from \"core/PostProcesses/RenderPipeline/Pipelines/defaultRenderingPipeline\";\r\nimport { DepthOfFieldEffectBlurLevel } from \"core/PostProcesses/depthOfFieldEffect\";\r\nimport { ImageProcessingConfiguration } from \"core/Materials/imageProcessingConfiguration\";\r\n\r\nimport { NumberInputPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/inputPropertyLine\";\r\nimport { SwitchPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/switchPropertyLine\";\r\nimport { SyncedSliderPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/syncedSliderPropertyLine\";\r\nimport { NumberDropdownPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/dropdownPropertyLine\";\r\nimport { Color4PropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/colorPropertyLine\";\r\nimport { Vector2PropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/vectorPropertyLine\";\r\nimport { ButtonLine } from \"shared-ui-components/fluent/hoc/buttonLine\";\r\nimport { useProperty } from \"../../../hooks/compoundPropertyHooks\";\r\nimport { BoundProperty } from \"../boundProperty\";\r\nimport { Collapse } from \"shared-ui-components/fluent/primitives/collapse\";\r\n\r\nconst DepthOfFieldBlurLevelOptions = [\r\n    { label: \"Low\", value: DepthOfFieldEffectBlurLevel.Low },\r\n    { label: \"Medium\", value: DepthOfFieldEffectBlurLevel.Medium },\r\n    { label: \"High\", value: DepthOfFieldEffectBlurLevel.High },\r\n];\r\n\r\nconst ToneMappingTypeOptions = [\r\n    { label: \"Standard\", value: ImageProcessingConfiguration.TONEMAPPING_STANDARD },\r\n    { label: \"ACES\", value: ImageProcessingConfiguration.TONEMAPPING_ACES },\r\n    { label: \"Khronos PBR Neutral\", value: ImageProcessingConfiguration.TONEMAPPING_KHR_PBR_NEUTRAL },\r\n];\r\n\r\nconst VignetteBlendModeOptions = [\r\n    { label: \"Multiply\", value: ImageProcessingConfiguration.VIGNETTEMODE_MULTIPLY },\r\n    { label: \"Opaque\", value: ImageProcessingConfiguration.VIGNETTEMODE_OPAQUE },\r\n];\r\n\r\nexport const DefaultRenderingPipelineBloomProperties: FunctionComponent<{ pipeline: DefaultRenderingPipeline }> = (props) => {\r\n    const { pipeline } = props;\r\n    const bloomEnabled = useProperty(pipeline, \"bloomEnabled\");\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Bloom Enabled\" target={pipeline} propertyKey=\"bloomEnabled\" />\r\n            <Collapse visible={!!bloomEnabled}>\r\n                <BoundProperty component={SyncedSliderPropertyLine} label=\"Threshold\" target={pipeline} propertyKey=\"bloomThreshold\" min={0} step={0.01} />\r\n                <BoundProperty component={SyncedSliderPropertyLine} label=\"Weight\" target={pipeline} propertyKey=\"bloomWeight\" min={0} step={0.05} />\r\n                <BoundProperty component={SyncedSliderPropertyLine} label=\"Kernel\" target={pipeline} propertyKey=\"bloomKernel\" min={0} step={1} />\r\n                <BoundProperty component={SyncedSliderPropertyLine} label=\"Scale\" target={pipeline} propertyKey=\"bloomScale\" min={0} step={0.25} />\r\n            </Collapse>\r\n        </>\r\n    );\r\n};\r\n\r\nexport const DefaultRenderingPipelineChromaticAberrationProperties: FunctionComponent<{ pipeline: DefaultRenderingPipeline }> = (props) => {\r\n    const { pipeline } = props;\r\n    const chromaticAberrationEnabled = useProperty(pipeline, \"chromaticAberrationEnabled\");\r\n    const chromaticAberration = pipeline.chromaticAberration;\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Chromatic Aberration Enabled\" target={pipeline} propertyKey=\"chromaticAberrationEnabled\" />\r\n            <Collapse visible={!!chromaticAberrationEnabled && !!chromaticAberration}>\r\n                <BoundProperty\r\n                    component={SyncedSliderPropertyLine}\r\n                    label=\"Aberration Amount\"\r\n                    target={chromaticAberration}\r\n                    propertyKey=\"aberrationAmount\"\r\n                    propertyPath=\"chromaticAberration.aberrationAmount\"\r\n                    min={0}\r\n                    step={0.1}\r\n                />\r\n                <BoundProperty\r\n                    component={SyncedSliderPropertyLine}\r\n                    label=\"Radial Intensity\"\r\n                    target={chromaticAberration}\r\n                    propertyKey=\"radialIntensity\"\r\n                    propertyPath=\"chromaticAberration.radialIntensity\"\r\n                    min={0}\r\n                    step={0.01}\r\n                />\r\n                <BoundProperty\r\n                    component={Vector2PropertyLine}\r\n                    label=\"Center Position\"\r\n                    target={chromaticAberration}\r\n                    propertyKey=\"centerPosition\"\r\n                    propertyPath=\"chromaticAberration.centerPosition\"\r\n                />\r\n                <BoundProperty\r\n                    component={Vector2PropertyLine}\r\n                    label=\"Direction\"\r\n                    target={chromaticAberration}\r\n                    propertyKey=\"direction\"\r\n                    propertyPath=\"chromaticAberration.direction\"\r\n                />\r\n            </Collapse>\r\n        </>\r\n    );\r\n};\r\n\r\nexport const DefaultRenderingPipelineDepthOfFieldProperties: FunctionComponent<{ pipeline: DefaultRenderingPipeline }> = (props) => {\r\n    const { pipeline } = props;\r\n    const depthOfFieldEnabled = useProperty(pipeline, \"depthOfFieldEnabled\");\r\n    const depthOfField = pipeline.depthOfField;\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Depth of Field Enabled\" target={pipeline} propertyKey=\"depthOfFieldEnabled\" />\r\n            <Collapse visible={!!depthOfFieldEnabled && !!depthOfField}>\r\n                <BoundProperty\r\n                    component={NumberDropdownPropertyLine}\r\n                    label=\"Blur Level\"\r\n                    target={pipeline}\r\n                    propertyKey=\"depthOfFieldBlurLevel\"\r\n                    options={DepthOfFieldBlurLevelOptions}\r\n                />\r\n                <BoundProperty\r\n                    component={NumberInputPropertyLine}\r\n                    label=\"Focal Length\"\r\n                    target={depthOfField}\r\n                    propertyKey=\"focalLength\"\r\n                    propertyPath=\"depthOfField.focalLength\"\r\n                    min={0}\r\n                    step={0.1}\r\n                />\r\n                <BoundProperty component={SyncedSliderPropertyLine} label=\"F-Stop\" target={depthOfField} propertyKey=\"fStop\" propertyPath=\"depthOfField.fStop\" min={0} step={0.1} />\r\n                <BoundProperty\r\n                    component={NumberInputPropertyLine}\r\n                    label=\"Focus Distance\"\r\n                    target={depthOfField}\r\n                    propertyKey=\"focusDistance\"\r\n                    propertyPath=\"depthOfField.focusDistance\"\r\n                    min={0}\r\n                    step={0.1}\r\n                />\r\n                <BoundProperty\r\n                    component={NumberInputPropertyLine}\r\n                    label=\"Lens Size\"\r\n                    target={depthOfField}\r\n                    propertyKey=\"lensSize\"\r\n                    propertyPath=\"depthOfField.lensSize\"\r\n                    min={0}\r\n                    step={1}\r\n                />\r\n            </Collapse>\r\n        </>\r\n    );\r\n};\r\n\r\nexport const DefaultRenderingPipelineFxaaGlowProperties: FunctionComponent<{ pipeline: DefaultRenderingPipeline }> = (props) => {\r\n    const { pipeline } = props;\r\n    const glowLayerEnabled = useProperty(pipeline, \"glowLayerEnabled\");\r\n    const glowLayer = pipeline.glowLayer;\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty component={SwitchPropertyLine} label=\"FXAA Enabled\" target={pipeline} propertyKey=\"fxaaEnabled\" />\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Glow Layer Enabled\" target={pipeline} propertyKey=\"glowLayerEnabled\" />\r\n            <Collapse visible={!!glowLayerEnabled && !!glowLayer}>\r\n                <BoundProperty\r\n                    component={SyncedSliderPropertyLine}\r\n                    label=\"Blur Kernel Size\"\r\n                    target={glowLayer}\r\n                    propertyKey=\"blurKernelSize\"\r\n                    propertyPath=\"glowLayer.blurKernelSize\"\r\n                    min={1}\r\n                    step={1}\r\n                />\r\n                <BoundProperty\r\n                    component={SyncedSliderPropertyLine}\r\n                    label=\"Intensity\"\r\n                    target={glowLayer}\r\n                    propertyKey=\"intensity\"\r\n                    propertyPath=\"glowLayer.intensity\"\r\n                    min={0}\r\n                    step={0.1}\r\n                />\r\n            </Collapse>\r\n        </>\r\n    );\r\n};\r\n\r\nexport const DefaultRenderingPipelineGrainProperties: FunctionComponent<{ pipeline: DefaultRenderingPipeline }> = (props) => {\r\n    const { pipeline } = props;\r\n    const grainEnabled = useProperty(pipeline, \"grainEnabled\");\r\n    const grain = pipeline.grain;\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Grain Enabled\" target={pipeline} propertyKey=\"grainEnabled\" />\r\n            <Collapse visible={!!grainEnabled && !!grain}>\r\n                <BoundProperty component={SwitchPropertyLine} label=\"Animated\" target={grain} propertyKey=\"animated\" propertyPath=\"grain.animated\" />\r\n                <BoundProperty component={SyncedSliderPropertyLine} label=\"Intensity\" target={grain} propertyKey=\"intensity\" propertyPath=\"grain.intensity\" min={0} step={0.1} />\r\n            </Collapse>\r\n        </>\r\n    );\r\n};\r\n\r\nexport const DefaultRenderingPipelineImageProcessingProperties: FunctionComponent<{ pipeline: DefaultRenderingPipeline }> = (props) => {\r\n    const { pipeline } = props;\r\n    const imageProcessingEnabled = useProperty(pipeline, \"imageProcessingEnabled\");\r\n    const imageProcessing = pipeline.imageProcessing;\r\n\r\n    const vignetteEnabled = useProperty(imageProcessing, \"vignetteEnabled\");\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Image Processing Enabled\" target={pipeline} propertyKey=\"imageProcessingEnabled\" />\r\n            <Collapse visible={!!imageProcessingEnabled && !!imageProcessing}>\r\n                <ButtonLine\r\n                    label=\"Convert Clear Color to Linear\"\r\n                    onClick={() => {\r\n                        pipeline.scene.clearColor = pipeline.scene.clearColor.toLinearSpace(pipeline.scene.getEngine().useExactSrgbConversions);\r\n                    }}\r\n                />\r\n                <ButtonLine\r\n                    label=\"Convert Clear Color to Gamma\"\r\n                    onClick={() => {\r\n                        pipeline.scene.clearColor = pipeline.scene.clearColor.toGammaSpace(pipeline.scene.getEngine().useExactSrgbConversions);\r\n                    }}\r\n                />\r\n                <BoundProperty\r\n                    component={SyncedSliderPropertyLine}\r\n                    label=\"Contrast\"\r\n                    target={imageProcessing}\r\n                    propertyKey=\"contrast\"\r\n                    propertyPath=\"imageProcessing.contrast\"\r\n                    min={0}\r\n                    step={0.1}\r\n                />\r\n                <BoundProperty\r\n                    component={SyncedSliderPropertyLine}\r\n                    label=\"Exposure\"\r\n                    target={imageProcessing}\r\n                    propertyKey=\"exposure\"\r\n                    propertyPath=\"imageProcessing.exposure\"\r\n                    min={0}\r\n                    step={0.1}\r\n                />\r\n                <BoundProperty\r\n                    component={SwitchPropertyLine}\r\n                    label=\"Tone Mapping Enabled\"\r\n                    target={imageProcessing}\r\n                    propertyKey=\"toneMappingEnabled\"\r\n                    propertyPath=\"imageProcessing.toneMappingEnabled\"\r\n                />\r\n                <BoundProperty\r\n                    component={NumberDropdownPropertyLine}\r\n                    label=\"Tone Mapping Type\"\r\n                    target={imageProcessing}\r\n                    propertyKey=\"toneMappingType\"\r\n                    propertyPath=\"imageProcessing.toneMappingType\"\r\n                    options={ToneMappingTypeOptions}\r\n                />\r\n                <BoundProperty\r\n                    component={SwitchPropertyLine}\r\n                    label=\"Vignette Enabled\"\r\n                    target={imageProcessing}\r\n                    propertyKey=\"vignetteEnabled\"\r\n                    propertyPath=\"imageProcessing.vignetteEnabled\"\r\n                />\r\n                <Collapse visible={!!vignetteEnabled}>\r\n                    <BoundProperty\r\n                        component={SyncedSliderPropertyLine}\r\n                        label=\"Vignette Weight\"\r\n                        target={imageProcessing}\r\n                        propertyKey=\"vignetteWeight\"\r\n                        propertyPath=\"imageProcessing.vignetteWeight\"\r\n                        min={0}\r\n                        step={0.1}\r\n                    />\r\n                    <BoundProperty\r\n                        component={SyncedSliderPropertyLine}\r\n                        label=\"Vignette Stretch\"\r\n                        target={imageProcessing}\r\n                        propertyKey=\"vignetteStretch\"\r\n                        propertyPath=\"imageProcessing.vignetteStretch\"\r\n                        min={0}\r\n                        step={0.1}\r\n                    />\r\n                    <BoundProperty\r\n                        component={SyncedSliderPropertyLine}\r\n                        label=\"Vignette Camera FOV\"\r\n                        target={imageProcessing}\r\n                        propertyKey=\"vignetteCameraFov\"\r\n                        propertyPath=\"imageProcessing.vignetteCameraFov\"\r\n                        min={0}\r\n                        step={0.1}\r\n                    />\r\n                    <BoundProperty\r\n                        component={SyncedSliderPropertyLine}\r\n                        label=\"Vignette Center X\"\r\n                        target={imageProcessing}\r\n                        propertyKey=\"vignetteCenterX\"\r\n                        propertyPath=\"imageProcessing.vignetteCenterX\"\r\n                        step={0.1}\r\n                    />\r\n                    <BoundProperty\r\n                        component={SyncedSliderPropertyLine}\r\n                        label=\"Vignette Center Y\"\r\n                        target={imageProcessing}\r\n                        propertyKey=\"vignetteCenterY\"\r\n                        propertyPath=\"imageProcessing.vignetteCenterY\"\r\n                        step={0.1}\r\n                    />\r\n                    <BoundProperty\r\n                        component={Color4PropertyLine}\r\n                        label=\"Vignette Color\"\r\n                        target={imageProcessing}\r\n                        propertyKey=\"vignetteColor\"\r\n                        propertyPath=\"imageProcessing.vignetteColor\"\r\n                    />\r\n                    <BoundProperty\r\n                        component={NumberDropdownPropertyLine}\r\n                        label=\"Vignette Blend Mode\"\r\n                        target={imageProcessing}\r\n                        propertyKey=\"vignetteBlendMode\"\r\n                        propertyPath=\"imageProcessing.vignetteBlendMode\"\r\n                        options={VignetteBlendModeOptions}\r\n                    />\r\n                </Collapse>\r\n                <BoundProperty\r\n                    component={SwitchPropertyLine}\r\n                    label=\"Dithering Enabled\"\r\n                    target={imageProcessing}\r\n                    propertyKey=\"ditheringEnabled\"\r\n                    propertyPath=\"imageProcessing.ditheringEnabled\"\r\n                />\r\n                <BoundProperty\r\n                    component={SyncedSliderPropertyLine}\r\n                    label=\"Dithering Intensity\"\r\n                    target={imageProcessing}\r\n                    propertyKey=\"ditheringIntensity\"\r\n                    propertyPath=\"imageProcessing.ditheringIntensity\"\r\n                    min={0}\r\n                    step={0.5 / 255}\r\n                />\r\n            </Collapse>\r\n        </>\r\n    );\r\n};\r\n\r\nexport const DefaultRenderingPipelineSharpenProperties: FunctionComponent<{ pipeline: DefaultRenderingPipeline }> = (props) => {\r\n    const { pipeline } = props;\r\n    const sharpenEnabled = useProperty(pipeline, \"sharpenEnabled\");\r\n    const sharpen = pipeline.sharpen;\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Sharpen Enabled\" target={pipeline} propertyKey=\"sharpenEnabled\" />\r\n            <Collapse visible={!!sharpenEnabled && !!sharpen}>\r\n                <BoundProperty\r\n                    component={SyncedSliderPropertyLine}\r\n                    label=\"Color Amount\"\r\n                    target={sharpen}\r\n                    propertyKey=\"colorAmount\"\r\n                    propertyPath=\"sharpen.colorAmount\"\r\n                    min={0}\r\n                    step={0.05}\r\n                />\r\n                <BoundProperty\r\n                    component={SyncedSliderPropertyLine}\r\n                    label=\"Edge Amount\"\r\n                    target={sharpen}\r\n                    propertyKey=\"edgeAmount\"\r\n                    propertyPath=\"sharpen.edgeAmount\"\r\n                    min={0}\r\n                    step={0.05}\r\n                />\r\n            </Collapse>\r\n        </>\r\n    );\r\n};\r\n","import type { FunctionComponent } from \"react\";\r\n\r\nimport type { LensRenderingPipeline } from \"core/PostProcesses/RenderPipeline/Pipelines/lensRenderingPipeline\";\r\n\r\nimport { SwitchPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/switchPropertyLine\";\r\nimport { SyncedSliderPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/syncedSliderPropertyLine\";\r\nimport { BoundProperty } from \"../boundProperty\";\r\n\r\nexport const LensRenderingPipelineOptionsProperties: FunctionComponent<{ pipeline: LensRenderingPipeline }> = (props) => {\r\n    const { pipeline } = props;\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"Edge Blur\" target={pipeline} propertyKey=\"edgeBlur\" min={0} step={0.1} />\r\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"Edge Distortion\" target={pipeline} propertyKey=\"edgeDistortion\" min={0} step={0.1} />\r\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"Grain Amount\" target={pipeline} propertyKey=\"grainAmount\" min={0} step={0.1} />\r\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"Chromatic Aberration\" target={pipeline} propertyKey=\"chromaticAberration\" min={0} step={0.1} />\r\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"Darken Out of Focus\" target={pipeline} propertyKey=\"darkenOutOfFocus\" min={0} step={0.1} />\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Blur Noise\" target={pipeline} propertyKey=\"blurNoise\" />\r\n        </>\r\n    );\r\n};\r\n\r\nexport const LensRenderingPipelineDepthOfFieldProperties: FunctionComponent<{ pipeline: LensRenderingPipeline }> = (props) => {\r\n    const { pipeline } = props;\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"DOF Aperture\" target={pipeline} propertyKey=\"dofAperture\" min={0} step={0.1} />\r\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"DOF Distortion\" target={pipeline} propertyKey=\"dofDistortion\" min={0} step={0.1} />\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Pentagon Bokeh\" target={pipeline} propertyKey=\"pentagonBokeh\" />\r\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"Highlights Gain\" target={pipeline} propertyKey=\"highlightsGain\" min={0} step={0.1} />\r\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"Highlights Threshold\" target={pipeline} propertyKey=\"highlightsThreshold\" min={0} step={0.1} />\r\n        </>\r\n    );\r\n};\r\n","import type { FunctionComponent } from \"react\";\r\n\r\nimport type { SSAORenderingPipeline } from \"core/PostProcesses/RenderPipeline/Pipelines/ssaoRenderingPipeline\";\r\n\r\nimport { SyncedSliderPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/syncedSliderPropertyLine\";\r\nimport { BoundProperty } from \"../boundProperty\";\r\n\r\nexport const SSAORenderingPipelineProperties: FunctionComponent<{ pipeline: SSAORenderingPipeline }> = (props) => {\r\n    const { pipeline } = props;\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"Total Strength\" target={pipeline} propertyKey=\"totalStrength\" min={0} step={0.05} />\r\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"Base\" target={pipeline} propertyKey=\"base\" min={0} step={0.05} />\r\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"Radius\" target={pipeline} propertyKey=\"radius\" min={0.0001} step={0.0001} />\r\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"Area\" target={pipeline} propertyKey=\"area\" min={0.0001} step={0.0001} />\r\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"Fall Off\" target={pipeline} propertyKey=\"fallOff\" min={0} step={0.000001} />\r\n        </>\r\n    );\r\n};\r\n","import type { FunctionComponent } from \"react\";\r\n\r\nimport type { SSAO2RenderingPipeline } from \"core/PostProcesses/RenderPipeline/Pipelines/ssao2RenderingPipeline\";\r\n\r\nimport { SwitchPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/switchPropertyLine\";\r\nimport { SyncedSliderPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/syncedSliderPropertyLine\";\r\nimport { NumberInputPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/inputPropertyLine\";\r\nimport { BoundProperty } from \"../boundProperty\";\r\n\r\nexport const SSAO2RenderingPipelineSSAOProperties: FunctionComponent<{ pipeline: SSAO2RenderingPipeline }> = (props) => {\r\n    const { pipeline } = props;\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"Total Strength\" target={pipeline} propertyKey=\"totalStrength\" min={0} step={0.05} />\r\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"Base\" target={pipeline} propertyKey=\"base\" min={0} step={0.05} />\r\n            <BoundProperty component={NumberInputPropertyLine} label=\"Max Z\" target={pipeline} propertyKey=\"maxZ\" min={0} step={1} />\r\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"Min Z Aspect\" target={pipeline} propertyKey=\"minZAspect\" min={0} step={0.01} />\r\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"Radius\" target={pipeline} propertyKey=\"radius\" min={0} step={0.05} />\r\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"Epsilon\" target={pipeline} propertyKey=\"epsilon\" min={0} step={0.001} />\r\n            <BoundProperty component={NumberInputPropertyLine} label=\"Samples\" target={pipeline} propertyKey=\"samples\" min={1} step={1} />\r\n        </>\r\n    );\r\n};\r\n\r\nexport const SSAO2RenderingPipelineDenoiserProperties: FunctionComponent<{ pipeline: SSAO2RenderingPipeline }> = (props) => {\r\n    const { pipeline } = props;\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Bypass Blur\" target={pipeline} propertyKey=\"bypassBlur\" />\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Expensive Blur\" target={pipeline} propertyKey=\"expensiveBlur\" />\r\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"Bilateral Samples\" target={pipeline} propertyKey=\"bilateralSamples\" min={2} step={1} />\r\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"Bilateral Soften\" target={pipeline} propertyKey=\"bilateralSoften\" min={0} step={0.01} />\r\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"Bilateral Tolerance\" target={pipeline} propertyKey=\"bilateralTolerance\" min={0} step={0.01} />\r\n        </>\r\n    );\r\n};\r\n","import type { FunctionComponent } from \"react\";\r\n\r\nimport type { SSRRenderingPipeline } from \"core/PostProcesses/RenderPipeline/Pipelines/ssrRenderingPipeline\";\r\n\r\nimport { SwitchPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/switchPropertyLine\";\r\nimport { SyncedSliderPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/syncedSliderPropertyLine\";\r\nimport { NumberInputPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/inputPropertyLine\";\r\nimport { useProperty } from \"../../../hooks/compoundPropertyHooks\";\r\nimport { BoundProperty } from \"../boundProperty\";\r\nimport { Collapse } from \"shared-ui-components/fluent/primitives/collapse\";\r\n\r\nexport const SSRRenderingPipelineSSRProperties: FunctionComponent<{ pipeline: SSRRenderingPipeline }> = (props) => {\r\n    const { pipeline } = props;\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Enabled\" target={pipeline} propertyKey=\"isEnabled\" />\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Debug\" target={pipeline} propertyKey=\"debug\" />\r\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"Strength\" target={pipeline} propertyKey=\"strength\" min={0} step={0.05} />\r\n            <BoundProperty\r\n                component={SyncedSliderPropertyLine}\r\n                label=\"Reflection Specular Falloff\"\r\n                target={pipeline}\r\n                propertyKey=\"reflectionSpecularFalloffExponent\"\r\n                min={0}\r\n                step={0.05}\r\n            />\r\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"Reflectivity Threshold\" target={pipeline} propertyKey=\"reflectivityThreshold\" min={0} step={0.01} />\r\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"Thickness\" target={pipeline} propertyKey=\"thickness\" min={0} step={0.01} />\r\n            <BoundProperty component={NumberInputPropertyLine} label=\"Step\" target={pipeline} propertyKey=\"step\" min={1} step={1} forceInt />\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Enable Smooth Reflections\" target={pipeline} propertyKey=\"enableSmoothReflections\" />\r\n            <BoundProperty component={NumberInputPropertyLine} label=\"Max Steps\" target={pipeline} propertyKey=\"maxSteps\" min={1} step={10} forceInt />\r\n            <BoundProperty component={NumberInputPropertyLine} label=\"Max Distance\" target={pipeline} propertyKey=\"maxDistance\" min={1} step={10} />\r\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"Roughness Factor\" target={pipeline} propertyKey=\"roughnessFactor\" min={0} step={0.01} />\r\n            <BoundProperty component={NumberInputPropertyLine} label=\"Self Collision Skip\" target={pipeline} propertyKey=\"selfCollisionNumSkip\" min={1} step={1} />\r\n            <BoundProperty component={NumberInputPropertyLine} label=\"SSR Downsample\" target={pipeline} propertyKey=\"ssrDownsample\" min={0} step={1} />\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Clip to Frustum\" target={pipeline} propertyKey=\"clipToFrustum\" />\r\n        </>\r\n    );\r\n};\r\n\r\nexport const SSRRenderingPipelineThicknessProperties: FunctionComponent<{ pipeline: SSRRenderingPipeline }> = (props) => {\r\n    const { pipeline } = props;\r\n    const enableAutomaticThicknessComputation = useProperty(pipeline, \"enableAutomaticThicknessComputation\");\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Enable Automatic Thickness Computation\" target={pipeline} propertyKey=\"enableAutomaticThicknessComputation\" />\r\n            <Collapse visible={!!enableAutomaticThicknessComputation}>\r\n                <BoundProperty\r\n                    component={SwitchPropertyLine}\r\n                    label=\"Backface Force Depth Write Transparent Meshes\"\r\n                    target={pipeline}\r\n                    propertyKey=\"backfaceForceDepthWriteTransparentMeshes\"\r\n                />\r\n                <BoundProperty\r\n                    component={NumberInputPropertyLine}\r\n                    label=\"Backface Depth Texture Downsample\"\r\n                    target={pipeline}\r\n                    propertyKey=\"backfaceDepthTextureDownsample\"\r\n                    min={0}\r\n                    step={1}\r\n                />\r\n            </Collapse>\r\n        </>\r\n    );\r\n};\r\n\r\nexport const SSRRenderingPipelineBlurProperties: FunctionComponent<{ pipeline: SSRRenderingPipeline }> = (props) => {\r\n    const { pipeline } = props;\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"Blur Dispersion Strength\" target={pipeline} propertyKey=\"blurDispersionStrength\" min={0} step={0.001} />\r\n            <BoundProperty component={NumberInputPropertyLine} label=\"Blur Downsample\" target={pipeline} propertyKey=\"blurDownsample\" min={0} step={1} />\r\n        </>\r\n    );\r\n};\r\n\r\nexport const SSRRenderingPipelineAttenuationProperties: FunctionComponent<{ pipeline: SSRRenderingPipeline }> = (props) => {\r\n    const { pipeline } = props;\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Attenuate Screen Borders\" target={pipeline} propertyKey=\"attenuateScreenBorders\" />\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Attenuate Intersection Distance\" target={pipeline} propertyKey=\"attenuateIntersectionDistance\" />\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Attenuate Intersection Iterations\" target={pipeline} propertyKey=\"attenuateIntersectionIterations\" />\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Attenuate Facing Camera\" target={pipeline} propertyKey=\"attenuateFacingCamera\" />\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Attenuate Backface Reflection\" target={pipeline} propertyKey=\"attenuateBackfaceReflection\" />\r\n        </>\r\n    );\r\n};\r\n\r\nexport const SSRRenderingPipelineColorSpaceProperties: FunctionComponent<{ pipeline: SSRRenderingPipeline }> = (props) => {\r\n    const { pipeline } = props;\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Input Texture Color Is In Gamma Space\" target={pipeline} propertyKey=\"inputTextureColorIsInGammaSpace\" />\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Generate Output In Gamma Space\" target={pipeline} propertyKey=\"generateOutputInGammaSpace\" />\r\n        </>\r\n    );\r\n};\r\n","import type { FunctionComponent } from \"react\";\r\n\r\nimport type { IblShadowsRenderPipeline } from \"core/Rendering/IBLShadows/iblShadowsRenderPipeline\";\r\n\r\nimport { SwitchPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/switchPropertyLine\";\r\nimport { SyncedSliderPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/syncedSliderPropertyLine\";\r\nimport { NumberInputPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/inputPropertyLine\";\r\nimport { useProperty } from \"../../../hooks/compoundPropertyHooks\";\r\nimport { BoundProperty } from \"../boundProperty\";\r\nimport { ButtonLine } from \"shared-ui-components/fluent/hoc/buttonLine\";\r\n\r\nexport const IblShadowsRenderPipelineVoxelProperties: FunctionComponent<{ pipeline: IblShadowsRenderPipeline }> = (props) => {\r\n    const { pipeline } = props;\r\n\r\n    return (\r\n        <>\r\n            <ButtonLine label=\"Update Scene Bounds\" onClick={() => pipeline.updateSceneBounds()} />\r\n            <ButtonLine label=\"Revoxelize\" onClick={() => pipeline.updateVoxelization()} />\r\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"Shadow Opacity\" target={pipeline} propertyKey=\"shadowOpacity\" min={0} step={0.05} />\r\n            <BoundProperty component={NumberInputPropertyLine} label=\"Sample Directions\" target={pipeline} propertyKey=\"sampleDirections\" min={0} step={1} />\r\n            <BoundProperty component={NumberInputPropertyLine} label=\"Resolution Exp\" target={pipeline} propertyKey=\"resolutionExp\" min={4} step={1} />\r\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"Shadow Remanence\" target={pipeline} propertyKey=\"shadowRemanence\" min={0} step={0.01} />\r\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"Voxel Shadow Opacity\" target={pipeline} propertyKey=\"voxelShadowOpacity\" min={0} step={0.05} />\r\n        </>\r\n    );\r\n};\r\n\r\nexport const IblShadowsRenderPipelineScreenspaceProperties: FunctionComponent<{ pipeline: IblShadowsRenderPipeline }> = (props) => {\r\n    const { pipeline } = props;\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"SS Shadow Opacity\" target={pipeline} propertyKey=\"ssShadowOpacity\" min={0} step={0.01} />\r\n            <BoundProperty component={NumberInputPropertyLine} label=\"SS Shadow Sample Count\" target={pipeline} propertyKey=\"ssShadowSampleCount\" min={0} step={1} />\r\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"SS Shadow Stride\" target={pipeline} propertyKey=\"ssShadowStride\" min={0} step={0.01} />\r\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"SS Shadow Distance Scale\" target={pipeline} propertyKey=\"ssShadowDistanceScale\" min={0.01} step={0.01} />\r\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"SS Shadow Thickness Scale\" target={pipeline} propertyKey=\"ssShadowThicknessScale\" min={0.005} step={0.001} />\r\n        </>\r\n    );\r\n};\r\n\r\nexport const IblShadowsRenderPipelineDebugProperties: FunctionComponent<{ pipeline: IblShadowsRenderPipeline }> = (props) => {\r\n    const { pipeline } = props;\r\n    const allowDebugPasses = useProperty(pipeline, \"allowDebugPasses\");\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Allow Debug Passes\" target={pipeline} propertyKey=\"allowDebugPasses\" />\r\n            {allowDebugPasses && (\r\n                <>\r\n                    <BoundProperty component={SwitchPropertyLine} label=\"Voxel Debug Enabled\" target={pipeline} propertyKey=\"voxelDebugEnabled\" />\r\n                    <BoundProperty component={SwitchPropertyLine} label=\"CDF Debug Enabled\" target={pipeline} propertyKey=\"cdfDebugEnabled\" />\r\n                    <BoundProperty component={SwitchPropertyLine} label=\"Voxel Tracing Debug Enabled\" target={pipeline} propertyKey=\"voxelTracingDebugEnabled\" />\r\n                    <BoundProperty component={SwitchPropertyLine} label=\"Spatial Blur Debug Enabled\" target={pipeline} propertyKey=\"spatialBlurPassDebugEnabled\" />\r\n                    <BoundProperty component={SwitchPropertyLine} label=\"Accumulation Pass Debug Enabled\" target={pipeline} propertyKey=\"accumulationPassDebugEnabled\" />\r\n                </>\r\n            )}\r\n        </>\r\n    );\r\n};\r\n","import type { ServiceDefinition } from \"../../../modularity/serviceDefinition\";\r\nimport type { IPropertiesService } from \"./propertiesService\";\r\n\r\nimport { PostProcessRenderPipeline } from \"core/PostProcesses/RenderPipeline/postProcessRenderPipeline\";\r\nimport { DefaultRenderingPipeline } from \"core/PostProcesses/RenderPipeline/Pipelines/defaultRenderingPipeline\";\r\nimport { LensRenderingPipeline } from \"core/PostProcesses/RenderPipeline/Pipelines/lensRenderingPipeline\";\r\nimport { SSAORenderingPipeline } from \"core/PostProcesses/RenderPipeline/Pipelines/ssaoRenderingPipeline\";\r\nimport { SSAO2RenderingPipeline } from \"core/PostProcesses/RenderPipeline/Pipelines/ssao2RenderingPipeline\";\r\nimport { SSRRenderingPipeline } from \"core/PostProcesses/RenderPipeline/Pipelines/ssrRenderingPipeline\";\r\nimport { IblShadowsRenderPipeline } from \"core/Rendering/IBLShadows/iblShadowsRenderPipeline\";\r\n\r\nimport { PostProcessRenderPipelineSamplesProperties } from \"../../../components/properties/renderingPipelines/postProcessRenderPipelineProperties\";\r\nimport {\r\n    DefaultRenderingPipelineBloomProperties,\r\n    DefaultRenderingPipelineChromaticAberrationProperties,\r\n    DefaultRenderingPipelineDepthOfFieldProperties,\r\n    DefaultRenderingPipelineFxaaGlowProperties,\r\n    DefaultRenderingPipelineGrainProperties,\r\n    DefaultRenderingPipelineImageProcessingProperties,\r\n    DefaultRenderingPipelineSharpenProperties,\r\n} from \"../../../components/properties/renderingPipelines/defaultRenderingPipelineProperties\";\r\nimport {\r\n    LensRenderingPipelineOptionsProperties,\r\n    LensRenderingPipelineDepthOfFieldProperties,\r\n} from \"../../../components/properties/renderingPipelines/lensRenderingPipelineProperties\";\r\nimport { SSAORenderingPipelineProperties } from \"../../../components/properties/renderingPipelines/ssaoRenderingPipelineProperties\";\r\nimport { SSAO2RenderingPipelineSSAOProperties, SSAO2RenderingPipelineDenoiserProperties } from \"../../../components/properties/renderingPipelines/ssao2RenderingPipelineProperties\";\r\nimport {\r\n    SSRRenderingPipelineSSRProperties,\r\n    SSRRenderingPipelineThicknessProperties,\r\n    SSRRenderingPipelineBlurProperties,\r\n    SSRRenderingPipelineAttenuationProperties,\r\n    SSRRenderingPipelineColorSpaceProperties,\r\n} from \"../../../components/properties/renderingPipelines/ssrRenderingPipelineProperties\";\r\nimport {\r\n    IblShadowsRenderPipelineVoxelProperties,\r\n    IblShadowsRenderPipelineScreenspaceProperties,\r\n    IblShadowsRenderPipelineDebugProperties,\r\n} from \"../../../components/properties/renderingPipelines/iblShadowsRenderPipelineProperties\";\r\n\r\nimport { PropertiesServiceIdentity } from \"./propertiesService\";\r\n\r\nexport const RenderingPipelinePropertiesServiceDefinition: ServiceDefinition<[], [IPropertiesService]> = {\r\n    friendlyName: \"Rendering Pipeline Properties\",\r\n    consumes: [PropertiesServiceIdentity],\r\n    factory: (propertiesService) => {\r\n        // Base PostProcessRenderPipeline properties (Samples slider)\r\n        const baseRegistration = propertiesService.addSectionContent({\r\n            key: \"PostProcessRenderPipeline Properties\",\r\n            predicate: (entity: unknown) => entity instanceof PostProcessRenderPipeline,\r\n            content: [\r\n                {\r\n                    section: \"General\",\r\n                    component: ({ context }) => <PostProcessRenderPipelineSamplesProperties pipeline={context} />,\r\n                },\r\n            ],\r\n        });\r\n\r\n        // DefaultRenderingPipeline properties\r\n        const defaultRegistration = propertiesService.addSectionContent({\r\n            key: \"DefaultRenderingPipeline Properties\",\r\n            predicate: (entity: unknown) => entity instanceof DefaultRenderingPipeline,\r\n            content: [\r\n                {\r\n                    section: \"Bloom\",\r\n                    component: ({ context }) => <DefaultRenderingPipelineBloomProperties pipeline={context} />,\r\n                },\r\n                {\r\n                    section: \"Chromatic Aberration\",\r\n                    component: ({ context }) => <DefaultRenderingPipelineChromaticAberrationProperties pipeline={context} />,\r\n                },\r\n                {\r\n                    section: \"Depth of Field\",\r\n                    component: ({ context }) => <DefaultRenderingPipelineDepthOfFieldProperties pipeline={context} />,\r\n                },\r\n                {\r\n                    section: \"FXAA & Glow\",\r\n                    component: ({ context }) => <DefaultRenderingPipelineFxaaGlowProperties pipeline={context} />,\r\n                },\r\n                {\r\n                    section: \"Grain\",\r\n                    component: ({ context }) => <DefaultRenderingPipelineGrainProperties pipeline={context} />,\r\n                },\r\n                {\r\n                    section: \"Image Processing\",\r\n                    component: ({ context }) => <DefaultRenderingPipelineImageProcessingProperties pipeline={context} />,\r\n                },\r\n                {\r\n                    section: \"Sharpen\",\r\n                    component: ({ context }) => <DefaultRenderingPipelineSharpenProperties pipeline={context} />,\r\n                },\r\n            ],\r\n        });\r\n\r\n        // LensRenderingPipeline properties\r\n        const lensRegistration = propertiesService.addSectionContent({\r\n            key: \"LensRenderingPipeline Properties\",\r\n            predicate: (entity: unknown) => entity instanceof LensRenderingPipeline,\r\n            content: [\r\n                {\r\n                    section: \"Options\",\r\n                    component: ({ context }) => <LensRenderingPipelineOptionsProperties pipeline={context} />,\r\n                },\r\n                {\r\n                    section: \"Depth of Field\",\r\n                    component: ({ context }) => <LensRenderingPipelineDepthOfFieldProperties pipeline={context} />,\r\n                },\r\n            ],\r\n        });\r\n\r\n        // SSAORenderingPipeline properties\r\n        const ssaoRegistration = propertiesService.addSectionContent({\r\n            key: \"SSAORenderingPipeline Properties\",\r\n            predicate: (entity: unknown) => entity instanceof SSAORenderingPipeline,\r\n            content: [\r\n                {\r\n                    section: \"SSAO\",\r\n                    component: ({ context }) => <SSAORenderingPipelineProperties pipeline={context} />,\r\n                },\r\n            ],\r\n        });\r\n\r\n        // SSAO2RenderingPipeline properties\r\n        const ssao2Registration = propertiesService.addSectionContent({\r\n            key: \"SSAO2RenderingPipeline Properties\",\r\n            predicate: (entity: unknown) => entity instanceof SSAO2RenderingPipeline,\r\n            content: [\r\n                {\r\n                    section: \"SSAO\",\r\n                    component: ({ context }) => <SSAO2RenderingPipelineSSAOProperties pipeline={context} />,\r\n                },\r\n                {\r\n                    section: \"Denoiser\",\r\n                    component: ({ context }) => <SSAO2RenderingPipelineDenoiserProperties pipeline={context} />,\r\n                },\r\n            ],\r\n        });\r\n\r\n        // SSRRenderingPipeline properties\r\n        const ssrRegistration = propertiesService.addSectionContent({\r\n            key: \"SSRRenderingPipeline Properties\",\r\n            predicate: (entity: unknown) => entity instanceof SSRRenderingPipeline,\r\n            content: [\r\n                {\r\n                    section: \"SSR\",\r\n                    component: ({ context }) => <SSRRenderingPipelineSSRProperties pipeline={context} />,\r\n                },\r\n                {\r\n                    section: \"Automatic Thickness\",\r\n                    component: ({ context }) => <SSRRenderingPipelineThicknessProperties pipeline={context} />,\r\n                },\r\n                {\r\n                    section: \"Blur\",\r\n                    component: ({ context }) => <SSRRenderingPipelineBlurProperties pipeline={context} />,\r\n                },\r\n                {\r\n                    section: \"Attenuations\",\r\n                    component: ({ context }) => <SSRRenderingPipelineAttenuationProperties pipeline={context} />,\r\n                },\r\n                {\r\n                    section: \"Color Space\",\r\n                    component: ({ context }) => <SSRRenderingPipelineColorSpaceProperties pipeline={context} />,\r\n                },\r\n            ],\r\n        });\r\n\r\n        // IblShadowsRenderPipeline properties\r\n        const iblShadowsRegistration = propertiesService.addSectionContent({\r\n            key: \"IblShadowsRenderPipeline Properties\",\r\n            predicate: (entity: unknown) => entity instanceof IblShadowsRenderPipeline,\r\n            content: [\r\n                {\r\n                    section: \"Voxel Shadows\",\r\n                    component: ({ context }) => <IblShadowsRenderPipelineVoxelProperties pipeline={context} />,\r\n                },\r\n                {\r\n                    section: \"Screenspace Shadows\",\r\n                    component: ({ context }) => <IblShadowsRenderPipelineScreenspaceProperties pipeline={context} />,\r\n                },\r\n                {\r\n                    section: \"Debug\",\r\n                    component: ({ context }) => <IblShadowsRenderPipelineDebugProperties pipeline={context} />,\r\n                },\r\n            ],\r\n        });\r\n\r\n        return {\r\n            dispose: () => {\r\n                baseRegistration.dispose();\r\n                defaultRegistration.dispose();\r\n                lensRegistration.dispose();\r\n                ssaoRegistration.dispose();\r\n                ssao2Registration.dispose();\r\n                ssrRegistration.dispose();\r\n                iblShadowsRegistration.dispose();\r\n            },\r\n        };\r\n    },\r\n};\r\n","import { Scene } from \"core/scene\";\r\nimport type { FunctionComponent } from \"react\";\r\nimport { Color3PropertyLine, Color4PropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/colorPropertyLine\";\r\nimport { NumberDropdownPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/dropdownPropertyLine\";\r\nimport { BoundProperty } from \"../properties/boundProperty\";\r\nimport { SwitchPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/switchPropertyLine\";\r\nimport type { BaseTexture } from \"core/Materials/Textures/baseTexture\";\r\nimport type { Nullable } from \"core/types\";\r\nimport { LinkPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/linkPropertyLine\";\r\nimport type { ISelectionService } from \"../../services/selectionService\";\r\nimport { FileUploadLine } from \"shared-ui-components/fluent/hoc/fileUploadLine\";\r\nimport { Logger } from \"core/Misc/logger\";\r\nimport { Tools } from \"core/Misc/tools\";\r\nimport { CubeTexture } from \"core/Materials/Textures/cubeTexture\";\r\nimport { useProperty } from \"../../hooks/compoundPropertyHooks\";\r\nimport { SyncedSliderPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/syncedSliderPropertyLine\";\r\nimport { NumberInputPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/inputPropertyLine\";\r\nimport { ImageProcessingConfiguration } from \"core/Materials/imageProcessingConfiguration\";\r\nimport { Vector3PropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/vectorPropertyLine\";\r\nimport { MessageBar } from \"shared-ui-components/fluent/primitives/messageBar\";\r\nimport { ButtonLine } from \"shared-ui-components/fluent/hoc/buttonLine\";\r\nimport { Collapse } from \"shared-ui-components/fluent/primitives/collapse\";\r\n\r\nlet StoredEnvironmentTexture: Nullable<BaseTexture>;\r\n\r\nexport const SceneMaterialImageProcessingProperties: FunctionComponent<{ scene: Scene }> = (props) => {\r\n    const { scene } = props;\r\n    const imageProcessing = scene.imageProcessingConfiguration;\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty\r\n                component={SyncedSliderPropertyLine}\r\n                label=\"Contrast\"\r\n                min={0}\r\n                max={4}\r\n                step={0.1}\r\n                target={imageProcessing}\r\n                propertyKey=\"contrast\"\r\n                propertyPath=\"imageProcessingConfiguration.contrast\"\r\n            />\r\n            <BoundProperty\r\n                component={SyncedSliderPropertyLine}\r\n                label=\"Exposure\"\r\n                min={0}\r\n                max={4}\r\n                step={0.1}\r\n                target={imageProcessing}\r\n                propertyKey=\"exposure\"\r\n                propertyPath=\"imageProcessingConfiguration.exposure\"\r\n            />\r\n            <BoundProperty\r\n                component={SwitchPropertyLine}\r\n                label=\"Tone Mapping\"\r\n                target={imageProcessing}\r\n                propertyKey=\"toneMappingEnabled\"\r\n                propertyPath=\"imageProcessingConfiguration.toneMappingEnabled\"\r\n            />\r\n            <Collapse visible={imageProcessing.toneMappingEnabled}>\r\n                <BoundProperty\r\n                    component={NumberDropdownPropertyLine}\r\n                    options={\r\n                        [\r\n                            { label: \"Standard\", value: ImageProcessingConfiguration.TONEMAPPING_STANDARD },\r\n                            { label: \"ACES\", value: ImageProcessingConfiguration.TONEMAPPING_ACES },\r\n                            { label: \"Khronos PBR Neutral\", value: ImageProcessingConfiguration.TONEMAPPING_KHR_PBR_NEUTRAL },\r\n                        ] as const\r\n                    }\r\n                    label=\"Tone Mapping Type\"\r\n                    target={imageProcessing}\r\n                    propertyKey=\"toneMappingType\"\r\n                    propertyPath=\"imageProcessingConfiguration.toneMappingType\"\r\n                />\r\n            </Collapse>\r\n            <BoundProperty\r\n                component={SwitchPropertyLine}\r\n                label=\"Vignette\"\r\n                target={imageProcessing}\r\n                propertyKey=\"vignetteEnabled\"\r\n                propertyPath=\"imageProcessingConfiguration.vignetteEnabled\"\r\n            />\r\n            <BoundProperty\r\n                component={SyncedSliderPropertyLine}\r\n                label=\"Vignette FOV\"\r\n                min={0}\r\n                max={Math.PI}\r\n                step={0.1}\r\n                target={imageProcessing}\r\n                propertyKey=\"vignetteCameraFov\"\r\n                propertyPath=\"imageProcessingConfiguration.vignetteCameraFov\"\r\n            />\r\n            <BoundProperty\r\n                component={SyncedSliderPropertyLine}\r\n                label=\"Vignette Center X\"\r\n                min={0}\r\n                max={1}\r\n                step={0.1}\r\n                target={imageProcessing}\r\n                propertyKey=\"vignetteCenterX\"\r\n                propertyPath=\"imageProcessingConfiguration.vignetteCenterX\"\r\n            />\r\n            <BoundProperty\r\n                component={SyncedSliderPropertyLine}\r\n                label=\"Vignette Center Y\"\r\n                min={0}\r\n                max={1}\r\n                step={0.1}\r\n                target={imageProcessing}\r\n                propertyKey=\"vignetteCenterY\"\r\n                propertyPath=\"imageProcessingConfiguration.vignetteCenterY\"\r\n            />\r\n            <BoundProperty\r\n                component={Color4PropertyLine}\r\n                label=\"Vignette Color\"\r\n                target={imageProcessing}\r\n                propertyKey=\"vignetteColor\"\r\n                propertyPath=\"imageProcessingConfiguration.vignetteColor\"\r\n            />\r\n            <BoundProperty\r\n                component={NumberDropdownPropertyLine}\r\n                options={\r\n                    [\r\n                        { label: \"Multiply\", value: ImageProcessingConfiguration.VIGNETTEMODE_MULTIPLY },\r\n                        { label: \"Opaque\", value: ImageProcessingConfiguration.VIGNETTEMODE_OPAQUE },\r\n                    ] as const\r\n                }\r\n                label=\"Vignette Blend Mode\"\r\n                target={imageProcessing}\r\n                propertyKey=\"vignetteBlendMode\"\r\n                propertyPath=\"imageProcessingConfiguration.vignetteBlendMode\"\r\n            />\r\n            <BoundProperty\r\n                component={SwitchPropertyLine}\r\n                label=\"Dithering\"\r\n                target={imageProcessing}\r\n                propertyKey=\"ditheringEnabled\"\r\n                propertyPath=\"imageProcessingConfiguration.ditheringEnabled\"\r\n            />\r\n            <BoundProperty\r\n                component={SyncedSliderPropertyLine}\r\n                label=\"Dithering Intensity\"\r\n                min={0}\r\n                max={1}\r\n                step={0.5 / 255.0}\r\n                target={imageProcessing}\r\n                propertyKey=\"ditheringIntensity\"\r\n                propertyPath=\"imageProcessingConfiguration.ditheringIntensity\"\r\n            />\r\n        </>\r\n    );\r\n};\r\n\r\nexport const ScenePhysicsProperties: FunctionComponent<{ scene: Scene }> = (props) => {\r\n    const { scene } = props;\r\n\r\n    const physicsEngine = scene.getPhysicsEngine();\r\n\r\n    return (\r\n        <>\r\n            {physicsEngine ? (\r\n                <>\r\n                    <NumberInputPropertyLine\r\n                        label=\"Time Step\"\r\n                        value={physicsEngine.getTimeStep()}\r\n                        onChange={(value) => {\r\n                            physicsEngine.setTimeStep(value);\r\n                        }}\r\n                    />\r\n                    <Vector3PropertyLine\r\n                        label=\"Gravity\"\r\n                        value={physicsEngine.gravity}\r\n                        onChange={(value) => {\r\n                            physicsEngine.setGravity(value);\r\n                        }}\r\n                    />\r\n                </>\r\n            ) : (\r\n                <MessageBar\r\n                    intent=\"info\"\r\n                    title=\"No physics engine\"\r\n                    message=\"There is no physics engine enabled on this scene.\"\r\n                    docLink=\"https://doc.babylonjs.com/communityExtensions/editor/physics/usingPhysics/\"\r\n                />\r\n            )}\r\n        </>\r\n    );\r\n};\r\n\r\nexport const SceneCollisionsProperties: FunctionComponent<{ scene: Scene }> = (props) => {\r\n    const { scene } = props;\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty component={Vector3PropertyLine} label=\"Gravity\" target={scene} propertyKey=\"gravity\" />\r\n        </>\r\n    );\r\n};\r\n\r\nexport const SceneShadowsProperties: FunctionComponent<{ scene: Scene }> = (props) => {\r\n    const { scene } = props;\r\n\r\n    return (\r\n        <>\r\n            <ButtonLine\r\n                label={\"Normalize scene\"}\r\n                onClick={() => {\r\n                    for (const mesh of scene.meshes) {\r\n                        mesh.normalizeToUnitCube(true);\r\n                        mesh.computeWorldMatrix(true);\r\n                    }\r\n                }}\r\n            />\r\n        </>\r\n    );\r\n};\r\n\r\nexport const SceneRenderingProperties: FunctionComponent<{ scene: Scene; selectionService: ISelectionService }> = (props) => {\r\n    const { scene, selectionService } = props;\r\n\r\n    const envTexture = useProperty(scene, \"environmentTexture\");\r\n    const fogMode = useProperty(scene, \"fogMode\");\r\n\r\n    return (\r\n        <>\r\n            <NumberDropdownPropertyLine\r\n                options={\r\n                    [\r\n                        { label: \"Point\", value: 0 },\r\n                        { label: \"Wireframe\", value: 1 },\r\n                        { label: \"Solid\", value: 2 },\r\n                    ] as const\r\n                }\r\n                label=\"Rendering Mode\"\r\n                value={scene.forcePointsCloud ? 0 : scene.forceWireframe ? 1 : 2}\r\n                onChange={(value) => {\r\n                    switch (value) {\r\n                        case 0:\r\n                            scene.forcePointsCloud = true;\r\n                            scene.forceWireframe = false;\r\n                            break;\r\n                        case 1:\r\n                            scene.forcePointsCloud = false;\r\n                            scene.forceWireframe = true;\r\n                            break;\r\n                        case 2:\r\n                            scene.forcePointsCloud = false;\r\n                            scene.forceWireframe = false;\r\n                            break;\r\n                    }\r\n                }}\r\n            />\r\n\r\n            <BoundProperty component={Color4PropertyLine} label=\"Clear Color\" target={scene} propertyKey=\"clearColor\" />\r\n\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Clear Color Enabled\" target={scene} propertyKey=\"autoClear\" />\r\n\r\n            <BoundProperty component={Color3PropertyLine} label=\"Ambient Color\" target={scene} propertyKey=\"ambientColor\" />\r\n\r\n            <SwitchPropertyLine\r\n                label=\"Environment Texture (IBL)\"\r\n                value={envTexture ? true : false}\r\n                onChange={() => {\r\n                    if (envTexture) {\r\n                        StoredEnvironmentTexture = envTexture;\r\n                        scene.environmentTexture = null;\r\n                    } else {\r\n                        scene.environmentTexture = StoredEnvironmentTexture;\r\n                        StoredEnvironmentTexture = null;\r\n                    }\r\n                }}\r\n            />\r\n\r\n            {scene.environmentTexture && (\r\n                <LinkPropertyLine label=\"Env. texture\" value={scene.environmentTexture.name} onLink={() => (selectionService.selectedEntity = scene.environmentTexture)} />\r\n            )}\r\n\r\n            <FileUploadLine\r\n                label=\"Update Environment Texture\"\r\n                accept=\".dds, .env\"\r\n                onClick={(files) => {\r\n                    if (files.length > 0) {\r\n                        const file = files[0];\r\n                        const isFileDDS = file.name.toLowerCase().indexOf(\".dds\") > 0;\r\n                        const isFileEnv = file.name.toLowerCase().indexOf(\".env\") > 0;\r\n                        if (!isFileDDS && !isFileEnv) {\r\n                            Logger.Error(\"Unable to update environment texture. Please select a dds or env file.\");\r\n                            return;\r\n                        }\r\n\r\n                        Tools.ReadFile(\r\n                            file,\r\n                            (data) => {\r\n                                const blob = new Blob([data], { type: \"octet/stream\" });\r\n                                const url = URL.createObjectURL(blob);\r\n                                if (isFileDDS) {\r\n                                    scene.environmentTexture = CubeTexture.CreateFromPrefilteredData(url, scene, \".dds\");\r\n                                } else {\r\n                                    scene.environmentTexture = new CubeTexture(\r\n                                        url,\r\n                                        scene,\r\n                                        undefined,\r\n                                        undefined,\r\n                                        undefined,\r\n                                        () => {},\r\n                                        (message) => {\r\n                                            if (message) {\r\n                                                Logger.Error(message);\r\n                                            }\r\n                                        },\r\n                                        undefined,\r\n                                        undefined,\r\n                                        \".env\"\r\n                                    );\r\n                                }\r\n                            },\r\n                            undefined,\r\n                            true\r\n                        );\r\n                    }\r\n                }}\r\n            />\r\n\r\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"IBL Intensity\" min={0} max={2} step={0.01} target={scene} propertyKey=\"iblIntensity\" />\r\n\r\n            <BoundProperty\r\n                component={NumberDropdownPropertyLine}\r\n                options={\r\n                    [\r\n                        { label: \"None\", value: Scene.FOGMODE_NONE },\r\n                        { label: \"Linear\", value: Scene.FOGMODE_LINEAR },\r\n                        { label: \"Exp\", value: Scene.FOGMODE_EXP },\r\n                        { label: \"Exp2\", value: Scene.FOGMODE_EXP2 },\r\n                    ] as const\r\n                }\r\n                label=\"Fog Mode\"\r\n                target={scene}\r\n                propertyKey=\"fogMode\"\r\n            />\r\n            <Collapse visible={fogMode !== Scene.FOGMODE_NONE}>\r\n                <>\r\n                    {fogMode !== Scene.FOGMODE_NONE && <BoundProperty component={Color3PropertyLine} label=\"Fog Color\" target={scene} propertyKey=\"fogColor\" />}\r\n                    {(fogMode === Scene.FOGMODE_EXP || fogMode === Scene.FOGMODE_EXP2) && (\r\n                        <BoundProperty component={NumberInputPropertyLine} label=\"Fog Density\" target={scene} propertyKey=\"fogDensity\" step={0.1} />\r\n                    )}\r\n                    {fogMode === Scene.FOGMODE_LINEAR && <BoundProperty component={NumberInputPropertyLine} label=\"Fog Start\" target={scene} propertyKey=\"fogStart\" step={0.1} />}\r\n                    {fogMode === Scene.FOGMODE_LINEAR && <BoundProperty component={NumberInputPropertyLine} label=\"Fog End\" target={scene} propertyKey=\"fogEnd\" step={0.1} />}\r\n                </>\r\n            </Collapse>\r\n        </>\r\n    );\r\n};\r\n","import type { ServiceDefinition } from \"../../../modularity/serviceDefinition\";\r\nimport type { IPropertiesService } from \"./propertiesService\";\r\nimport { PropertiesServiceIdentity } from \"./propertiesService\";\r\nimport type { ISelectionService } from \"../../selectionService\";\r\nimport { SelectionServiceIdentity } from \"../../selectionService\";\r\nimport {\r\n    SceneCollisionsProperties,\r\n    SceneMaterialImageProcessingProperties,\r\n    ScenePhysicsProperties,\r\n    SceneRenderingProperties,\r\n    SceneShadowsProperties,\r\n} from \"../../../components/scene/sceneProperties\";\r\nimport { Scene } from \"core/scene\";\r\n\r\nexport const ScenePropertiesServiceDefinition: ServiceDefinition<[], [IPropertiesService, ISelectionService]> = {\r\n    friendlyName: \"Scene Properties\",\r\n    consumes: [PropertiesServiceIdentity, SelectionServiceIdentity],\r\n    factory: (propertiesService, selectionService) => {\r\n        const sceneContentRegistration = propertiesService.addSectionContent({\r\n            key: \"Scene Properties\",\r\n            predicate: (entity: unknown) => entity instanceof Scene,\r\n            content: [\r\n                {\r\n                    section: \"Rendering\",\r\n                    component: ({ context }) => <SceneRenderingProperties scene={context} selectionService={selectionService} />,\r\n                },\r\n                {\r\n                    section: \"Material Image Processing\",\r\n                    component: ({ context }) => <SceneMaterialImageProcessingProperties scene={context} />,\r\n                },\r\n                {\r\n                    section: \"Physics\",\r\n                    component: ({ context }) => <ScenePhysicsProperties scene={context} />,\r\n                },\r\n                {\r\n                    section: \"Collisions\",\r\n                    component: ({ context }) => <SceneCollisionsProperties scene={context} />,\r\n                },\r\n                {\r\n                    section: \"Shadows\",\r\n                    component: ({ context }) => <SceneShadowsProperties scene={context} />,\r\n                },\r\n            ],\r\n        });\r\n        return {\r\n            dispose: () => {\r\n                sceneContentRegistration.dispose();\r\n            },\r\n        };\r\n    },\r\n};\r\n","import type { Bone } from \"core/index\";\r\n\r\nimport type { FunctionComponent } from \"react\";\r\nimport { LinkToEntityPropertyLine } from \"../linkToEntityPropertyLine\";\r\nimport type { ISelectionService } from \"../../../services/selectionService\";\r\n\r\nexport const BoneGeneralProperties: FunctionComponent<{ bone: Bone; selectionService: ISelectionService }> = (props) => {\r\n    const { bone } = props;\r\n\r\n    return (\r\n        <>\r\n            <LinkToEntityPropertyLine\r\n                key=\"Linked Transform Node\"\r\n                label=\"Linked Node\"\r\n                description=\"The transform node linked to this bone.\"\r\n                entity={bone.getTransformNode()}\r\n                selectionService={props.selectionService}\r\n            />\r\n        </>\r\n    );\r\n};\r\n","import type { ISkeletonViewerDisplayOptions, Skeleton } from \"core/index\";\r\nimport type { FunctionComponent } from \"react\";\r\n\r\nimport type { DropdownOption } from \"shared-ui-components/fluent/primitives/dropdown\";\r\n\r\nimport { useReducer, useState } from \"react\";\r\n\r\nimport { SkeletonViewer } from \"core/Debug/skeletonViewer\";\r\nimport { ButtonLine } from \"shared-ui-components/fluent/hoc/buttonLine\";\r\nimport { NumberDropdownPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/dropdownPropertyLine\";\r\nimport { NumberInputPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/inputPropertyLine\";\r\nimport { Collapse } from \"shared-ui-components/fluent/primitives/collapse\";\r\nimport { SwitchPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/switchPropertyLine\";\r\nimport { BoundProperty } from \"../boundProperty\";\r\nimport { StringifiedPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/stringifiedPropertyLine\";\r\n\r\nexport const SkeletonGeneralProperties: FunctionComponent<{ skeleton: Skeleton }> = (props) => {\r\n    const { skeleton } = props;\r\n\r\n    return (\r\n        <>\r\n            <StringifiedPropertyLine key=\"SkeletonBoneCount\" label=\"Bone Count\" description=\"The number of bones of the skeleton.\" value={skeleton.bones.length} />\r\n            <BoundProperty\r\n                key=\"SkeletonUseTextureToStoreBoneMatrices2\"\r\n                component={SwitchPropertyLine}\r\n                label=\"Use Texture to Store Bone Matrices\"\r\n                target={skeleton}\r\n                propertyKey=\"useTextureToStoreBoneMatrices\"\r\n            />\r\n            <ButtonLine key=\"SkeletonReturnToRest\" label=\"Return to Rest\" onClick={() => skeleton.returnToRest()} />\r\n        </>\r\n    );\r\n};\r\n\r\nconst ViewerDisplayModes = [\r\n    { label: \"Lines\", value: SkeletonViewer.DISPLAY_LINES },\r\n    { label: \"Spheres\", value: SkeletonViewer.DISPLAY_SPHERES },\r\n    { label: \"Sphere and Spurs\", value: SkeletonViewer.DISPLAY_SPHERE_AND_SPURS },\r\n] as const satisfies DropdownOption<number>[];\r\n\r\ninterface IViewerOptions extends Required<ISkeletonViewerDisplayOptions> {\r\n    displayMode: number;\r\n}\r\n\r\nexport const SkeletonViewerProperties: FunctionComponent<{ skeleton: Skeleton }> = (props) => {\r\n    const { skeleton } = props;\r\n    const scene = skeleton.getScene();\r\n\r\n    const viewers = scene.meshes\r\n        .filter((mesh) => mesh.skeleton === skeleton && mesh.reservedDataStore?.skeletonViewer)\r\n        .map((mesh) => mesh.reservedDataStore!.skeletonViewer as SkeletonViewer);\r\n\r\n    const [enabled, setEnabled] = useState(viewers.length > 0);\r\n\r\n    const initialState = {\r\n        displayMode: SkeletonViewer.DISPLAY_LINES,\r\n        midStep: 0.235,\r\n        midStepFactor: 0.155,\r\n        sphereBaseSize: 0.15,\r\n        sphereScaleUnit: 2,\r\n        sphereFactor: 0.865,\r\n        spurFollowsChild: false,\r\n        showLocalAxes: false,\r\n        localAxesSize: 0.075,\r\n    };\r\n\r\n    if (viewers.length > 0) {\r\n        initialState.displayMode = viewers[0].displayMode;\r\n        if (viewers[0].options.displayOptions) {\r\n            Object.assign(initialState, viewers[0].options.displayOptions);\r\n        }\r\n    }\r\n\r\n    const [options, updateOptions] = useReducer((options: IViewerOptions, deltaOptions: Partial<IViewerOptions>) => {\r\n        const mergedOptions = { ...options, ...deltaOptions } as IViewerOptions;\r\n\r\n        for (const viewer of viewers) {\r\n            viewer.changeDisplayMode(mergedOptions.displayMode);\r\n            viewer.changeDisplayOptions(\"midStep\", mergedOptions.midStep);\r\n            viewer.changeDisplayOptions(\"midStepFactor\", mergedOptions.midStepFactor);\r\n            viewer.changeDisplayOptions(\"sphereBaseSize\", mergedOptions.sphereBaseSize);\r\n            viewer.changeDisplayOptions(\"sphereScaleUnit\", mergedOptions.sphereScaleUnit);\r\n            viewer.changeDisplayOptions(\"sphereFactor\", mergedOptions.sphereFactor);\r\n            viewer.changeDisplayOptions(\"spurFollowsChild\", mergedOptions.spurFollowsChild);\r\n            viewer.changeDisplayOptions(\"showLocalAxes\", mergedOptions.showLocalAxes);\r\n            viewer.changeDisplayOptions(\"localAxesSize\", mergedOptions.localAxesSize);\r\n        }\r\n\r\n        return mergedOptions;\r\n    }, initialState);\r\n\r\n    return (\r\n        <>\r\n            <SwitchPropertyLine\r\n                key=\"SkeletonViewerEnabled\"\r\n                label=\"Enabled\"\r\n                description=\"Whether skeleton viewer is enabled or not.\"\r\n                value={enabled}\r\n                onChange={(checked) => {\r\n                    if (checked) {\r\n                        for (const mesh of scene.meshes) {\r\n                            if (mesh.skeleton === skeleton && !mesh.reservedDataStore?.skeletonViewer) {\r\n                                mesh.reservedDataStore ||= {};\r\n                                mesh.reservedDataStore.skeletonViewer = new SkeletonViewer(skeleton, mesh, scene);\r\n                            }\r\n                        }\r\n                    } else {\r\n                        for (const mesh of scene.meshes) {\r\n                            if (mesh.skeleton === skeleton && mesh.reservedDataStore?.skeletonViewer) {\r\n                                mesh.reservedDataStore.skeletonViewer.dispose();\r\n                                delete mesh.reservedDataStore.skeletonViewer;\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    setEnabled(checked);\r\n                    updateOptions({});\r\n                }}\r\n            />\r\n\r\n            <Collapse visible={enabled}>\r\n                <>\r\n                    <NumberDropdownPropertyLine\r\n                        key=\"SkeletonViewerDisplayMode\"\r\n                        label=\"Display Mode\"\r\n                        options={ViewerDisplayModes}\r\n                        description=\"Show lines, spheres, or sphere and spurs.\"\r\n                        value={options.displayMode}\r\n                        onChange={(value) => updateOptions({ displayMode: value })}\r\n                    />\r\n                    <Collapse visible={options.displayMode !== SkeletonViewer.DISPLAY_LINES}>\r\n                        <>\r\n                            <NumberInputPropertyLine\r\n                                key=\"SkeletonViewerDisplayOptionsMidStep\"\r\n                                label=\"Mid Step\"\r\n                                value={options.midStep}\r\n                                description=\"How far down to start tapering the bone spurs.\"\r\n                                onChange={(value) => updateOptions({ midStep: value })}\r\n                            />\r\n                            <NumberInputPropertyLine\r\n                                key=\"SkeletonViewerDisplayOptionsMidStepFactor\"\r\n                                label=\"Mid Step Factor\"\r\n                                value={options.midStepFactor}\r\n                                description=\"How big is the midStep?\"\r\n                                onChange={(value) => updateOptions({ midStepFactor: value })}\r\n                            />\r\n                            <NumberInputPropertyLine\r\n                                key=\"SkeletonViewerDisplayOptionsSphereBaseSize\"\r\n                                label=\"Sphere Base Size\"\r\n                                value={options.sphereBaseSize}\r\n                                description=\"Base for the Sphere Size.\"\r\n                                onChange={(value) => updateOptions({ sphereBaseSize: value })}\r\n                            />\r\n                            <NumberInputPropertyLine\r\n                                key=\"SkeletonViewerDisplayOptionsSphereScaleUnit\"\r\n                                label=\"Sphere Scale Unit\"\r\n                                value={options.sphereScaleUnit}\r\n                                description=\"The ratio of the sphere to the longest bone in units.\"\r\n                                onChange={(value) => updateOptions({ sphereScaleUnit: value })}\r\n                            />\r\n                            <NumberInputPropertyLine\r\n                                key=\"SkeletonViewerDisplayOptionsSphereFactor\"\r\n                                label=\"Sphere Factor\"\r\n                                value={options.sphereFactor}\r\n                                description=\"Ratio for the Sphere Size.\"\r\n                                onChange={(value) => updateOptions({ sphereFactor: value })}\r\n                            />\r\n                            <SwitchPropertyLine\r\n                                key=\"SkeletonViewerDisplayOptionsSpurFollowsChild\"\r\n                                label=\"Spur Follows Child\"\r\n                                value={options.spurFollowsChild}\r\n                                description=\"Whether a spur should attach its far end to the child bone position.\"\r\n                                onChange={(checked) => updateOptions({ spurFollowsChild: checked })}\r\n                            />\r\n                            <SwitchPropertyLine\r\n                                key=\"SkeletonViewerDisplayOptionsShowLocalAxes\"\r\n                                label=\"Show Local Axes\"\r\n                                value={options.showLocalAxes}\r\n                                description=\"Whether to show local axes or not.\"\r\n                                onChange={(checked) => updateOptions({ showLocalAxes: checked })}\r\n                            />\r\n                            <NumberInputPropertyLine\r\n                                key=\"SkeletonViewerDisplayOptionsLocalAxesSize\"\r\n                                label=\"Local Axes Size\"\r\n                                value={options.localAxesSize}\r\n                                description=\"Length of each local axis.\"\r\n                                onChange={(value) => updateOptions({ localAxesSize: value })}\r\n                            />\r\n                        </>\r\n                    </Collapse>\r\n                </>\r\n            </Collapse>\r\n        </>\r\n    );\r\n};\r\n","import type { ServiceDefinition } from \"../../../modularity/serviceDefinition\";\r\nimport type { ISelectionService } from \"../../selectionService\";\r\nimport type { IPropertiesService } from \"./propertiesService\";\r\n\r\nimport { Bone } from \"core/Bones/bone\";\r\nimport { Skeleton } from \"core/Bones/skeleton\";\r\nimport { BoneGeneralProperties } from \"../../../components/properties/skeleton/boneProperties\";\r\nimport { SkeletonGeneralProperties, SkeletonViewerProperties } from \"../../../components/properties/skeleton/skeletonProperties\";\r\nimport { SelectionServiceIdentity } from \"../../selectionService\";\r\nimport { PropertiesServiceIdentity } from \"./propertiesService\";\r\n\r\nexport const SkeletonPropertiesServiceDefinition: ServiceDefinition<[], [IPropertiesService, ISelectionService]> = {\r\n    friendlyName: \"Skeleton Properties\",\r\n    consumes: [PropertiesServiceIdentity, SelectionServiceIdentity],\r\n    factory: (propertiesService, selectionService) => {\r\n        const skeletonGeneralContentRegistration = propertiesService.addSectionContent({\r\n            key: \"Skeleton General Properties\",\r\n            predicate: (entity) => entity instanceof Skeleton,\r\n            content: [\r\n                {\r\n                    section: \"General\",\r\n                    component: ({ context }) => <SkeletonGeneralProperties skeleton={context} />,\r\n                },\r\n            ],\r\n        });\r\n\r\n        const skeletonViewerContentRegistration = propertiesService.addSectionContent({\r\n            key: \"Skeleton Viewer Properties\",\r\n            predicate: (entity) => entity instanceof Skeleton,\r\n            content: [\r\n                {\r\n                    section: \"Viewer\",\r\n                    component: ({ context }) => <SkeletonViewerProperties skeleton={context} />,\r\n                },\r\n            ],\r\n        });\r\n\r\n        const boneGeneralContentRegistration = propertiesService.addSectionContent({\r\n            key: \"Bone General Properties\",\r\n            predicate: (entity) => entity instanceof Bone,\r\n            content: [\r\n                {\r\n                    section: \"General\",\r\n                    component: ({ context }) => <BoneGeneralProperties bone={context} selectionService={selectionService} />,\r\n                },\r\n            ],\r\n        });\r\n\r\n        return {\r\n            dispose: () => {\r\n                boneGeneralContentRegistration.dispose();\r\n                skeletonViewerContentRegistration.dispose();\r\n                skeletonGeneralContentRegistration.dispose();\r\n            },\r\n        };\r\n    },\r\n};\r\n","import { PropertyLine } from \"./propertyLine\";\r\nimport type { PropertyLineProps } from \"./propertyLine\";\r\nimport type { FunctionComponent } from \"react\";\r\nimport { SpinButton } from \"../../primitives/spinButton\";\r\nimport type { SpinButtonProps } from \"../../primitives/spinButton\";\r\n\r\nexport const SpinButtonPropertyLine: FunctionComponent<PropertyLineProps<number> & SpinButtonProps> = (props) => {\r\n    SpinButtonPropertyLine.displayName = \"SpinButtonPropertyLine\";\r\n    return (\r\n        <PropertyLine {...props}>\r\n            <SpinButton {...props} />\r\n        </PropertyLine>\r\n    );\r\n};\r\n","import type { FunctionComponent } from \"react\";\r\n\r\nimport type { ISelectionService } from \"../../../services/selectionService\";\r\n\r\nimport { useCallback } from \"react\";\r\n\r\nimport { Constants } from \"core/Engines/constants\";\r\nimport { RenderingManager } from \"core/Rendering/renderingManager\";\r\nimport { Sprite } from \"core/Sprites/sprite\";\r\nimport { SpriteManager } from \"core/Sprites/spriteManager\";\r\nimport { Tools } from \"core/Misc/tools\";\r\nimport { AlphaModeOptions } from \"shared-ui-components/constToOptionsMaps\";\r\nimport { NumberDropdownPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/dropdownPropertyLine\";\r\nimport { SpinButtonPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/spinButtonPropertyLine\";\r\nimport { SwitchPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/switchPropertyLine\";\r\nimport { SyncedSliderPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/syncedSliderPropertyLine\";\r\nimport { TextPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/textPropertyLine\";\r\nimport { BoundProperty } from \"../boundProperty\";\r\nimport { TextureSelectorPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/entitySelectorPropertyLine\";\r\nimport { ButtonLine } from \"shared-ui-components/fluent/hoc/buttonLine\";\r\nimport { FileUploadLine } from \"shared-ui-components/fluent/hoc/fileUploadLine\";\r\nimport { useProperty } from \"../../../hooks/compoundPropertyHooks\";\r\nimport { NotifyPlaygroundOfSnippetChange, PersistSnippetId, PromptForSnippetId, SaveToSnippetServer } from \"../../../utils/snippetUtils\";\r\nimport { CloudArrowDownRegular, CloudArrowUpRegular } from \"@fluentui/react-icons\";\r\n\r\nconst SnippetDashboardStorageKey = \"Babylon/InspectorV2/SnippetDashboard/SpriteManagers\";\r\n\r\nexport const SpriteManagerGeneralProperties: FunctionComponent<{ spriteManager: SpriteManager; selectionService: ISelectionService }> = (props) => {\r\n    const { spriteManager, selectionService } = props;\r\n\r\n    return (\r\n        <>\r\n            <TextPropertyLine label=\"Capacity\" value={spriteManager.capacity.toString()} />\r\n            <BoundProperty\r\n                component={TextureSelectorPropertyLine}\r\n                label=\"Texture\"\r\n                target={spriteManager}\r\n                propertyKey=\"texture\"\r\n                scene={spriteManager.scene}\r\n                onLink={(texture) => (selectionService.selectedEntity = texture)}\r\n            />\r\n        </>\r\n    );\r\n};\r\n\r\nexport const SpriteManagerOtherProperties: FunctionComponent<{ spriteManager: SpriteManager }> = (props) => {\r\n    const { spriteManager } = props;\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty component={SwitchPropertyLine} key=\"IsPickable\" label=\"Pickable\" target={spriteManager} propertyKey=\"isPickable\" />\r\n            <BoundProperty component={SwitchPropertyLine} key=\"FogEnabled\" label=\"Fog Enabled\" target={spriteManager} propertyKey=\"fogEnabled\" />\r\n            <BoundProperty\r\n                component={SwitchPropertyLine}\r\n                key=\"DepthWrite\"\r\n                label=\"Depth Write\"\r\n                target={spriteManager}\r\n                propertyKey=\"disableDepthWrite\"\r\n                convertTo={(value) => !value}\r\n                convertFrom={(value) => !value}\r\n            />\r\n            <BoundProperty\r\n                component={SyncedSliderPropertyLine}\r\n                key=\"RenderingGroupId\"\r\n                label=\"Rendering Group ID\"\r\n                target={spriteManager}\r\n                propertyKey=\"renderingGroupId\"\r\n                min={RenderingManager.MIN_RENDERINGGROUPS}\r\n                max={RenderingManager.MAX_RENDERINGGROUPS}\r\n                step={1}\r\n            />\r\n            <BoundProperty component={NumberDropdownPropertyLine} key=\"BlendMode\" label=\"Blend Mode\" target={spriteManager} propertyKey=\"blendMode\" options={AlphaModeOptions} />\r\n        </>\r\n    );\r\n};\r\n\r\nexport const SpriteManagerCellProperties: FunctionComponent<{ spriteManager: SpriteManager }> = (props) => {\r\n    const { spriteManager } = props;\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty component={SpinButtonPropertyLine} key=\"CellWidth\" label=\"Cell Width\" target={spriteManager} propertyKey=\"cellWidth\" min={1} step={1} />\r\n            <BoundProperty component={SpinButtonPropertyLine} key=\"CellHeight\" label=\"Cell Height\" target={spriteManager} propertyKey=\"cellHeight\" min={1} step={1} />\r\n        </>\r\n    );\r\n};\r\n\r\nexport const SpriteManagerFileProperties: FunctionComponent<{ spriteManager: SpriteManager; selectionService: ISelectionService }> = (props) => {\r\n    const { spriteManager, selectionService } = props;\r\n    const scene = spriteManager.scene;\r\n\r\n    const loadFromFile = useCallback(\r\n        (files: FileList) => {\r\n            const file = files[0];\r\n            if (!file) {\r\n                return;\r\n            }\r\n\r\n            Tools.ReadFile(\r\n                file,\r\n                (data) => {\r\n                    const decoder = new TextDecoder(\"utf-8\");\r\n                    const jsonObject = JSON.parse(decoder.decode(data));\r\n\r\n                    spriteManager.dispose();\r\n                    selectionService.selectedEntity = null;\r\n\r\n                    const newManager = SpriteManager.Parse(jsonObject, scene, \"\");\r\n                    selectionService.selectedEntity = newManager;\r\n                },\r\n                undefined,\r\n                true\r\n            );\r\n        },\r\n        [spriteManager, scene, selectionService]\r\n    );\r\n\r\n    const saveToFile = useCallback(() => {\r\n        const content = JSON.stringify(spriteManager.serialize(true));\r\n        Tools.Download(new Blob([content]), \"spriteManager.json\");\r\n    }, [spriteManager]);\r\n\r\n    return (\r\n        <>\r\n            <FileUploadLine label=\"Load\" onClick={loadFromFile} accept=\".json\" />\r\n            <ButtonLine label=\"Save\" onClick={saveToFile} />\r\n        </>\r\n    );\r\n};\r\n\r\nexport const SpriteManagerSnippetProperties: FunctionComponent<{ spriteManager: SpriteManager; selectionService: ISelectionService }> = (props) => {\r\n    const { spriteManager, selectionService } = props;\r\n    const scene = spriteManager.scene;\r\n    const snippetUrl = Constants.SnippetUrl;\r\n\r\n    const snippetId = useProperty(spriteManager, \"snippetId\");\r\n\r\n    const loadFromSnippet = useCallback(async () => {\r\n        const requestedSnippetId = PromptForSnippetId();\r\n        if (!requestedSnippetId) {\r\n            return;\r\n        }\r\n\r\n        spriteManager.dispose();\r\n        selectionService.selectedEntity = null;\r\n\r\n        try {\r\n            const newManager = await SpriteManager.ParseFromSnippetAsync(requestedSnippetId, scene);\r\n            selectionService.selectedEntity = newManager;\r\n        } catch (err) {\r\n            alert(\"Unable to load your sprite manager: \" + err);\r\n        }\r\n    }, [spriteManager, scene, selectionService]);\r\n\r\n    const saveToSnippet = useCallback(async () => {\r\n        try {\r\n            const content = JSON.stringify(spriteManager.serialize(true));\r\n            const currentSnippetId = spriteManager.snippetId;\r\n\r\n            const result = await SaveToSnippetServer({\r\n                snippetUrl,\r\n                currentSnippetId,\r\n                content,\r\n                payloadKey: \"spriteManager\",\r\n                storageKey: SnippetDashboardStorageKey,\r\n                entityName: \"sprite manager\",\r\n            });\r\n\r\n            // eslint-disable-next-line require-atomic-updates\r\n            spriteManager.snippetId = result.snippetId;\r\n            PersistSnippetId(SnippetDashboardStorageKey, result.snippetId);\r\n\r\n            NotifyPlaygroundOfSnippetChange(result.oldSnippetId, result.snippetId, \"SpriteManager.ParseFromSnippetAsync\");\r\n        } catch {\r\n            // Alert already shown by SaveToSnippetServer\r\n        }\r\n    }, [spriteManager, snippetUrl]);\r\n\r\n    return (\r\n        <>\r\n            {snippetId && <TextPropertyLine label=\"Snippet ID\" value={snippetId} />}\r\n            <ButtonLine label=\"Load from Snippet Server\" onClick={loadFromSnippet} icon={CloudArrowUpRegular} />\r\n            <ButtonLine label=\"Save to Snippet Server\" onClick={saveToSnippet} icon={CloudArrowDownRegular} />\r\n        </>\r\n    );\r\n};\r\n\r\nexport const SpriteManagerActionsProperties: FunctionComponent<{ spriteManager: SpriteManager; selectionService: ISelectionService }> = (props) => {\r\n    const { spriteManager, selectionService } = props;\r\n\r\n    const addNewSprite = useCallback(() => {\r\n        const newSprite = new Sprite(\"new sprite\", spriteManager);\r\n        selectionService.selectedEntity = newSprite;\r\n    }, [spriteManager, selectionService]);\r\n\r\n    const disposeManager = useCallback(() => {\r\n        spriteManager.dispose();\r\n        selectionService.selectedEntity = null;\r\n    }, [spriteManager, selectionService]);\r\n\r\n    return (\r\n        <>\r\n            {spriteManager.sprites.length < spriteManager.capacity && <ButtonLine label=\"Add New Sprite\" onClick={addNewSprite} />}\r\n            <ButtonLine label=\"Dispose\" onClick={disposeManager} />\r\n        </>\r\n    );\r\n};\r\n","import type { BaseTexture, Texture } from \"core/index\";\r\nimport { GetTextureDataAsync } from \"core/Misc/textureTools\";\r\n\r\n/**\r\n * Defines which channels of the texture to retrieve with {@link TextureHelper.GetTextureDataAsync}.\r\n */\r\nexport type TextureChannelsToDisplay = {\r\n    /**\r\n     * True if the red channel should be included.\r\n     */\r\n    R: boolean;\r\n    /**\r\n     * True if the green channel should be included.\r\n     */\r\n    G: boolean;\r\n    /**\r\n     * True if the blue channel should be included.\r\n     */\r\n    B: boolean;\r\n    /**\r\n     * True if the alpha channel should be included.\r\n     */\r\n    A: boolean;\r\n};\r\n\r\n/**\r\n * Gets the data of the specified texture by rendering it to an intermediate RGBA texture and retrieving the bytes from it.\r\n * This is convienent to get 8-bit RGBA values for a texture in a GPU compressed format.\r\n * @param texture the source texture\r\n * @param width the width of the result, which does not have to match the source texture width\r\n * @param height the height of the result, which does not have to match the source texture height\r\n * @param face if the texture has multiple faces, the face index to use for the source\r\n * @param channels a filter for which of the RGBA channels to return in the result\r\n * @param lod if the texture has multiple LODs, the lod index to use for the source\r\n * @returns the 8-bit texture data\r\n */\r\nexport async function ApplyChannelsToTextureDataAsync(\r\n    texture: BaseTexture,\r\n    width: number,\r\n    height: number,\r\n    face: number,\r\n    channels: TextureChannelsToDisplay,\r\n    lod: number = 0\r\n): Promise<Uint8Array> {\r\n    const data = await GetTextureDataAsync(texture, width, height, face, lod);\r\n\r\n    if (!channels.R || !channels.G || !channels.B || !channels.A) {\r\n        for (let i = 0; i < width * height * 4; i += 4) {\r\n            // If alpha is the only channel, just display alpha across all channels\r\n            if (channels.A && !channels.R && !channels.G && !channels.B) {\r\n                data[i] = data[i + 3];\r\n                data[i + 1] = data[i + 3];\r\n                data[i + 2] = data[i + 3];\r\n                data[i + 3] = 255;\r\n                continue;\r\n            }\r\n            let r = data[i],\r\n                g = data[i + 1],\r\n                b = data[i + 2],\r\n                a = data[i + 3];\r\n            // If alpha is not visible, make everything 100% alpha\r\n            if (!channels.A) {\r\n                a = 255;\r\n            }\r\n            // If only one color channel is selected, map both colors to it. If two are selected, the unused one gets set to 0\r\n            if (!channels.R) {\r\n                if (channels.G && !channels.B) {\r\n                    r = g;\r\n                } else if (channels.B && !channels.G) {\r\n                    r = b;\r\n                } else {\r\n                    r = 0;\r\n                }\r\n            }\r\n            if (!channels.G) {\r\n                if (channels.R && !channels.B) {\r\n                    g = r;\r\n                } else if (channels.B && !channels.R) {\r\n                    g = b;\r\n                } else {\r\n                    g = 0;\r\n                }\r\n            }\r\n            if (!channels.B) {\r\n                if (channels.R && !channels.G) {\r\n                    b = r;\r\n                } else if (channels.G && !channels.R) {\r\n                    b = g;\r\n                } else {\r\n                    b = 0;\r\n                }\r\n            }\r\n            data[i] = r;\r\n            data[i + 1] = g;\r\n            data[i + 2] = b;\r\n            data[i + 3] = a;\r\n        }\r\n    }\r\n\r\n    //To flip image on Y axis.\r\n    if ((texture as Texture).invertY || texture.isCube) {\r\n        const numberOfChannelsByLine = width * 4;\r\n        const halfHeight = height / 2;\r\n        for (let i = 0; i < halfHeight; i++) {\r\n            for (let j = 0; j < numberOfChannelsByLine; j++) {\r\n                const currentCell = j + i * numberOfChannelsByLine;\r\n                const targetLine = height - i - 1;\r\n                const targetCell = j + targetLine * numberOfChannelsByLine;\r\n\r\n                const temp = data[currentCell];\r\n                data[currentCell] = data[targetCell];\r\n                data[targetCell] = temp;\r\n            }\r\n        }\r\n    }\r\n    return data;\r\n}\r\n","import type { CSSProperties, FunctionComponent, Ref } from \"react\";\r\n\r\nimport type { BaseTexture } from \"core/index\";\r\n\r\nimport { Button, Toolbar, ToolbarButton, makeStyles, tokens } from \"@fluentui/react-components\";\r\nimport { useCallback, useContext, useEffect, useImperativeHandle, useRef, useState } from \"react\";\r\n\r\nimport { WhenTextureReadyAsync } from \"core/Misc/textureTools\";\r\nimport { ToolContext } from \"shared-ui-components/fluent/hoc/fluentToolWrapper\";\r\nimport { useProperty } from \"../../../hooks/compoundPropertyHooks\";\r\nimport { ApplyChannelsToTextureDataAsync } from \"../../../misc/textureTools\";\r\n\r\nconst useStyles = makeStyles({\r\n    root: {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n    },\r\n    controls: {\r\n        display: \"flex\",\r\n        gap: tokens.spacingHorizontalXS,\r\n    },\r\n    controlButton: {\r\n        minWidth: \"auto\",\r\n        flex: \"1 1 0\", // Equal flex grow/shrink with 0 basis\r\n        paddingVertical: tokens.spacingVerticalXS,\r\n        paddingHorizontal: tokens.spacingHorizontalS,\r\n        overflow: \"hidden\",\r\n        textOverflow: \"ellipsis\",\r\n    },\r\n    preview: {\r\n        border: `1px solid ${tokens.colorNeutralStroke1}`,\r\n        display: \"block\",\r\n        objectFit: \"contain\",\r\n    },\r\n    previewContainer: {\r\n        display: \"flex\",\r\n        justifyContent: \"center\",\r\n        marginTop: tokens.spacingVerticalXS,\r\n        marginBottom: tokens.spacingVerticalS,\r\n        width: \"100%\",\r\n        // Checkerboard background to show transparency\r\n        background: \"repeating-conic-gradient(#B2B2B2 0% 25%, white 25% 50%) 50% / 32px 32px\",\r\n    },\r\n});\r\n\r\n// This method of holding TextureChannels was brought over from inspectorv1 and can likely be refactored/simplified\r\nconst TextureChannelStates = {\r\n    R: { R: true, G: false, B: false, A: false },\r\n    G: { R: false, G: true, B: false, A: false },\r\n    B: { R: false, G: false, B: true, A: false },\r\n    A: { R: false, G: false, B: false, A: true },\r\n    ALL: { R: true, G: true, B: true, A: true },\r\n} as const;\r\n\r\nexport type TexturePreviewImperativeRef = {\r\n    refresh: () => Promise<void>;\r\n};\r\n\r\nexport type TexturePreviewProps = {\r\n    texture: BaseTexture;\r\n    disableToolbar?: boolean;\r\n    maxWidth?: string;\r\n    maxHeight?: string;\r\n    offsetX?: number;\r\n    offsetY?: number;\r\n    width?: number;\r\n    height?: number;\r\n    imperativeRef?: Ref<TexturePreviewImperativeRef>;\r\n};\r\n\r\nexport const TexturePreview: FunctionComponent<TexturePreviewProps> = (props) => {\r\n    const { texture, disableToolbar = false, maxWidth = \"100%\", maxHeight = \"384px\", offsetX = 0, offsetY = 0, width, height, imperativeRef } = props;\r\n    const classes = useStyles();\r\n    const canvasRef = useRef<HTMLCanvasElement>(null);\r\n    const [channels, setChannels] = useState<(typeof TextureChannelStates)[keyof typeof TextureChannelStates]>(TextureChannelStates.ALL);\r\n    const [face, setFace] = useState(0);\r\n    const [canvasStyle, setCanvasStyle] = useState<CSSProperties>();\r\n    const internalTexture = useProperty(texture, \"_texture\");\r\n\r\n    const { size } = useContext(ToolContext);\r\n\r\n    const updatePreviewAsync = useCallback(async () => {\r\n        const canvas = canvasRef.current;\r\n        if (!canvas) {\r\n            return;\r\n        }\r\n        try {\r\n            await WhenTextureReadyAsync(texture); // Ensure texture is loaded before grabbing size\r\n            const { width: textureWidth, height: textureHeight } = texture.getSize();\r\n\r\n            // Set canvas dimensions to the sub-region size\r\n            canvas.width = width ?? textureWidth;\r\n            canvas.height = height ?? textureHeight;\r\n\r\n            // Calculate the width that corresponds to maxHeight while maintaining aspect ratio\r\n            const aspectRatio = canvas.width / canvas.height;\r\n            // Use CSS min() to pick the smaller of maxWidth or the width that corresponds to maxHeight\r\n            const imageWidth = `min(${maxWidth}, calc(${maxHeight} * ${aspectRatio}))`;\r\n            setCanvasStyle({ width: imageWidth });\r\n\r\n            // Get full texture data, then draw only the sub-region\r\n            const data = await ApplyChannelsToTextureDataAsync(texture, textureWidth, textureHeight, face, channels);\r\n            const context = canvas.getContext(\"2d\");\r\n            if (context) {\r\n                const fullImageData = context.createImageData(textureWidth, textureHeight);\r\n                fullImageData.data.set(data);\r\n                // Use putImageData with dirty rect to draw only the sub-region\r\n                context.putImageData(fullImageData, -offsetX, -offsetY, offsetX, offsetY, canvas.width, canvas.height);\r\n            }\r\n        } catch {\r\n            // If we fail, leave the canvas empty\r\n        }\r\n    }, [texture, face, channels, offsetX, offsetY, width, height, internalTexture]);\r\n\r\n    useImperativeHandle(imperativeRef, () => ({ refresh: updatePreviewAsync }), [updatePreviewAsync]);\r\n\r\n    useEffect(() => {\r\n        void updatePreviewAsync();\r\n    }, [updatePreviewAsync]);\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            {disableToolbar ? null : texture.isCube ? (\r\n                <Toolbar className={classes.controls} size={size} aria-label=\"Cube Faces\">\r\n                    {[\"+X\", \"-X\", \"+Y\", \"-Y\", \"+Z\", \"-Z\"].map((label, idx) => (\r\n                        <ToolbarButton className={classes.controlButton} key={label} appearance={face === idx ? \"primary\" : \"subtle\"} onClick={() => setFace(idx)}>\r\n                            {label}\r\n                        </ToolbarButton>\r\n                    ))}\r\n                </Toolbar>\r\n            ) : (\r\n                <Toolbar className={classes.controls} size={size} aria-label=\"Channels\">\r\n                    {([\"R\", \"G\", \"B\", \"A\", \"ALL\"] as const).map((ch) => (\r\n                        <ToolbarButton\r\n                            className={classes.controlButton}\r\n                            key={ch}\r\n                            appearance={channels === TextureChannelStates[ch] ? \"primary\" : \"subtle\"}\r\n                            onClick={() => setChannels(TextureChannelStates[ch])}\r\n                        >\r\n                            {ch}\r\n                        </ToolbarButton>\r\n                    ))}\r\n                </Toolbar>\r\n            )}\r\n            <div className={classes.previewContainer}>\r\n                <canvas ref={canvasRef} className={classes.preview} style={canvasStyle} />\r\n            </div>\r\n            {texture.isRenderTarget && (\r\n                <Button\r\n                    appearance=\"outline\"\r\n                    onClick={() => {\r\n                        void updatePreviewAsync();\r\n                    }}\r\n                >\r\n                    Refresh\r\n                </Button>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n","import type { FunctionComponent } from \"react\";\r\n\r\nimport type { Sprite } from \"core/index\";\r\nimport type { ISelectionService } from \"../../../services/selectionService\";\r\nimport type { ISettingsContext } from \"../../../services/settingsContext\";\r\n\r\nimport { PlayFilled, StopFilled } from \"@fluentui/react-icons\";\r\nimport { useCallback } from \"react\";\r\n\r\nimport { ButtonLine } from \"shared-ui-components/fluent/hoc/buttonLine\";\r\nimport { Color4PropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/colorPropertyLine\";\r\nimport { NumberInputPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/inputPropertyLine\";\r\nimport { SwitchPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/switchPropertyLine\";\r\nimport { SyncedSliderPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/syncedSliderPropertyLine\";\r\nimport { Vector3PropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/vectorPropertyLine\";\r\nimport { useColor4Property, useProperty } from \"../../../hooks/compoundPropertyHooks\";\r\nimport { useInterceptObservable } from \"../../../hooks/instrumentationHooks\";\r\nimport { useObservableState } from \"../../../hooks/observableHooks\";\r\nimport { useAngleConverters } from \"../../../hooks/settingsHooks\";\r\nimport { BoundProperty } from \"../boundProperty\";\r\nimport { LinkToEntityPropertyLine } from \"../linkToEntityPropertyLine\";\r\nimport { TexturePreview } from \"../textures/texturePreview\";\r\n\r\nfunction useMaxCellCount(sprite: Sprite) {\r\n    const manager = sprite.manager;\r\n    const texture = useProperty(manager, \"texture\");\r\n    const textureSize = texture.getSize();\r\n\r\n    let maxCellCount = 0;\r\n    if (!textureSize.width || !textureSize.height) {\r\n        maxCellCount = Math.max(sprite.fromIndex, sprite.toIndex);\r\n    } else {\r\n        maxCellCount = (textureSize.width / manager.cellWidth) * (textureSize.height / manager.cellHeight);\r\n    }\r\n\r\n    return maxCellCount;\r\n}\r\n\r\nexport const SpriteGeneralProperties: FunctionComponent<{ sprite: Sprite; selectionService: ISelectionService }> = (props) => {\r\n    const { sprite, selectionService } = props;\r\n\r\n    return (\r\n        <>\r\n            <LinkToEntityPropertyLine\r\n                key=\"Parent\"\r\n                label=\"Parent\"\r\n                description={`Sprite Manager that owns this sprite.`}\r\n                entity={sprite.manager}\r\n                selectionService={selectionService}\r\n            />\r\n            <BoundProperty\r\n                component={SwitchPropertyLine}\r\n                key=\"IsVisible\"\r\n                label=\"Is Visible\"\r\n                description=\"Whether the sprite is visible or not.\"\r\n                target={sprite}\r\n                propertyKey=\"isVisible\"\r\n            />\r\n        </>\r\n    );\r\n};\r\n\r\nexport const SpriteTransformProperties: FunctionComponent<{ sprite: Sprite; settings: ISettingsContext }> = (props) => {\r\n    const { sprite, settings } = props;\r\n\r\n    const [toDisplayAngle, fromDisplayAngle, useDegrees] = useAngleConverters(settings);\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty component={Vector3PropertyLine} label=\"Position\" target={sprite} propertyKey=\"position\" />\r\n            <BoundProperty\r\n                component={SyncedSliderPropertyLine}\r\n                key=\"Angle\"\r\n                label=\"Angle\"\r\n                description={`Rotation angle of the sprite in ${useDegrees ? \"degrees\" : \"radians\"}`}\r\n                min={0}\r\n                max={toDisplayAngle(Math.PI * 2)}\r\n                step={toDisplayAngle(0.01)}\r\n                target={sprite}\r\n                propertyKey=\"angle\"\r\n                convertTo={toDisplayAngle}\r\n                convertFrom={fromDisplayAngle}\r\n            />\r\n            <BoundProperty\r\n                component={SyncedSliderPropertyLine}\r\n                key=\"Width\"\r\n                label=\"Width\"\r\n                description=\"Width of the sprite (in world space units)\"\r\n                target={sprite}\r\n                propertyKey=\"width\"\r\n            />\r\n            <BoundProperty\r\n                component={SyncedSliderPropertyLine}\r\n                key={\"Height\"}\r\n                label=\"Height\"\r\n                description=\"Height of the sprite (in world space units)\"\r\n                target={sprite}\r\n                propertyKey=\"height\"\r\n            />\r\n        </>\r\n    );\r\n};\r\n\r\nexport const SpriteAnimationProperties: FunctionComponent<{ sprite: Sprite }> = (props) => {\r\n    const { sprite } = props;\r\n\r\n    const animationStarted = useObservableState(\r\n        useCallback(() => sprite.animationStarted, [sprite]),\r\n        useInterceptObservable(\"function\", sprite, \"playAnimation\"),\r\n        useInterceptObservable(\"function\", sprite, \"stopAnimation\"),\r\n        useInterceptObservable(\"function\", sprite, \"_animate\")\r\n    );\r\n\r\n    const maxCellCount = useMaxCellCount(sprite);\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty\r\n                component={NumberInputPropertyLine}\r\n                key=\"Start\"\r\n                label=\"Start\"\r\n                description=\"First frame of the animation.\"\r\n                min={0}\r\n                max={maxCellCount}\r\n                target={sprite}\r\n                propertyKey=\"fromIndex\"\r\n            />\r\n            <BoundProperty\r\n                component={NumberInputPropertyLine}\r\n                key=\"End\"\r\n                label=\"End\"\r\n                description=\"Last frame of the animation.\"\r\n                min={0}\r\n                max={maxCellCount}\r\n                target={sprite}\r\n                propertyKey=\"toIndex\"\r\n            />\r\n            <BoundProperty component={SwitchPropertyLine} key=\"Loop\" label=\"Loop\" description=\"Whether to loop the animation.\" target={sprite} propertyKey=\"loopAnimation\" />\r\n            <BoundProperty\r\n                component={NumberInputPropertyLine}\r\n                key=\"Delay\"\r\n                label=\"Delay\"\r\n                description=\"Delay between frames in milliseconds.\"\r\n                min={0}\r\n                target={sprite}\r\n                propertyKey=\"delay\"\r\n            />\r\n            <ButtonLine\r\n                label={animationStarted ? \"Stop Animation\" : \"Start Animation\"}\r\n                icon={animationStarted ? StopFilled : PlayFilled}\r\n                onClick={() => {\r\n                    if (animationStarted) {\r\n                        sprite.stopAnimation();\r\n                    } else {\r\n                        sprite.playAnimation(sprite.fromIndex, sprite.toIndex, sprite.loopAnimation, sprite.delay);\r\n                    }\r\n                }}\r\n            />\r\n        </>\r\n    );\r\n};\r\n\r\nexport const SpriteOtherProperties: FunctionComponent<{ sprite: Sprite }> = (props) => {\r\n    const { sprite } = props;\r\n\r\n    const color = useColor4Property(sprite, \"color\");\r\n\r\n    return (\r\n        <>\r\n            <Color4PropertyLine key=\"Color\" label=\"Color\" description=\"Color to tint the sprite.\" value={color} onChange={(col) => (sprite.color = col)} />\r\n            <BoundProperty component={SwitchPropertyLine} key=\"IsPickable\" label=\"Pickable\" target={sprite} propertyKey=\"isPickable\" />\r\n            <BoundProperty component={SwitchPropertyLine} key=\"UseAlphaForPicking\" label=\"Use Alpha for Picking\" target={sprite} propertyKey=\"useAlphaForPicking\" />\r\n        </>\r\n    );\r\n};\r\n\r\nexport const SpriteCellProperties: FunctionComponent<{ sprite: Sprite }> = (props) => {\r\n    const { sprite } = props;\r\n\r\n    const maxCellCount = useMaxCellCount(sprite);\r\n\r\n    const manager = sprite.manager;\r\n    const texture = manager.texture;\r\n    const size = texture.getSize();\r\n\r\n    const cellWidth = useProperty(manager, \"cellWidth\");\r\n    const cellHeight = useProperty(manager, \"cellHeight\");\r\n    const cellIndex = useProperty(sprite, \"cellIndex\");\r\n\r\n    const offsetX = (cellIndex * cellWidth) % size.width;\r\n    const offsetY = Math.floor((cellIndex * cellWidth) / size.width) * cellHeight;\r\n\r\n    return (\r\n        <>\r\n            <TexturePreview disableToolbar texture={texture} maxHeight=\"160px\" offsetX={offsetX} offsetY={offsetY} width={cellWidth} height={cellHeight} />\r\n            <BoundProperty component={SyncedSliderPropertyLine} key=\"CellIndex\" label=\"Cell Index\" target={sprite} propertyKey=\"cellIndex\" min={0} step={1} max={maxCellCount} />\r\n            <BoundProperty component={SwitchPropertyLine} key=\"InvertU\" label=\"Invert U\" target={sprite} propertyKey=\"invertU\" />\r\n            <BoundProperty component={SwitchPropertyLine} key=\"InvertV\" label=\"Invert V\" target={sprite} propertyKey=\"invertV\" />\r\n        </>\r\n    );\r\n};\r\n","import type { ServiceDefinition } from \"../../../modularity/serviceDefinition\";\r\nimport type { ISettingsContext } from \"../../../services/settingsContext\";\r\nimport type { ISelectionService } from \"../../selectionService\";\r\nimport type { IPropertiesService } from \"./propertiesService\";\r\n\r\nimport { Sprite } from \"core/Sprites/sprite\";\r\nimport { SpriteManager } from \"core/Sprites/spriteManager\";\r\nimport {\r\n    SpriteManagerActionsProperties,\r\n    SpriteManagerCellProperties,\r\n    SpriteManagerFileProperties,\r\n    SpriteManagerGeneralProperties,\r\n    SpriteManagerOtherProperties,\r\n    SpriteManagerSnippetProperties,\r\n} from \"../../../components/properties/sprites/spriteManagerProperties\";\r\nimport {\r\n    SpriteAnimationProperties,\r\n    SpriteCellProperties,\r\n    SpriteGeneralProperties,\r\n    SpriteOtherProperties,\r\n    SpriteTransformProperties,\r\n} from \"../../../components/properties/sprites/spriteProperties\";\r\nimport { SettingsContextIdentity } from \"../../../services/settingsContext\";\r\nimport { SelectionServiceIdentity } from \"../../selectionService\";\r\nimport { PropertiesServiceIdentity } from \"./propertiesService\";\r\n\r\nexport const SpritePropertiesServiceDefinition: ServiceDefinition<[], [IPropertiesService, ISelectionService, ISettingsContext]> = {\r\n    friendlyName: \"Sprite Properties\",\r\n    consumes: [PropertiesServiceIdentity, SelectionServiceIdentity, SettingsContextIdentity],\r\n    factory: (propertiesService, selectionService, settingsContent) => {\r\n        const spriteManagerSectionContentRegistration = propertiesService.addSectionContent({\r\n            key: \"Sprite Manager Properties\",\r\n            predicate: (entity: unknown) => entity instanceof SpriteManager,\r\n            content: [\r\n                {\r\n                    section: \"General\",\r\n                    component: ({ context }) => <SpriteManagerGeneralProperties spriteManager={context} selectionService={selectionService} />,\r\n                },\r\n                {\r\n                    section: \"Actions\",\r\n                    component: ({ context }) => <SpriteManagerActionsProperties spriteManager={context} selectionService={selectionService} />,\r\n                },\r\n                {\r\n                    section: \"File\",\r\n                    component: ({ context }) => <SpriteManagerFileProperties spriteManager={context} selectionService={selectionService} />,\r\n                },\r\n                {\r\n                    section: \"Snippet\",\r\n                    component: ({ context }) => <SpriteManagerSnippetProperties spriteManager={context} selectionService={selectionService} />,\r\n                },\r\n                {\r\n                    section: \"Cells\",\r\n                    component: ({ context }) => <SpriteManagerCellProperties spriteManager={context} />,\r\n                },\r\n                {\r\n                    section: \"Other\",\r\n                    component: ({ context }) => <SpriteManagerOtherProperties spriteManager={context} />,\r\n                },\r\n            ],\r\n        });\r\n\r\n        const spriteSectionContentRegistration = propertiesService.addSectionContent({\r\n            key: \"Sprite Properties\",\r\n            predicate: (entity: unknown) => entity instanceof Sprite,\r\n            content: [\r\n                {\r\n                    section: \"General\",\r\n                    component: ({ context }) => <SpriteGeneralProperties sprite={context} selectionService={selectionService} />,\r\n                },\r\n                {\r\n                    section: \"Transform\",\r\n                    component: ({ context }) => <SpriteTransformProperties sprite={context} settings={settingsContent} />,\r\n                },\r\n                {\r\n                    section: \"Cell\",\r\n                    component: ({ context }) => <SpriteCellProperties sprite={context} />,\r\n                },\r\n                {\r\n                    section: \"Animation\",\r\n                    component: ({ context }) => <SpriteAnimationProperties sprite={context} />,\r\n                },\r\n                {\r\n                    section: \"Other\",\r\n                    component: ({ context }) => <SpriteOtherProperties sprite={context} />,\r\n                },\r\n            ],\r\n        });\r\n\r\n        return {\r\n            dispose: () => {\r\n                spriteManagerSectionContentRegistration.dispose();\r\n                spriteSectionContentRegistration.dispose();\r\n            },\r\n        };\r\n    },\r\n};\r\n","import type { SpinnerProps } from \"@fluentui/react-components\";\r\nimport type { ComponentProps, ComponentType, ElementRef, Ref } from \"react\";\r\n\r\nimport { Spinner } from \"@fluentui/react-components\";\r\nimport { forwardRef, lazy, Suspense } from \"react\";\r\n\r\ntype LazyComponentProps = {\r\n    spinnerSize?: SpinnerProps[\"size\"];\r\n    spinnerLabel?: string;\r\n};\r\n\r\n/**\r\n * Creates a lazy component wrapper that only calls the async function to get the underlying component when the lazy component is actually mounted.\r\n * This allows deferring imports until they are needed. While the underlying component is being loaded, a spinner is displayed.\r\n * @param getComponentAsync A function that returns a promise resolving to the component.\r\n * @param defaultProps Options for the loading spinner.\r\n * @returns A React component that displays a spinner while loading the async component.\r\n */\r\nexport function MakeLazyComponent<ComponentT extends ComponentType<any>>(getComponentAsync: () => Promise<ComponentT>, defaultProps?: LazyComponentProps) {\r\n    type WrappedComponentProps = ComponentProps<ComponentT> & LazyComponentProps;\r\n\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    const LazyComponent = lazy(async () => {\r\n        const component = await getComponentAsync();\r\n        return { default: component };\r\n    });\r\n\r\n    return forwardRef<ElementRef<typeof Spinner | ComponentT>, WrappedComponentProps>((props, ref) => {\r\n        const { spinnerSize = defaultProps?.spinnerSize, spinnerLabel = defaultProps?.spinnerLabel, ...rest } = props;\r\n\r\n        const componentProps = { ...rest, ref };\r\n\r\n        return (\r\n            <Suspense fallback={<Spinner ref={ref as Ref<ElementRef<typeof Spinner>>} size={spinnerSize} label={spinnerLabel} />}>\r\n                <LazyComponent {...(componentProps as ComponentProps<ComponentT>)} />\r\n            </Suspense>\r\n        );\r\n    });\r\n}\r\n","import type { FunctionComponent } from \"react\";\r\n\r\nimport type { AdvancedDynamicTexture } from \"gui/2D/advancedDynamicTexture\";\r\n\r\nimport { useCallback } from \"react\";\r\n\r\nimport { EditRegular } from \"@fluentui/react-icons\";\r\nimport { ButtonLine } from \"shared-ui-components/fluent/hoc/buttonLine\";\r\nimport { NumberInputPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/inputPropertyLine\";\r\nimport { StringifiedPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/stringifiedPropertyLine\";\r\nimport { SwitchPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/switchPropertyLine\";\r\nimport { SyncedSliderPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/syncedSliderPropertyLine\";\r\nimport { MakeLazyComponent } from \"shared-ui-components/fluent/primitives/lazyComponent\";\r\nimport { useObservableState } from \"../../../hooks/observableHooks\";\r\nimport { usePollingObservable } from \"../../../hooks/pollingHooks\";\r\nimport { useResource } from \"../../../hooks/resourceHooks\";\r\nimport { BoundProperty } from \"../boundProperty\";\r\n\r\nexport const AdvancedDynamicTextureGeneralProperties = MakeLazyComponent(\r\n    async () => {\r\n        // Defer importing anything from the gui package until this component is actually mounted.\r\n        const { AdvancedDynamicTextureInstrumentation } = await import(\"gui/2D/adtInstrumentation\");\r\n\r\n        return (props: { texture: AdvancedDynamicTexture }) => {\r\n            const { texture } = props;\r\n\r\n            const instrumentation = useResource(\r\n                useCallback(() => {\r\n                    const instrumentation = new AdvancedDynamicTextureInstrumentation(texture);\r\n                    instrumentation.captureRenderTime = true;\r\n                    instrumentation.captureLayoutTime = true;\r\n                    return instrumentation;\r\n                }, [texture])\r\n            );\r\n\r\n            const layoutTime = useObservableState(\r\n                useCallback(() => instrumentation.layoutTimeCounter.current, [instrumentation.layoutTimeCounter]),\r\n                usePollingObservable(1000)\r\n            );\r\n\r\n            const renderTime = useObservableState(\r\n                useCallback(() => instrumentation.renderTimeCounter.current, [instrumentation.renderTimeCounter]),\r\n                usePollingObservable(1000)\r\n            );\r\n\r\n            return (\r\n                <>\r\n                    <StringifiedPropertyLine label=\"Last Layout Time\" value={layoutTime} precision={2} units=\"ms\" />\r\n                    <StringifiedPropertyLine label=\"Last Render Time\" value={renderTime} precision={2} units=\"ms\" />\r\n                    <BoundProperty component={SyncedSliderPropertyLine} label=\"Render Scale\" target={texture} propertyKey=\"renderScale\" min={0.1} max={5} step={0.1} />\r\n                    <BoundProperty component={SwitchPropertyLine} label=\"Premultiply Alpha\" target={texture} propertyKey=\"premulAlpha\" />\r\n                    <BoundProperty component={NumberInputPropertyLine} label=\"Ideal Width\" target={texture} propertyKey=\"idealWidth\" />\r\n                    <BoundProperty component={NumberInputPropertyLine} label=\"Ideal Height\" target={texture} propertyKey=\"idealHeight\" />\r\n                    <BoundProperty component={SwitchPropertyLine} label=\"Use Smallest Ideal\" target={texture} propertyKey=\"useSmallestIdeal\" />\r\n                    <BoundProperty component={SwitchPropertyLine} label=\"Render at Ideal Size\" target={texture} propertyKey=\"renderAtIdealSize\" />\r\n                    <BoundProperty component={SwitchPropertyLine} label=\"Invalidate Rect Optimization\" target={texture} propertyKey=\"useInvalidateRectOptimization\" />\r\n                </>\r\n            );\r\n        };\r\n    },\r\n    { spinnerSize: \"extra-tiny\", spinnerLabel: \"Loading...\" }\r\n);\r\n\r\nexport const AdvancedDynamicTexturePreviewProperties: FunctionComponent<{ texture: AdvancedDynamicTexture }> = (props) => {\r\n    const { texture } = props;\r\n\r\n    return (\r\n        <>\r\n            <ButtonLine\r\n                label=\"Edit GUI\"\r\n                icon={EditRegular}\r\n                onClick={async () => {\r\n                    const { GUIEditor } = await import(\"gui-editor/guiEditor\");\r\n                    await GUIEditor.Show({ liveGuiTexture: texture });\r\n                }}\r\n            />\r\n        </>\r\n    );\r\n};\r\n","import { Constants } from \"core/Engines/constants\";\r\n\r\nexport const TextureFormat = [\r\n    { label: \"Alpha\", normalizable: false, value: Constants.TEXTUREFORMAT_ALPHA },\r\n    { label: \"Luminance\", normalizable: false, value: Constants.TEXTUREFORMAT_LUMINANCE },\r\n    { label: \"Luminance/Alpha\", normalizable: false, value: Constants.TEXTUREFORMAT_LUMINANCE_ALPHA },\r\n    { label: \"RGB\", normalizable: true, value: Constants.TEXTUREFORMAT_RGB },\r\n    { label: \"RGBA\", normalizable: true, value: Constants.TEXTUREFORMAT_RGBA },\r\n    { label: \"R (red)\", normalizable: true, value: Constants.TEXTUREFORMAT_RED },\r\n    { label: \"RG (red/green)\", normalizable: true, value: Constants.TEXTUREFORMAT_RG },\r\n    { label: \"R (red) integer\", normalizable: false, value: Constants.TEXTUREFORMAT_RED_INTEGER },\r\n    { label: \"RG (red/green) integer\", normalizable: false, value: Constants.TEXTUREFORMAT_RG_INTEGER },\r\n    { label: \"RGB integer\", normalizable: false, value: Constants.TEXTUREFORMAT_RGB_INTEGER },\r\n    { label: \"RGBA integer\", normalizable: false, value: Constants.TEXTUREFORMAT_RGBA_INTEGER },\r\n    { label: \"BGRA\", normalizable: true, value: Constants.TEXTUREFORMAT_BGRA },\r\n    { label: \"Depth24/Stencil8\", normalizable: false, hideType: true, value: Constants.TEXTUREFORMAT_DEPTH24_STENCIL8 },\r\n    { label: \"Depth32 float\", normalizable: false, hideType: true, value: Constants.TEXTUREFORMAT_DEPTH32_FLOAT },\r\n    { label: \"Depth16\", normalizable: false, value: Constants.TEXTUREFORMAT_DEPTH16 },\r\n    { label: \"Depth24\", normalizable: false, value: Constants.TEXTUREFORMAT_DEPTH24 },\r\n    { label: \"Depth24Unorm/Stencil8\", normalizable: false, hideType: true, value: Constants.TEXTUREFORMAT_DEPTH24UNORM_STENCIL8 },\r\n    { label: \"Depth32Float/Stencil8\", normalizable: false, hideType: true, value: Constants.TEXTUREFORMAT_DEPTH32FLOAT_STENCIL8 },\r\n    { label: \"RGBA BPTC UNorm\", normalizable: false, compressed: true, value: Constants.TEXTUREFORMAT_COMPRESSED_RGBA_BPTC_UNORM },\r\n    { label: \"RGB BPTC UFloat\", normalizable: false, compressed: true, value: Constants.TEXTUREFORMAT_COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT },\r\n    { label: \"RGB BPTC SFloat\", normalizable: false, compressed: true, value: Constants.TEXTUREFORMAT_COMPRESSED_RGB_BPTC_SIGNED_FLOAT },\r\n    { label: \"RGBA S3TC DXT5\", normalizable: false, compressed: true, value: Constants.TEXTUREFORMAT_COMPRESSED_RGBA_S3TC_DXT5 },\r\n    { label: \"RGBA S3TC DXT3\", normalizable: false, compressed: true, value: Constants.TEXTUREFORMAT_COMPRESSED_RGBA_S3TC_DXT3 },\r\n    { label: \"RGBA S3TC DXT1\", normalizable: false, compressed: true, value: Constants.TEXTUREFORMAT_COMPRESSED_RGBA_S3TC_DXT1 },\r\n    { label: \"RGB S3TC DXT1\", normalizable: false, compressed: true, value: Constants.TEXTUREFORMAT_COMPRESSED_RGB_S3TC_DXT1 },\r\n    { label: \"RGBA ASTC 4x4\", normalizable: false, compressed: true, value: Constants.TEXTUREFORMAT_COMPRESSED_RGBA_ASTC_4x4 },\r\n];\r\n\r\nexport function FindTextureFormat(format: number) {\r\n    for (let i = 0; i < TextureFormat.length; ++i) {\r\n        if (TextureFormat[i].value === format) {\r\n            return TextureFormat[i];\r\n        }\r\n    }\r\n    return null;\r\n}\r\n\r\nexport const TextureType = [\r\n    { label: \"unsigned byte\", normalizable: true, value: Constants.TEXTURETYPE_UNSIGNED_BYTE },\r\n    { label: \"32-bit float\", normalizable: false, value: Constants.TEXTURETYPE_FLOAT },\r\n    { label: \"16-bit float\", normalizable: false, value: Constants.TEXTURETYPE_HALF_FLOAT },\r\n    { label: \"signed byte\", normalizable: true, value: Constants.TEXTURETYPE_BYTE },\r\n    { label: \"signed short\", normalizable: false, value: Constants.TEXTURETYPE_SHORT },\r\n    { label: \"unsigned short\", normalizable: false, value: Constants.TEXTURETYPE_UNSIGNED_SHORT },\r\n    { label: \"signed int\", normalizable: false, value: Constants.TEXTURETYPE_INT },\r\n    { label: \"unsigned int\", normalizable: false, value: Constants.TEXTURETYPE_UNSIGNED_INTEGER },\r\n    { label: \"unsigned 4/4/4/4 short\", normalizable: false, value: Constants.TEXTURETYPE_UNSIGNED_SHORT_4_4_4_4 },\r\n    { label: \"unsigned 5/5/5/1 short\", normalizable: false, value: Constants.TEXTURETYPE_UNSIGNED_SHORT_5_5_5_1 },\r\n    { label: \"unsigned 5/6/5 short\", normalizable: false, value: Constants.TEXTURETYPE_UNSIGNED_SHORT_5_6_5 },\r\n    { label: \"unsigned 2/10/10/10 int\", normalizable: false, value: Constants.TEXTURETYPE_UNSIGNED_INT_2_10_10_10_REV },\r\n    { label: \"unsigned 24/8 int\", normalizable: false, value: Constants.TEXTURETYPE_UNSIGNED_INT_24_8 },\r\n    { label: \"unsigned 10f/11f/11f int\", normalizable: false, value: Constants.TEXTURETYPE_UNSIGNED_INT_10F_11F_11F_REV },\r\n    { label: \"unsigned 5/9/9/9 int\", normalizable: false, value: Constants.TEXTURETYPE_UNSIGNED_INT_5_9_9_9_REV },\r\n    { label: \"32-bits with only 8-bit used (stencil)\", normalizable: false, value: Constants.TEXTURETYPE_FLOAT_32_UNSIGNED_INT_24_8_REV },\r\n];\r\n\r\nexport function FindTextureType(type: number) {\r\n    for (let i = 0; i < TextureType.length; ++i) {\r\n        if (TextureType[i].value === type) {\r\n            return TextureType[i];\r\n        }\r\n    }\r\n    return null;\r\n}\r\n","import type { ComponentType, FunctionComponent } from \"react\";\r\n\r\nimport type { BaseTexture } from \"core/index\";\r\nimport type { DropdownOption } from \"shared-ui-components/fluent/primitives/dropdown\";\r\nimport type { TextureEditorProps } from \"../../textureEditor/textureEditor\";\r\nimport type { TexturePreviewImperativeRef } from \"./texturePreview\";\r\n\r\nimport { EditRegular } from \"@fluentui/react-icons\";\r\nimport { useRef } from \"react\";\r\n\r\nimport { Constants } from \"core/Engines/constants\";\r\nimport { Texture } from \"core/Materials/Textures/texture\";\r\nimport { ButtonLine } from \"shared-ui-components/fluent/hoc/buttonLine\";\r\nimport { ChildWindow } from \"shared-ui-components/fluent/hoc/childWindow\";\r\nimport { BooleanBadgePropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/booleanBadgePropertyLine\";\r\nimport { NumberDropdownPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/dropdownPropertyLine\";\r\nimport { TextInputPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/inputPropertyLine\";\r\nimport { StringifiedPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/stringifiedPropertyLine\";\r\nimport { SwitchPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/switchPropertyLine\";\r\nimport { SyncedSliderPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/syncedSliderPropertyLine\";\r\nimport { TextPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/textPropertyLine\";\r\nimport { TextureUpload } from \"shared-ui-components/fluent/hoc/textureUpload\";\r\nimport { useProperty } from \"../../../hooks/compoundPropertyHooks\";\r\nimport { BoundProperty } from \"../boundProperty\";\r\nimport { FindTextureFormat, FindTextureType } from \"./textureFormatUtils\";\r\nimport { TexturePreview } from \"./texturePreview\";\r\n\r\nexport const BaseTexturePreviewProperties: FunctionComponent<{ texture: BaseTexture; textureEditor: ComponentType<TextureEditorProps> }> = (props) => {\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    const { texture, textureEditor: TextureEditor } = props;\r\n\r\n    const texturePreviewImperativeRef = useRef<TexturePreviewImperativeRef>(null);\r\n\r\n    const childWindow = useRef<ChildWindow>(null);\r\n\r\n    return (\r\n        <>\r\n            <TexturePreview imperativeRef={texturePreviewImperativeRef} texture={texture} />\r\n            <TextureUpload texture={texture} />\r\n            <ButtonLine label=\"Edit Texture\" onClick={() => childWindow.current?.open()} icon={EditRegular} />\r\n            <ChildWindow id=\"Texture Editor\" imperativeRef={childWindow}>\r\n                <TextureEditor texture={texture} onUpdate={async () => await texturePreviewImperativeRef.current?.refresh()} />\r\n            </ChildWindow>\r\n        </>\r\n    );\r\n};\r\n\r\nexport const BaseTextureGeneralProperties: FunctionComponent<{ texture: BaseTexture }> = (props) => {\r\n    const { texture } = props;\r\n\r\n    const internalTexture = useProperty(texture, \"_texture\");\r\n    const internalUniqueId = useProperty(internalTexture, \"uniqueId\");\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty component={TextInputPropertyLine} label=\"Display Name\" target={texture} propertyKey=\"displayName\" />\r\n            {internalUniqueId != null ? (\r\n                <StringifiedPropertyLine label=\"Internal Unique ID\" description=\"The unique ID of the internal texture.\" value={internalUniqueId} />\r\n            ) : (\r\n                <BooleanBadgePropertyLine label=\"Internal Unique ID\" description=\"This texture has no internal texture.\" value={false} />\r\n            )}\r\n        </>\r\n    );\r\n};\r\n\r\nconst CoordinatesMode = [\r\n    { label: \"Explicit\", value: Texture.EXPLICIT_MODE },\r\n    { label: \"Cubic\", value: Texture.CUBIC_MODE },\r\n    { label: \"Inverse cubic\", value: Texture.INVCUBIC_MODE },\r\n    { label: \"Equirectangular\", value: Texture.EQUIRECTANGULAR_MODE },\r\n    { label: \"Fixed equirectangular\", value: Texture.FIXED_EQUIRECTANGULAR_MODE },\r\n    { label: \"Fixed equirectangular mirrored\", value: Texture.FIXED_EQUIRECTANGULAR_MIRRORED_MODE },\r\n    { label: \"Planar\", value: Texture.PLANAR_MODE },\r\n    { label: \"Projection\", value: Texture.PROJECTION_MODE },\r\n    { label: \"Skybox\", value: Texture.SKYBOX_MODE },\r\n    { label: \"Spherical\", value: Texture.SPHERICAL_MODE },\r\n] as const satisfies DropdownOption<number>[];\r\n\r\nexport const BaseTextureCharacteristicProperties: FunctionComponent<{ texture: BaseTexture }> = (props) => {\r\n    const { texture } = props;\r\n\r\n    const internalTexture = useProperty(texture, \"_texture\");\r\n    const format = useProperty(internalTexture, \"format\") ?? NaN;\r\n    const type = useProperty(internalTexture, \"type\") ?? NaN;\r\n    const depth = useProperty(internalTexture, \"depth\");\r\n    const useSRGBBuffer = useProperty(internalTexture, \"_useSRGBBuffer\");\r\n    const samples = useProperty(internalTexture, \"samples\") ?? \"?\";\r\n\r\n    const displayFormat = FindTextureFormat(format === -1 ? Constants.TEXTUREFORMAT_RGBA : format);\r\n    const displayType = FindTextureType(type === -1 ? Constants.TEXTURETYPE_UNSIGNED_BYTE : type);\r\n\r\n    const maxAnisotropy = texture.getScene()?.getEngine().getCaps().maxAnisotropy ?? 1;\r\n\r\n    return (\r\n        <>\r\n            {texture.is2DArray && <TextPropertyLine label=\"Layers\" value={depth?.toString() ?? \"?\"} />}\r\n            {texture.is3D && <TextPropertyLine label=\"Depth\" value={depth?.toString() ?? \"?\"} />}\r\n            <TextPropertyLine label=\"Format\" value={displayFormat?.label ?? \"unknown\"} />\r\n            {!displayFormat?.hideType && !displayFormat?.compressed && <TextPropertyLine label=\"Type\" value={displayType?.label ?? \"unknown\"} />}\r\n            {!!displayFormat?.normalizable && !displayFormat?.compressed && displayType?.normalizable != undefined && (\r\n                <BooleanBadgePropertyLine label=\"Normalized\" value={displayType.normalizable} />\r\n            )}\r\n            <BooleanBadgePropertyLine label=\"Compressed\" value={displayFormat?.compressed ?? false} />\r\n            <BooleanBadgePropertyLine label=\"sRGB Buffers\" value={useSRGBBuffer ?? false} />\r\n            <BoundProperty component={BooleanBadgePropertyLine} label=\"Gamma Space\" target={texture} propertyKey=\"gammaSpace\" />\r\n            <BoundProperty component={BooleanBadgePropertyLine} label=\"Has Alpha\" target={texture} propertyKey=\"hasAlpha\" />\r\n            <BoundProperty component={SwitchPropertyLine} label=\"Alpha from RGB\" target={texture} propertyKey=\"getAlphaFromRGB\" />\r\n            <BooleanBadgePropertyLine label=\"3D\" value={texture.is3D} />\r\n            <BooleanBadgePropertyLine label=\"2D Array\" value={texture.is2DArray} />\r\n            <BooleanBadgePropertyLine label=\"Cube\" value={texture.isCube} />\r\n            <BooleanBadgePropertyLine label=\"Render Target\" value={texture.isRenderTarget} />\r\n            <BooleanBadgePropertyLine label=\"Mipmaps\" value={!texture.noMipmap} />\r\n            <TextPropertyLine label=\"Samples\" value={samples.toString()} />\r\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"UV Set\" target={texture} propertyKey=\"coordinatesIndex\" min={0} max={3} step={1} />\r\n            <BoundProperty component={NumberDropdownPropertyLine} label=\"Mode\" target={texture} propertyKey=\"coordinatesMode\" options={CoordinatesMode} />\r\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"Level\" target={texture} propertyKey=\"level\" min={0} max={2} step={0.01} />\r\n            <BoundProperty component={SyncedSliderPropertyLine} label=\"Anisotropy\" target={texture} propertyKey=\"anisotropicFilteringLevel\" min={1} max={maxAnisotropy} step={1} />\r\n        </>\r\n    );\r\n};\r\n\r\nexport const BaseTextureTransformProperties: FunctionComponent<{ texture: BaseTexture }> = (props) => {\r\n    const { texture } = props;\r\n\r\n    return (\r\n        <>\r\n            {texture.canRescale && (\r\n                <ButtonLine\r\n                    label=\"Scale Up\"\r\n                    onClick={() => {\r\n                        texture.scale(2);\r\n                    }}\r\n                />\r\n            )}\r\n            {texture.canRescale && (\r\n                <ButtonLine\r\n                    label=\"Scale Down\"\r\n                    onClick={() => {\r\n                        texture.scale(0.5);\r\n                    }}\r\n                />\r\n            )}\r\n        </>\r\n    );\r\n};\r\n","import type { FunctionComponent } from \"react\";\r\n\r\nimport type { CubeTexture } from \"core/index\";\r\nimport type { ISettingsContext } from \"../../../services/settingsContext\";\r\n\r\nimport { SyncedSliderPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/syncedSliderPropertyLine\";\r\nimport { useAngleConverters } from \"../../../hooks/settingsHooks\";\r\nimport { BoundProperty } from \"../boundProperty\";\r\n\r\nexport const CubeTextureTransformProperties: FunctionComponent<{ texture: CubeTexture; settings: ISettingsContext }> = (props) => {\r\n    const { texture, settings } = props;\r\n\r\n    const [toDisplayAngle, fromDisplayAngle] = useAngleConverters(settings);\r\n\r\n    return (\r\n        <BoundProperty\r\n            component={SyncedSliderPropertyLine}\r\n            label=\"Rotation Y\"\r\n            target={texture}\r\n            propertyKey=\"rotationY\"\r\n            min={0}\r\n            max={toDisplayAngle(Math.PI * 2)}\r\n            convertTo={(value) => toDisplayAngle(value, true)}\r\n            convertFrom={fromDisplayAngle}\r\n        />\r\n    );\r\n};\r\n","import type { MultiRenderTarget } from \"core/index\";\r\n\r\nimport type { FunctionComponent } from \"react\";\r\n\r\nimport { StringifiedPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/stringifiedPropertyLine\";\r\nimport { BoundProperty } from \"../boundProperty\";\r\n\r\nexport const MultiRenderTargetGeneralProperties: FunctionComponent<{ texture: MultiRenderTarget }> = (props) => {\r\n    const { texture } = props;\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty component={StringifiedPropertyLine} label=\"Count\" description=\"The number of render target textures.\" target={texture} propertyKey=\"count\" />\r\n        </>\r\n    );\r\n};\r\n","import type { RenderTargetTexture } from \"core/index\";\r\n\r\nimport type { FunctionComponent } from \"react\";\r\n\r\nimport { BooleanBadgePropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/booleanBadgePropertyLine\";\r\nimport { TextPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/textPropertyLine\";\r\nimport { useProperty } from \"../../../hooks/compoundPropertyHooks\";\r\nimport { FindTextureFormat } from \"./textureFormatUtils\";\r\n\r\nexport const RenderTargetTextureGeneralProperties: FunctionComponent<{ texture: RenderTargetTexture }> = (props) => {\r\n    const { texture } = props;\r\n\r\n    const depthStencilTexture = useProperty(texture.renderTarget, \"_depthStencilTexture\");\r\n    const depthStencilTextureDisplayFormat = depthStencilTexture ? FindTextureFormat(depthStencilTexture.format) : null;\r\n\r\n    return (\r\n        <>\r\n            {depthStencilTextureDisplayFormat ? (\r\n                <TextPropertyLine label=\"Depth/Stencil Format\" value={depthStencilTextureDisplayFormat.label} />\r\n            ) : (\r\n                <BooleanBadgePropertyLine label=\"Depth/Stencil Texture\" value={false} />\r\n            )}\r\n        </>\r\n    );\r\n};\r\n","import type { Texture } from \"core/index\";\r\nimport type { ISettingsContext } from \"../../../services/settingsContext\";\r\n\r\nimport type { FunctionComponent } from \"react\";\r\n\r\nimport { Constants } from \"core/Engines/constants\";\r\nimport { BooleanBadgePropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/booleanBadgePropertyLine\";\r\nimport { NumberInputPropertyLine, TextInputPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/inputPropertyLine\";\r\nimport { SwitchPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/switchPropertyLine\";\r\nimport { SyncedSliderPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/syncedSliderPropertyLine\";\r\nimport { useProperty } from \"../../../hooks/compoundPropertyHooks\";\r\nimport { useAngleConverters } from \"../../../hooks/settingsHooks\";\r\nimport { BoundProperty } from \"../boundProperty\";\r\n\r\nexport const TexturePreviewProperties: FunctionComponent<{ texture: Texture }> = (props) => {\r\n    const { texture } = props;\r\n\r\n    const rawUrl = useProperty(texture, \"url\");\r\n    const displayUrl = !rawUrl || rawUrl.substring(0, 4) === \"data\" || rawUrl.substring(0, 4) === \"blob\" ? \"\" : rawUrl;\r\n\r\n    return (\r\n        <>\r\n            <TextInputPropertyLine\r\n                label=\"URL\"\r\n                value={displayUrl}\r\n                onChange={(value) => {\r\n                    texture.updateURL(value);\r\n                }}\r\n            />\r\n        </>\r\n    );\r\n};\r\n\r\nexport const TextureGeneralProperties: FunctionComponent<{ texture: Texture }> = (props) => {\r\n    const { texture } = props;\r\n\r\n    return (\r\n        <>\r\n            <BooleanBadgePropertyLine label=\"Invert Y\" description=\"If true, the texture is stored as inverted on Y\" value={texture.invertY} />\r\n        </>\r\n    );\r\n};\r\n\r\nexport const TextureTransformProperties: FunctionComponent<{ texture: Texture; settings: ISettingsContext }> = (props) => {\r\n    const { texture, settings } = props;\r\n\r\n    const [toDisplayAngle, fromDisplayAngle] = useAngleConverters(settings);\r\n    const wrapU = useProperty(texture, \"wrapU\");\r\n    const wrapV = useProperty(texture, \"wrapV\");\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty component={NumberInputPropertyLine} label=\"U offset\" target={texture} propertyKey=\"uOffset\" step={0.01} />\r\n            <BoundProperty component={NumberInputPropertyLine} label=\"V offset\" target={texture} propertyKey=\"vOffset\" step={0.01} />\r\n            <BoundProperty component={NumberInputPropertyLine} label=\"U scale\" target={texture} propertyKey=\"uScale\" step={0.01} />\r\n            <BoundProperty component={NumberInputPropertyLine} label=\"V scale\" target={texture} propertyKey=\"vScale\" step={0.01} />\r\n            <BoundProperty\r\n                component={SyncedSliderPropertyLine}\r\n                label=\"U angle\"\r\n                target={texture}\r\n                propertyKey=\"uAng\"\r\n                min={0}\r\n                max={toDisplayAngle(Math.PI * 2)}\r\n                convertTo={(value) => toDisplayAngle(value, true)}\r\n                convertFrom={fromDisplayAngle}\r\n            />\r\n            <BoundProperty\r\n                component={SyncedSliderPropertyLine}\r\n                label=\"V angle\"\r\n                target={texture}\r\n                propertyKey=\"vAng\"\r\n                min={0}\r\n                max={toDisplayAngle(Math.PI * 2)}\r\n                convertTo={(value) => toDisplayAngle(value, true)}\r\n                convertFrom={fromDisplayAngle}\r\n            />\r\n            <BoundProperty\r\n                component={SyncedSliderPropertyLine}\r\n                label=\"W angle\"\r\n                target={texture}\r\n                propertyKey=\"wAng\"\r\n                min={0}\r\n                max={toDisplayAngle(Math.PI * 2)}\r\n                convertTo={(value) => toDisplayAngle(value, true)}\r\n                convertFrom={fromDisplayAngle}\r\n            />\r\n            <SwitchPropertyLine\r\n                label=\"Clamp U\"\r\n                value={wrapU === Constants.TEXTURE_CLAMP_ADDRESSMODE}\r\n                onChange={(value) => (texture.wrapU = value ? Constants.TEXTURE_CLAMP_ADDRESSMODE : Constants.TEXTURE_WRAP_ADDRESSMODE)}\r\n            />\r\n            <SwitchPropertyLine\r\n                label=\"Clamp V\"\r\n                value={wrapV === Constants.TEXTURE_CLAMP_ADDRESSMODE}\r\n                onChange={(value) => (texture.wrapV = value ? Constants.TEXTURE_CLAMP_ADDRESSMODE : Constants.TEXTURE_WRAP_ADDRESSMODE)}\r\n            />\r\n        </>\r\n    );\r\n};\r\n","import type { FunctionComponent } from \"react\";\r\n\r\nimport type { ThinTexture } from \"core/index\";\r\nimport type { DropdownOption } from \"shared-ui-components/fluent/primitives/dropdown\";\r\n\r\nimport { useCallback } from \"react\";\r\n\r\nimport { NumberDropdownPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/dropdownPropertyLine\";\r\nimport { StringifiedPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/stringifiedPropertyLine\";\r\nimport { Texture } from \"core/Materials/Textures/texture\";\r\nimport { useObservableState } from \"../../../hooks/observableHooks\";\r\nimport { useInterceptObservable } from \"../../../hooks/instrumentationHooks\";\r\nimport { Property } from \"../boundProperty\";\r\n\r\nconst SamplingMode = [\r\n    { label: \"Nearest\", value: Texture.NEAREST_NEAREST }, // 1\r\n    { label: \"Linear\", value: Texture.LINEAR_LINEAR }, // 2\r\n\r\n    { label: \"Linear & linear mip\", value: Texture.LINEAR_LINEAR_MIPLINEAR }, // 3\r\n    { label: \"Linear & nearest mip\", value: Texture.LINEAR_LINEAR_MIPNEAREST }, // 11\r\n\r\n    { label: \"Nearest & linear mip\", value: Texture.NEAREST_NEAREST_MIPLINEAR }, // 8\r\n    { label: \"Nearest & nearest mip\", value: Texture.NEAREST_NEAREST_MIPNEAREST }, // 4\r\n\r\n    { label: \"Nearest/Linear\", value: Texture.NEAREST_LINEAR }, // 7\r\n    { label: \"Nearest/Linear & linear mip\", value: Texture.NEAREST_LINEAR_MIPLINEAR }, // 6\r\n    { label: \"Nearest/Linear & nearest mip\", value: Texture.NEAREST_LINEAR_MIPNEAREST }, // 5\r\n\r\n    { label: \"Linear/Nearest\", value: Texture.LINEAR_NEAREST }, // 12\r\n    { label: \"Linear/Nearest & linear mip\", value: Texture.LINEAR_NEAREST_MIPLINEAR }, // 10\r\n    { label: \"Linear/Nearest & nearest mip\", value: Texture.LINEAR_NEAREST_MIPNEAREST }, // 9\r\n] as const satisfies DropdownOption<number>[];\r\n\r\nexport const ThinTextureGeneralProperties: FunctionComponent<{ texture: ThinTexture }> = (props) => {\r\n    const { texture } = props;\r\n\r\n    return (\r\n        <>\r\n            <StringifiedPropertyLine label=\"Width\" value={texture.getSize().width} units=\"px\" />\r\n            <StringifiedPropertyLine label=\"Height\" value={texture.getSize().height} units=\"px\" />\r\n        </>\r\n    );\r\n};\r\n\r\nexport const ThinTextureSamplingProperties: FunctionComponent<{ texture: ThinTexture }> = (props) => {\r\n    const { texture } = props;\r\n\r\n    const samplingMode = useObservableState(\r\n        useCallback(() => texture.samplingMode, [texture]),\r\n        useInterceptObservable(\"function\", texture, \"updateSamplingMode\")\r\n    );\r\n    return (\r\n        <Property\r\n            component={NumberDropdownPropertyLine}\r\n            label=\"Sampling\"\r\n            propertyPath=\"samplingMode\"\r\n            value={samplingMode}\r\n            options={SamplingMode}\r\n            onChange={(value) => texture.updateSamplingMode(value)}\r\n        />\r\n    );\r\n};\r\n","// eslint-disable-next-line @typescript-eslint/naming-convention\r\nexport const canvasShader = {\r\n    path: {\r\n        vertexSource: `\r\n            precision highp float;\r\n\r\n            attribute vec3 position;\r\n            attribute vec2 uv;\r\n\r\n            uniform mat4 worldViewProjection;\r\n\r\n            varying vec2 vUV;\r\n\r\n            void main(void) {\r\n                gl_Position = worldViewProjection * vec4(position, 1.0);\r\n                vUV = uv;\r\n            }\r\n        `,\r\n        fragmentSource: `\r\n            precision highp float;\r\n    \r\n            uniform sampler2D textureSampler;\r\n    \r\n            uniform bool r;\r\n            uniform bool g;\r\n            uniform bool b;\r\n            uniform bool a;\r\n\r\n            uniform int x1;\r\n            uniform int y1;\r\n            uniform int x2;\r\n            uniform int y2;\r\n            uniform int w;\r\n            uniform int h;\r\n\r\n            uniform int time;\r\n            uniform bool showGrid;\r\n    \r\n            varying vec2 vUV;\r\n\r\n            float scl = 200.0;\r\n            float speed = 10.0 / 1000.0;\r\n            float smoothing = 0.2;\r\n    \r\n            void main(void) {\r\n                vec2 pos2 = vec2(gl_FragCoord.x, gl_FragCoord.y);\r\n                vec2 pos = floor(pos2 * 0.05);\r\n                float pattern = mod(pos.x + pos.y, 2.0); \r\n                if (pattern == 0.0) {\r\n                    pattern = 0.7;\r\n                }\r\n                vec4 bg = vec4(pattern, pattern, pattern, 1.0);\r\n                vec4 col = texture(textureSampler, vUV);\r\n                if (!r && !g && !b) {\r\n                    if (a) {\r\n                        col = vec4(col.a, col.a, col.a, 1.0);\r\n                    } else {\r\n                        col = vec4(0.0,0.0,0.0,0.0);\r\n                    }\r\n                } else {\r\n                    if (!r) {\r\n                        col.r = 0.0;\r\n                        if (!b) {\r\n                            col.r = col.g;\r\n                        }\r\n                        else if (!g) {\r\n                            col.r = col.b;\r\n                        }\r\n                    }\r\n                    if (!g) {\r\n                        col.g = 0.0;\r\n                        if (!b) {\r\n                            col.g = col.r;\r\n                        }\r\n                        else if (!r) {\r\n                            col.g = col.b;\r\n                        }\r\n                    }\r\n                    if (!b) {\r\n                        col.b = 0.0;\r\n                        if (!r) {\r\n                            col.b = col.g;\r\n                        } else if (!g) {\r\n                            col.b = col.r;\r\n                        }\r\n                    }\r\n                    if (!a) {\r\n                        col.a = 1.0;\r\n                    }\r\n                }\r\n                gl_FragColor = col * (col.a) + bg * (1.0 - col.a);\r\n                float wF = float(w);\r\n                float hF = float(h);\r\n                int xPixel = int(floor(vUV.x * wF));\r\n                int yPixel = int(floor((1.0 - vUV.y) * hF));\r\n                int xDis = min(abs(xPixel - x1), abs(xPixel - x2));\r\n                int yDis = min(abs(yPixel - y1), abs(yPixel - y2));\r\n                if (showGrid) {\r\n                    vec2 frac = fract(vUV * vec2(wF,hF));\r\n                    float thickness = 0.1;\r\n                    if (abs(frac.x) < thickness || abs (frac.y) < thickness) {\r\n                        gl_FragColor = vec4(0.75,0.75,0.75,1.0);\r\n                    }\r\n                }\r\n                if (xPixel >= x1 && yPixel >= y1 && xPixel <= x2 && yPixel <= y2) {\r\n                    if (xDis <= 4 || yDis <= 4) {\r\n                        float c = sin(vUV.x * scl + vUV.y * scl + float(time) * speed);\r\n                        c = smoothstep(-smoothing,smoothing,c);\r\n                        float val = 1.0 - c;\r\n                        gl_FragColor = vec4(val, val, val, 1.0) * 0.7 + gl_FragColor * 0.3;\r\n                    }\r\n                }\r\n            }`,\r\n    },\r\n    options: {\r\n        attributes: [\"position\", \"uv\"],\r\n        uniforms: [\"worldViewProjection\", \"textureSampler\", \"r\", \"g\", \"b\", \"a\", \"x1\", \"y1\", \"x2\", \"y2\", \"w\", \"h\", \"time\", \"showGrid\"],\r\n    },\r\n};\r\n","/* eslint-disable @typescript-eslint/no-floating-promises */\r\n/* eslint-disable @typescript-eslint/naming-convention */\r\nimport type { BaseTexture, CubeTexture, InternalTexture, ISize, IWheelEvent, Mesh, Nullable, PointerInfo, RawCubeTexture } from \"core/index\";\r\nimport type { Channel } from \"./channels\";\r\nimport type { IMetadata } from \"./textureEditor\";\r\n\r\nimport { Camera } from \"core/Cameras/camera\";\r\nimport { FreeCamera } from \"core/Cameras/freeCamera\";\r\nimport { Engine } from \"core/Engines/engine\";\r\nimport { KeyboardEventTypes } from \"core/Events/keyboardEvents\";\r\nimport { PointerEventTypes } from \"core/Events/pointerEvents\";\r\nimport { HtmlElementTexture } from \"core/Materials/Textures/htmlElementTexture\";\r\nimport { Texture } from \"core/Materials/Textures/texture\";\r\nimport { ShaderMaterial } from \"core/Materials/shaderMaterial\";\r\nimport { StandardMaterial } from \"core/Materials/standardMaterial\";\r\nimport { Color3, Color4 } from \"core/Maths/math.color\";\r\nimport { Vector2, Vector3 } from \"core/Maths/math.vector\";\r\nimport { CreatePlane } from \"core/Meshes/Builders/planeBuilder\";\r\nimport { Tools } from \"core/Misc/tools\";\r\nimport { Scene } from \"core/scene\";\r\nimport { ApplyChannelsToTextureDataAsync } from \"../../misc/textureTools\";\r\nimport { canvasShader } from \"./canvasShader\";\r\n\r\nexport type CanvasManagerTool = {\r\n    readonly is3D: boolean;\r\n    activate(): void;\r\n    deactivate(): void;\r\n    reset(): void;\r\n};\r\n\r\nexport interface IPixelData {\r\n    x?: number;\r\n    y?: number;\r\n    r?: number;\r\n    g?: number;\r\n    b?: number;\r\n    a?: number;\r\n}\r\n\r\nexport class TextureCanvasManager {\r\n    private readonly _engine: Engine;\r\n    private readonly _scene: Scene;\r\n    private readonly _camera: FreeCamera;\r\n    private readonly _cameraPos: Vector2;\r\n\r\n    private _scale: number;\r\n    private _isPanning = false;\r\n    private _mouseX = 0;\r\n    private _mouseY = 0;\r\n\r\n    private readonly _uiCanvas: HTMLCanvasElement;\r\n\r\n    private _size: ISize = { width: 0, height: 0 };\r\n\r\n    /** The canvas we paint onto using the canvas API */\r\n    private readonly _2DCanvas: HTMLCanvasElement;\r\n    /** The canvas we apply post processes to */\r\n    private readonly _3DCanvas: HTMLCanvasElement;\r\n    /** The canvas which handles channel filtering */\r\n    private readonly _channelsTexture: HtmlElementTexture;\r\n\r\n    private readonly _3DEngine: Engine;\r\n    private readonly _3DPlane: Mesh;\r\n    private readonly _3DCanvasTexture: HtmlElementTexture;\r\n    private readonly _3DScene: Scene;\r\n\r\n    private _channels: Channel[] = [];\r\n    private _face = 0;\r\n    private _mipLevel = 0;\r\n\r\n    /** The texture from the original engine that we invoked the editor on */\r\n    private readonly _originalTexture: BaseTexture;\r\n    /** This is a hidden texture which is only responsible for holding the actual texture memory in the original engine */\r\n    private _target: Nullable<HtmlElementTexture | RawCubeTexture> = null;\r\n    private readonly _originalTextureProperties: {\r\n        _texture: Nullable<InternalTexture>;\r\n        url: Nullable<string>;\r\n        _forceSerialize: boolean;\r\n    };\r\n    /** Keeps track of whether we have modified the texture */\r\n    private _didEdit = false;\r\n\r\n    private _plane: Nullable<Mesh> = null;\r\n    private readonly _planeMaterial: ShaderMaterial;\r\n\r\n    /** Tracks which keys are currently pressed */\r\n    private _keyMap = new Map<string, boolean>();\r\n    /** Tracks which mouse buttons are currently pressed */\r\n    private _buttonsPressed = 0;\r\n\r\n    private readonly ZOOM_MOUSE_SPEED = 0.001;\r\n    private readonly ZOOM_KEYBOARD_SPEED = 0.4;\r\n    private readonly ZOOM_IN_KEY = \"+\";\r\n    private readonly ZOOM_OUT_KEY = \"-\";\r\n\r\n    private readonly PAN_SPEED = 0.003;\r\n    private readonly PAN_KEY = \"Space\";\r\n\r\n    private readonly MIN_SCALE = 0.01;\r\n    private readonly GRID_SCALE = 0.047;\r\n    private readonly MAX_SCALE = 10;\r\n\r\n    private readonly SELECT_ALL_KEY = \"KeyA\";\r\n    private readonly SAVE_KEY = \"KeyS\";\r\n    private readonly RESET_KEY = \"KeyR\";\r\n    private readonly DESELECT_KEY = \"Escape\";\r\n\r\n    /** The number of milliseconds between texture updates */\r\n    private readonly PUSH_FREQUENCY = 32;\r\n\r\n    private _tool: Nullable<CanvasManagerTool> = null;\r\n\r\n    private _setPixelData: (pixelData: IPixelData) => void;\r\n    private _setMipLevel: (mipLevel: number) => void;\r\n\r\n    private readonly _window: Window;\r\n\r\n    private _metadata: IMetadata;\r\n\r\n    private _editing3D = false;\r\n\r\n    private readonly _onUpdate: () => void;\r\n    private _setMetadata: (metadata: any) => void;\r\n\r\n    private _imageData: Nullable<Uint8Array | Uint8ClampedArray> = null;\r\n    private _canPush = true;\r\n    private _shouldPush = false;\r\n    private readonly _paintCanvas: HTMLCanvasElement;\r\n\r\n    public constructor(\r\n        texture: BaseTexture,\r\n        window: Window,\r\n        canvasUI: HTMLCanvasElement,\r\n        canvas2D: HTMLCanvasElement,\r\n        canvas3D: HTMLCanvasElement,\r\n        setPixelData: (pixelData: IPixelData) => void,\r\n        metadata: IMetadata,\r\n        onUpdate: () => void,\r\n        setMetadata: (metadata: any) => void,\r\n        setMipLevel: (level: number) => void\r\n    ) {\r\n        this._window = window;\r\n\r\n        this._uiCanvas = canvasUI;\r\n        this._2DCanvas = canvas2D;\r\n        this._3DCanvas = canvas3D;\r\n        this._paintCanvas = document.createElement(\"canvas\");\r\n        this._setPixelData = setPixelData;\r\n        this._metadata = metadata;\r\n        this._onUpdate = onUpdate;\r\n        this._setMetadata = setMetadata;\r\n        this._setMipLevel = setMipLevel;\r\n\r\n        this._originalTexture = texture;\r\n        this._originalTextureProperties = {\r\n            _texture: this._originalTexture._texture,\r\n            url: (this._originalTexture as Texture).url,\r\n            _forceSerialize: this._originalTexture._forceSerialize,\r\n        };\r\n        this._engine = new Engine(this._uiCanvas, true);\r\n        this._scene = new Scene(this._engine, { virtual: true });\r\n        this._scene.clearColor = new Color4(0, 0, 0, 0);\r\n\r\n        this._camera = new FreeCamera(\"camera\", new Vector3(0, 0, -1), this._scene);\r\n        this._camera.mode = Camera.ORTHOGRAPHIC_CAMERA;\r\n        this._camera.minZ = 0.5;\r\n        this._camera.maxZ = 1.5;\r\n        this._cameraPos = new Vector2();\r\n\r\n        this.setSize(texture.getSize());\r\n\r\n        this._channelsTexture = new HtmlElementTexture(\"ct\", this._2DCanvas, {\r\n            engine: this._engine,\r\n            scene: null,\r\n            samplingMode: Texture.NEAREST_SAMPLINGMODE,\r\n            generateMipMaps: true,\r\n        });\r\n\r\n        this._3DEngine = new Engine(this._3DCanvas);\r\n        this._3DScene = new Scene(this._3DEngine, { virtual: true });\r\n        this._3DScene.clearColor = new Color4(0, 0, 0, 0);\r\n        this._3DCanvasTexture = new HtmlElementTexture(\"canvas\", this._2DCanvas, { engine: this._3DEngine, scene: this._3DScene });\r\n        this._3DCanvasTexture.hasAlpha = true;\r\n        const cam = new FreeCamera(\"camera\", new Vector3(0, 0, -1), this._3DScene);\r\n        cam.mode = Camera.ORTHOGRAPHIC_CAMERA;\r\n        [cam.orthoBottom, cam.orthoLeft, cam.orthoTop, cam.orthoRight] = [-0.5, -0.5, 0.5, 0.5];\r\n        this._3DPlane = CreatePlane(\"texture\", { width: 1, height: 1 }, this._3DScene);\r\n        this._3DPlane.hasVertexAlpha = true;\r\n        const mat = new StandardMaterial(\"material\", this._3DScene);\r\n        mat.diffuseTexture = this._3DCanvasTexture;\r\n        mat.useAlphaFromDiffuseTexture = true;\r\n        mat.disableLighting = true;\r\n        mat.emissiveColor = Color3.White();\r\n        this._3DPlane.material = mat;\r\n\r\n        this._planeMaterial = new ShaderMaterial(\"canvasShader\", this._scene, canvasShader.path, canvasShader.options);\r\n\r\n        this.grabOriginalTexture();\r\n\r\n        this._planeMaterial.setTexture(\"textureSampler\", this._channelsTexture);\r\n        this._planeMaterial.setFloat(\"r\", 1.0);\r\n        this._planeMaterial.setFloat(\"g\", 1.0);\r\n        this._planeMaterial.setFloat(\"b\", 1.0);\r\n        this._planeMaterial.setFloat(\"a\", 1.0);\r\n        this._planeMaterial.setInt(\"x1\", -1);\r\n        this._planeMaterial.setInt(\"y1\", -1);\r\n        this._planeMaterial.setInt(\"x2\", -1);\r\n        this._planeMaterial.setInt(\"y2\", -1);\r\n        this._planeMaterial.setInt(\"w\", this._size.width);\r\n        this._planeMaterial.setInt(\"h\", this._size.height);\r\n        this._planeMaterial.setInt(\"time\", 0);\r\n        this._planeMaterial.setFloat(\"showGrid\", 0.0);\r\n        if (this._plane) {\r\n            this._plane.material = this._planeMaterial;\r\n        }\r\n\r\n        this._window.addEventListener(\"keydown\", (evt) => {\r\n            this._keyMap.set(evt.code, true);\r\n            if (evt.code === this.SELECT_ALL_KEY && evt.ctrlKey) {\r\n                this._setMetadata({\r\n                    select: {\r\n                        x1: 0,\r\n                        y1: 0,\r\n                        x2: this._size.width,\r\n                        y2: this._size.height,\r\n                    },\r\n                });\r\n                evt.preventDefault();\r\n            }\r\n            if (evt.code === this.SAVE_KEY && evt.ctrlKey) {\r\n                this.saveTexture();\r\n                evt.preventDefault();\r\n            }\r\n            if (evt.code === this.RESET_KEY && evt.ctrlKey) {\r\n                this.reset();\r\n                evt.preventDefault();\r\n            }\r\n            if (evt.code === this.DESELECT_KEY) {\r\n                this._setMetadata({\r\n                    select: {\r\n                        x1: -1,\r\n                        y1: -1,\r\n                        x2: -1,\r\n                        y2: -1,\r\n                    },\r\n                });\r\n            }\r\n        });\r\n\r\n        this._window.addEventListener(\"keyup\", (evt) => {\r\n            this._keyMap.set(evt.code, false);\r\n        });\r\n\r\n        this._engine.runRenderLoop(() => {\r\n            this._engine.resize();\r\n            this._scene.render();\r\n            this._planeMaterial.setInt(\"time\", new Date().getTime());\r\n        });\r\n\r\n        this._scale = 1.5 / Math.max(this._size.width, this._size.height);\r\n        this._isPanning = false;\r\n\r\n        this._scene.onBeforeRenderObservable.add(() => {\r\n            this._scale = Math.min(Math.max(this._scale, this.MIN_SCALE / Math.log2(Math.min(this._size.width, this._size.height))), this.MAX_SCALE);\r\n            if (this._scale > this.GRID_SCALE) {\r\n                this._planeMaterial.setFloat(\"showGrid\", 1.0);\r\n            } else {\r\n                this._planeMaterial.setFloat(\"showGrid\", 0.0);\r\n            }\r\n            const ratio = this._uiCanvas?.width / this._uiCanvas?.height;\r\n            const { x, y } = this._cameraPos;\r\n            this._camera.orthoBottom = y - 1 / this._scale;\r\n            this._camera.orthoTop = y + 1 / this._scale;\r\n            this._camera.orthoLeft = x - ratio / this._scale;\r\n            this._camera.orthoRight = x + ratio / this._scale;\r\n        });\r\n\r\n        this._scene.onPointerObservable.add((pointerInfo) => {\r\n            const leftButtonPressed = pointerInfo.event.buttons & 1;\r\n            const middleButtonPressed = pointerInfo.event.buttons & 4;\r\n            if (!this._isPanning) {\r\n                if ((leftButtonPressed && !(this._buttonsPressed & 1) && this._keyMap.get(this.PAN_KEY)) || middleButtonPressed) {\r\n                    this._isPanning = true;\r\n                    this._mouseX = pointerInfo.event.x;\r\n                    this._mouseY = pointerInfo.event.y;\r\n                }\r\n                if (middleButtonPressed) {\r\n                    this._isPanning = true;\r\n                }\r\n            } else if ((!leftButtonPressed || !this._keyMap.get(this.PAN_KEY)) && !middleButtonPressed) {\r\n                this._isPanning = false;\r\n            }\r\n            switch (pointerInfo.type) {\r\n                case PointerEventTypes.POINTERWHEEL: {\r\n                    const event = pointerInfo.event as IWheelEvent;\r\n                    this._scale -= event.deltaY * this.ZOOM_MOUSE_SPEED * this._scale;\r\n                    break;\r\n                }\r\n                case PointerEventTypes.POINTERMOVE:\r\n                    if (this._isPanning) {\r\n                        this._cameraPos.x -= ((pointerInfo.event.x - this._mouseX) * this.PAN_SPEED) / this._scale;\r\n                        this._cameraPos.y += ((pointerInfo.event.y - this._mouseY) * this.PAN_SPEED) / this._scale;\r\n                        this._mouseX = pointerInfo.event.x;\r\n                        this._mouseY = pointerInfo.event.y;\r\n                    }\r\n                    if (pointerInfo.pickInfo?.hit) {\r\n                        if (this._imageData) {\r\n                            const pos = this.getMouseCoordinates(pointerInfo);\r\n                            const idx = (pos.x + pos.y * this._size.width) * 4;\r\n                            this._setPixelData({\r\n                                x: pos.x,\r\n                                y: pos.y,\r\n                                r: this._imageData[idx],\r\n                                g: this._imageData[idx + 1],\r\n                                b: this._imageData[idx + 2],\r\n                                a: this._imageData[idx + 3],\r\n                            });\r\n                        }\r\n                    } else {\r\n                        this._setPixelData({});\r\n                    }\r\n                    break;\r\n            }\r\n            this._buttonsPressed = pointerInfo.event.buttons;\r\n        });\r\n\r\n        this._scene.onKeyboardObservable.add((kbInfo) => {\r\n            switch (kbInfo.type) {\r\n                case KeyboardEventTypes.KEYDOWN:\r\n                    this._keyMap.set(kbInfo.event.key, true);\r\n                    switch (kbInfo.event.key) {\r\n                        case this.ZOOM_IN_KEY:\r\n                            this._scale += this.ZOOM_KEYBOARD_SPEED * this._scale;\r\n                            break;\r\n                        case this.ZOOM_OUT_KEY:\r\n                            this._scale -= this.ZOOM_KEYBOARD_SPEED * this._scale;\r\n                            break;\r\n                    }\r\n                    break;\r\n                case KeyboardEventTypes.KEYUP:\r\n                    this._keyMap.set(kbInfo.event.key, false);\r\n                    break;\r\n            }\r\n        });\r\n    }\r\n\r\n    public async updateTexture() {\r\n        if (this._mipLevel !== 0) {\r\n            this._setMipLevel(0);\r\n        }\r\n        this._didEdit = true;\r\n        const element = this._editing3D ? this._3DCanvas : this._2DCanvas;\r\n        if (this._editing3D) {\r\n            this._3DCanvasTexture.update();\r\n            this._3DScene.render();\r\n        }\r\n        if (this._originalTexture.isCube) {\r\n            // TODO: fix cube map editing\r\n        } else {\r\n            if (!this._target) {\r\n                this._target = new HtmlElementTexture(\"editor\", element, {\r\n                    engine: this._originalTexture.getScene()?.getEngine()!,\r\n                    scene: null,\r\n                    samplingMode: (this._originalTexture as Texture).samplingMode,\r\n                    generateMipMaps: this._originalTextureProperties._texture?.generateMipMaps,\r\n                });\r\n            } else {\r\n                (this._target as HtmlElementTexture).element = element;\r\n            }\r\n            this.pushTexture();\r\n        }\r\n        this._originalTexture._texture = this._target?._texture ?? null;\r\n        (this._originalTexture as Texture).url = null;\r\n        this._originalTexture._forceSerialize = true;\r\n        this._channelsTexture.element = element;\r\n        this.updateDisplay();\r\n        this._onUpdate();\r\n    }\r\n\r\n    private async pushTexture() {\r\n        if (this._canPush && this._target) {\r\n            const invertY = this._target.constructor.name === HtmlElementTexture.name ? false : (this._originalTexture as Texture).invertY;\r\n            (this._target as HtmlElementTexture).update(invertY);\r\n            this._target._texture?.updateSize(this._size.width, this._size.height);\r\n            if (this._editing3D) {\r\n                const bufferView = await this._3DEngine.readPixels(0, 0, this._size.width, this._size.height);\r\n                this._imageData = new Uint8Array(bufferView.buffer, 0, bufferView.byteLength);\r\n            } else {\r\n                this._imageData = this._2DCanvas.getContext(\"2d\")!.getImageData(0, 0, this._size.width, this._size.height).data;\r\n            }\r\n            this._canPush = false;\r\n            this._shouldPush = false;\r\n            setTimeout(() => {\r\n                this._canPush = true;\r\n                if (this._shouldPush) {\r\n                    this.pushTexture();\r\n                }\r\n            }, this.PUSH_FREQUENCY);\r\n        } else {\r\n            this._shouldPush = true;\r\n        }\r\n    }\r\n\r\n    public async startPainting(): Promise<CanvasRenderingContext2D> {\r\n        if (this._mipLevel != 0) {\r\n            this._setMipLevel(0);\r\n        }\r\n        let x = 0,\r\n            y = 0,\r\n            w = this._size.width,\r\n            h = this._size.height;\r\n        if (this._metadata.select.x1 != -1) {\r\n            x = this._metadata.select.x1;\r\n            y = this._metadata.select.y1;\r\n            w = this._metadata.select.x2 - this._metadata.select.x1;\r\n            h = this._metadata.select.y2 - this._metadata.select.y1;\r\n        }\r\n        this._paintCanvas.width = w;\r\n        this._paintCanvas.height = h;\r\n        const ctx = this._paintCanvas.getContext(\"2d\")!;\r\n        ctx.imageSmoothingEnabled = false;\r\n        ctx.drawImage(this._2DCanvas, x, y, w, h, 0, 0, w, h);\r\n        return ctx;\r\n    }\r\n\r\n    public updatePainting() {\r\n        let x = 0,\r\n            y = 0,\r\n            w = this._size.width,\r\n            h = this._size.height;\r\n        if (this._metadata.select.x1 != -1) {\r\n            x = this._metadata.select.x1;\r\n            y = this._metadata.select.y1;\r\n            w = this._metadata.select.x2 - this._metadata.select.x1;\r\n            h = this._metadata.select.y2 - this._metadata.select.y1;\r\n        }\r\n        let editingAllChannels = true;\r\n        for (const channel of this._channels) {\r\n            if (!channel.editable) {\r\n                editingAllChannels = false;\r\n            }\r\n        }\r\n        let oldData: Uint8ClampedArray;\r\n        if (!editingAllChannels) {\r\n            oldData = this._2DCanvas.getContext(\"2d\")!.getImageData(x, y, w, h).data;\r\n        }\r\n        const ctx = this._paintCanvas.getContext(\"2d\")!;\r\n        const ctx2D = this.canvas2D.getContext(\"2d\")!;\r\n        ctx2D.globalAlpha = 1.0;\r\n        ctx2D.globalCompositeOperation = \"destination-out\";\r\n        ctx2D.fillStyle = \"white\";\r\n        ctx2D.fillRect(x, y, w, h);\r\n        ctx2D.imageSmoothingEnabled = false;\r\n        // If we're not editing all channels, we must process the pixel data\r\n        if (!editingAllChannels) {\r\n            const newData = ctx.getImageData(0, 0, w, h);\r\n            const nd = newData.data;\r\n            for (let index = 0; index < this._channels.length; index++) {\r\n                const channel = this._channels[index];\r\n                if (!channel.editable) {\r\n                    for (let i = index; i < w * h * 4; i += 4) {\r\n                        nd[i] = oldData![i];\r\n                    }\r\n                }\r\n            }\r\n            ctx2D.globalCompositeOperation = \"source-over\";\r\n            ctx2D.globalAlpha = 1.0;\r\n            ctx2D.putImageData(newData, x, y);\r\n        } else {\r\n            ctx2D.globalCompositeOperation = \"source-over\";\r\n            ctx2D.globalAlpha = 1.0;\r\n            // We want to use drawImage wherever possible since it is much faster than putImageData\r\n            ctx2D.drawImage(ctx.canvas, x, y);\r\n        }\r\n        this.updateTexture();\r\n    }\r\n\r\n    public stopPainting(): void {\r\n        this._paintCanvas.getContext(\"2d\")!.clearRect(0, 0, this._paintCanvas.width, this._paintCanvas.height);\r\n    }\r\n\r\n    private updateDisplay() {\r\n        this._3DScene.render();\r\n        this._channelsTexture.update(true);\r\n    }\r\n\r\n    public set channels(channels: Channel[]) {\r\n        // Determine if we need to re-render the texture. This is an expensive operation, so we should only do it if channel visibility has changed.\r\n        let needsRender = false;\r\n        if (channels.length !== this._channels.length) {\r\n            needsRender = true;\r\n        } else {\r\n            for (let i = 0; i < channels.length; i++) {\r\n                const channel = channels[i];\r\n                if (channel.visible !== this._channels[i].visible) {\r\n                    needsRender = true;\r\n                    this._planeMaterial.setFloat(channel.id.toLowerCase(), channel.visible ? 1.0 : 0.0);\r\n                }\r\n            }\r\n        }\r\n        this._channels = channels;\r\n        if (needsRender) {\r\n            this.updateDisplay();\r\n        }\r\n    }\r\n\r\n    public paintPixelsOnCanvas(pixelData: Uint8Array, canvas: HTMLCanvasElement) {\r\n        const ctx = canvas.getContext(\"2d\")!;\r\n        const imgData = ctx.createImageData(canvas.width, canvas.height);\r\n        imgData.data.set(pixelData);\r\n        ctx.putImageData(imgData, 0, 0);\r\n    }\r\n\r\n    public async grabOriginalTexture() {\r\n        // Grab image data from original texture and paint it onto the context of a DynamicTexture\r\n        this.setSize(this._originalTexture.getSize());\r\n        const data = await ApplyChannelsToTextureDataAsync(\r\n            this._originalTexture,\r\n            this._size.width,\r\n            this._size.height,\r\n            this._face,\r\n            { R: true, G: true, B: true, A: true },\r\n            this._mipLevel\r\n        );\r\n        this._imageData = data;\r\n        this.paintPixelsOnCanvas(data, this._2DCanvas);\r\n        this._3DCanvasTexture.update();\r\n        this.updateDisplay();\r\n        return data;\r\n    }\r\n\r\n    public getMouseCoordinates(pointerInfo: PointerInfo) {\r\n        if (pointerInfo.pickInfo?.hit) {\r\n            const x = Math.floor(pointerInfo.pickInfo.getTextureCoordinates()!.x * this._size.width);\r\n            const y = Math.floor((1 - pointerInfo.pickInfo.getTextureCoordinates()!.y) * this._size.height);\r\n            return new Vector2(x, y);\r\n        } else {\r\n            return new Vector2();\r\n        }\r\n    }\r\n\r\n    public get scene() {\r\n        return this._scene;\r\n    }\r\n\r\n    public get canvas2D() {\r\n        return this._2DCanvas;\r\n    }\r\n\r\n    public get size() {\r\n        return this._size;\r\n    }\r\n\r\n    public set tool(tool: Nullable<CanvasManagerTool>) {\r\n        if (this._tool) {\r\n            this._tool.deactivate();\r\n        }\r\n        this._tool = tool;\r\n        if (this._tool) {\r\n            this._tool.activate();\r\n            if (this._editing3D && !this._tool.is3D) {\r\n                this._editing3D = false;\r\n                this._2DCanvas.getContext(\"2d\")?.drawImage(this._3DCanvas, 0, 0);\r\n            } else if (!this._editing3D && this._tool.is3D) {\r\n                this._editing3D = true;\r\n                this.updateTexture();\r\n            }\r\n        }\r\n    }\r\n\r\n    public get tool() {\r\n        return this._tool;\r\n    }\r\n\r\n    public set face(face: number) {\r\n        if (this._face !== face) {\r\n            this._face = face;\r\n            this.grabOriginalTexture();\r\n            this.updateDisplay();\r\n        }\r\n    }\r\n\r\n    public set mipLevel(mipLevel: number) {\r\n        if (this._mipLevel === mipLevel) {\r\n            return;\r\n        }\r\n        this._mipLevel = mipLevel;\r\n        this.grabOriginalTexture();\r\n    }\r\n\r\n    /** Returns the 3D scene used for postprocesses */\r\n    public get scene3D() {\r\n        return this._3DScene;\r\n    }\r\n\r\n    public set metadata(metadata: IMetadata) {\r\n        this._metadata = metadata;\r\n        const { x1, y1, x2, y2 } = metadata.select;\r\n        this._planeMaterial.setInt(\"x1\", x1);\r\n        this._planeMaterial.setInt(\"y1\", y1);\r\n        this._planeMaterial.setInt(\"x2\", x2);\r\n        this._planeMaterial.setInt(\"y2\", y2);\r\n    }\r\n\r\n    private makePlane() {\r\n        if (this._plane) {\r\n            this._plane.dispose();\r\n        }\r\n        this._plane = CreatePlane(\"plane\", { width: this._size.width, height: this._size.height }, this._scene);\r\n        this._plane.enableEdgesRendering();\r\n        this._plane.edgesWidth = 4.0;\r\n        this._plane.edgesColor = new Color4(1, 1, 1, 1);\r\n        this._plane.enablePointerMoveEvents = true;\r\n        this._plane.material = this._planeMaterial;\r\n    }\r\n\r\n    public reset(): void {\r\n        if (this._tool && this._tool.reset) {\r\n            this._tool.reset();\r\n        }\r\n        this._originalTexture._texture = this._originalTextureProperties._texture;\r\n        (this._originalTexture as Texture).url = this._originalTextureProperties.url;\r\n        this._originalTexture._forceSerialize = this._originalTextureProperties._forceSerialize;\r\n        this.grabOriginalTexture();\r\n        this.makePlane();\r\n        this._didEdit = false;\r\n        this._onUpdate();\r\n    }\r\n\r\n    public async resize(newSize: ISize) {\r\n        const data = await ApplyChannelsToTextureDataAsync(this._originalTexture, newSize.width, newSize.height, this._face, { R: true, G: true, B: true, A: true });\r\n        this.setSize(newSize);\r\n        this.paintPixelsOnCanvas(data, this._2DCanvas);\r\n        this.updateTexture();\r\n        this._didEdit = true;\r\n    }\r\n\r\n    public setSize(size: ISize) {\r\n        const oldSize = this._size;\r\n        this._size = size;\r\n        this._2DCanvas.width = this._size.width;\r\n        this._2DCanvas.height = this._size.height;\r\n        this._3DCanvas.width = this._size.width;\r\n        this._3DCanvas.height = this._size.height;\r\n        if (this._planeMaterial) {\r\n            this._planeMaterial.setInt(\"w\", this._size.width);\r\n            this._planeMaterial.setInt(\"h\", this._size.height);\r\n        }\r\n        if (!oldSize || oldSize.width != size.width || oldSize.height != size.height) {\r\n            this._cameraPos.x = 0;\r\n            this._cameraPos.y = 0;\r\n            this._scale = 1.5 / Math.max(this._size.width, this._size.height);\r\n        }\r\n        this.makePlane();\r\n    }\r\n\r\n    public upload(file: File) {\r\n        Tools.ReadFile(\r\n            file,\r\n            (data) => {\r\n                const blob = new Blob([data], { type: \"octet/stream\" });\r\n                let extension: string | undefined = undefined;\r\n                if (file.name.toLowerCase().indexOf(\".dds\") > 0) {\r\n                    extension = \".dds\";\r\n                } else if (file.name.toLowerCase().indexOf(\".env\") > 0) {\r\n                    extension = \".env\";\r\n                }\r\n                const reader = new FileReader();\r\n                reader.readAsDataURL(blob);\r\n                reader.onloadend = () => {\r\n                    const base64data = reader.result as string;\r\n\r\n                    if (extension === \".dds\" || extension === \".env\") {\r\n                        // eslint-disable-next-line @typescript-eslint/no-misused-promises\r\n                        (this._originalTexture as CubeTexture).updateURL(base64data, extension, async () => await this.grabOriginalTexture());\r\n                    } else {\r\n                        const texture = new Texture(base64data, this._scene, this._originalTexture.noMipmap, false, Texture.NEAREST_SAMPLINGMODE, () => {\r\n                            // eslint-disable-next-line github/no-then\r\n                            ApplyChannelsToTextureDataAsync(texture, texture.getSize().width, texture.getSize().height, 0, { R: true, G: true, B: true, A: true }).then(\r\n                                async (pixels) => {\r\n                                    if (this._tool && this._tool.reset) {\r\n                                        this._tool.reset();\r\n                                    }\r\n                                    texture.dispose();\r\n                                    this.setSize(texture.getSize());\r\n                                    this.paintPixelsOnCanvas(pixels, this._2DCanvas);\r\n                                    await this.updateTexture();\r\n                                    this._setMipLevel(0);\r\n                                }\r\n                            );\r\n                        });\r\n                    }\r\n                };\r\n            },\r\n            undefined,\r\n            true\r\n        );\r\n    }\r\n\r\n    public saveTexture() {\r\n        const canvas = this._editing3D ? this._3DCanvas : this._2DCanvas;\r\n        Tools.ToBlob(canvas, (blob) => {\r\n            Tools.Download(blob!, this._originalTexture.name);\r\n        });\r\n    }\r\n\r\n    public toolInteractionEnabled() {\r\n        return !(this._keyMap.get(this.PAN_KEY) || this._isPanning);\r\n    }\r\n\r\n    public dispose() {\r\n        if (this._didEdit) {\r\n            this._originalTextureProperties._texture?.dispose();\r\n        }\r\n        if (this._tool) {\r\n            this._tool.deactivate();\r\n        }\r\n        this._paintCanvas.parentNode?.removeChild(this._paintCanvas);\r\n        this._3DPlane.dispose();\r\n        this._3DCanvasTexture.dispose();\r\n        this._3DScene.dispose();\r\n        this._3DEngine.dispose();\r\n        this._plane?.dispose();\r\n        this._channelsTexture.dispose();\r\n        this._planeMaterial.dispose();\r\n        this._camera.dispose();\r\n        this._scene.dispose();\r\n        this._engine.dispose();\r\n    }\r\n}\r\n","import type { FunctionComponent } from \"react\";\r\n\r\nimport { useCallback } from \"react\";\r\nimport { makeStyles, tokens, ToggleButton, Tooltip, Body1, mergeClasses } from \"@fluentui/react-components\";\r\nimport { EyeOffRegular, EyeRegular, LockClosedRegular, LockOpenRegular } from \"@fluentui/react-icons\";\r\n\r\n/**\r\n * Represents a color channel in the texture editor\r\n */\r\nexport type Channel = {\r\n    /** Whether the channel is visible */\r\n    visible: boolean;\r\n    /** Whether the channel is editable */\r\n    editable: boolean;\r\n    /** Display name for the channel */\r\n    name: string;\r\n    /** Channel identifier */\r\n    id: \"R\" | \"G\" | \"B\" | \"A\";\r\n};\r\n\r\nconst useStyles = makeStyles({\r\n    channelsBar: {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        backgroundColor: tokens.colorNeutralBackground1,\r\n        padding: tokens.spacingVerticalXS,\r\n        gap: tokens.spacingVerticalXS,\r\n        borderRadius: tokens.borderRadiusMedium,\r\n        boxShadow: tokens.shadow8,\r\n    },\r\n    channel: {\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        gap: tokens.spacingHorizontalXS,\r\n        padding: tokens.spacingVerticalXS,\r\n        borderRadius: tokens.borderRadiusMedium,\r\n    },\r\n    channelLabel: {\r\n        fontWeight: tokens.fontWeightSemibold,\r\n        margin: `0 ${tokens.spacingHorizontalXS}`,\r\n        textAlign: \"center\",\r\n    },\r\n    channelR: {\r\n        color: tokens.colorPaletteRedBorderActive,\r\n    },\r\n    channelG: {\r\n        color: tokens.colorPaletteGreenBorderActive,\r\n    },\r\n    channelB: {\r\n        color: tokens.colorPaletteBlueBorderActive,\r\n    },\r\n    channelA: {\r\n        color: tokens.colorNeutralForeground1,\r\n    },\r\n    uneditable: {\r\n        opacity: 0.5,\r\n    },\r\n});\r\n\r\ntype ChannelsBarProps = {\r\n    channels: Channel[];\r\n    setChannels: (channels: Channel[]) => void;\r\n};\r\n\r\n/**\r\n * Displays channel visibility and editability controls\r\n * @param props - The channels bar properties\r\n * @returns The channels bar component\r\n */\r\nexport const ChannelsBar: FunctionComponent<ChannelsBarProps> = (props) => {\r\n    const { channels, setChannels } = props;\r\n    const classes = useStyles();\r\n\r\n    const toggleVisibility = useCallback(\r\n        (index: number) => {\r\n            const newChannels = [...channels];\r\n            newChannels[index] = { ...newChannels[index], visible: !newChannels[index].visible };\r\n            setChannels(newChannels);\r\n        },\r\n        [channels, setChannels]\r\n    );\r\n\r\n    const toggleEditable = useCallback(\r\n        (index: number) => {\r\n            const newChannels = [...channels];\r\n            newChannels[index] = { ...newChannels[index], editable: !newChannels[index].editable };\r\n            setChannels(newChannels);\r\n        },\r\n        [channels, setChannels]\r\n    );\r\n\r\n    const getChannelColorClass = (id: string) => {\r\n        switch (id) {\r\n            case \"R\":\r\n                return classes.channelR;\r\n            case \"G\":\r\n                return classes.channelG;\r\n            case \"B\":\r\n                return classes.channelB;\r\n            default:\r\n                return classes.channelA;\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className={classes.channelsBar}>\r\n            {channels.map((channel, index) => {\r\n                const visTip = channel.visible ? \"Hide\" : \"Show\";\r\n                const editTip = channel.editable ? \"Lock\" : \"Unlock\";\r\n\r\n                return (\r\n                    <div key={channel.id} className={`${classes.channel} ${!channel.editable ? classes.uneditable : \"\"}`}>\r\n                        <Tooltip content={`${visTip} ${channel.name}`} relationship=\"label\" positioning=\"before\">\r\n                            <ToggleButton\r\n                                appearance=\"transparent\"\r\n                                size=\"small\"\r\n                                checked={channel.visible}\r\n                                icon={channel.visible ? <EyeRegular /> : <EyeOffRegular />}\r\n                                onClick={() => toggleVisibility(index)}\r\n                            />\r\n                        </Tooltip>\r\n                        <Tooltip content={`${editTip} ${channel.name}`} relationship=\"label\" positioning=\"before\">\r\n                            <ToggleButton\r\n                                appearance=\"transparent\"\r\n                                size=\"small\"\r\n                                checked={channel.editable}\r\n                                icon={channel.editable ? <LockOpenRegular /> : <LockClosedRegular />}\r\n                                onClick={() => toggleEditable(index)}\r\n                            />\r\n                        </Tooltip>\r\n                        <Body1 className={mergeClasses(classes.channelLabel, getChannelColorClass(channel.id))}>{channel.id}</Body1>\r\n                    </div>\r\n                );\r\n            })}\r\n        </div>\r\n    );\r\n};\r\n","import type { FunctionComponent } from \"react\";\r\n\r\nimport type { BaseTexture, ISize } from \"core/index\";\r\nimport type { IPixelData } from \"./canvasManager\";\r\n\r\nimport { Input, Label, makeStyles, tokens, Toolbar, ToolbarButton, ToolbarDivider, Tooltip } from \"@fluentui/react-components\";\r\nimport { ArrowResetRegular, ArrowUploadRegular, ChevronDownRegular, ChevronUpRegular, ResizeRegular, SaveRegular } from \"@fluentui/react-icons\";\r\nimport { useCallback, useEffect, useRef, useState } from \"react\";\r\n\r\nconst useStyles = makeStyles({\r\n    propertiesBar: {\r\n        display: \"flex\",\r\n        backgroundColor: tokens.colorNeutralBackground1,\r\n        alignItems: \"center\",\r\n        padding: `${tokens.spacingVerticalXS} ${tokens.spacingHorizontalS}`,\r\n        gap: tokens.spacingHorizontalS,\r\n        borderBottom: `1px solid ${tokens.colorNeutralStroke1}`,\r\n        flexWrap: \"wrap\",\r\n    },\r\n    section: {\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        gap: tokens.spacingHorizontalXS,\r\n    },\r\n    dimensionsForm: {\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        gap: tokens.spacingHorizontalXS,\r\n    },\r\n    dimensionInput: {\r\n        width: \"60px\",\r\n    },\r\n    pixelData: {\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        gap: tokens.spacingHorizontalXS,\r\n        fontSize: tokens.fontSizeBase200,\r\n        fontFamily: tokens.fontFamilyMonospace,\r\n    },\r\n    pixelDataLabel: {\r\n        color: tokens.colorNeutralForeground3,\r\n    },\r\n    pixelDataValue: {\r\n        color: tokens.colorNeutralForeground1,\r\n        minWidth: \"32px\",\r\n    },\r\n    faceButton: {\r\n        minWidth: \"auto\",\r\n        paddingLeft: tokens.spacingHorizontalS,\r\n        paddingRight: tokens.spacingHorizontalS,\r\n    },\r\n    spacer: {\r\n        flex: 1,\r\n    },\r\n    uploadInput: {\r\n        display: \"none\",\r\n    },\r\n});\r\n\r\ntype PropertiesBarProps = {\r\n    texture: BaseTexture;\r\n    size: ISize;\r\n    saveTexture: () => void;\r\n    pixelData: IPixelData;\r\n    face: number;\r\n    setFace: (face: number) => void;\r\n    resetTexture: () => void;\r\n    resizeTexture: (width: number, height: number) => void;\r\n    uploadTexture: (file: File) => void;\r\n    mipLevel: number;\r\n    setMipLevel: (mipLevel: number) => void;\r\n};\r\n\r\nconst PixelDataDisplay: FunctionComponent<{ label: string; value: number | undefined }> = ({ label, value }) => {\r\n    const classes = useStyles();\r\n    return (\r\n        <span className={classes.pixelData}>\r\n            <Label className={classes.pixelDataLabel}>{label}:</Label>\r\n            <Label className={classes.pixelDataValue}>{value !== undefined ? value : \"-\"}</Label>\r\n        </span>\r\n    );\r\n};\r\n\r\nconst CubeFaces = [\"+X\", \"-X\", \"+Y\", \"-Y\", \"+Z\", \"-Z\"] as const;\r\n\r\n/**\r\n * Properties bar component showing texture info and actions\r\n * @param props - The properties bar properties\r\n * @returns The properties bar component\r\n */\r\nexport const PropertiesBar: FunctionComponent<PropertiesBarProps> = (props) => {\r\n    const { texture, size, saveTexture, pixelData, face, setFace, resetTexture, resizeTexture, uploadTexture, mipLevel, setMipLevel } = props;\r\n\r\n    const classes = useStyles();\r\n    const uploadInputRef = useRef<HTMLInputElement>(null);\r\n    const [width, setWidth] = useState(size.width);\r\n    const [height, setHeight] = useState(size.height);\r\n\r\n    // Update local state when size prop changes\r\n    useEffect(() => {\r\n        setWidth(size.width);\r\n        setHeight(size.height);\r\n    }, [size.width, size.height]);\r\n\r\n    const maxLevels = Math.floor(Math.log2(Math.max(texture.getSize().width, texture.getSize().height)));\r\n    const engine = texture.getScene()?.getEngine();\r\n    const mipsEnabled = !texture.noMipmap && engine?.getCaps().textureLOD;\r\n\r\n    const handleUploadClick = useCallback(() => {\r\n        uploadInputRef.current?.click();\r\n    }, []);\r\n\r\n    const handleFileChange = useCallback(\r\n        (evt: React.ChangeEvent<HTMLInputElement>) => {\r\n            const files = evt.target.files;\r\n            if (files && files.length) {\r\n                uploadTexture(files[0]);\r\n            }\r\n            evt.target.value = \"\";\r\n        },\r\n        [uploadTexture]\r\n    );\r\n\r\n    const handleResize = useCallback(() => {\r\n        resizeTexture(width, height);\r\n    }, [width, height, resizeTexture]);\r\n\r\n    const getNewDimension = (oldDim: number, newDim: string): number => {\r\n        const parsed = parseInt(newDim);\r\n        if (!isNaN(parsed) && parsed > 0 && Number.isInteger(parsed)) {\r\n            return parsed;\r\n        }\r\n        return oldDim;\r\n    };\r\n\r\n    return (\r\n        <div className={classes.propertiesBar}>\r\n            {/* Dimensions Section */}\r\n            <div className={classes.section}>\r\n                <Label>W:</Label>\r\n                <Input\r\n                    className={classes.dimensionInput}\r\n                    size=\"small\"\r\n                    type=\"text\"\r\n                    value={width.toString()}\r\n                    readOnly={texture.isCube}\r\n                    onChange={(_, data) => setWidth(getNewDimension(width, data.value))}\r\n                />\r\n                <Label>H:</Label>\r\n                <Input\r\n                    className={classes.dimensionInput}\r\n                    size=\"small\"\r\n                    type=\"text\"\r\n                    value={height.toString()}\r\n                    readOnly={texture.isCube}\r\n                    onChange={(_, data) => setHeight(getNewDimension(height, data.value))}\r\n                />\r\n                {!texture.isCube && (\r\n                    <Tooltip content=\"Resize\" relationship=\"label\">\r\n                        <ToolbarButton icon={<ResizeRegular />} onClick={handleResize} />\r\n                    </Tooltip>\r\n                )}\r\n            </div>\r\n\r\n            <ToolbarDivider />\r\n\r\n            {/* Pixel Coordinates */}\r\n            <div className={classes.section}>\r\n                <PixelDataDisplay label=\"X\" value={pixelData.x} />\r\n                <PixelDataDisplay label=\"Y\" value={pixelData.y} />\r\n            </div>\r\n\r\n            <ToolbarDivider />\r\n\r\n            {/* Pixel Color */}\r\n            <div className={classes.section}>\r\n                <PixelDataDisplay label=\"R\" value={pixelData.r} />\r\n                <PixelDataDisplay label=\"G\" value={pixelData.g} />\r\n                <PixelDataDisplay label=\"B\" value={pixelData.b} />\r\n                <PixelDataDisplay label=\"A\" value={pixelData.a} />\r\n            </div>\r\n\r\n            {/* Cube Face Selection */}\r\n            {texture.isCube && (\r\n                <>\r\n                    <ToolbarDivider />\r\n                    <Toolbar size=\"small\">\r\n                        {CubeFaces.map((label, index) => (\r\n                            <ToolbarButton key={label} className={classes.faceButton} appearance={face === index ? \"primary\" : \"subtle\"} onClick={() => setFace(index)}>\r\n                                {label}\r\n                            </ToolbarButton>\r\n                        ))}\r\n                    </Toolbar>\r\n                </>\r\n            )}\r\n\r\n            {/* Mip Level Controls */}\r\n            {mipsEnabled && (\r\n                <>\r\n                    <ToolbarDivider />\r\n                    <div className={classes.section}>\r\n                        <Label>MIP:</Label>\r\n                        <Tooltip content=\"Mip Preview Up\" relationship=\"label\">\r\n                            <ToolbarButton icon={<ChevronUpRegular />} disabled={mipLevel <= 0} onClick={() => setMipLevel(mipLevel - 1)} />\r\n                        </Tooltip>\r\n                        <Label>{mipLevel}</Label>\r\n                        <Tooltip content=\"Mip Preview Down\" relationship=\"label\">\r\n                            <ToolbarButton icon={<ChevronDownRegular />} disabled={mipLevel >= maxLevels} onClick={() => setMipLevel(mipLevel + 1)} />\r\n                        </Tooltip>\r\n                    </div>\r\n                </>\r\n            )}\r\n\r\n            <div className={classes.spacer} />\r\n\r\n            {/* Actions */}\r\n            <Toolbar size=\"small\">\r\n                <Tooltip content=\"Reset\" relationship=\"label\">\r\n                    <ToolbarButton icon={<ArrowResetRegular />} onClick={resetTexture} />\r\n                </Tooltip>\r\n                <Tooltip content=\"Upload\" relationship=\"label\">\r\n                    <ToolbarButton icon={<ArrowUploadRegular />} onClick={handleUploadClick} />\r\n                </Tooltip>\r\n                <input ref={uploadInputRef} className={classes.uploadInput} type=\"file\" accept=\".jpg, .png, .tga, .dds, .env, .exr\" onChange={handleFileChange} />\r\n                <Tooltip content=\"Save\" relationship=\"label\">\r\n                    <ToolbarButton icon={<SaveRegular />} onClick={saveTexture} />\r\n                </Tooltip>\r\n            </Toolbar>\r\n        </div>\r\n    );\r\n};\r\n","import type { FunctionComponent } from \"react\";\r\n\r\nimport type { BaseTexture } from \"core/index\";\r\n\r\nimport { makeStyles, tokens } from \"@fluentui/react-components\";\r\n\r\nconst useStyles = makeStyles({\r\n    statusBar: {\r\n        display: \"flex\",\r\n        backgroundColor: tokens.colorNeutralBackground1,\r\n        alignItems: \"center\",\r\n        justifyContent: \"space-between\",\r\n        padding: `${tokens.spacingVerticalXS} ${tokens.spacingHorizontalM}`,\r\n        fontSize: tokens.fontSizeBase200,\r\n        color: tokens.colorNeutralForeground2,\r\n        borderTop: `1px solid ${tokens.colorNeutralStroke1}`,\r\n        minHeight: \"24px\",\r\n    },\r\n    fileName: {\r\n        overflow: \"hidden\",\r\n        textOverflow: \"ellipsis\",\r\n        whiteSpace: \"nowrap\",\r\n    },\r\n    mipInfo: {\r\n        flexShrink: 0,\r\n    },\r\n});\r\n\r\ntype StatusBarProps = {\r\n    texture: BaseTexture;\r\n    mipLevel: number;\r\n};\r\n\r\n/**\r\n * Displays status information about the texture\r\n * @param props - The status bar properties\r\n * @returns The status bar component\r\n */\r\nexport const StatusBar: FunctionComponent<StatusBarProps> = (props) => {\r\n    const { texture, mipLevel } = props;\r\n    const classes = useStyles();\r\n\r\n    const factor = Math.pow(2, mipLevel);\r\n    const width = Math.ceil(texture.getSize().width / factor);\r\n    const height = Math.ceil(texture.getSize().height / factor);\r\n\r\n    return (\r\n        <div className={classes.statusBar}>\r\n            <span className={classes.fileName}>{texture.name}</span>\r\n            {!texture.noMipmap && (\r\n                <span className={classes.mipInfo}>\r\n                    MIP Preview: {mipLevel} ({width}{height})\r\n                </span>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n","import type { ComponentType, FunctionComponent } from \"react\";\r\nimport type { IMetadata } from \"./textureEditor\";\r\n\r\nimport { Divider, makeStyles, ToggleButton, tokens, Tooltip } from \"@fluentui/react-components\";\r\nimport { useCallback } from \"react\";\r\n\r\nimport { Color3, Color4 } from \"core/Maths/math.color\";\r\nimport { ColorPickerPopup } from \"shared-ui-components/fluent/primitives/colorPicker\";\r\n\r\nconst useStyles = makeStyles({\r\n    toolbar: {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        backgroundColor: tokens.colorNeutralBackground1,\r\n        padding: tokens.spacingVerticalXS,\r\n        gap: tokens.spacingVerticalXS,\r\n        borderRadius: tokens.borderRadiusMedium,\r\n        boxShadow: tokens.shadow8,\r\n    },\r\n    toolsSection: {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        gap: tokens.spacingVerticalXXS,\r\n    },\r\n    toolButton: {\r\n        minWidth: \"36px\",\r\n        minHeight: \"36px\",\r\n        padding: tokens.spacingVerticalXS,\r\n    },\r\n    toolIcon: {\r\n        width: \"24px\",\r\n        height: \"24px\",\r\n    },\r\n    colorSection: {\r\n        display: \"flex\",\r\n        justifyContent: \"center\",\r\n        margin: tokens.spacingVerticalS,\r\n    },\r\n});\r\n\r\ntype ToolBarProps = {\r\n    tools: readonly { name: string; icon: ComponentType }[];\r\n    changeTool: (toolIndex: number) => void;\r\n    activeToolIndex: number;\r\n    metadata: IMetadata;\r\n    setMetadata: (data: any) => void;\r\n    hasAlpha: boolean;\r\n};\r\n\r\n/**\r\n * Toolbar component for texture editing tools\r\n * @param props - The toolbar properties\r\n * @returns The toolbar component\r\n */\r\nexport const ToolBar: FunctionComponent<ToolBarProps> = (props) => {\r\n    const { tools, changeTool, activeToolIndex, metadata, setMetadata, hasAlpha } = props;\r\n\r\n    const classes = useStyles();\r\n\r\n    const computeRGBAColor = useCallback(() => {\r\n        const opacityInt = Math.floor(metadata.alpha * 255);\r\n        const opacityHex = opacityInt.toString(16).padStart(2, \"0\");\r\n        return Color4.FromHexString(`${metadata.color}${opacityHex}`);\r\n    }, [metadata.color, metadata.alpha]);\r\n\r\n    const handleColorChange = useCallback(\r\n        (color: Color3 | Color4) => {\r\n            const newMetadata = {\r\n                color: color.toHexString(true),\r\n                alpha: (color as Partial<Color4>).a ?? 1,\r\n            };\r\n            if (newMetadata.color !== metadata.color || newMetadata.alpha !== metadata.alpha) {\r\n                setMetadata(newMetadata);\r\n            }\r\n        },\r\n        [metadata, setMetadata]\r\n    );\r\n\r\n    const handleToolClick = useCallback(\r\n        (index: number) => {\r\n            if (activeToolIndex === index) {\r\n                // Deselect current tool\r\n                changeTool(-1);\r\n            } else {\r\n                changeTool(index);\r\n            }\r\n        },\r\n        [activeToolIndex, changeTool]\r\n    );\r\n\r\n    return (\r\n        <div className={classes.toolbar}>\r\n            <div className={classes.colorSection}>\r\n                <Tooltip relationship=\"label\" content=\"Pick Tool Color\" positioning=\"after\">\r\n                    <ColorPickerPopup value={hasAlpha ? computeRGBAColor() : Color3.FromHexString(metadata.color)} onChange={handleColorChange} />\r\n                </Tooltip>\r\n            </div>\r\n            <Divider />\r\n            <div className={classes.toolsSection}>\r\n                {tools.map((tool, index) => {\r\n                    return (\r\n                        <Tooltip key={index} content={tool.name} relationship=\"label\" positioning=\"after\">\r\n                            <ToggleButton\r\n                                className={classes.toolButton}\r\n                                appearance=\"subtle\"\r\n                                checked={index === activeToolIndex}\r\n                                onClick={() => handleToolClick(index)}\r\n                                icon={<tool.icon />}\r\n                            />\r\n                        </Tooltip>\r\n                    );\r\n                })}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","import type { ComponentType, FunctionComponent } from \"react\";\r\n\r\nimport type { BaseTexture, ISize, PointerInfo, Scene, Vector2 } from \"core/index\";\r\nimport type { IPixelData } from \"./canvasManager\";\r\nimport type { Channel } from \"./channels\";\r\n\r\nimport { makeStyles, tokens } from \"@fluentui/react-components\";\r\nimport { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\r\n\r\nimport { Constants } from \"core/Engines/constants\";\r\nimport { TextureCanvasManager } from \"./canvasManager\";\r\nimport { ChannelsBar } from \"./channels\";\r\nimport { PropertiesBar } from \"./properties\";\r\nimport { StatusBar } from \"./status\";\r\nimport { ToolBar } from \"./tools\";\r\n\r\n/**\r\n * Parameters passed to tools for interaction with the texture editor\r\n */\r\nexport interface IToolParameters {\r\n    /** The visible scene in the editor. Useful for adding pointer and keyboard events. */\r\n    scene: Scene;\r\n    /** The 2D canvas which you can sample pixel data from. Tools should not paint directly on this canvas. */\r\n    canvas2D: HTMLCanvasElement;\r\n    /** The 3D scene which tools can add post processes to. */\r\n    scene3D: Scene;\r\n    /** The size of the texture. */\r\n    size: ISize;\r\n    /** Pushes the editor texture back to the original scene. This should be called every time a tool makes any modification to a texture. */\r\n    updateTexture: () => void;\r\n    /** The metadata object which is shared between all tools. Feel free to store any information here. Do not set this directly: instead call setMetadata. */\r\n    metadata: IMetadata;\r\n    /** Call this when you want to mutate the metadata. */\r\n    setMetadata: (data: any) => void;\r\n    /** Returns the texture coordinates under the cursor */\r\n    getMouseCoordinates: (pointerInfo: PointerInfo) => Vector2;\r\n    /** Provides a canvas that you can use the canvas API to paint on. */\r\n    startPainting: () => Promise<CanvasRenderingContext2D>;\r\n    /** After you have painted on your canvas, call this method to push the updates back to the texture. */\r\n    updatePainting: () => void;\r\n    /** Call this when you are finished painting. */\r\n    stopPainting: () => void;\r\n    /** Returns whether the tool should be allowed to interact */\r\n    interactionEnabled: () => boolean;\r\n}\r\n\r\nexport type TextureEditorTool = {\r\n    /**\r\n     * Called when the tool is activated from the toolbar.\r\n     */\r\n    activate: () => void;\r\n\r\n    /**\r\n     * Called when the tool is deactivated from the toolbar.\r\n     */\r\n    deactivate: () => void;\r\n\r\n    /**\r\n     * Optional: Called when the user resets the texture or uploads a new texture. Tools may want to reset their state when this happens.\r\n     */\r\n    reset?: () => void;\r\n\r\n    /**\r\n     * Optional: React component for tool-specific settings UI.\r\n     */\r\n    settingsComponent?: ComponentType;\r\n};\r\n\r\nexport type TextureEditorToolContext = {\r\n    getParameters(): IToolParameters;\r\n};\r\n\r\nexport type TextureEditorToolProvider = {\r\n    /**\r\n     * An optional order for the section, relative to other commands.\r\n     * Defaults to 0.\r\n     */\r\n    order?: number;\r\n\r\n    /**\r\n     * The name of the tool.\r\n     */\r\n    name: string;\r\n\r\n    /**\r\n     * The icon component for the tool.\r\n     */\r\n    icon: ComponentType;\r\n\r\n    /**\r\n     * Whether the tool uses postprocesses.\r\n     */\r\n    is3D?: boolean;\r\n\r\n    /**\r\n     * Optional system cursor name to use when tool is active (e.g. 'crosshair', 'pointer')\r\n     */\r\n    cursor?: string;\r\n\r\n    /**\r\n     * Instantiates the tool.\r\n     * @param context The context for the tool.\r\n     * @returns The instantiated tool.\r\n     */\r\n    getTool: (context: TextureEditorToolContext) => TextureEditorTool;\r\n};\r\n\r\n/**\r\n * Metadata shared between tools in the texture editor\r\n */\r\nexport interface IMetadata {\r\n    /** Current paint color in hex format */\r\n    color: string;\r\n    /** Current paint alpha value 0-1 */\r\n    alpha: number;\r\n    /** Current selection coordinates */\r\n    select: {\r\n        /** Left edge of selection */\r\n        x1: number;\r\n        /** Top edge of selection */\r\n        y1: number;\r\n        /** Right edge of selection */\r\n        x2: number;\r\n        /** Bottom edge of selection */\r\n        y2: number;\r\n    };\r\n}\r\n\r\nconst useStyles = makeStyles({\r\n    textureEditor: {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        height: \"100%\",\r\n        width: \"100%\",\r\n        backgroundColor: tokens.colorNeutralBackground3,\r\n        color: tokens.colorNeutralForeground1,\r\n        overflow: \"hidden\",\r\n    },\r\n    mainContent: {\r\n        display: \"flex\",\r\n        flex: 1,\r\n        overflow: \"hidden\",\r\n        position: \"relative\",\r\n    },\r\n    canvasContainer: {\r\n        flex: 1,\r\n        position: \"relative\",\r\n        overflow: \"hidden\",\r\n    },\r\n    canvasUI: {\r\n        width: \"100%\",\r\n        height: \"100%\",\r\n        outline: \"none\",\r\n    },\r\n    canvas2D: {\r\n        display: \"none\",\r\n    },\r\n    canvas3D: {\r\n        display: \"none\",\r\n    },\r\n    sidebarLeft: {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        position: \"absolute\",\r\n        left: tokens.spacingHorizontalM,\r\n        top: tokens.spacingVerticalM,\r\n    },\r\n    sidebarRight: {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        position: \"absolute\",\r\n        right: tokens.spacingHorizontalM,\r\n        top: tokens.spacingVerticalM,\r\n    },\r\n    toolSettingsContainer: {\r\n        position: \"absolute\",\r\n        left: tokens.spacingHorizontalM,\r\n        bottom: tokens.spacingVerticalM,\r\n        backgroundColor: tokens.colorNeutralBackground1,\r\n        borderRadius: tokens.borderRadiusMedium,\r\n        padding: tokens.spacingVerticalS,\r\n        boxShadow: tokens.shadow8,\r\n    },\r\n});\r\n\r\nexport type TextureEditorProps = {\r\n    texture: BaseTexture;\r\n    toolProviders?: readonly TextureEditorToolProvider[];\r\n    window?: Window;\r\n    onUpdate?: () => void;\r\n};\r\n\r\nconst PREVIEW_UPDATE_DELAY_MS = 160;\r\n\r\n/**\r\n * Main texture editor component\r\n * @param props - The texture editor properties\r\n * @returns The texture editor component\r\n */\r\nexport const TextureEditor: FunctionComponent<TextureEditorProps> = (props) => {\r\n    const { texture, toolProviders = [], window: editorWindow, onUpdate } = props;\r\n\r\n    const classes = useStyles();\r\n\r\n    // Canvas refs\r\n    const uiCanvasRef = useRef<HTMLCanvasElement>(null);\r\n    const canvas2DRef = useRef<HTMLCanvasElement>(null);\r\n    const canvas3DRef = useRef<HTMLCanvasElement>(null);\r\n    const timerRef = useRef<number | null>(null);\r\n    const canvasManagerRef = useRef<TextureCanvasManager | null>(null);\r\n\r\n    // State\r\n    const [activeToolIndex, setActiveToolIndex] = useState(-1);\r\n    const [metadata, setMetadataState] = useState<IMetadata>({\r\n        color: \"#ffffff\",\r\n        alpha: 1,\r\n        select: {\r\n            x1: -1,\r\n            y1: -1,\r\n            x2: -1,\r\n            y2: -1,\r\n        },\r\n    });\r\n    const [channels, setChannels] = useState<Channel[]>(() => {\r\n        const baseChannels: Channel[] = [\r\n            { name: \"Red\", visible: true, editable: true, id: \"R\" },\r\n            { name: \"Green\", visible: true, editable: true, id: \"G\" },\r\n            { name: \"Blue\", visible: true, editable: true, id: \"B\" },\r\n        ];\r\n        baseChannels.push({\r\n            name: texture.isCube ? \"Display\" : \"Alpha\",\r\n            visible: true,\r\n            editable: true,\r\n            id: \"A\",\r\n        });\r\n        return baseChannels;\r\n    });\r\n    const [pixelData, setPixelData] = useState<IPixelData>({});\r\n    const [face, setFace] = useState(0);\r\n    const [mipLevel, setMipLevel] = useState(0);\r\n    const [size, setSize] = useState<ISize>(texture.getSize());\r\n\r\n    // Callbacks\r\n    const textureDidUpdate = useCallback(() => {\r\n        if (timerRef.current != null) {\r\n            window.clearTimeout(timerRef.current);\r\n        }\r\n        timerRef.current = window.setTimeout(() => {\r\n            onUpdate?.();\r\n            timerRef.current = null;\r\n        }, PREVIEW_UPDATE_DELAY_MS);\r\n    }, [onUpdate]);\r\n\r\n    const setMetadata = useCallback((newMetadata: any) => {\r\n        setMetadataState((prev) => {\r\n            const data = { ...prev, ...newMetadata };\r\n            if (canvasManagerRef.current) {\r\n                canvasManagerRef.current.metadata = data;\r\n            }\r\n            return data;\r\n        });\r\n    }, []);\r\n\r\n    const getToolParameters = (): IToolParameters => {\r\n        const manager = canvasManagerRef.current!;\r\n        return {\r\n            scene: manager.scene,\r\n            canvas2D: manager.canvas2D,\r\n            scene3D: manager.scene3D,\r\n            size: manager.size,\r\n            updateTexture: () => void manager.updateTexture(),\r\n            // eslint-disable-next-line @typescript-eslint/promise-function-async\r\n            startPainting: () => manager.startPainting(),\r\n            stopPainting: () => manager.stopPainting(),\r\n            updatePainting: () => manager.updatePainting(),\r\n            metadata,\r\n            setMetadata,\r\n            getMouseCoordinates: (pointerInfo: PointerInfo) => manager.getMouseCoordinates(pointerInfo),\r\n            interactionEnabled: () => manager.toolInteractionEnabled(),\r\n        };\r\n    };\r\n    const getToolParametersRef = useRef(getToolParameters);\r\n    getToolParametersRef.current = getToolParameters;\r\n\r\n    const tools = useMemo(() => toolProviders?.map((provider) => provider.getTool({ getParameters: () => getToolParametersRef.current() })), [toolProviders]);\r\n\r\n    const changeTool = useCallback(\r\n        (index: number) => {\r\n            if (canvasManagerRef.current) {\r\n                if (index !== -1 && tools[index]) {\r\n                    canvasManagerRef.current.tool = {\r\n                        is3D: toolProviders[index].is3D ?? false,\r\n                        activate: () => tools[index].activate(),\r\n                        deactivate: () => tools[index].deactivate(),\r\n                        reset: () => tools[index].reset?.(),\r\n                    };\r\n                } else {\r\n                    canvasManagerRef.current.tool = null;\r\n                }\r\n            }\r\n            setActiveToolIndex(index);\r\n        },\r\n        [toolProviders, tools]\r\n    );\r\n\r\n    const saveTexture = useCallback(() => {\r\n        canvasManagerRef.current?.saveTexture();\r\n    }, []);\r\n\r\n    const resetTexture = useCallback(() => {\r\n        canvasManagerRef.current?.reset();\r\n    }, []);\r\n\r\n    const resizeTexture = useCallback((width: number, height: number) => {\r\n        void canvasManagerRef.current?.resize({ width, height });\r\n    }, []);\r\n\r\n    const uploadTexture = useCallback((file: File) => {\r\n        canvasManagerRef.current?.upload(file);\r\n    }, []);\r\n\r\n    // Initialize canvas manager\r\n    useEffect(() => {\r\n        if (!uiCanvasRef.current || !canvas2DRef.current || !canvas3DRef.current) {\r\n            return;\r\n        }\r\n\r\n        const manager = new TextureCanvasManager(\r\n            texture,\r\n            editorWindow ?? uiCanvasRef.current.ownerDocument.defaultView ?? window,\r\n            uiCanvasRef.current,\r\n            canvas2DRef.current,\r\n            canvas3DRef.current,\r\n            setPixelData,\r\n            metadata,\r\n            textureDidUpdate,\r\n            setMetadata,\r\n            setMipLevel\r\n        );\r\n\r\n        canvasManagerRef.current = manager;\r\n        setSize(manager.size);\r\n\r\n        return () => {\r\n            manager.dispose();\r\n            canvasManagerRef.current = null;\r\n        };\r\n    }, [texture, editorWindow]);\r\n\r\n    // Update canvas manager when channels/face/mipLevel change\r\n    useEffect(() => {\r\n        if (canvasManagerRef.current) {\r\n            canvasManagerRef.current.channels = [...channels];\r\n        }\r\n    }, [channels]);\r\n\r\n    useEffect(() => {\r\n        if (canvasManagerRef.current) {\r\n            canvasManagerRef.current.face = face;\r\n        }\r\n    }, [face]);\r\n\r\n    useEffect(() => {\r\n        if (canvasManagerRef.current) {\r\n            canvasManagerRef.current.mipLevel = mipLevel;\r\n        }\r\n    }, [mipLevel]);\r\n\r\n    // Compute cursor style\r\n    let cursor = \"default\";\r\n    if (canvasManagerRef.current && !canvasManagerRef.current.toolInteractionEnabled()) {\r\n        cursor = \"grab\";\r\n    } else if (toolProviders[activeToolIndex]?.cursor) {\r\n        cursor = toolProviders[activeToolIndex].cursor;\r\n    }\r\n\r\n    const hasAlpha = texture.textureFormat === -1 || texture.textureFormat === Constants.TEXTUREFORMAT_RGBA;\r\n\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    const CurrentToolSettings = useMemo(() => tools[activeToolIndex]?.settingsComponent, [tools, activeToolIndex]);\r\n\r\n    return (\r\n        <div className={classes.textureEditor}>\r\n            <PropertiesBar\r\n                texture={texture}\r\n                saveTexture={saveTexture}\r\n                pixelData={pixelData}\r\n                face={face}\r\n                setFace={setFace}\r\n                resetTexture={resetTexture}\r\n                resizeTexture={resizeTexture}\r\n                uploadTexture={uploadTexture}\r\n                mipLevel={mipLevel}\r\n                setMipLevel={setMipLevel}\r\n                size={canvasManagerRef.current?.size || size}\r\n            />\r\n            <div className={classes.mainContent}>\r\n                <div className={classes.canvasContainer} style={{ cursor }}>\r\n                    <canvas ref={uiCanvasRef} className={classes.canvasUI} tabIndex={1} />\r\n                    <canvas ref={canvas2DRef} className={classes.canvas2D} />\r\n                    <canvas ref={canvas3DRef} className={classes.canvas3D} />\r\n                </div>\r\n                {CurrentToolSettings && (\r\n                    <div className={classes.toolSettingsContainer}>\r\n                        <CurrentToolSettings />\r\n                    </div>\r\n                )}\r\n                {!texture.isCube && (\r\n                    <div className={classes.sidebarLeft}>\r\n                        <ToolBar\r\n                            tools={toolProviders}\r\n                            activeToolIndex={activeToolIndex}\r\n                            changeTool={changeTool}\r\n                            metadata={metadata}\r\n                            setMetadata={setMetadata}\r\n                            hasAlpha={hasAlpha}\r\n                        />\r\n                    </div>\r\n                )}\r\n                <div className={classes.sidebarRight}>\r\n                    <ChannelsBar channels={channels} setChannels={setChannels} />\r\n                </div>\r\n            </div>\r\n            <StatusBar texture={texture} mipLevel={mipLevel} />\r\n        </div>\r\n    );\r\n};\r\n","import type { TextureEditorToolProvider } from \"../../../components/textureEditor/textureEditor\";\r\n\r\nimport { Label, makeStyles, Slider, tokens } from \"@fluentui/react-components\";\r\nimport { CircleHalfFillRegular } from \"@fluentui/react-icons\";\r\n\r\nimport { Observable } from \"core/Misc/observable\";\r\nimport { useCallback } from \"react\";\r\nimport { useObservableState } from \"../../../hooks/observableHooks\";\r\n\r\nconst useStyles = makeStyles({\r\n    settingsContainer: {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        gap: tokens.spacingVerticalS,\r\n        minWidth: \"150px\",\r\n    },\r\n    sliderRow: {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        gap: tokens.spacingVerticalXS,\r\n    },\r\n    icon: {\r\n        rotate: \"-90deg\",\r\n    },\r\n});\r\n\r\nexport const Contrast: TextureEditorToolProvider = {\r\n    name: \"Contrast/Exposure\",\r\n    order: 500,\r\n    icon: () => {\r\n        const classes = useStyles();\r\n        return <CircleHalfFillRegular className={classes.icon} />;\r\n    },\r\n    is3D: true,\r\n    getTool: (context) => {\r\n        let _contrast = 0;\r\n        let _exposure = 0;\r\n        const stateChangedObservable = new Observable<void>();\r\n\r\n        /**\r\n         * Maps slider values to post processing values using an exponential regression\r\n         * @param sliderValue - The slider value\r\n         * @returns exposure value\r\n         */\r\n        function computeExposure(sliderValue: number) {\r\n            if (sliderValue <= 0) {\r\n                return 1 - -sliderValue / 100;\r\n            } else {\r\n                return Math.pow(1.05698, sliderValue) + 0.0000392163 * sliderValue;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Maps slider values to post processing values using an exponential regression\r\n         * @param sliderValue - The slider value\r\n         * @returns contrast value\r\n         */\r\n        function computeContrast(sliderValue: number) {\r\n            if (sliderValue <= 0) {\r\n                return 1 - -sliderValue / 100;\r\n            } else {\r\n                return Math.pow(1.05698, sliderValue) + 0.0000392163 * sliderValue;\r\n            }\r\n        }\r\n\r\n        function setExposure(exposure: number) {\r\n            _exposure = exposure;\r\n            stateChangedObservable.notifyObservers();\r\n            const { scene3D, updateTexture } = context.getParameters();\r\n            scene3D.imageProcessingConfiguration.isEnabled = true;\r\n            scene3D.imageProcessingConfiguration.exposure = computeExposure(_exposure);\r\n            updateTexture();\r\n        }\r\n\r\n        function setContrast(contrast: number) {\r\n            _contrast = contrast;\r\n            stateChangedObservable.notifyObservers();\r\n            const { scene3D, updateTexture } = context.getParameters();\r\n            scene3D.imageProcessingConfiguration.isEnabled = true;\r\n            scene3D.imageProcessingConfiguration.contrast = computeContrast(_contrast);\r\n            updateTexture();\r\n        }\r\n\r\n        return {\r\n            activate: () => {\r\n                _contrast = 0;\r\n                _exposure = 0;\r\n                setExposure(_exposure);\r\n                setContrast(_contrast);\r\n            },\r\n            deactivate: () => {\r\n                // No cleanup needed\r\n            },\r\n            reset: () => {\r\n                setExposure(0);\r\n                setContrast(0);\r\n            },\r\n            settingsComponent: () => {\r\n                const classes = useStyles();\r\n                const [contrast, exposure] = useObservableState(\r\n                    useCallback(() => [_contrast, _exposure] as const, []),\r\n                    stateChangedObservable\r\n                );\r\n\r\n                const handleContrastChange = (_: unknown, data: { value: number }) => {\r\n                    setContrast(data.value);\r\n                };\r\n\r\n                const handleExposureChange = (_: unknown, data: { value: number }) => {\r\n                    setExposure(data.value);\r\n                };\r\n\r\n                return (\r\n                    <div className={classes.settingsContainer}>\r\n                        <div className={classes.sliderRow}>\r\n                            <Label>Contrast: {contrast}</Label>\r\n                            <Slider min={-100} max={100} value={contrast} onChange={handleContrastChange} />\r\n                        </div>\r\n                        <div className={classes.sliderRow}>\r\n                            <Label>Exposure: {exposure}</Label>\r\n                            <Slider min={-100} max={100} value={exposure} onChange={handleExposureChange} />\r\n                        </div>\r\n                    </div>\r\n                );\r\n            },\r\n        };\r\n    },\r\n};\r\n","/* eslint-disable babylonjs/available */\r\nimport type { Nullable, Observer, PointerInfo } from \"core/index\";\r\nimport type { TextureEditorToolProvider } from \"../../../components/textureEditor/textureEditor\";\r\n\r\nimport { EyedropperRegular } from \"@fluentui/react-icons\";\r\n\r\nimport { PointerEventTypes } from \"core/Events/pointerEvents\";\r\nimport { Color3 } from \"core/Maths/math.color\";\r\n\r\n/**\r\n * Eyedropper tool for picking colors from the texture\r\n */\r\nexport const Eyedropper: TextureEditorToolProvider = {\r\n    name: \"Eyedropper\",\r\n    order: 300,\r\n    icon: () => <EyedropperRegular />,\r\n    cursor: \"crosshair\",\r\n    getTool: (context) => {\r\n        let pointerObserver: Nullable<Observer<PointerInfo>> = null;\r\n        let isPicking = false;\r\n\r\n        function pick(pointerInfo: PointerInfo) {\r\n            const { canvas2D, setMetadata, getMouseCoordinates } = context.getParameters();\r\n            const ctx = canvas2D.getContext(\"2d\");\r\n            const { x, y } = getMouseCoordinates(pointerInfo);\r\n            const pixel = ctx!.getImageData(x, y, 1, 1).data;\r\n            setMetadata({\r\n                color: Color3.FromInts(pixel[0], pixel[1], pixel[2]).toHexString(),\r\n                alpha: pixel[3] / 255,\r\n            });\r\n        }\r\n\r\n        return {\r\n            activate: () => {\r\n                pointerObserver = context.getParameters().scene.onPointerObservable.add((pointerInfo) => {\r\n                    if (pointerInfo.pickInfo?.hit) {\r\n                        if (pointerInfo.type === PointerEventTypes.POINTERDOWN && pointerInfo.event.buttons === 1 && context.getParameters().interactionEnabled()) {\r\n                            isPicking = true;\r\n                            pick(pointerInfo);\r\n                        }\r\n                        if (isPicking) {\r\n                            if (pointerInfo.event.buttons !== 1 || !context.getParameters().interactionEnabled()) {\r\n                                isPicking = false;\r\n                            } else {\r\n                                pick(pointerInfo);\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n                isPicking = false;\r\n            },\r\n            deactivate: () => {\r\n                pointerObserver?.remove();\r\n            },\r\n        };\r\n    },\r\n};\r\n","/* eslint-disable babylonjs/available */\r\nimport type { Nullable, Observer, PointerInfo } from \"core/index\";\r\nimport type { TextureEditorToolProvider } from \"../../../components/textureEditor/textureEditor\";\r\n\r\nimport { PaintBucketRegular } from \"@fluentui/react-icons\";\r\n\r\nimport { PointerEventTypes } from \"core/Events/pointerEvents\";\r\n\r\n/**\r\n * Floodfill tool for filling regions with a solid color\r\n */\r\nexport const Floodfill: TextureEditorToolProvider = {\r\n    name: \"Floodfill\",\r\n    order: 400,\r\n    icon: () => <PaintBucketRegular />,\r\n    cursor: \"crosshair\",\r\n    getTool: (context) => {\r\n        let pointerObserver: Nullable<Observer<PointerInfo>> = null;\r\n\r\n        async function fillAsync() {\r\n            const { metadata, startPainting, updatePainting, stopPainting } = context.getParameters();\r\n            const ctx = await startPainting();\r\n            ctx.fillStyle = metadata.color;\r\n            ctx.globalAlpha = metadata.alpha;\r\n            ctx.globalCompositeOperation = \"copy\";\r\n            ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);\r\n            updatePainting();\r\n            stopPainting();\r\n        }\r\n\r\n        return {\r\n            activate: () => {\r\n                pointerObserver = context.getParameters().scene.onPointerObservable.add((pointerInfo) => {\r\n                    if (\r\n                        pointerInfo.type === PointerEventTypes.POINTERDOWN &&\r\n                        pointerInfo.event.buttons === 1 &&\r\n                        context.getParameters().interactionEnabled() &&\r\n                        pointerInfo.pickInfo?.hit\r\n                    ) {\r\n                        // eslint-disable-next-line @typescript-eslint/no-floating-promises\r\n                        fillAsync();\r\n                    }\r\n                });\r\n            },\r\n            deactivate: () => {\r\n                pointerObserver?.remove();\r\n            },\r\n        };\r\n    },\r\n};\r\n","/* eslint-disable babylonjs/available */\r\nimport type { Nullable, PointerInfo } from \"core/index\";\r\nimport type { TextureEditorToolProvider } from \"../../../components/textureEditor/textureEditor\";\r\n\r\nimport { Label, makeStyles, Slider, tokens } from \"@fluentui/react-components\";\r\nimport { InkStrokeRegular } from \"@fluentui/react-icons\";\r\nimport { useCallback } from \"react\";\r\n\r\nimport { PointerEventTypes } from \"core/Events/pointerEvents\";\r\nimport { Color3 } from \"core/Maths/math.color\";\r\nimport { Vector2 } from \"core/Maths/math.vector\";\r\nimport { Observable, type Observer } from \"core/Misc/observable\";\r\nimport { useObservableState } from \"../../../hooks/observableHooks\";\r\n\r\nconst useStyles = makeStyles({\r\n    settingsContainer: {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        gap: tokens.spacingVerticalS,\r\n        minWidth: \"150px\",\r\n    },\r\n    sliderRow: {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        gap: tokens.spacingVerticalXS,\r\n    },\r\n});\r\n\r\nexport const Paintbrush: TextureEditorToolProvider = {\r\n    name: \"Paintbrush\",\r\n    order: 200,\r\n    icon: () => <InkStrokeRegular />,\r\n    cursor: \"crosshair\",\r\n    getTool: (context) => {\r\n        let pointerObserver: Nullable<Observer<PointerInfo>> = null;\r\n        let isPainting = false;\r\n        let _width = 15;\r\n        let mousePos: Vector2 | null = null;\r\n        let ctx: CanvasRenderingContext2D | null = null;\r\n        let circleCanvas: HTMLCanvasElement | null = null;\r\n        const stateChangedObservable = new Observable<void>();\r\n\r\n        function setWidth(width: number) {\r\n            _width = width;\r\n            stateChangedObservable.notifyObservers();\r\n        }\r\n\r\n        function paint(pointerInfo: PointerInfo) {\r\n            if (ctx && circleCanvas) {\r\n                const { getMouseCoordinates, metadata, updatePainting } = context.getParameters();\r\n                let { x, y } = getMouseCoordinates(pointerInfo);\r\n                if (metadata.select.x1 !== -1) {\r\n                    x -= metadata.select.x1;\r\n                    y -= metadata.select.y1;\r\n                }\r\n                let numSteps, stepVector;\r\n                stepVector = new Vector2();\r\n                if (mousePos === null) {\r\n                    mousePos = new Vector2(x, y);\r\n                    numSteps = 1;\r\n                } else {\r\n                    const maxDistance = _width / 4;\r\n                    const diffVector = new Vector2(x - mousePos.x, y - mousePos.y);\r\n                    numSteps = Math.ceil(diffVector.length() / maxDistance);\r\n                    const trueDistance = diffVector.length() / numSteps;\r\n                    stepVector = diffVector.normalize().multiplyByFloats(trueDistance, trueDistance);\r\n                }\r\n                const paintVector = mousePos.clone();\r\n                for (let stepCount = 0; stepCount < numSteps; stepCount++) {\r\n                    ctx.globalAlpha = 1.0;\r\n                    ctx.globalCompositeOperation = \"destination-out\";\r\n                    ctx.drawImage(circleCanvas, Math.ceil(paintVector.x - _width / 2), Math.ceil(paintVector.y - _width / 2));\r\n                    ctx.globalAlpha = metadata.alpha;\r\n                    ctx.globalCompositeOperation = \"source-over\";\r\n                    ctx.drawImage(circleCanvas, Math.ceil(paintVector.x - _width / 2), Math.ceil(paintVector.y - _width / 2));\r\n                    paintVector.addInPlace(stepVector);\r\n                }\r\n                updatePainting();\r\n                mousePos = new Vector2(x, y);\r\n            }\r\n        }\r\n\r\n        return {\r\n            activate: () => {\r\n                const { scene } = context.getParameters();\r\n\r\n                pointerObserver = scene.onPointerObservable.add(async (pointerInfo) => {\r\n                    const { startPainting, stopPainting, metadata } = context.getParameters();\r\n                    if (!isPainting) {\r\n                        if (\r\n                            pointerInfo.type === PointerEventTypes.POINTERDOWN &&\r\n                            pointerInfo.event.buttons === 1 &&\r\n                            context.getParameters().interactionEnabled() &&\r\n                            pointerInfo.pickInfo?.hit\r\n                        ) {\r\n                            isPainting = true;\r\n                            circleCanvas = document.createElement(\"canvas\");\r\n                            circleCanvas.width = _width;\r\n                            circleCanvas.height = _width;\r\n                            const circleCtx = circleCanvas.getContext(\"2d\")!;\r\n                            circleCtx.imageSmoothingEnabled = false;\r\n                            const pixels = new Array(4 * _width * _width);\r\n                            const dis = (_width * _width) / 4;\r\n                            const rgb = Color3.FromHexString(metadata.color);\r\n                            const r = Math.floor(rgb.r * 255);\r\n                            const g = Math.floor(rgb.g * 255);\r\n                            const b = Math.floor(rgb.b * 255);\r\n                            let idx = 0;\r\n                            const x1 = -Math.floor(_width / 2),\r\n                                x2 = Math.ceil(_width / 2);\r\n                            const y1 = -Math.floor(_width / 2),\r\n                                y2 = Math.ceil(_width / 2);\r\n                            for (let y = y1; y < y2; y++) {\r\n                                for (let x = x1; x < x2; x++) {\r\n                                    pixels[idx++] = r;\r\n                                    pixels[idx++] = g;\r\n                                    pixels[idx++] = b;\r\n                                    pixels[idx++] = x * x + y * y <= dis ? 255 : 0;\r\n                                }\r\n                            }\r\n                            circleCtx.putImageData(new ImageData(Uint8ClampedArray.from(pixels), _width, _width), 0, 0);\r\n                            ctx = await startPainting();\r\n                            paint(pointerInfo);\r\n                        }\r\n                    } else {\r\n                        if (pointerInfo.event.buttons !== 1 || !context.getParameters().interactionEnabled()) {\r\n                            isPainting = false;\r\n                            circleCanvas?.parentNode?.removeChild(circleCanvas);\r\n                            stopPainting();\r\n                            mousePos = null;\r\n                        } else {\r\n                            if (pointerInfo.pickInfo?.hit && pointerInfo.type === PointerEventTypes.POINTERMOVE) {\r\n                                paint(pointerInfo);\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n                isPainting = false;\r\n            },\r\n            deactivate: () => {\r\n                isPainting = false;\r\n                pointerObserver?.remove();\r\n            },\r\n            settingsComponent: () => {\r\n                const classes = useStyles();\r\n                const width = useObservableState(\r\n                    useCallback(() => _width, []),\r\n                    stateChangedObservable\r\n                );\r\n\r\n                const handleWidthChange = (_: unknown, data: { value: number }) => {\r\n                    setWidth(data.value);\r\n                };\r\n\r\n                return (\r\n                    <div className={classes.settingsContainer}>\r\n                        <div className={classes.sliderRow}>\r\n                            <Label>Size: {width}</Label>\r\n                            <Slider min={1} max={100} value={width} onChange={handleWidthChange} />\r\n                        </div>\r\n                    </div>\r\n                );\r\n            },\r\n        };\r\n    },\r\n};\r\n","/* eslint-disable babylonjs/available */\r\nimport type { PointerInfo } from \"core/Events/pointerEvents\";\r\nimport type { Observer } from \"core/Misc/observable\";\r\nimport type { Nullable } from \"core/types\";\r\nimport type { TextureEditorToolProvider } from \"../../../components/textureEditor/textureEditor\";\r\n\r\nimport { SelectObjectRegular } from \"@fluentui/react-icons\";\r\nimport { PointerEventTypes } from \"core/Events/pointerEvents\";\r\n\r\n/**\r\n * Rectangle selection tool for selecting regions of the texture\r\n */\r\nexport const RectangleSelect: TextureEditorToolProvider = {\r\n    name: \"Rectangle Select\",\r\n    order: 100,\r\n    icon: () => <SelectObjectRegular />,\r\n    cursor: \"crosshair\",\r\n    getTool: (context) => {\r\n        let pointerObserver: Nullable<Observer<PointerInfo>> = null;\r\n        let isSelecting = false;\r\n        let xStart: number = -1;\r\n        let yStart: number = -1;\r\n\r\n        return {\r\n            activate: () => {\r\n                const { scene } = context.getParameters();\r\n                pointerObserver = scene.onPointerObservable.add((pointerInfo) => {\r\n                    const { getMouseCoordinates, setMetadata, metadata } = context.getParameters();\r\n                    if (!isSelecting) {\r\n                        if (\r\n                            pointerInfo.type === PointerEventTypes.POINTERDOWN &&\r\n                            pointerInfo &&\r\n                            pointerInfo.event.buttons === 1 &&\r\n                            context.getParameters().interactionEnabled() &&\r\n                            pointerInfo.pickInfo?.hit\r\n                        ) {\r\n                            isSelecting = true;\r\n                            const { x, y } = ({ x: xStart, y: yStart } = getMouseCoordinates(pointerInfo));\r\n                            setMetadata({\r\n                                select: {\r\n                                    x1: x,\r\n                                    y1: y,\r\n                                    x2: x,\r\n                                    y2: y,\r\n                                },\r\n                            });\r\n                        }\r\n                    } else {\r\n                        if (pointerInfo.event.buttons !== 1 || !context.getParameters().interactionEnabled()) {\r\n                            isSelecting = false;\r\n                            if (metadata.select.x1 === metadata.select.x2 || metadata.select.y1 === metadata.select.y2) {\r\n                                setMetadata({\r\n                                    select: {\r\n                                        x1: -1,\r\n                                        y1: -1,\r\n                                        x2: -1,\r\n                                        y2: -1,\r\n                                    },\r\n                                });\r\n                            }\r\n                        } else {\r\n                            if (pointerInfo.pickInfo?.hit && pointerInfo.type === PointerEventTypes.POINTERMOVE) {\r\n                                if (pointerInfo.type === PointerEventTypes.POINTERMOVE && isSelecting) {\r\n                                    const { x, y } = getMouseCoordinates(pointerInfo);\r\n                                    setMetadata({\r\n                                        select: {\r\n                                            x1: Math.min(x, xStart),\r\n                                            y1: Math.min(y, yStart),\r\n                                            x2: Math.max(x, xStart),\r\n                                            y2: Math.max(y, yStart),\r\n                                        },\r\n                                    });\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n            },\r\n            deactivate() {\r\n                isSelecting = false;\r\n                pointerObserver?.remove();\r\n            },\r\n        };\r\n    },\r\n};\r\n","import { type ComponentType } from \"react\";\r\n\r\nimport type { IDisposable } from \"core/index\";\r\nimport type { TextureEditorProps, TextureEditorToolProvider } from \"../../components/textureEditor/textureEditor\";\r\nimport type { IService, ServiceDefinition } from \"../../modularity/serviceDefinition\";\r\n\r\nimport { TextureEditor } from \"../../components/textureEditor/textureEditor\";\r\nimport { useOrderedObservableCollection } from \"../../hooks/observableHooks\";\r\nimport { ObservableCollection } from \"../../misc/observableCollection\";\r\nimport { Contrast } from \"./tools/contrast\";\r\nimport { Eyedropper } from \"./tools/eyedropper\";\r\nimport { Floodfill } from \"./tools/floodfill\";\r\nimport { Paintbrush } from \"./tools/paintbrush\";\r\nimport { RectangleSelect } from \"./tools/rectangularSelect\";\r\n\r\nexport const TextureEditorServiceIdentity = Symbol(\"TextureEditorService\");\r\n\r\n/**\r\n * Allows tools to be added to the texture editor, and also exposes a React component that is the texture editor with all the tools configured.\r\n */\r\nexport interface ITextureEditorService extends IService<typeof TextureEditorServiceIdentity> {\r\n    /**\r\n     * Adds a new tool to the texture editor.\r\n     * @param toolProvider A provider that can create instances of the tool.\r\n     * @returns A disposable that removes the tool from the texture editor when disposed.\r\n     */\r\n    addTool(toolProvider: TextureEditorToolProvider): IDisposable;\r\n\r\n    /**\r\n     * The texture editor component with all the registered tools.\r\n     */\r\n    readonly component: ComponentType<TextureEditorProps>;\r\n}\r\n\r\nexport const TextureEditorServiceDefinition: ServiceDefinition<[ITextureEditorService], []> = {\r\n    friendlyName: \"Texture Editor\",\r\n    produces: [TextureEditorServiceIdentity],\r\n    factory: () => {\r\n        const toolsCollection = new ObservableCollection<TextureEditorToolProvider>();\r\n\r\n        // Add the default tools.\r\n        toolsCollection.add(RectangleSelect);\r\n        toolsCollection.add(Paintbrush);\r\n        toolsCollection.add(Eyedropper);\r\n        toolsCollection.add(Floodfill);\r\n        toolsCollection.add(Contrast);\r\n\r\n        return {\r\n            addTool: (toolProvider: TextureEditorToolProvider) => toolsCollection.add(toolProvider),\r\n            component: (props: TextureEditorProps) => {\r\n                const tools = useOrderedObservableCollection(toolsCollection);\r\n                return <TextureEditor {...props} toolProviders={tools} />;\r\n            },\r\n        };\r\n    },\r\n};\r\n","import type { AdvancedDynamicTexture } from \"gui/2D/advancedDynamicTexture\";\r\nimport type { ServiceDefinition } from \"../../../modularity/serviceDefinition\";\r\nimport type { ISettingsContext } from \"../../settingsContext\";\r\nimport type { ITextureEditorService } from \"../../textureEditor/textureEditorService\";\r\nimport type { IPropertiesService } from \"./propertiesService\";\r\n\r\nimport { BaseTexture } from \"core/Materials/Textures/baseTexture\";\r\nimport { CubeTexture } from \"core/Materials/Textures/cubeTexture\";\r\nimport { MultiRenderTarget } from \"core/Materials/Textures/multiRenderTarget\";\r\nimport { RenderTargetTexture } from \"core/Materials/Textures/renderTargetTexture\";\r\nimport { Texture } from \"core/Materials/Textures/texture\";\r\nimport { ThinTexture } from \"core/Materials/Textures/thinTexture\";\r\nimport { AdvancedDynamicTextureGeneralProperties, AdvancedDynamicTexturePreviewProperties } from \"../../../components/properties/textures/advancedDynamicTextureProperties\";\r\nimport {\r\n    BaseTextureCharacteristicProperties,\r\n    BaseTextureGeneralProperties,\r\n    BaseTexturePreviewProperties,\r\n    BaseTextureTransformProperties,\r\n} from \"../../../components/properties/textures/baseTextureProperties\";\r\nimport { CubeTextureTransformProperties } from \"../../../components/properties/textures/cubeTextureProperties\";\r\nimport { MultiRenderTargetGeneralProperties } from \"../../../components/properties/textures/multiRenderTargetProperties\";\r\nimport { RenderTargetTextureGeneralProperties } from \"../../../components/properties/textures/renderTargetTextureProperties\";\r\nimport { TextureGeneralProperties, TexturePreviewProperties, TextureTransformProperties } from \"../../../components/properties/textures/textureProperties\";\r\nimport { ThinTextureGeneralProperties, ThinTextureSamplingProperties } from \"../../../components/properties/textures/thinTextureProperties\";\r\nimport { SettingsContextIdentity } from \"../../settingsContext\";\r\nimport { TextureEditorServiceIdentity } from \"../../textureEditor/textureEditorService\";\r\nimport { PropertiesServiceIdentity } from \"./propertiesService\";\r\n\r\n// Don't use instanceof in this case as we don't want to bring in the gui package just to check if the entity is an AdvancedDynamicTexture.\r\nfunction IsAdvancedDynamicTexture(entity: unknown): entity is AdvancedDynamicTexture {\r\n    return (entity as AdvancedDynamicTexture)?.getClassName?.() === \"AdvancedDynamicTexture\";\r\n}\r\n\r\nexport const TexturePropertiesServiceDefinition: ServiceDefinition<[], [IPropertiesService, ISettingsContext, ITextureEditorService]> = {\r\n    friendlyName: \"Texture Properties\",\r\n    consumes: [PropertiesServiceIdentity, SettingsContextIdentity, TextureEditorServiceIdentity],\r\n    factory: (propertiesService, settingsContext, textureEditorService) => {\r\n        const baseTextureContentRegistration = propertiesService.addSectionContent({\r\n            key: \"Base Texture Properties\",\r\n            predicate: (entity: unknown) => entity instanceof BaseTexture,\r\n            content: [\r\n                {\r\n                    section: \"Preview\",\r\n                    component: ({ context }) => <BaseTexturePreviewProperties texture={context} textureEditor={textureEditorService.component} />,\r\n                },\r\n                {\r\n                    section: \"General\",\r\n                    order: 0,\r\n                    component: ({ context }) => <BaseTextureGeneralProperties texture={context} />,\r\n                },\r\n                {\r\n                    section: \"General\",\r\n                    order: 200,\r\n                    component: ({ context }) => <BaseTextureCharacteristicProperties texture={context} />,\r\n                },\r\n                {\r\n                    section: \"Transform\",\r\n                    component: ({ context }) => <BaseTextureTransformProperties texture={context} />,\r\n                },\r\n            ],\r\n        });\r\n\r\n        const thinTextureContentRegistration = propertiesService.addSectionContent({\r\n            key: \"Thin Texture Properties\",\r\n            predicate: (entity: unknown) => entity instanceof ThinTexture,\r\n            content: [\r\n                {\r\n                    section: \"General\",\r\n                    order: 100,\r\n                    component: ({ context }) => <ThinTextureGeneralProperties texture={context} />,\r\n                },\r\n                {\r\n                    section: \"General\",\r\n                    order: 200,\r\n                    component: ({ context }) => <ThinTextureSamplingProperties texture={context} />,\r\n                },\r\n            ],\r\n        });\r\n\r\n        const textureContentRegistration = propertiesService.addSectionContent({\r\n            key: \"Texture Properties\",\r\n            predicate: (entity: unknown) => entity instanceof Texture,\r\n            content: [\r\n                {\r\n                    section: \"Preview\",\r\n                    component: ({ context }) => <TexturePreviewProperties texture={context} />,\r\n                    order: 200,\r\n                },\r\n                {\r\n                    section: \"General\",\r\n                    order: 300,\r\n                    component: ({ context }) => <TextureGeneralProperties texture={context} />,\r\n                },\r\n            ],\r\n        });\r\n\r\n        const textureExcludingCubeContentRegistration = propertiesService.addSectionContent({\r\n            key: \"Texture Transform Properties\",\r\n            predicate: (entity: unknown): entity is Texture => entity instanceof Texture && !entity.isCube,\r\n            content: [\r\n                {\r\n                    section: \"Transform\",\r\n                    component: ({ context }) => <TextureTransformProperties texture={context} settings={settingsContext} />,\r\n                },\r\n            ],\r\n        });\r\n\r\n        const cubeTextureContentRegistration = propertiesService.addSectionContent({\r\n            key: \"Cube Texture Properties\",\r\n            predicate: (entity: unknown) => entity instanceof CubeTexture,\r\n            content: [\r\n                {\r\n                    section: \"Transform\",\r\n                    component: ({ context }) => <CubeTextureTransformProperties texture={context} settings={settingsContext} />,\r\n                },\r\n            ],\r\n        });\r\n\r\n        const renderTargetTextureContentRegistration = propertiesService.addSectionContent({\r\n            key: \"Render Target Texture Properties\",\r\n            predicate: (entity: unknown) => entity instanceof RenderTargetTexture,\r\n            content: [\r\n                {\r\n                    section: \"Render Target\",\r\n                    component: ({ context }) => <RenderTargetTextureGeneralProperties texture={context} />,\r\n                },\r\n            ],\r\n        });\r\n\r\n        const multiRenderTargetContentRegistration = propertiesService.addSectionContent({\r\n            key: \"Multi Render Target Properties\",\r\n            predicate: (entity: unknown) => entity instanceof MultiRenderTarget,\r\n            content: [\r\n                {\r\n                    section: \"Render Target\",\r\n                    order: 100,\r\n                    component: ({ context }) => <MultiRenderTargetGeneralProperties texture={context} />,\r\n                },\r\n            ],\r\n        });\r\n\r\n        const advancedDynamicTextureContentRegistration = propertiesService.addSectionContent({\r\n            key: \"Advanced Dynamic Texture Properties\",\r\n            predicate: (entity: unknown) => IsAdvancedDynamicTexture(entity),\r\n            content: [\r\n                {\r\n                    section: \"Advanced Dynamic Texture\",\r\n                    order: 100,\r\n                    component: ({ context }) => <AdvancedDynamicTextureGeneralProperties texture={context} />,\r\n                },\r\n                {\r\n                    section: \"Preview\",\r\n                    order: 100,\r\n                    component: ({ context }) => <AdvancedDynamicTexturePreviewProperties texture={context} />,\r\n                },\r\n            ],\r\n        });\r\n\r\n        return {\r\n            dispose: () => {\r\n                advancedDynamicTextureContentRegistration.dispose();\r\n                multiRenderTargetContentRegistration.dispose();\r\n                renderTargetTextureContentRegistration.dispose();\r\n                cubeTextureContentRegistration.dispose();\r\n                textureExcludingCubeContentRegistration.dispose();\r\n                textureContentRegistration.dispose();\r\n                baseTextureContentRegistration.dispose();\r\n                thinTextureContentRegistration.dispose();\r\n            },\r\n        };\r\n    },\r\n};\r\n","import type { FunctionComponent } from \"react\";\r\n\r\nimport type { Nullable, Quaternion, Vector3 } from \"core/index\";\r\nimport type { ISettingsContext } from \"../../services/settingsContext\";\r\n\r\nimport { QuaternionPropertyLine, RotationVectorPropertyLine, Vector3PropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/vectorPropertyLine\";\r\nimport { useQuaternionProperty } from \"../../hooks/compoundPropertyHooks\";\r\nimport { useObservableState } from \"../../hooks/observableHooks\";\r\nimport { BoundProperty, Property } from \"./boundProperty\";\r\n\r\nexport type Transform = { position: Vector3; rotation: Vector3; rotationQuaternion: Nullable<Quaternion>; scaling: Vector3 };\r\n\r\nexport const TransformProperties: FunctionComponent<{ transform: Transform; settings: ISettingsContext }> = (props) => {\r\n    const { transform, settings } = props;\r\n\r\n    const quatRotation = useQuaternionProperty(transform, \"rotationQuaternion\");\r\n\r\n    const useDegrees = useObservableState(() => settings.useDegrees, settings.settingsChangedObservable);\r\n    const useEuler = useObservableState(() => settings.useEuler, settings.settingsChangedObservable);\r\n\r\n    return (\r\n        <>\r\n            <BoundProperty component={Vector3PropertyLine} label=\"Position\" target={transform} propertyKey=\"position\" />\r\n            {quatRotation ? (\r\n                <Property\r\n                    component={QuaternionPropertyLine}\r\n                    label=\"Rotation (Quat)\"\r\n                    propertyPath=\"rotationQuaternion\"\r\n                    value={quatRotation}\r\n                    onChange={(val) => (transform.rotationQuaternion = val)}\r\n                    useDegrees={useDegrees}\r\n                    useEuler={useEuler}\r\n                />\r\n            ) : (\r\n                <BoundProperty component={RotationVectorPropertyLine} label=\"Rotation\" target={transform} propertyKey=\"rotation\" useDegrees={useDegrees} />\r\n            )}\r\n            <BoundProperty component={Vector3PropertyLine} label=\"Scaling\" target={transform} propertyKey=\"scaling\" />\r\n        </>\r\n    );\r\n};\r\n","import type { ServiceDefinition } from \"../../../modularity/serviceDefinition\";\r\nimport type { ISettingsContext } from \"../../settingsContext\";\r\nimport type { IPropertiesService } from \"./propertiesService\";\r\n\r\nimport { Bone } from \"core/Bones/bone\";\r\nimport { TransformNode } from \"core/Meshes/transformNode\";\r\nimport { TransformProperties } from \"../../../components/properties/transformProperties\";\r\nimport { SettingsContextIdentity } from \"../../settingsContext\";\r\nimport { PropertiesServiceIdentity } from \"./propertiesService\";\r\n\r\nexport const TransformPropertiesServiceDefinition: ServiceDefinition<[], [IPropertiesService, ISettingsContext]> = {\r\n    friendlyName: \"Transform Properties\",\r\n    consumes: [PropertiesServiceIdentity, SettingsContextIdentity],\r\n    factory: (propertiesService, settingsContent) => {\r\n        const contentRegistration = propertiesService.addSectionContent({\r\n            key: \"Transform Properties\",\r\n            // TransformNode and Bone don't share a common base class, but both have the same transform related properties.\r\n            predicate: (entity: unknown) => entity instanceof TransformNode || entity instanceof Bone,\r\n            content: [\r\n                {\r\n                    section: \"Transform\",\r\n                    component: ({ context }) => <TransformProperties transform={context} settings={settingsContent} />,\r\n                },\r\n            ],\r\n        });\r\n\r\n        return {\r\n            dispose: () => {\r\n                contentRegistration.dispose();\r\n            },\r\n        };\r\n    },\r\n};\r\n","import type { TargetedAnimation } from \"core/index\";\r\nimport type { ServiceDefinition } from \"../../../modularity/serviceDefinition\";\r\nimport type { ISceneContext } from \"../../sceneContext\";\r\nimport type { ISceneExplorerService } from \"./sceneExplorerService\";\r\n\r\nimport { FilmstripRegular, PauseFilled, PlayFilled, StackRegular } from \"@fluentui/react-icons\";\r\n\r\nimport { AnimationGroup } from \"core/Animations/animationGroup\";\r\nimport { Observable } from \"core/Misc/observable\";\r\nimport { InterceptProperty } from \"../../../instrumentation/propertyInstrumentation\";\r\nimport { SceneContextIdentity } from \"../../sceneContext\";\r\nimport { DefaultCommandsOrder, DefaultSectionsOrder } from \"./defaultSectionsMetadata\";\r\nimport { SceneExplorerServiceIdentity } from \"./sceneExplorerService\";\r\n\r\nexport const AnimationGroupExplorerServiceDefinition: ServiceDefinition<[], [ISceneExplorerService, ISceneContext]> = {\r\n    friendlyName: \"Animation Group Explorer\",\r\n    consumes: [SceneExplorerServiceIdentity, SceneContextIdentity],\r\n    factory: (sceneExplorerService, sceneContext) => {\r\n        const scene = sceneContext.currentScene;\r\n        if (!scene) {\r\n            return undefined;\r\n        }\r\n\r\n        const sectionRegistration = sceneExplorerService.addSection<AnimationGroup | TargetedAnimation>({\r\n            displayName: \"Animation Groups\",\r\n            order: DefaultSectionsOrder.AnimationGroups,\r\n            getRootEntities: () => scene.animationGroups,\r\n            getEntityChildren: (entity) => (entity instanceof AnimationGroup ? entity.targetedAnimations : []),\r\n            getEntityDisplayInfo: (entity) => {\r\n                const namedEntity = entity instanceof AnimationGroup ? entity : entity.animation;\r\n\r\n                const onChangeObservable = new Observable<void>();\r\n\r\n                const nameHookToken = InterceptProperty(namedEntity, \"name\", {\r\n                    afterSet: () => {\r\n                        onChangeObservable.notifyObservers();\r\n                    },\r\n                });\r\n\r\n                return {\r\n                    get name() {\r\n                        return namedEntity.name;\r\n                    },\r\n                    onChange: onChangeObservable,\r\n                    dispose: () => {\r\n                        nameHookToken.dispose();\r\n                        onChangeObservable.clear();\r\n                    },\r\n                };\r\n            },\r\n            entityIcon: ({ entity }) => (entity instanceof AnimationGroup ? <StackRegular /> : <FilmstripRegular />),\r\n            getEntityAddedObservables: () => [scene.onNewAnimationGroupAddedObservable],\r\n            getEntityRemovedObservables: () => [scene.onAnimationGroupRemovedObservable],\r\n        });\r\n\r\n        const animationPlayPauseCommandRegistration = sceneExplorerService.addEntityCommand({\r\n            predicate: (entity: unknown) => entity instanceof AnimationGroup,\r\n            order: DefaultCommandsOrder.AnimationGroupPlay,\r\n            getCommand: (animationGroup) => {\r\n                const onChangeObservable = new Observable<void>();\r\n                const playObserver = animationGroup.onAnimationGroupPlayObservable.add(() => onChangeObservable.notifyObservers());\r\n                const pauseObserver = animationGroup.onAnimationGroupPauseObservable.add(() => onChangeObservable.notifyObservers());\r\n                const endObserver = animationGroup.onAnimationGroupEndObservable.add(() => onChangeObservable.notifyObservers());\r\n\r\n                return {\r\n                    type: \"toggle\",\r\n                    get displayName() {\r\n                        return `${animationGroup.isPlaying ? \"Pause\" : \"Play\"} Animation`;\r\n                    },\r\n                    icon: () => (animationGroup.isPlaying ? <PauseFilled /> : <PlayFilled />),\r\n                    get isEnabled() {\r\n                        return animationGroup.isPlaying;\r\n                    },\r\n                    set isEnabled(enabled: boolean) {\r\n                        if (enabled) {\r\n                            animationGroup.play(true);\r\n                        } else {\r\n                            animationGroup.pause();\r\n                        }\r\n                    },\r\n                    onChange: onChangeObservable,\r\n                    dispose: () => {\r\n                        playObserver.remove();\r\n                        pauseObserver.remove();\r\n                        endObserver.remove();\r\n                        onChangeObservable.clear();\r\n                    },\r\n                };\r\n            },\r\n        });\r\n\r\n        return {\r\n            dispose: () => {\r\n                sectionRegistration.dispose();\r\n                animationPlayPauseCommandRegistration.dispose();\r\n            },\r\n        };\r\n    },\r\n};\r\n","import type { ServiceDefinition } from \"../../../modularity/serviceDefinition\";\r\nimport type { ISceneContext } from \"../../sceneContext\";\r\nimport type { ISceneExplorerService } from \"./sceneExplorerService\";\r\n\r\nimport { WeatherSunnyLowFilled } from \"@fluentui/react-icons\";\r\n\r\nimport { Observable } from \"core/Misc/observable\";\r\nimport { InterceptProperty } from \"../../../instrumentation/propertyInstrumentation\";\r\nimport { SceneContextIdentity } from \"../../sceneContext\";\r\nimport { DefaultSectionsOrder } from \"./defaultSectionsMetadata\";\r\nimport { SceneExplorerServiceIdentity } from \"./sceneExplorerService\";\r\nimport type { Atmosphere } from \"addons/atmosphere/atmosphere\";\r\n\r\nexport const AtmosphereExplorerServiceDefinition: ServiceDefinition<[], [ISceneExplorerService, ISceneContext]> = {\r\n    friendlyName: \"Atmosphere Explorer\",\r\n    consumes: [SceneExplorerServiceIdentity, SceneContextIdentity],\r\n    factory: (sceneExplorerService, sceneContext) => {\r\n        const scene = sceneContext.currentScene;\r\n        if (!scene) {\r\n            return undefined;\r\n        }\r\n        const sectionRegistration = sceneExplorerService.addSection({\r\n            displayName: \"Atmosphere\",\r\n            order: DefaultSectionsOrder.Atmosphere,\r\n            getRootEntities: () => (scene.getExternalData(\"atmosphere\") ? [scene.getExternalData(\"atmosphere\") as Atmosphere] : []),\r\n            getEntityDisplayInfo: (atmosphere) => {\r\n                const onChangeObservable = new Observable<void>();\r\n\r\n                const nameHookToken = InterceptProperty(atmosphere, \"name\", {\r\n                    afterSet: () => {\r\n                        onChangeObservable.notifyObservers();\r\n                    },\r\n                });\r\n\r\n                return {\r\n                    get name() {\r\n                        return atmosphere.name;\r\n                    },\r\n                    onChange: onChangeObservable,\r\n                    dispose: () => {\r\n                        nameHookToken.dispose();\r\n                        onChangeObservable.clear();\r\n                    },\r\n                };\r\n            },\r\n            entityIcon: () => <WeatherSunnyLowFilled />,\r\n            // TODO in order for inspector UX to display atmosphere created after inspector is created\r\n            getEntityAddedObservables: () => [],\r\n            getEntityRemovedObservables: () => [],\r\n        });\r\n\r\n        return {\r\n            dispose: () => {\r\n                sectionRegistration.dispose();\r\n            },\r\n        };\r\n    },\r\n};\r\n","import type { ServiceDefinition } from \"../../../modularity/serviceDefinition\";\r\nimport type { ISceneContext } from \"../../sceneContext\";\r\nimport type { ISceneExplorerService } from \"./sceneExplorerService\";\r\n\r\nimport { LayerRegular } from \"@fluentui/react-icons\";\r\n\r\nimport { Observable } from \"core/Misc/observable\";\r\nimport { InterceptProperty } from \"../../../instrumentation/propertyInstrumentation\";\r\nimport { SceneContextIdentity } from \"../../sceneContext\";\r\nimport { DefaultSectionsOrder } from \"./defaultSectionsMetadata\";\r\nimport { SceneExplorerServiceIdentity } from \"./sceneExplorerService\";\r\n\r\nexport const EffectLayerExplorerServiceDefinition: ServiceDefinition<[], [ISceneExplorerService, ISceneContext]> = {\r\n    friendlyName: \"Effect Layer Explorer\",\r\n    consumes: [SceneExplorerServiceIdentity, SceneContextIdentity],\r\n    factory: (sceneExplorerService, sceneContext) => {\r\n        const scene = sceneContext.currentScene;\r\n        if (!scene) {\r\n            return undefined;\r\n        }\r\n\r\n        const sectionRegistration = sceneExplorerService.addSection({\r\n            displayName: \"Effect Layers\",\r\n            order: DefaultSectionsOrder.EffectLayers,\r\n            getRootEntities: () => scene.effectLayers,\r\n            getEntityDisplayInfo: (effectLayer) => {\r\n                const onChangeObservable = new Observable<void>();\r\n\r\n                const nameHookToken = InterceptProperty(effectLayer, \"name\", {\r\n                    afterSet: () => {\r\n                        onChangeObservable.notifyObservers();\r\n                    },\r\n                });\r\n\r\n                return {\r\n                    get name() {\r\n                        return effectLayer.name;\r\n                    },\r\n                    onChange: onChangeObservable,\r\n                    dispose: () => {\r\n                        nameHookToken.dispose();\r\n                        onChangeObservable.clear();\r\n                    },\r\n                };\r\n            },\r\n            entityIcon: () => <LayerRegular />,\r\n            getEntityAddedObservables: () => [scene.onNewEffectLayerAddedObservable],\r\n            getEntityRemovedObservables: () => [scene.onEffectLayerRemovedObservable],\r\n        });\r\n\r\n        return {\r\n            dispose: () => {\r\n                sectionRegistration.dispose();\r\n            },\r\n        };\r\n    },\r\n};\r\n","import type { ServiceDefinition } from \"../../../modularity/serviceDefinition\";\r\nimport type { ISceneContext } from \"../../sceneContext\";\r\nimport type { ISceneExplorerService } from \"./sceneExplorerService\";\r\n\r\nimport { FrameRegular, PlayFilled, PlayRegular } from \"@fluentui/react-icons\";\r\n\r\nimport { FrameGraph } from \"core/FrameGraph/frameGraph\";\r\nimport { Observable } from \"core/Misc/observable\";\r\nimport { InterceptProperty } from \"../../../instrumentation/propertyInstrumentation\";\r\nimport { SceneContextIdentity } from \"../../sceneContext\";\r\nimport { DefaultCommandsOrder, DefaultSectionsOrder } from \"./defaultSectionsMetadata\";\r\nimport { SceneExplorerServiceIdentity } from \"./sceneExplorerService\";\r\n\r\nexport const FrameGraphExplorerServiceDefinition: ServiceDefinition<[], [ISceneExplorerService, ISceneContext]> = {\r\n    friendlyName: \"Frame Graph Explorer\",\r\n    consumes: [SceneExplorerServiceIdentity, SceneContextIdentity],\r\n    factory: (sceneExplorerService, sceneContext) => {\r\n        const scene = sceneContext.currentScene;\r\n        if (!scene) {\r\n            return undefined;\r\n        }\r\n\r\n        const sectionRegistration = sceneExplorerService.addSection({\r\n            displayName: \"Frame Graphs\",\r\n            order: DefaultSectionsOrder.FrameGraphs,\r\n            getRootEntities: () => scene.frameGraphs,\r\n            getEntityDisplayInfo: (frameGraph) => {\r\n                const onChangeObservable = new Observable<void>();\r\n\r\n                const nameHookToken = InterceptProperty(frameGraph, \"name\", {\r\n                    afterSet: () => {\r\n                        onChangeObservable.notifyObservers();\r\n                    },\r\n                });\r\n\r\n                return {\r\n                    get name() {\r\n                        return frameGraph.name;\r\n                    },\r\n                    onChange: onChangeObservable,\r\n                    dispose: () => {\r\n                        nameHookToken.dispose();\r\n                        onChangeObservable.clear();\r\n                    },\r\n                };\r\n            },\r\n            entityIcon: () => <FrameRegular />,\r\n            getEntityAddedObservables: () => [scene.onNewFrameGraphAddedObservable],\r\n            getEntityRemovedObservables: () => [scene.onFrameGraphRemovedObservable],\r\n        });\r\n\r\n        const activeFrameGraphCommandRegistration = sceneExplorerService.addEntityCommand({\r\n            predicate: (entity: unknown) => entity instanceof FrameGraph,\r\n            order: DefaultCommandsOrder.FrameGraphPlay,\r\n            getCommand: (frameGraph) => {\r\n                const onChangeObservable = new Observable<void>();\r\n                const frameGraphHook = InterceptProperty(scene, \"frameGraph\", {\r\n                    afterSet: () => onChangeObservable.notifyObservers(),\r\n                });\r\n\r\n                return {\r\n                    type: \"toggle\",\r\n                    displayName: \"Make Active\",\r\n                    icon: () => (scene.frameGraph === frameGraph ? <PlayFilled /> : <PlayRegular />),\r\n                    get isEnabled() {\r\n                        return scene.frameGraph === frameGraph;\r\n                    },\r\n                    set isEnabled(enabled: boolean) {\r\n                        if (enabled && scene.frameGraph !== frameGraph) {\r\n                            scene.frameGraph = frameGraph;\r\n                        }\r\n                    },\r\n                    onChange: onChangeObservable,\r\n                    dispose: () => {\r\n                        frameGraphHook.dispose();\r\n                        onChangeObservable.clear();\r\n                    },\r\n                };\r\n            },\r\n        });\r\n\r\n        return {\r\n            dispose: () => {\r\n                sectionRegistration.dispose();\r\n                activeFrameGraphCommandRegistration.dispose();\r\n            },\r\n        };\r\n    },\r\n};\r\n","import type { AdvancedDynamicTexture, Container, Control } from \"gui/index\";\r\nimport type { ServiceDefinition } from \"../../../modularity/serviceDefinition\";\r\nimport type { ISceneContext } from \"../../sceneContext\";\r\nimport type { ISceneExplorerService } from \"./sceneExplorerService\";\r\n\r\nimport { AppGenericRegular, BorderNoneRegular, BorderOutsideRegular, EyeOffRegular, EyeRegular, RectangleLandscapeRegular } from \"@fluentui/react-icons\";\r\n\r\nimport { Observable } from \"core/Misc/observable\";\r\nimport { InterceptProperty } from \"../../../instrumentation/propertyInstrumentation\";\r\nimport { SceneContextIdentity } from \"../../sceneContext\";\r\nimport { DefaultCommandsOrder, DefaultSectionsOrder } from \"./defaultSectionsMetadata\";\r\nimport { SceneExplorerServiceIdentity } from \"./sceneExplorerService\";\r\n\r\n// Don't use instanceof in this case as we don't want to bring in the gui package just to check if the entity is an AdvancedDynamicTexture.\r\nfunction IsAdvancedDynamicTexture(entity: unknown): entity is AdvancedDynamicTexture {\r\n    return (entity as AdvancedDynamicTexture)?.getClassName?.() === \"AdvancedDynamicTexture\";\r\n}\r\n\r\nfunction IsContainer(entity: Control): entity is Container {\r\n    // Check for Container-specific properties without using instanceof to avoid importing the concrete type\r\n    return (entity as Container)?.children !== undefined && (entity as Container)?.onControlAddedObservable !== undefined;\r\n}\r\n\r\nfunction IsControl(entity: unknown): entity is Control {\r\n    // Check for Control-specific properties without using instanceof to avoid importing the concrete type\r\n    return (entity as Control)?._currentMeasure !== undefined && (entity as Control)?.onPointerDownObservable !== undefined;\r\n}\r\n\r\nexport const GuiExplorerServiceDefinition: ServiceDefinition<[], [ISceneExplorerService, ISceneContext]> = {\r\n    friendlyName: \"GUI Explorer\",\r\n    consumes: [SceneExplorerServiceIdentity, SceneContextIdentity],\r\n    factory: (sceneExplorerService, sceneContext) => {\r\n        const scene = sceneContext.currentScene;\r\n        if (!scene) {\r\n            return undefined;\r\n        }\r\n\r\n        const guiEntityAddedObservable = new Observable<AdvancedDynamicTexture | Container | Control>();\r\n        const guiEntityRemovedObservable = new Observable<AdvancedDynamicTexture | Container | Control>();\r\n\r\n        const textureAddedObserver = scene.onNewTextureAddedObservable.add((texture) => {\r\n            if (IsAdvancedDynamicTexture(texture)) {\r\n                guiEntityAddedObservable.notifyObservers(texture);\r\n            }\r\n        });\r\n\r\n        const textureRemovedObserver = scene.onTextureRemovedObservable.add((texture) => {\r\n            if (IsAdvancedDynamicTexture(texture)) {\r\n                guiEntityRemovedObservable.notifyObservers(texture);\r\n            }\r\n        });\r\n\r\n        const sectionRegistration = sceneExplorerService.addSection<AdvancedDynamicTexture | Container | Control>({\r\n            displayName: \"GUI\",\r\n            order: DefaultSectionsOrder.GUIs,\r\n            getRootEntities: () => scene.textures.filter(IsAdvancedDynamicTexture),\r\n            getEntityChildren: (entity) => (IsAdvancedDynamicTexture(entity) ? entity.getChildren() : IsContainer(entity) ? entity.children : []),\r\n            getEntityDisplayInfo: (entity) => {\r\n                const disposeActions: (() => void)[] = [];\r\n\r\n                const onChangeObservable = new Observable<void>();\r\n                disposeActions.push(() => onChangeObservable.clear());\r\n\r\n                const nameHookToken = InterceptProperty(entity, \"name\", {\r\n                    afterSet: () => {\r\n                        onChangeObservable.notifyObservers();\r\n                    },\r\n                });\r\n                disposeActions.push(() => nameHookToken.dispose());\r\n\r\n                if (!IsAdvancedDynamicTexture(entity) && IsContainer(entity)) {\r\n                    const controlAddedObserver = entity.onControlAddedObservable.add((control) => {\r\n                        if (control) {\r\n                            guiEntityAddedObservable.notifyObservers(control);\r\n                        }\r\n                    });\r\n                    disposeActions.push(() => entity.onControlAddedObservable.remove(controlAddedObserver));\r\n\r\n                    const controlRemovedObserver = entity.onControlRemovedObservable.add((control) => {\r\n                        if (control) {\r\n                            guiEntityRemovedObservable.notifyObservers(control);\r\n                        }\r\n                    });\r\n                    disposeActions.push(() => entity.onControlRemovedObservable.remove(controlRemovedObserver));\r\n                }\r\n\r\n                return {\r\n                    get name() {\r\n                        if (IsAdvancedDynamicTexture(entity)) {\r\n                            return entity.name;\r\n                        } else {\r\n                            return `${entity.name ?? \"No name\"} [${entity.getClassName()}]`;\r\n                        }\r\n                    },\r\n                    onChange: onChangeObservable,\r\n                    dispose: () => {\r\n                        disposeActions.reverse().forEach((disposeAction) => disposeAction());\r\n                    },\r\n                };\r\n            },\r\n            entityIcon: ({ entity }) => (IsAdvancedDynamicTexture(entity) ? <AppGenericRegular /> : <RectangleLandscapeRegular />),\r\n            getEntityAddedObservables: () => [guiEntityAddedObservable],\r\n            getEntityRemovedObservables: () => [guiEntityRemovedObservable],\r\n        });\r\n\r\n        const highlightControlCommandRegistration = sceneExplorerService.addEntityCommand({\r\n            predicate: (entity: unknown): entity is Control => IsControl(entity),\r\n            order: DefaultCommandsOrder.GuiHighlight,\r\n            getCommand: (control) => {\r\n                const onChangeObservable = new Observable<void>();\r\n                const showBoundingBoxHook = InterceptProperty(control, \"isHighlighted\", {\r\n                    afterSet: () => onChangeObservable.notifyObservers(),\r\n                });\r\n\r\n                return {\r\n                    type: \"toggle\",\r\n                    get displayName() {\r\n                        return `${control.isHighlighted ? \"Hide\" : \"Show\"} Bounding Box`;\r\n                    },\r\n                    icon: () => (control.isHighlighted ? <BorderOutsideRegular /> : <BorderNoneRegular />),\r\n                    get isEnabled() {\r\n                        return control.isHighlighted;\r\n                    },\r\n                    set isEnabled(enabled: boolean) {\r\n                        control.isHighlighted = enabled;\r\n                    },\r\n                    onChange: onChangeObservable,\r\n                    dispose: () => {\r\n                        showBoundingBoxHook.dispose();\r\n                        onChangeObservable.clear();\r\n                    },\r\n                };\r\n            },\r\n        });\r\n\r\n        const controlVisibilityCommandRegistration = sceneExplorerService.addEntityCommand({\r\n            predicate: (entity: unknown): entity is Control => IsControl(entity),\r\n            order: DefaultCommandsOrder.GuiVisibility,\r\n            getCommand: (control) => {\r\n                return {\r\n                    type: \"toggle\",\r\n                    get displayName() {\r\n                        return `${control.isVisible ? \"Hide\" : \"Show\"} Mesh`;\r\n                    },\r\n                    icon: () => (control.isVisible ? <EyeRegular /> : <EyeOffRegular />),\r\n                    get isEnabled() {\r\n                        return !control.isVisible;\r\n                    },\r\n                    set isEnabled(enabled: boolean) {\r\n                        control.isVisible = !enabled;\r\n                    },\r\n                    onChange: control.onIsVisibleChangedObservable,\r\n                };\r\n            },\r\n        });\r\n\r\n        return {\r\n            dispose: () => {\r\n                textureAddedObserver.remove();\r\n                textureRemovedObserver.remove();\r\n                sectionRegistration.dispose();\r\n                highlightControlCommandRegistration.dispose();\r\n                controlVisibilityCommandRegistration.dispose();\r\n            },\r\n        };\r\n    },\r\n};\r\n","import type { ServiceDefinition } from \"../../../modularity/serviceDefinition\";\r\nimport type { ISceneContext } from \"../../sceneContext\";\r\nimport type { ISceneExplorerService } from \"./sceneExplorerService\";\r\n\r\nimport { Observable } from \"core/Misc/observable\";\r\nimport { MaterialIcon } from \"shared-ui-components/fluent/icons\";\r\nimport { InterceptProperty } from \"../../../instrumentation/propertyInstrumentation\";\r\nimport { SceneContextIdentity } from \"../../sceneContext\";\r\nimport { DefaultSectionsOrder } from \"./defaultSectionsMetadata\";\r\nimport { SceneExplorerServiceIdentity } from \"./sceneExplorerService\";\r\n\r\nexport const MaterialExplorerServiceDefinition: ServiceDefinition<[], [ISceneExplorerService, ISceneContext]> = {\r\n    friendlyName: \"Material Explorer\",\r\n    consumes: [SceneExplorerServiceIdentity, SceneContextIdentity],\r\n    factory: (sceneExplorerService, sceneContext) => {\r\n        const scene = sceneContext.currentScene;\r\n        if (!scene) {\r\n            return undefined;\r\n        }\r\n\r\n        const sectionRegistration = sceneExplorerService.addSection({\r\n            displayName: \"Materials\",\r\n            order: DefaultSectionsOrder.Materials,\r\n            getRootEntities: () => [...scene.materials, ...scene.multiMaterials],\r\n            getEntityDisplayInfo: (material) => {\r\n                const onChangeObservable = new Observable<void>();\r\n\r\n                const nameHookToken = InterceptProperty(material, \"name\", {\r\n                    afterSet: () => {\r\n                        onChangeObservable.notifyObservers();\r\n                    },\r\n                });\r\n\r\n                return {\r\n                    get name() {\r\n                        return material.name;\r\n                    },\r\n                    onChange: onChangeObservable,\r\n                    dispose: () => {\r\n                        nameHookToken.dispose();\r\n                        onChangeObservable.clear();\r\n                    },\r\n                };\r\n            },\r\n            entityIcon: () => <MaterialIcon />,\r\n            getEntityAddedObservables: () => [scene.onNewMaterialAddedObservable],\r\n            getEntityRemovedObservables: () => [scene.onMaterialRemovedObservable],\r\n        });\r\n\r\n        return {\r\n            dispose: () => {\r\n                sectionRegistration.dispose();\r\n            },\r\n        };\r\n    },\r\n};\r\n","import type { IDisposable, Node, Nullable } from \"core/index\";\r\nimport type { ServiceDefinition } from \"../../../modularity/serviceDefinition\";\r\nimport type { IGizmoService } from \"../../gizmoService\";\r\nimport type { ISceneContext } from \"../../sceneContext\";\r\nimport type { ISceneExplorerService } from \"./sceneExplorerService\";\r\n\r\nimport {\r\n    BorderNoneRegular,\r\n    BorderOutsideRegular,\r\n    CameraRegular,\r\n    EyeOffRegular,\r\n    EyeRegular,\r\n    FlashlightOffRegular,\r\n    FlashlightRegular,\r\n    LightbulbRegular,\r\n    MyLocationRegular,\r\n    VideoFilled,\r\n    VideoRegular,\r\n} from \"@fluentui/react-icons\";\r\n\r\nimport { Camera } from \"core/Cameras/camera\";\r\nimport { ClusteredLightContainer } from \"core/Lights/Clustered/clusteredLightContainer\";\r\nimport { Light } from \"core/Lights/light\";\r\nimport { AbstractMesh } from \"core/Meshes/abstractMesh\";\r\nimport { TransformNode } from \"core/Meshes/transformNode\";\r\nimport { Observable } from \"core/Misc/observable\";\r\nimport { MeshIcon } from \"shared-ui-components/fluent/icons\";\r\nimport { InterceptProperty } from \"../../../instrumentation/propertyInstrumentation\";\r\nimport { GizmoServiceIdentity } from \"../../gizmoService\";\r\nimport { SceneContextIdentity } from \"../../sceneContext\";\r\nimport { DefaultCommandsOrder, DefaultSectionsOrder } from \"./defaultSectionsMetadata\";\r\nimport { SceneExplorerServiceIdentity } from \"./sceneExplorerService\";\r\n\r\nimport \"core/Rendering/boundingBoxRenderer\";\r\n\r\nexport const NodeExplorerServiceDefinition: ServiceDefinition<[], [ISceneExplorerService, ISceneContext, IGizmoService]> = {\r\n    friendlyName: \"Node Explorer\",\r\n    consumes: [SceneExplorerServiceIdentity, SceneContextIdentity, GizmoServiceIdentity],\r\n    factory: (sceneExplorerService, sceneContext, gizmoService) => {\r\n        const scene = sceneContext.currentScene;\r\n        if (!scene) {\r\n            return undefined;\r\n        }\r\n\r\n        const nodeMovedObservable = new Observable<Node>();\r\n\r\n        const sectionRegistration = sceneExplorerService.addSection({\r\n            displayName: \"Nodes\",\r\n            order: DefaultSectionsOrder.Nodes,\r\n            getRootEntities: () => {\r\n                const rootNodes = [...scene.rootNodes];\r\n\r\n                // If any non-root node has a parent and that parent is not one of the node types shown in the Nodes section,\r\n                // then we should treat it as a root node, otherwise it won't show up anywhere in scene explorer.\r\n                // An example of this is when a Mesh or a TransformNode is parented under a Bone.\r\n                for (const node of [...scene.meshes, ...scene.transformNodes, ...scene.cameras, ...scene.lights]) {\r\n                    if (\r\n                        node.parent &&\r\n                        !(node.parent instanceof AbstractMesh) &&\r\n                        !(node.parent instanceof TransformNode) &&\r\n                        !(node.parent instanceof Camera) &&\r\n                        !(node.parent instanceof Light)\r\n                    ) {\r\n                        rootNodes.push(node);\r\n                    }\r\n                }\r\n\r\n                // Lights within a clustered light container are not included in Scene.lights or Scene.rootNodes.\r\n                // If they also have no parent, then they won't show up anywhere, so show them as root nodes.\r\n                for (const light of scene.lights) {\r\n                    if (light instanceof ClusteredLightContainer) {\r\n                        for (const childLight of light.lights) {\r\n                            if (!childLight.parent && !rootNodes.includes(childLight)) {\r\n                                rootNodes.push(childLight);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n                return rootNodes;\r\n            },\r\n            getEntityChildren: (node) => node.getChildren(),\r\n            getEntityDisplayInfo: (node) => {\r\n                const onChangeObservable = new Observable<void>();\r\n\r\n                const nameHookToken = InterceptProperty(node, \"name\", {\r\n                    afterSet: () => onChangeObservable.notifyObservers(),\r\n                });\r\n\r\n                const parentHookToken = InterceptProperty(node, \"parent\", {\r\n                    afterSet: () => {\r\n                        nodeMovedObservable.notifyObservers(node);\r\n                    },\r\n                });\r\n\r\n                return {\r\n                    get name() {\r\n                        return node.name;\r\n                    },\r\n                    onChange: onChangeObservable,\r\n                    dispose: () => {\r\n                        nameHookToken.dispose();\r\n                        parentHookToken.dispose();\r\n                        onChangeObservable.clear();\r\n                    },\r\n                };\r\n            },\r\n            entityIcon: ({ entity: node }) =>\r\n                node instanceof AbstractMesh ? (\r\n                    <MeshIcon />\r\n                ) : node instanceof TransformNode ? (\r\n                    <MyLocationRegular />\r\n                ) : node instanceof Camera ? (\r\n                    <CameraRegular />\r\n                ) : node instanceof Light ? (\r\n                    <LightbulbRegular />\r\n                ) : (\r\n                    <></>\r\n                ),\r\n            getEntityAddedObservables: () => [\r\n                scene.onNewMeshAddedObservable,\r\n                scene.onNewTransformNodeAddedObservable,\r\n                scene.onNewCameraAddedObservable,\r\n                scene.onNewLightAddedObservable,\r\n            ],\r\n            getEntityRemovedObservables: () => [\r\n                scene.onMeshRemovedObservable,\r\n                scene.onTransformNodeRemovedObservable,\r\n                scene.onCameraRemovedObservable,\r\n                scene.onLightRemovedObservable,\r\n            ],\r\n            getEntityMovedObservables: () => [nodeMovedObservable],\r\n        });\r\n\r\n        const abstractMeshBoundingBoxCommandRegistration = sceneExplorerService.addEntityCommand({\r\n            predicate: (entity: unknown): entity is AbstractMesh => entity instanceof AbstractMesh && entity.getTotalVertices() > 0,\r\n            order: DefaultCommandsOrder.MeshBoundingBox,\r\n            getCommand: (mesh) => {\r\n                const onChangeObservable = new Observable<void>();\r\n                const showBoundingBoxHook = InterceptProperty(mesh, \"showBoundingBox\", {\r\n                    afterSet: () => onChangeObservable.notifyObservers(),\r\n                });\r\n\r\n                return {\r\n                    type: \"toggle\",\r\n                    get displayName() {\r\n                        return `${mesh.showBoundingBox ? \"Hide\" : \"Show\"} Bounding Box`;\r\n                    },\r\n                    icon: () => (mesh.showBoundingBox ? <BorderOutsideRegular /> : <BorderNoneRegular />),\r\n                    get isEnabled() {\r\n                        return mesh.showBoundingBox;\r\n                    },\r\n                    set isEnabled(enabled: boolean) {\r\n                        mesh.showBoundingBox = enabled;\r\n                    },\r\n                    onChange: onChangeObservable,\r\n                    dispose: () => {\r\n                        showBoundingBoxHook.dispose();\r\n                        onChangeObservable.clear();\r\n                    },\r\n                };\r\n            },\r\n        });\r\n\r\n        const abstractMeshVisibilityCommandRegistration = sceneExplorerService.addEntityCommand({\r\n            predicate: (entity: unknown): entity is AbstractMesh => entity instanceof AbstractMesh && entity.getTotalVertices() > 0,\r\n            order: DefaultCommandsOrder.MeshVisibility,\r\n            getCommand: (mesh) => {\r\n                const onChangeObservable = new Observable<void>();\r\n                const isVisibleHook = InterceptProperty(mesh, \"isVisible\", {\r\n                    afterSet: () => onChangeObservable.notifyObservers(),\r\n                });\r\n\r\n                return {\r\n                    type: \"toggle\",\r\n                    get displayName() {\r\n                        return `${mesh.isVisible ? \"Hide\" : \"Show\"} Mesh`;\r\n                    },\r\n                    icon: () => (mesh.isVisible ? <EyeRegular /> : <EyeOffRegular />),\r\n                    get isEnabled() {\r\n                        return !mesh.isVisible;\r\n                    },\r\n                    set isEnabled(enabled: boolean) {\r\n                        mesh.isVisible = !enabled;\r\n                    },\r\n                    onChange: onChangeObservable,\r\n                    dispose: () => {\r\n                        isVisibleHook.dispose();\r\n                        onChangeObservable.clear();\r\n                    },\r\n                };\r\n            },\r\n        });\r\n\r\n        const activeCameraCommandRegistration = sceneExplorerService.addEntityCommand({\r\n            predicate: (entity: unknown) => entity instanceof Camera,\r\n            order: DefaultCommandsOrder.CameraActive,\r\n            getCommand: (camera) => {\r\n                const scene = camera.getScene();\r\n                const onChangeObservable = new Observable<void>();\r\n                const activeCameraChangedObserver = scene.onActiveCameraChanged.add(() => {\r\n                    onChangeObservable.notifyObservers();\r\n                });\r\n\r\n                return {\r\n                    type: \"toggle\",\r\n                    displayName: \"Activate and Attach Controls\",\r\n                    icon: () => (scene.activeCamera === camera ? <VideoFilled /> : <VideoRegular />),\r\n                    get isEnabled() {\r\n                        return scene.activeCamera === camera;\r\n                    },\r\n                    set isEnabled(enabled: boolean) {\r\n                        if (enabled && scene.activeCamera !== camera) {\r\n                            scene.activeCamera?.detachControl();\r\n                            scene.activeCamera = camera;\r\n                            camera.attachControl(true);\r\n                        }\r\n                    },\r\n                    onChange: onChangeObservable,\r\n                    dispose: () => {\r\n                        activeCameraChangedObserver.remove();\r\n                        onChangeObservable.clear();\r\n                    },\r\n                };\r\n            },\r\n        });\r\n\r\n        function addGizmoCommand<NodeT extends Node>(nodeClass: abstract new (...args: any[]) => NodeT, getGizmoRef: (node: NodeT) => IDisposable) {\r\n            return sceneExplorerService.addEntityCommand({\r\n                predicate: (entity: unknown): entity is NodeT => entity instanceof nodeClass,\r\n                order: DefaultCommandsOrder.GizmoActive,\r\n                getCommand: (node) => {\r\n                    const onChangeObservable = new Observable<void>();\r\n\r\n                    let gizmoRef: Nullable<IDisposable> = null;\r\n\r\n                    return {\r\n                        type: \"toggle\",\r\n                        get displayName() {\r\n                            return `Turn ${gizmoRef ? \"Off\" : \"On\"} Gizmo`;\r\n                        },\r\n                        icon: () => (gizmoRef ? <EyeRegular /> : <EyeOffRegular />),\r\n                        get isEnabled() {\r\n                            return !!gizmoRef;\r\n                        },\r\n                        set isEnabled(enabled: boolean) {\r\n                            if (enabled) {\r\n                                if (!gizmoRef) {\r\n                                    gizmoRef = getGizmoRef(node);\r\n                                    onChangeObservable.notifyObservers();\r\n                                }\r\n                            } else {\r\n                                if (gizmoRef) {\r\n                                    gizmoRef.dispose();\r\n                                    gizmoRef = null;\r\n                                    onChangeObservable.notifyObservers();\r\n                                }\r\n                            }\r\n                        },\r\n                        onChange: onChangeObservable,\r\n                        dispose: () => {\r\n                            onChangeObservable.clear();\r\n                        },\r\n                    };\r\n                },\r\n            });\r\n        }\r\n\r\n        const cameraGizmoCommandRegistration = addGizmoCommand(Camera, gizmoService.getCameraGizmo.bind(gizmoService));\r\n\r\n        const lightEnabledCommandRegistration = sceneExplorerService.addEntityCommand({\r\n            predicate: (entity: unknown): entity is Light => entity instanceof Light,\r\n            order: DefaultCommandsOrder.LightActive,\r\n            getCommand: (light) => {\r\n                return {\r\n                    type: \"toggle\",\r\n                    get displayName() {\r\n                        return `Turn Light ${light.isEnabled() ? \"Off\" : \"On\"}`;\r\n                    },\r\n                    icon: () => (light.isEnabled() ? <FlashlightRegular /> : <FlashlightOffRegular />),\r\n                    get isEnabled() {\r\n                        return !light.isEnabled();\r\n                    },\r\n                    set isEnabled(enabled: boolean) {\r\n                        light.setEnabled(!enabled);\r\n                    },\r\n                    onChange: light.onEnabledStateChangedObservable,\r\n                };\r\n            },\r\n        });\r\n\r\n        const lightGizmoCommandRegistration = addGizmoCommand(Light, gizmoService.getLightGizmo.bind(gizmoService));\r\n\r\n        return {\r\n            dispose: () => {\r\n                sectionRegistration.dispose();\r\n                abstractMeshBoundingBoxCommandRegistration.dispose();\r\n                abstractMeshVisibilityCommandRegistration.dispose();\r\n                activeCameraCommandRegistration.dispose();\r\n                cameraGizmoCommandRegistration.dispose();\r\n                lightEnabledCommandRegistration.dispose();\r\n                lightGizmoCommandRegistration.dispose();\r\n            },\r\n        };\r\n    },\r\n};\r\n","import type { ServiceDefinition } from \"../../../modularity/serviceDefinition\";\r\nimport type { ISceneContext } from \"../../sceneContext\";\r\nimport type { ISceneExplorerService } from \"./sceneExplorerService\";\r\n\r\nimport { DropRegular } from \"@fluentui/react-icons\";\r\n\r\nimport { Observable } from \"core/Misc/observable\";\r\nimport { InterceptProperty } from \"../../../instrumentation/propertyInstrumentation\";\r\nimport { SceneContextIdentity } from \"../../sceneContext\";\r\nimport { DefaultSectionsOrder } from \"./defaultSectionsMetadata\";\r\nimport { SceneExplorerServiceIdentity } from \"./sceneExplorerService\";\r\n\r\nexport const ParticleSystemExplorerServiceDefinition: ServiceDefinition<[], [ISceneExplorerService, ISceneContext]> = {\r\n    friendlyName: \"Particle System Explorer\",\r\n    consumes: [SceneExplorerServiceIdentity, SceneContextIdentity],\r\n    factory: (sceneExplorerService, sceneContext) => {\r\n        const scene = sceneContext.currentScene;\r\n        if (!scene) {\r\n            return undefined;\r\n        }\r\n\r\n        const sectionRegistration = sceneExplorerService.addSection({\r\n            displayName: \"Particle Systems\",\r\n            order: DefaultSectionsOrder.ParticleSystems,\r\n            getRootEntities: () => scene.particleSystems,\r\n            getEntityDisplayInfo: (particleSystem) => {\r\n                const onChangeObservable = new Observable<void>();\r\n\r\n                const nameHookToken = InterceptProperty(particleSystem, \"name\", {\r\n                    afterSet: () => {\r\n                        onChangeObservable.notifyObservers();\r\n                    },\r\n                });\r\n\r\n                return {\r\n                    get name() {\r\n                        return particleSystem.name;\r\n                    },\r\n                    onChange: onChangeObservable,\r\n                    dispose: () => {\r\n                        nameHookToken.dispose();\r\n                        onChangeObservable.clear();\r\n                    },\r\n                };\r\n            },\r\n            entityIcon: () => <DropRegular />,\r\n            getEntityAddedObservables: () => [scene.onNewParticleSystemAddedObservable],\r\n            getEntityRemovedObservables: () => [scene.onParticleSystemRemovedObservable],\r\n        });\r\n\r\n        return {\r\n            dispose: () => {\r\n                sectionRegistration.dispose();\r\n            },\r\n        };\r\n    },\r\n};\r\n","import type { ServiceDefinition } from \"../../../modularity/serviceDefinition\";\r\nimport type { ISceneContext } from \"../../sceneContext\";\r\nimport type { ISceneExplorerService } from \"./sceneExplorerService\";\r\n\r\nimport { BlurRegular } from \"@fluentui/react-icons\";\r\n\r\nimport { Observable } from \"core/Misc/observable\";\r\nimport { InterceptProperty } from \"../../../instrumentation/propertyInstrumentation\";\r\nimport { SceneContextIdentity } from \"../../sceneContext\";\r\nimport { DefaultSectionsOrder } from \"./defaultSectionsMetadata\";\r\nimport { SceneExplorerServiceIdentity } from \"./sceneExplorerService\";\r\n\r\nexport const PostProcessExplorerServiceDefinition: ServiceDefinition<[], [ISceneExplorerService, ISceneContext]> = {\r\n    friendlyName: \"Post Process Explorer\",\r\n    consumes: [SceneExplorerServiceIdentity, SceneContextIdentity],\r\n    factory: (sceneExplorerService, sceneContext) => {\r\n        const scene = sceneContext.currentScene;\r\n        if (!scene) {\r\n            return undefined;\r\n        }\r\n\r\n        const sectionRegistration = sceneExplorerService.addSection({\r\n            displayName: \"Post Processes\",\r\n            order: DefaultSectionsOrder.PostProcesses,\r\n            getRootEntities: () => scene.postProcesses,\r\n            getEntityDisplayInfo: (postProcess) => {\r\n                const onChangeObservable = new Observable<void>();\r\n\r\n                const nameHookToken = InterceptProperty(postProcess, \"name\", {\r\n                    afterSet: () => {\r\n                        onChangeObservable.notifyObservers();\r\n                    },\r\n                });\r\n\r\n                return {\r\n                    get name() {\r\n                        return postProcess.name;\r\n                    },\r\n                    onChange: onChangeObservable,\r\n                    dispose: () => {\r\n                        nameHookToken.dispose();\r\n                        onChangeObservable.clear();\r\n                    },\r\n                };\r\n            },\r\n            entityIcon: () => <BlurRegular />,\r\n            getEntityAddedObservables: () => [scene.onNewPostProcessAddedObservable],\r\n            getEntityRemovedObservables: () => [scene.onPostProcessRemovedObservable],\r\n        });\r\n\r\n        return {\r\n            dispose: () => {\r\n                sectionRegistration.dispose();\r\n            },\r\n        };\r\n    },\r\n};\r\n","import type { ServiceDefinition } from \"../../../modularity/serviceDefinition\";\r\nimport type { ISceneContext } from \"../../sceneContext\";\r\nimport type { ISceneExplorerService } from \"./sceneExplorerService\";\r\n\r\nimport { PipelineRegular } from \"@fluentui/react-icons\";\r\n\r\nimport { SceneContextIdentity } from \"../../sceneContext\";\r\nimport { DefaultSectionsOrder } from \"./defaultSectionsMetadata\";\r\nimport { SceneExplorerServiceIdentity } from \"./sceneExplorerService\";\r\n\r\nimport \"core/PostProcesses/RenderPipeline/postProcessRenderPipelineManagerSceneComponent\";\r\n\r\nexport const RenderingPipelineExplorerServiceDefinition: ServiceDefinition<[], [ISceneExplorerService, ISceneContext]> = {\r\n    friendlyName: \"Rendering Pipeline Explorer\",\r\n    consumes: [SceneExplorerServiceIdentity, SceneContextIdentity],\r\n    factory: (sceneExplorerService, sceneContext) => {\r\n        const scene = sceneContext.currentScene;\r\n        if (!scene) {\r\n            return undefined;\r\n        }\r\n\r\n        const sectionRegistration = sceneExplorerService.addSection({\r\n            displayName: \"Rendering Pipelines\",\r\n            order: DefaultSectionsOrder.RenderingPipelines,\r\n            getRootEntities: () => scene.postProcessRenderPipelineManager.supportedPipelines ?? [],\r\n            getEntityDisplayInfo: (pipeline) => {\r\n                return {\r\n                    get name() {\r\n                        const typeName = pipeline.getClassName();\r\n                        return `${pipeline.name} (${typeName})`;\r\n                    },\r\n                };\r\n            },\r\n            entityIcon: () => <PipelineRegular />,\r\n            getEntityAddedObservables: () => [scene.postProcessRenderPipelineManager.onNewPipelineAddedObservable],\r\n            getEntityRemovedObservables: () => [scene.postProcessRenderPipelineManager.onPipelineRemovedObservable],\r\n        });\r\n\r\n        return {\r\n            dispose: () => {\r\n                sectionRegistration.dispose();\r\n            },\r\n        };\r\n    },\r\n};\r\n","import type { Bone } from \"core/index\";\r\nimport type { ServiceDefinition } from \"../../../modularity/serviceDefinition\";\r\nimport type { ISceneContext } from \"../../sceneContext\";\r\nimport type { ISceneExplorerService } from \"./sceneExplorerService\";\r\n\r\nimport { DataLineRegular, PersonWalkingRegular } from \"@fluentui/react-icons\";\r\n\r\nimport { Skeleton } from \"core/Bones/skeleton\";\r\nimport { Observable } from \"core/Misc/observable\";\r\nimport { InterceptProperty } from \"../../../instrumentation/propertyInstrumentation\";\r\nimport { SceneContextIdentity } from \"../../sceneContext\";\r\nimport { DefaultSectionsOrder } from \"./defaultSectionsMetadata\";\r\nimport { SceneExplorerServiceIdentity } from \"./sceneExplorerService\";\r\n\r\nexport const SkeletonExplorerServiceDefinition: ServiceDefinition<[], [ISceneExplorerService, ISceneContext]> = {\r\n    friendlyName: \"Skeleton Explorer\",\r\n    consumes: [SceneExplorerServiceIdentity, SceneContextIdentity],\r\n    factory: (sceneExplorerService, sceneContext) => {\r\n        const scene = sceneContext.currentScene;\r\n        if (!scene) {\r\n            return undefined;\r\n        }\r\n\r\n        const boneMovedObservable = new Observable<Bone>();\r\n\r\n        const sectionRegistration = sceneExplorerService.addSection<Skeleton | Bone>({\r\n            displayName: \"Skeletons\",\r\n            order: DefaultSectionsOrder.Skeletons,\r\n            getRootEntities: () => scene.skeletons,\r\n            getEntityChildren: (skeletonOrBone) => skeletonOrBone.getChildren(),\r\n            getEntityDisplayInfo: (skeletonOrBone) => {\r\n                const onChangeObservable = new Observable<void>();\r\n\r\n                const nameHookToken = InterceptProperty(skeletonOrBone, \"name\", {\r\n                    afterSet: () => onChangeObservable.notifyObservers(),\r\n                });\r\n\r\n                const parentHookToken =\r\n                    skeletonOrBone instanceof Skeleton\r\n                        ? null\r\n                        : InterceptProperty(skeletonOrBone, \"parent\", {\r\n                              afterSet: () => {\r\n                                  boneMovedObservable.notifyObservers(skeletonOrBone);\r\n                              },\r\n                          });\r\n\r\n                return {\r\n                    get name() {\r\n                        return skeletonOrBone.name;\r\n                    },\r\n                    onChange: onChangeObservable,\r\n                    dispose: () => {\r\n                        nameHookToken.dispose();\r\n                        parentHookToken?.dispose();\r\n                        onChangeObservable.clear();\r\n                    },\r\n                };\r\n            },\r\n            entityIcon: ({ entity: skeletonOrBone }) => (skeletonOrBone instanceof Skeleton ? <PersonWalkingRegular /> : <DataLineRegular />),\r\n            getEntityAddedObservables: () => [scene.onNewSkeletonAddedObservable],\r\n            getEntityRemovedObservables: () => [scene.onSkeletonRemovedObservable],\r\n            getEntityMovedObservables: () => [boneMovedObservable],\r\n        });\r\n\r\n        return {\r\n            dispose: () => {\r\n                sectionRegistration.dispose();\r\n            },\r\n        };\r\n    },\r\n};\r\n","import type { Sound } from \"core/index\";\r\nimport type { ServiceDefinition } from \"../../../modularity/serviceDefinition\";\r\nimport type { ISceneContext } from \"../../sceneContext\";\r\nimport type { ISceneExplorerService } from \"./sceneExplorerService\";\r\n\r\nimport { SoundWaveCircleRegular } from \"@fluentui/react-icons\";\r\n\r\nimport { Observable } from \"core/Misc/observable\";\r\nimport { InterceptFunction } from \"../../../instrumentation/functionInstrumentation\";\r\nimport { InterceptProperty } from \"../../../instrumentation/propertyInstrumentation\";\r\nimport { SceneContextIdentity } from \"../../sceneContext\";\r\nimport { DefaultSectionsOrder } from \"./defaultSectionsMetadata\";\r\nimport { SceneExplorerServiceIdentity } from \"./sceneExplorerService\";\r\n\r\nexport const SoundExplorerServiceDefinition: ServiceDefinition<[], [ISceneExplorerService, ISceneContext]> = {\r\n    friendlyName: \"Sound Explorer\",\r\n    consumes: [SceneExplorerServiceIdentity, SceneContextIdentity],\r\n    factory: (sceneExplorerService, sceneContext) => {\r\n        const scene = sceneContext.currentScene;\r\n        if (!scene) {\r\n            return undefined;\r\n        }\r\n\r\n        const soundAddedObservable = new Observable<Sound>();\r\n        const soundRemovedObservable = new Observable<Sound>();\r\n\r\n        const addSoundHook = InterceptFunction(scene.mainSoundTrack, \"addSound\", {\r\n            afterCall: (sound) => soundAddedObservable.notifyObservers(sound),\r\n        });\r\n\r\n        const removeSoundHook = InterceptFunction(scene.mainSoundTrack, \"removeSound\", {\r\n            afterCall: (sound) => soundRemovedObservable.notifyObservers(sound),\r\n        });\r\n\r\n        const sectionRegistration = sceneExplorerService.addSection({\r\n            displayName: \"Sounds\",\r\n            order: DefaultSectionsOrder.Sounds,\r\n            getRootEntities: () => scene.mainSoundTrack.soundCollection,\r\n            getEntityDisplayInfo: (sound) => {\r\n                const onChangeObservable = new Observable<void>();\r\n\r\n                const displayNameHookToken = InterceptProperty(sound, \"name\", {\r\n                    afterSet: () => {\r\n                        onChangeObservable.notifyObservers();\r\n                    },\r\n                });\r\n\r\n                const nameHookToken = InterceptProperty(sound, \"name\", {\r\n                    afterSet: () => {\r\n                        onChangeObservable.notifyObservers();\r\n                    },\r\n                });\r\n\r\n                return {\r\n                    get name() {\r\n                        return sound.name;\r\n                    },\r\n                    onChange: onChangeObservable,\r\n                    dispose: () => {\r\n                        nameHookToken.dispose();\r\n                        displayNameHookToken.dispose();\r\n                        onChangeObservable.clear();\r\n                    },\r\n                };\r\n            },\r\n            entityIcon: () => <SoundWaveCircleRegular />,\r\n            getEntityAddedObservables: () => [soundAddedObservable],\r\n            getEntityRemovedObservables: () => [soundRemovedObservable],\r\n        });\r\n\r\n        return {\r\n            dispose: () => {\r\n                addSoundHook.dispose();\r\n                removeSoundHook.dispose();\r\n                soundAddedObservable.clear();\r\n                soundRemovedObservable.clear();\r\n                sectionRegistration.dispose();\r\n            },\r\n        };\r\n    },\r\n};\r\n","import type { ISpriteManager } from \"core/index\";\r\nimport type { ServiceDefinition } from \"../../../modularity/serviceDefinition\";\r\nimport type { ISceneContext } from \"../../sceneContext\";\r\nimport type { ISceneExplorerService } from \"./sceneExplorerService\";\r\n\r\nimport { LayerDiagonalPersonRegular, PersonSquareRegular, PlayFilled, StopFilled } from \"@fluentui/react-icons\";\r\n\r\nimport { Observable } from \"core/Misc/observable\";\r\nimport { Sprite } from \"core/Sprites/sprite\";\r\nimport { InterceptProperty } from \"../../../instrumentation/propertyInstrumentation\";\r\nimport { SceneContextIdentity } from \"../../sceneContext\";\r\nimport { DefaultCommandsOrder, DefaultSectionsOrder } from \"./defaultSectionsMetadata\";\r\nimport { SceneExplorerServiceIdentity } from \"./sceneExplorerService\";\r\n\r\nimport \"core/Sprites/spriteSceneComponent\";\r\nimport { InterceptFunction } from \"../../../instrumentation/functionInstrumentation\";\r\n\r\nexport const SpriteManagerExplorerServiceDefinition: ServiceDefinition<[], [ISceneExplorerService, ISceneContext]> = {\r\n    friendlyName: \"Sprite Manager Explorer\",\r\n    consumes: [SceneExplorerServiceIdentity, SceneContextIdentity],\r\n    factory: (sceneExplorerService, sceneContext) => {\r\n        const scene = sceneContext.currentScene;\r\n        if (!scene) {\r\n            return undefined;\r\n        }\r\n\r\n        const sectionRegistration = sceneExplorerService.addSection<Sprite | ISpriteManager>({\r\n            displayName: \"Sprite Managers\",\r\n            order: DefaultSectionsOrder.SpriteManagers,\r\n            getRootEntities: () => scene.spriteManagers ?? [],\r\n            getEntityChildren: (spriteEntity) => (spriteEntity instanceof Sprite ? [] : spriteEntity.sprites),\r\n            getEntityDisplayInfo: (spriteEntity) => {\r\n                const onChangeObservable = new Observable<void>();\r\n\r\n                const nameHookToken = InterceptProperty(spriteEntity, \"name\", {\r\n                    afterSet: () => onChangeObservable.notifyObservers(),\r\n                });\r\n\r\n                return {\r\n                    get name() {\r\n                        return spriteEntity.name;\r\n                    },\r\n                    onChange: onChangeObservable,\r\n                    dispose: () => {\r\n                        nameHookToken.dispose();\r\n                        onChangeObservable.clear();\r\n                    },\r\n                };\r\n            },\r\n            entityIcon: ({ entity: spriteEntity }) => (spriteEntity instanceof Sprite ? <PersonSquareRegular /> : <LayerDiagonalPersonRegular />),\r\n            getEntityAddedObservables: () => [scene.onNewSpriteManagerAddedObservable],\r\n            getEntityRemovedObservables: () => [scene.onSpriteManagerRemovedObservable],\r\n        });\r\n\r\n        const spritePlayStopCommandRegistration = sceneExplorerService.addEntityCommand({\r\n            predicate: (entity: unknown) => entity instanceof Sprite,\r\n            order: DefaultCommandsOrder.SpritePlay,\r\n            getCommand: (sprite) => {\r\n                const onChangeObservable = new Observable<void>();\r\n                const playHook = InterceptFunction(sprite, \"playAnimation\", {\r\n                    afterCall: () => onChangeObservable.notifyObservers(),\r\n                });\r\n                const stopHook = InterceptFunction(sprite, \"stopAnimation\", {\r\n                    afterCall: () => onChangeObservable.notifyObservers(),\r\n                });\r\n                const animateHook = InterceptFunction(sprite, \"_animate\", {\r\n                    afterCall: () => onChangeObservable.notifyObservers(),\r\n                });\r\n\r\n                return {\r\n                    type: \"action\",\r\n                    get displayName() {\r\n                        return `${sprite.animationStarted ? \"Stop\" : \"Play\"} Animation`;\r\n                    },\r\n                    icon: () => (sprite.animationStarted ? <StopFilled /> : <PlayFilled />),\r\n                    execute: () => (sprite.animationStarted ? sprite.stopAnimation() : sprite.playAnimation(sprite.fromIndex, sprite.toIndex, sprite.loopAnimation, sprite.delay)),\r\n                    onChange: onChangeObservable,\r\n                    dispose: () => {\r\n                        playHook.dispose();\r\n                        stopHook.dispose();\r\n                        animateHook.dispose();\r\n                        onChangeObservable.clear();\r\n                    },\r\n                };\r\n            },\r\n        });\r\n\r\n        return {\r\n            dispose: () => {\r\n                sectionRegistration.dispose();\r\n                spritePlayStopCommandRegistration.dispose();\r\n            },\r\n        };\r\n    },\r\n};\r\n","import type { ServiceDefinition } from \"../../../modularity/serviceDefinition\";\r\nimport type { ISceneContext } from \"../../sceneContext\";\r\nimport type { ISceneExplorerService } from \"./sceneExplorerService\";\r\n\r\nimport { ImageEditRegular, ImageRegular } from \"@fluentui/react-icons\";\r\n\r\nimport { DynamicTexture } from \"core/Materials/Textures/dynamicTexture\";\r\nimport { Observable } from \"core/Misc/observable\";\r\nimport { InterceptProperty } from \"../../../instrumentation/propertyInstrumentation\";\r\nimport { SceneContextIdentity } from \"../../sceneContext\";\r\nimport { DefaultSectionsOrder } from \"./defaultSectionsMetadata\";\r\nimport { SceneExplorerServiceIdentity } from \"./sceneExplorerService\";\r\n\r\nexport const TextureExplorerServiceDefinition: ServiceDefinition<[], [ISceneExplorerService, ISceneContext]> = {\r\n    friendlyName: \"Texture Explorer\",\r\n    consumes: [SceneExplorerServiceIdentity, SceneContextIdentity],\r\n    factory: (sceneExplorerService, sceneContext) => {\r\n        const scene = sceneContext.currentScene;\r\n        if (!scene) {\r\n            return undefined;\r\n        }\r\n\r\n        const sectionRegistration = sceneExplorerService.addSection({\r\n            displayName: \"Textures\",\r\n            order: DefaultSectionsOrder.Textures,\r\n            getRootEntities: () => scene.textures.filter((texture) => texture.getClassName() !== \"AdvancedDynamicTexture\"),\r\n            getEntityDisplayInfo: (texture) => {\r\n                const onChangeObservable = new Observable<void>();\r\n\r\n                const displayNameHookToken = InterceptProperty(texture, \"displayName\", {\r\n                    afterSet: () => {\r\n                        onChangeObservable.notifyObservers();\r\n                    },\r\n                });\r\n\r\n                const nameHookToken = InterceptProperty(texture, \"name\", {\r\n                    afterSet: () => {\r\n                        onChangeObservable.notifyObservers();\r\n                    },\r\n                });\r\n\r\n                return {\r\n                    get name() {\r\n                        return texture.displayName || texture.name || `${texture.getClassName() || \"Unnamed Texture\"} (${texture.uniqueId})`;\r\n                    },\r\n                    onChange: onChangeObservable,\r\n                    dispose: () => {\r\n                        nameHookToken.dispose();\r\n                        displayNameHookToken.dispose();\r\n                        onChangeObservable.clear();\r\n                    },\r\n                };\r\n            },\r\n            entityIcon: ({ entity: texture }) => (texture instanceof DynamicTexture ? <ImageEditRegular /> : <ImageRegular />),\r\n            getEntityAddedObservables: () => [scene.onNewTextureAddedObservable],\r\n            getEntityRemovedObservables: () => [scene.onTextureRemovedObservable],\r\n        });\r\n\r\n        return {\r\n            dispose: () => {\r\n                sectionRegistration.dispose();\r\n            },\r\n        };\r\n    },\r\n};\r\n","import { ButtonLine } from \"shared-ui-components/fluent/hoc/buttonLine\";\nimport { useCallback } from \"react\";\nimport type { FunctionComponent } from \"react\";\nimport type { Scene } from \"core/scene\";\nimport { captureEquirectangularFromScene } from \"core/Misc/equirectangularCapture\";\nimport { CameraRegular } from \"@fluentui/react-icons\";\nimport { FrameGraphUtils } from \"core/FrameGraph/frameGraphUtils\";\n\nexport const EquirectangularCaptureTool: FunctionComponent<{ scene: Scene }> = ({ scene }) => {\n    const captureEquirectangularAsync = useCallback(async () => {\n        const currentActiveCamera = scene.activeCamera;\n        if (!currentActiveCamera && scene.frameGraph) {\n            scene.activeCamera = FrameGraphUtils.FindMainCamera(scene.frameGraph);\n        }\n        if (scene.activeCamera) {\n            await captureEquirectangularFromScene(scene, { size: 1024, filename: \"equirectangular_capture.png\" });\n        }\n        // eslint-disable-next-line require-atomic-updates\n        scene.activeCamera = currentActiveCamera;\n    }, [scene]);\n\n    return <ButtonLine label=\"Capture Equirectangular\" icon={CameraRegular} onClick={captureEquirectangularAsync} />;\n};\n","import { ButtonLine } from \"shared-ui-components/fluent/hoc/buttonLine\";\nimport { useState, useCallback, useEffect } from \"react\";\nimport type { Scene } from \"core/scene\";\nimport { SyncedSliderPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/syncedSliderPropertyLine\";\nimport { Collapse } from \"shared-ui-components/fluent/primitives/collapse\";\nimport { RecordRegular, RecordStopRegular } from \"@fluentui/react-icons\";\nimport { Tools } from \"core/Misc/tools\";\nimport { Label } from \"@fluentui/react-components\";\nimport { MakeLazyComponent } from \"shared-ui-components/fluent/primitives/lazyComponent\";\nimport type gif from \"gif.js.optimized\";\nimport type { Observer } from \"core/Misc/observable\";\n\ntype RecordingSession =\n    | {\n          state: \"Recording\";\n          gif: gif;\n          captureObserver: Observer<Scene>;\n          previousHardwareScaling: number;\n      }\n    | {\n          state: \"Rendering\";\n          gif: gif;\n      }\n    | {\n          state: \"Idle\";\n      };\n\nexport const GIFCaptureTool = MakeLazyComponent(\n    async () => {\n        const gif = (await import(\"gif.js.optimized\")).default;\n\n        // TODO: Figure out how to grab this from NPM package instead of CDN\n        const workerContent = await Tools.LoadFileAsync(\"https://cdn.jsdelivr.net/gh//terikon/gif.js.optimized@0.1.6/dist/gif.worker.js\");\n        const workerBlob = new Blob([workerContent], { type: \"application/javascript\" });\n        const workerUrl = URL.createObjectURL(workerBlob);\n\n        return ({ scene }: { scene: Scene }) => {\n            const [recordingSession, setRecordingSession] = useState<RecordingSession>({ state: \"Idle\" });\n            const [targetWidth, setTargetWidth] = useState(512);\n            const [frequency, setFrequency] = useState(200);\n\n            useEffect(() => {\n                return () => {\n                    if (recordingSession.state === \"Recording\") {\n                        // Reset session resources if component is unmounted\n                        scene.onAfterRenderObservable.remove(recordingSession.captureObserver);\n                        scene.getEngine().setHardwareScalingLevel(recordingSession.previousHardwareScaling);\n                    }\n                };\n            }, [recordingSession, scene]);\n\n            // Use functional setState to guard against multiple rapid clicks\n            const startRecording = useCallback(() => {\n                setRecordingSession((currentSession) => {\n                    // If already recording/rendering, don't start a new session\n                    if (currentSession.state !== \"Idle\") {\n                        return currentSession;\n                    }\n\n                    const engine = scene.getEngine();\n                    const canvas = engine.getRenderingCanvas();\n                    if (!canvas) {\n                        return currentSession;\n                    }\n\n                    const gifInstance = new gif({\n                        workers: 2,\n                        quality: 10,\n                        workerScript: workerUrl,\n                    });\n\n                    // Adjust hardware scaling to match desired width\n                    const previousHardwareScaling = engine.getHardwareScalingLevel();\n                    engine.setHardwareScalingLevel(engine.getRenderWidth() / (targetWidth * globalThis.devicePixelRatio) || 1);\n\n                    // Capture frames after each render\n                    let lastCaptureTime = 0;\n                    const captureObserver = scene.onAfterRenderObservable.add(() => {\n                        const now = Date.now();\n                        if (now - lastCaptureTime >= frequency && gifInstance) {\n                            lastCaptureTime = now;\n                            gifInstance.addFrame(canvas, { delay: 1, copy: true });\n                        }\n                    });\n\n                    return {\n                        state: \"Recording\",\n                        gif: gifInstance,\n                        captureObserver: captureObserver,\n                        previousHardwareScaling: previousHardwareScaling,\n                    };\n                });\n            }, [scene, targetWidth, frequency]);\n\n            const stopRecording = useCallback(() => {\n                setRecordingSession((currentSession) => {\n                    if (currentSession.state !== \"Recording\") {\n                        return currentSession;\n                    }\n\n                    // Remove the frame capture observer\n                    scene.onAfterRenderObservable.remove(currentSession.captureObserver);\n\n                    // Restore previous hardware scaling\n                    scene.getEngine().setHardwareScalingLevel(currentSession.previousHardwareScaling);\n\n                    currentSession.gif.on(\"finished\", (blob: Blob) => {\n                        // Download the rendered GIF\n                        Tools.Download(blob, \"recording.gif\");\n\n                        // Reset state\n                        setRecordingSession({ state: \"Idle\" });\n                    });\n\n                    // Start rendering the GIF\n                    currentSession.gif.render();\n\n                    return { state: \"Rendering\", gif: currentSession.gif };\n                });\n            }, [scene]);\n\n            return (\n                <>\n                    {recordingSession.state === \"Idle\" && <ButtonLine label=\"Record GIF\" icon={RecordRegular} onClick={startRecording} />}\n                    {recordingSession.state === \"Recording\" && <ButtonLine label=\"Stop\" icon={RecordStopRegular} onClick={stopRecording} />}\n                    {recordingSession.state === \"Rendering\" && <Label>Creating the GIF file...</Label>}\n                    <Collapse visible={recordingSession.state === \"Idle\"}>\n                        <SyncedSliderPropertyLine\n                            label=\"Resolution\"\n                            description=\"The pixel width of the output. The height will be adjusted accordingly to maintain the aspect ratio.\"\n                            value={targetWidth}\n                            onChange={(value) => setTargetWidth(Math.floor(value))}\n                            min={128}\n                            max={2048}\n                            step={128}\n                        />\n                        <SyncedSliderPropertyLine\n                            label=\"Frequency (ms)\"\n                            description=\"The time interval in milliseconds between each capture of the scene.\"\n                            value={frequency}\n                            onChange={(value) => setFrequency(Math.floor(value))}\n                            min={50}\n                            max={1000}\n                            step={50}\n                        />\n                    </Collapse>\n                </>\n            );\n        };\n    },\n    { spinnerSize: \"extra-tiny\", spinnerLabel: \"Loading...\" }\n);\n","import { ButtonLine } from \"shared-ui-components/fluent/hoc/buttonLine\";\nimport { useState, useCallback } from \"react\";\nimport type { FunctionComponent } from \"react\";\nimport type { Scene } from \"core/scene\";\nimport { RecordRegular, SaveRegular, ArrowDownloadRegular } from \"@fluentui/react-icons\";\nimport { SceneRecorder } from \"core/Misc/sceneRecorder\";\nimport { Tools } from \"core/Misc/tools\";\nimport { FileUploadLine } from \"shared-ui-components/fluent/hoc/fileUploadLine\";\nimport { Label } from \"@fluentui/react-components\";\nimport { Logger } from \"core/Misc/logger\";\nimport { useResource } from \"../../../hooks/resourceHooks\";\n\nexport const SceneReplayTool: FunctionComponent<{ scene: Scene }> = ({ scene }) => {\n    const [isRecording, setIsRecording] = useState(false);\n    const sceneRecorder = useResource(() => new SceneRecorder());\n\n    const startRecording = useCallback(() => {\n        sceneRecorder.track(scene);\n        setIsRecording(true);\n    }, [scene]);\n\n    const exportReplay = useCallback(() => {\n        const content = JSON.stringify(sceneRecorder.getDelta());\n        const blob = new Blob([content], { type: \"application/json\" });\n        Tools.Download(blob, \"replay_delta.json\");\n        setIsRecording(false);\n    }, []);\n\n    const applyDelta = useCallback(\n        (files: FileList) => {\n            const file = files[0];\n            if (!file) {\n                return;\n            }\n\n            Tools.ReadFile(\n                file,\n                (data) => {\n                    try {\n                        const json = JSON.parse(data);\n                        SceneRecorder.ApplyDelta(json, scene);\n                    } catch (error) {\n                        Logger.Error(\"Failed to apply replay delta:\" + error);\n                    }\n                },\n                undefined,\n                false\n            );\n        },\n        [scene]\n    );\n\n    return (\n        <>\n            {!isRecording && <ButtonLine label=\"Start Recording\" icon={RecordRegular} onClick={startRecording} />}\n            {isRecording && (\n                <>\n                    <Label>Recording in progress...</Label>\n                    <ButtonLine label=\"Generate Delta File\" icon={SaveRegular} onClick={exportReplay} />\n                </>\n            )}\n            <FileUploadLine label=\"Apply Delta File\" icon={ArrowDownloadRegular} onClick={applyDelta} accept=\".json\" />\n        </>\n    );\n};\n","import { ButtonLine } from \"shared-ui-components/fluent/hoc/buttonLine\";\r\nimport { useState, useCallback } from \"react\";\r\nimport type { FunctionComponent } from \"react\";\r\nimport type { Scene } from \"core/scene\";\r\nimport { SyncedSliderPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/syncedSliderPropertyLine\";\r\nimport { CameraRegular } from \"@fluentui/react-icons\";\r\nimport { FrameGraphUtils } from \"core/FrameGraph/frameGraphUtils\";\r\nimport { CreateScreenshotUsingRenderTargetAsync } from \"core/Misc/screenshotTools\";\r\nimport { SwitchPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/switchPropertyLine\";\r\nimport { Collapse } from \"shared-ui-components/fluent/primitives/collapse\";\r\n\r\nexport const ScreenshotTool: FunctionComponent<{ scene: Scene }> = ({ scene }) => {\r\n    const [precision, setPrecision] = useState<number>(1);\r\n    const [useCustomSize, setUseCustomSize] = useState<boolean>(false);\r\n    const [width, setWidth] = useState<number>(512);\r\n    const [height, setHeight] = useState<number>(512);\r\n\r\n    const captureScreenshot = useCallback(async () => {\r\n        const engine = scene.getEngine();\r\n        const camera = scene.frameGraph ? FrameGraphUtils.FindMainCamera(scene.frameGraph) : scene.activeCamera;\r\n        const screenshotSize = useCustomSize ? { width, height, precision } : { precision };\r\n\r\n        if (camera) {\r\n            await CreateScreenshotUsingRenderTargetAsync(engine, camera, screenshotSize, \"image/png\", undefined, undefined, \"screenshot.png\");\r\n        }\r\n    }, [useCustomSize, precision, width, height, scene]);\r\n\r\n    return (\r\n        <>\r\n            <ButtonLine label=\"Capture Screenshot\" icon={CameraRegular} onClick={captureScreenshot} />\r\n            <SyncedSliderPropertyLine\r\n                label=\"Precision\"\r\n                description=\"A multiplier allowing capture at a higher or lower resolution.\"\r\n                value={precision}\r\n                onChange={setPrecision}\r\n                min={0.1}\r\n                max={10}\r\n                step={0.1}\r\n            />\r\n            <SwitchPropertyLine label=\"Use Custom Size\" value={useCustomSize} onChange={setUseCustomSize} />\r\n            <Collapse visible={useCustomSize}>\r\n                <SyncedSliderPropertyLine label=\"Width\" description=\"The width of the screenshot in pixels. \" value={width} onChange={setWidth} min={1} step={1} />\r\n                <SyncedSliderPropertyLine label=\"Height\" description=\"The height of the screenshot in pixels.\" value={height} onChange={setHeight} min={1} step={1} />\r\n            </Collapse>\r\n        </>\r\n    );\r\n};\r\n","import { ButtonLine } from \"shared-ui-components/fluent/hoc/buttonLine\";\nimport type { FunctionComponent } from \"react\";\nimport { useState, useCallback } from \"react\";\nimport type { Scene } from \"core/scene\";\nimport { RecordRegular, RecordStopRegular } from \"@fluentui/react-icons\";\nimport { VideoRecorder } from \"core/Misc/videoRecorder\";\nimport { useResource } from \"../../../hooks/resourceHooks\";\n\nexport const VideoCaptureTool: FunctionComponent<{ scene: Scene }> = ({ scene }) => {\n    const [isRecording, setIsRecording] = useState(false);\n    const videoRecorder = useResource(\n        useCallback(() => {\n            return new VideoRecorder(scene.getEngine());\n        }, [scene.getEngine()])\n    );\n\n    const recordVideoAsync = useCallback(async () => {\n        if (videoRecorder && videoRecorder.isRecording) {\n            videoRecorder.stopRecording();\n            setIsRecording(false);\n            return;\n        }\n\n        void videoRecorder.startRecording(undefined, 0); // Use 0 to prevent automatic stop; let the user stop it\n        setIsRecording(true);\n    }, [scene]);\n\n    return (\n        <>\n            <ButtonLine label={isRecording ? \"Stop Recording\" : \"Record Video\"} icon={isRecording ? RecordStopRegular : RecordRegular} onClick={recordVideoAsync} />\n        </>\n    );\n};\n","import { EquirectangularCaptureTool } from \"../../../components/tools/capture/equirectangularCaptureTool\";\r\nimport { GIFCaptureTool } from \"../../../components/tools/capture/gifCaptureTool\";\r\nimport { SceneReplayTool } from \"../../../components/tools/capture/sceneReplayTool\";\r\nimport { ScreenshotTool } from \"../../../components/tools/capture/screenshotTool\";\r\nimport { VideoCaptureTool } from \"../../../components/tools/capture/videoCaptureTool\";\r\nimport type { ServiceDefinition } from \"../../../modularity/serviceDefinition\";\r\nimport { ToolsServiceIdentity } from \"../toolsService\";\r\nimport type { IToolsService } from \"../toolsService\";\r\nimport type { IDisposable } from \"core/scene\";\r\n\r\nexport const CaptureToolsDefinition: ServiceDefinition<[], [IToolsService]> = {\r\n    friendlyName: \"Capture Tools\",\r\n    consumes: [ToolsServiceIdentity],\r\n    factory: (toolsService) => {\r\n        const contentRegistrations: IDisposable[] = [];\r\n\r\n        // Screenshot\r\n        contentRegistrations.push(\r\n            toolsService.addSectionContent({\r\n                key: \"Screenshot\",\r\n                section: \"Screenshot\",\r\n                order: 10,\r\n                component: ({ context }) => <ScreenshotTool scene={context} />,\r\n            })\r\n        );\r\n\r\n        // Equirectangular capture\r\n        contentRegistrations.push(\r\n            toolsService.addSectionContent({\r\n                key: \"Equirectangular\",\r\n                section: \"Equirectangular\",\r\n                order: 15,\r\n                component: ({ context }) => <EquirectangularCaptureTool scene={context} />,\r\n            })\r\n        );\r\n\r\n        // Video recorder\r\n        contentRegistrations.push(\r\n            toolsService.addSectionContent({\r\n                key: \"Video\",\r\n                section: \"Video\",\r\n                order: 20,\r\n                component: ({ context }) => <VideoCaptureTool scene={context} />,\r\n            })\r\n        );\r\n\r\n        // GIF recorder\r\n        contentRegistrations.push(\r\n            toolsService.addSectionContent({\r\n                key: \"GIF\",\r\n                section: \"GIF\",\r\n                order: 25,\r\n                component: ({ context }) => <GIFCaptureTool scene={context} />,\r\n            })\r\n        );\r\n\r\n        // Scene replay\r\n        contentRegistrations.push(\r\n            toolsService.addSectionContent({\r\n                key: \"Scene Replay\",\r\n                section: \"Scene Replay\",\r\n                order: 30,\r\n                component: ({ context }) => <SceneReplayTool scene={context} />,\r\n            })\r\n        );\r\n\r\n        return {\r\n            dispose: () => {\r\n                contentRegistrations.forEach((registration) => registration.dispose());\r\n            },\r\n        };\r\n    },\r\n};\r\n","import { NumberDropdownPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/dropdownPropertyLine\";\r\nimport { SceneSerializer } from \"core/Misc/sceneSerializer\";\r\nimport { Tools } from \"core/Misc/tools\";\r\nimport { EnvironmentTextureTools } from \"core/Misc/environmentTextureTools\";\r\nimport type { CubeTexture } from \"core/Materials/Textures/cubeTexture\";\r\nimport { Logger } from \"core/Misc/logger\";\r\nimport { useCallback, useState } from \"react\";\r\nimport type { FunctionComponent } from \"react\";\r\nimport type { Scene } from \"core/scene\";\r\nimport { ButtonLine } from \"shared-ui-components/fluent/hoc/buttonLine\";\r\nimport { SyncedSliderPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/syncedSliderPropertyLine\";\r\nimport type { Node } from \"core/node\";\r\nimport { Mesh } from \"core/Meshes/mesh\";\r\nimport type { PBRMaterial } from \"core/Materials/PBR/pbrMaterial\";\r\nimport type { StandardMaterial } from \"core/Materials/standardMaterial\";\r\nimport type { BackgroundMaterial } from \"core/Materials/Background/backgroundMaterial\";\r\nimport { Texture } from \"core/Materials/Textures/texture\";\r\nimport { Camera } from \"core/Cameras/camera\";\r\nimport { Light } from \"core/Lights/light\";\r\nimport { SwitchPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/switchPropertyLine\";\r\n\r\nimport { MakeLazyComponent } from \"shared-ui-components/fluent/primitives/lazyComponent\";\r\nimport { Collapse } from \"shared-ui-components/fluent/primitives/collapse\";\r\nimport { ArrowDownloadRegular } from \"@fluentui/react-icons\";\r\n\r\nconst EnvExportImageTypes = [\r\n    { label: \"PNG\", value: 0, imageType: \"image/png\" },\r\n    { label: \"WebP\", value: 1, imageType: \"image/webp\" },\r\n] as const;\r\n\r\ninterface IBabylonExportOptionsState {\r\n    imageTypeIndex: number;\r\n    imageQuality: number;\r\n    iblDiffuse: boolean;\r\n}\r\n\r\nexport const ExportBabylonTools: FunctionComponent<{ scene: Scene }> = ({ scene }) => {\r\n    const [babylonExportOptions, setBabylonExportOptions] = useState<Readonly<IBabylonExportOptionsState>>({\r\n        imageTypeIndex: 0,\r\n        imageQuality: 0.8,\r\n        iblDiffuse: false,\r\n    });\r\n\r\n    const exportBabylon = useCallback(async () => {\r\n        const strScene = JSON.stringify(SceneSerializer.Serialize(scene));\r\n        const blob = new Blob([strScene], { type: \"octet/stream\" });\r\n        Tools.Download(blob, \"scene.babylon\");\r\n    }, [scene]);\r\n\r\n    const createEnvTexture = useCallback(async () => {\r\n        if (!scene.environmentTexture) {\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const buffer = await EnvironmentTextureTools.CreateEnvTextureAsync(scene.environmentTexture as CubeTexture, {\r\n                imageType: EnvExportImageTypes[babylonExportOptions.imageTypeIndex].imageType,\r\n                imageQuality: babylonExportOptions.imageQuality,\r\n                disableIrradianceTexture: !babylonExportOptions.iblDiffuse,\r\n            });\r\n            const blob = new Blob([buffer], { type: \"octet/stream\" });\r\n            Tools.Download(blob, \"environment.env\");\r\n        } catch (error: any) {\r\n            Logger.Error(error);\r\n            alert(error);\r\n        }\r\n    }, [scene, babylonExportOptions]);\r\n\r\n    return (\r\n        <>\r\n            <ButtonLine label=\"Export to Babylon\" icon={ArrowDownloadRegular} onClick={exportBabylon} />\r\n            {!scene.getEngine().premultipliedAlpha && scene.environmentTexture && scene.environmentTexture._prefiltered && scene.activeCamera && (\r\n                <>\r\n                    <ButtonLine label=\"Generate .env texture\" icon={ArrowDownloadRegular} onClick={createEnvTexture} />\r\n                    {scene.environmentTexture.irradianceTexture && (\r\n                        <SwitchPropertyLine\r\n                            key=\"iblDiffuse\"\r\n                            label=\"Diffuse Texture\"\r\n                            description=\"Export diffuse texture for IBL\"\r\n                            value={babylonExportOptions.iblDiffuse}\r\n                            onChange={(value: boolean) => {\r\n                                setBabylonExportOptions((prev) => ({ ...prev, iblDiffuse: value }));\r\n                            }}\r\n                        />\r\n                    )}\r\n                    <NumberDropdownPropertyLine\r\n                        label=\"Image type\"\r\n                        options={EnvExportImageTypes}\r\n                        value={babylonExportOptions.imageTypeIndex}\r\n                        onChange={(val) => {\r\n                            setBabylonExportOptions((prev) => ({ ...prev, imageTypeIndex: val as number }));\r\n                        }}\r\n                    />\r\n                    <Collapse visible={babylonExportOptions.imageTypeIndex > 0}>\r\n                        <SyncedSliderPropertyLine\r\n                            label=\"Quality\"\r\n                            value={babylonExportOptions.imageQuality}\r\n                            onChange={(value) => setBabylonExportOptions((prev) => ({ ...prev, imageQuality: value }))}\r\n                            min={0}\r\n                            max={1}\r\n                        />\r\n                    </Collapse>\r\n                </>\r\n            )}\r\n        </>\r\n    );\r\n};\r\n\r\ninterface IGltfExportOptionsState {\r\n    exportDisabledNodes: boolean;\r\n    exportSkyboxes: boolean;\r\n    exportCameras: boolean;\r\n    exportLights: boolean;\r\n    dracoCompression: boolean;\r\n}\r\n\r\nexport const ExportGltfTools = MakeLazyComponent(async () => {\r\n    // Defer importing anything from the serializers package until this component is actually mounted.\r\n    const { GLTF2Export } = await import(\"serializers/glTF/2.0/glTFSerializer\");\r\n\r\n    return (props: { scene: Scene }) => {\r\n        const [isExportingGltf, setIsExportingGltf] = useState(false);\r\n        const [gltfExportOptions, setGltfExportOptions] = useState<Readonly<IGltfExportOptionsState>>({\r\n            exportDisabledNodes: false,\r\n            exportSkyboxes: false,\r\n            exportCameras: false,\r\n            exportLights: false,\r\n            dracoCompression: false,\r\n        });\r\n\r\n        const exportGLTF = useCallback(async () => {\r\n            setIsExportingGltf(true);\r\n\r\n            const shouldExport = (node: Node): boolean => {\r\n                if (!gltfExportOptions.exportDisabledNodes) {\r\n                    if (!node.isEnabled()) {\r\n                        return false;\r\n                    }\r\n                }\r\n\r\n                if (!gltfExportOptions.exportSkyboxes) {\r\n                    if (node instanceof Mesh) {\r\n                        if (node.material) {\r\n                            const material = node.material as PBRMaterial | StandardMaterial | BackgroundMaterial;\r\n                            const reflectionTexture = material.reflectionTexture;\r\n                            if (reflectionTexture && reflectionTexture.coordinatesMode === Texture.SKYBOX_MODE) {\r\n                                return false;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n                if (!gltfExportOptions.exportCameras) {\r\n                    if (node instanceof Camera) {\r\n                        return false;\r\n                    }\r\n                }\r\n\r\n                if (!gltfExportOptions.exportLights) {\r\n                    if (node instanceof Light) {\r\n                        return false;\r\n                    }\r\n                }\r\n\r\n                return true;\r\n            };\r\n\r\n            try {\r\n                const glb = await GLTF2Export.GLBAsync(props.scene, \"scene\", {\r\n                    meshCompressionMethod: gltfExportOptions.dracoCompression ? \"Draco\" : undefined,\r\n                    shouldExportNode: (node) => shouldExport(node),\r\n                });\r\n                glb.downloadFiles();\r\n            } catch (reason) {\r\n                Logger.Error(`Failed to export GLB: ${reason}`);\r\n            } finally {\r\n                setIsExportingGltf(false);\r\n            }\r\n        }, [gltfExportOptions, props.scene]);\r\n\r\n        return (\r\n            <>\r\n                <ButtonLine label=\"Export to GLB\" icon={ArrowDownloadRegular} onClick={exportGLTF} disabled={isExportingGltf} />\r\n                <SwitchPropertyLine\r\n                    key=\"GLTFExportDisabledNodes\"\r\n                    label=\"Export Disabled Nodes\"\r\n                    description=\"Whether to export nodes that are disabled in the scene.\"\r\n                    value={gltfExportOptions.exportDisabledNodes}\r\n                    onChange={(checked: boolean) => setGltfExportOptions({ ...gltfExportOptions, exportDisabledNodes: checked })}\r\n                />\r\n                <SwitchPropertyLine\r\n                    key=\"GLTFExportSkyboxes\"\r\n                    label=\"Export Skyboxes\"\r\n                    description=\"Whether to export skybox nodes in the scene.\"\r\n                    value={gltfExportOptions.exportSkyboxes}\r\n                    onChange={(checked: boolean) => setGltfExportOptions({ ...gltfExportOptions, exportSkyboxes: checked })}\r\n                />\r\n                <SwitchPropertyLine\r\n                    key=\"GLTFExportCameras\"\r\n                    label=\"Export Cameras\"\r\n                    description=\"Whether to export cameras in the scene.\"\r\n                    value={gltfExportOptions.exportCameras}\r\n                    onChange={(checked: boolean) => setGltfExportOptions({ ...gltfExportOptions, exportCameras: checked })}\r\n                />\r\n                <SwitchPropertyLine\r\n                    key=\"GLTFExportLights\"\r\n                    label=\"Export Lights\"\r\n                    description=\"Whether to export lights in the scene.\"\r\n                    value={gltfExportOptions.exportLights}\r\n                    onChange={(checked: boolean) => setGltfExportOptions({ ...gltfExportOptions, exportLights: checked })}\r\n                />\r\n                <SwitchPropertyLine\r\n                    key=\"GLTFDracoCompression\"\r\n                    label=\"Draco Compression\"\r\n                    description=\"Whether to apply Draco compression to geometry.\"\r\n                    value={gltfExportOptions.dracoCompression}\r\n                    onChange={(checked: boolean) => setGltfExportOptions({ ...gltfExportOptions, dracoCompression: checked })}\r\n                />\r\n            </>\r\n        );\r\n    };\r\n});\r\n","import type { ServiceDefinition } from \"../../../modularity/serviceDefinition\";\r\nimport { ToolsServiceIdentity } from \"../toolsService\";\r\nimport type { IToolsService } from \"../toolsService\";\r\nimport type { IDisposable } from \"core/scene\";\r\nimport { ExportBabylonTools, ExportGltfTools } from \"../../../components/tools/exportTools\";\r\n\r\nexport const ExportServiceDefinition: ServiceDefinition<[], [IToolsService]> = {\r\n    friendlyName: \"Export Tools\",\r\n    consumes: [ToolsServiceIdentity],\r\n    factory: (toolsService) => {\r\n        const contentRegistrations: IDisposable[] = [];\r\n\r\n        // glTF export content\r\n        contentRegistrations.push(\r\n            toolsService.addSectionContent({\r\n                key: \"GLTF Export\",\r\n                section: \"GLTF Export\",\r\n                component: ({ context }) => <ExportGltfTools scene={context} />,\r\n            })\r\n        );\r\n\r\n        // Babylon export content\r\n        contentRegistrations.push(\r\n            toolsService.addSectionContent({\r\n                key: \"Babylon Export\",\r\n                section: \"Babylon Export\",\r\n                component: ({ context }) => <ExportBabylonTools scene={context} />,\r\n            })\r\n        );\r\n\r\n        return {\r\n            dispose: () => {\r\n                contentRegistrations.forEach((registration) => registration.dispose());\r\n            },\r\n        };\r\n    },\r\n};\r\n","import { useState } from \"react\";\r\nimport type { FunctionComponent } from \"react\";\r\nimport type { Scene } from \"core/scene\";\r\nimport type { DropdownOption } from \"shared-ui-components/fluent/primitives/dropdown\";\r\nimport { ImportAnimationsAsync, SceneLoaderAnimationGroupLoadingMode } from \"core/Loading/sceneLoader\";\r\nimport { FilesInput } from \"core/Misc/filesInput\";\r\nimport { Logger } from \"core/Misc/logger\";\r\nimport { SwitchPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/switchPropertyLine\";\r\nimport { NumberDropdownPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/dropdownPropertyLine\";\r\nimport { FileUploadLine } from \"shared-ui-components/fluent/hoc/fileUploadLine\";\r\nimport { Collapse } from \"shared-ui-components/fluent/primitives/collapse\";\r\n\r\nconst AnimationGroupLoadingModes = [\r\n    { label: \"Clean\", value: SceneLoaderAnimationGroupLoadingMode.Clean },\r\n    { label: \"Stop\", value: SceneLoaderAnimationGroupLoadingMode.Stop },\r\n    { label: \"Sync\", value: SceneLoaderAnimationGroupLoadingMode.Sync },\r\n    { label: \"NoSync\", value: SceneLoaderAnimationGroupLoadingMode.NoSync },\r\n] as const satisfies DropdownOption<number>[];\r\n\r\nexport const GLTFAnimationImportTool: FunctionComponent<{ scene: Scene }> = ({ scene }) => {\r\n    const [importDefaults, setImportDefaults] = useState({\r\n        overwriteAnimations: true,\r\n        animationGroupLoadingMode: SceneLoaderAnimationGroupLoadingMode.Clean,\r\n    });\r\n\r\n    const importAnimations = (event: FileList) => {\r\n        const reloadAsync = async function (sceneFile: File) {\r\n            if (sceneFile) {\r\n                try {\r\n                    await ImportAnimationsAsync(sceneFile, scene, {\r\n                        overwriteAnimations: importDefaults.overwriteAnimations,\r\n                        animationGroupLoadingMode: importDefaults.animationGroupLoadingMode,\r\n                    });\r\n\r\n                    if (scene.animationGroups.length > 0) {\r\n                        const currentGroup = scene.animationGroups[0];\r\n                        currentGroup.play(true);\r\n                    }\r\n                } catch (error) {\r\n                    Logger.Error(`Error importing animations: ${error}`);\r\n                }\r\n            }\r\n        };\r\n\r\n        const filesInputAnimation = new FilesInput(scene.getEngine(), scene, null, null, null, null, null, reloadAsync, null);\r\n        filesInputAnimation.loadFiles(event);\r\n        filesInputAnimation.dispose();\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <FileUploadLine label=\"Import Animations\" accept=\"gltf\" onClick={(evt: FileList) => importAnimations(evt)} />\r\n            <SwitchPropertyLine\r\n                label=\"Overwrite Animations\"\r\n                value={importDefaults.overwriteAnimations}\r\n                onChange={(value) => {\r\n                    setImportDefaults({ ...importDefaults, overwriteAnimations: value });\r\n                }}\r\n            />\r\n            <Collapse visible={!importDefaults.overwriteAnimations}>\r\n                <NumberDropdownPropertyLine\r\n                    label=\"Animation Merge Mode\"\r\n                    options={AnimationGroupLoadingModes}\r\n                    value={importDefaults.animationGroupLoadingMode}\r\n                    onChange={(value) => {\r\n                        setImportDefaults({ ...importDefaults, animationGroupLoadingMode: value });\r\n                    }}\r\n                />\r\n            </Collapse>\r\n        </>\r\n    );\r\n};\r\n","import type { ServiceDefinition } from \"../../../../modularity/serviceDefinition\";\nimport { ToolsServiceIdentity } from \"../../toolsService\";\nimport type { IToolsService } from \"../../toolsService\";\nimport { GLTFAnimationImportTool } from \"../../../../components/tools/import/gltfAnimationImportTool\";\n\nexport const GLTFAnimationImportServiceDefinition: ServiceDefinition<[], [IToolsService]> = {\n    friendlyName: \"GLTF Animation Import\",\n    consumes: [ToolsServiceIdentity],\n    factory: (toolsService) => {\n        const contentRegistration = toolsService.addSectionContent({\n            key: \"AnimationImport\",\n            order: 40,\n            section: \"GLTF Animation Import\",\n            component: ({ context }) => <GLTFAnimationImportTool scene={context} />,\n        });\n\n        return {\n            dispose: () => {\n                contentRegistration.dispose();\n            },\n        };\n    },\n};\n","import type { FunctionComponent } from \"react\";\nimport { GLTFLoaderCoordinateSystemMode, GLTFLoaderAnimationStartMode } from \"loaders/glTF/glTFFileLoader\";\nimport type { DropdownOption } from \"shared-ui-components/fluent/primitives/dropdown\";\nimport { SwitchPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/switchPropertyLine\";\nimport { NumberDropdownPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/dropdownPropertyLine\";\nimport { SyncedSliderPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/syncedSliderPropertyLine\";\nimport type { GLTFExtensionOptionsType, GLTFLoaderOptionsType } from \"../../../services/panes/tools/import/gltfLoaderOptionsService\";\nimport { PropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/propertyLine\";\nimport { BoundProperty } from \"../../properties/boundProperty\";\n\nconst AnimationStartModeOptions: DropdownOption<number>[] = [\n    { label: \"None\", value: GLTFLoaderAnimationStartMode.NONE },\n    { label: \"First\", value: GLTFLoaderAnimationStartMode.FIRST },\n    { label: \"All\", value: GLTFLoaderAnimationStartMode.ALL },\n];\n\nconst CoordinateSystemModeOptions: DropdownOption<number>[] = [\n    { label: \"Auto\", value: GLTFLoaderCoordinateSystemMode.AUTO },\n    { label: \"Right Handed\", value: GLTFLoaderCoordinateSystemMode.FORCE_RIGHT_HANDED },\n];\n\nexport const GLTFLoaderOptionsTool: FunctionComponent<{\n    loaderOptions: GLTFLoaderOptionsType;\n}> = ({ loaderOptions }) => {\n    return (\n        <PropertyLine\n            label=\"Loader Options\"\n            expandByDefault={false}\n            expandedContent={\n                <>\n                    <BoundProperty component={SwitchPropertyLine} label=\"Always compute bounding box\" target={loaderOptions} propertyKey=\"alwaysComputeBoundingBox\" />\n                    <BoundProperty component={SwitchPropertyLine} label=\"Always compute skeleton root node\" target={loaderOptions} propertyKey=\"alwaysComputeSkeletonRootNode\" />\n                    <BoundProperty\n                        component={NumberDropdownPropertyLine}\n                        label=\"Animation start mode\"\n                        options={AnimationStartModeOptions}\n                        target={loaderOptions}\n                        propertyKey=\"animationStartMode\"\n                    />\n                    <BoundProperty component={SwitchPropertyLine} label=\"Capture performance counters\" target={loaderOptions} propertyKey=\"capturePerformanceCounters\" />\n                    <BoundProperty component={SwitchPropertyLine} label=\"Compile materials\" target={loaderOptions} propertyKey=\"compileMaterials\" />\n                    <BoundProperty component={SwitchPropertyLine} label=\"Compile shadow generators\" target={loaderOptions} propertyKey=\"compileShadowGenerators\" />\n                    <BoundProperty\n                        component={NumberDropdownPropertyLine}\n                        label=\"Coordinate system\"\n                        options={CoordinateSystemModeOptions}\n                        target={loaderOptions}\n                        propertyKey=\"coordinateSystemMode\"\n                    />\n                    <BoundProperty component={SwitchPropertyLine} label=\"Create instances\" target={loaderOptions} propertyKey=\"createInstances\" />\n                    <BoundProperty component={SwitchPropertyLine} label=\"Enable logging\" target={loaderOptions} propertyKey=\"loggingEnabled\" />\n                    <BoundProperty component={SwitchPropertyLine} label=\"Load all materials\" target={loaderOptions} propertyKey=\"loadAllMaterials\" />\n                    <BoundProperty component={SyncedSliderPropertyLine} label=\"Target FPS\" target={loaderOptions} propertyKey=\"targetFps\" min={1} max={120} step={1} />\n                    <BoundProperty component={SwitchPropertyLine} label=\"Transparency as coverage\" target={loaderOptions} propertyKey=\"transparencyAsCoverage\" />\n                    <BoundProperty component={SwitchPropertyLine} label=\"Use clip plane\" target={loaderOptions} propertyKey=\"useClipPlane\" />\n                    <BoundProperty component={SwitchPropertyLine} label=\"Use sRGB buffers\" target={loaderOptions} propertyKey=\"useSRGBBuffers\" />\n                </>\n            }\n        />\n    );\n};\n\nexport const GLTFExtensionOptionsTool: FunctionComponent<{\n    extensionOptions: GLTFExtensionOptionsType;\n}> = ({ extensionOptions }) => {\n    return (\n        <PropertyLine\n            label=\"Extension Options\"\n            expandByDefault={false}\n            expandedContent={\n                <>\n                    {Object.entries(extensionOptions).map(([extensionName, options]) => {\n                        return (\n                            <BoundProperty\n                                key={extensionName}\n                                component={SwitchPropertyLine}\n                                label={extensionName}\n                                target={options}\n                                propertyKey=\"enabled\"\n                                expandedContent={\n                                    (extensionName === \"MSFT_lod\" && (\n                                        <BoundProperty\n                                            key={extensionName + \"_maxLODsToLoad\"}\n                                            component={SyncedSliderPropertyLine}\n                                            label=\"Maximum LODs\"\n                                            target={extensionOptions[extensionName]} // TS can't infer that value ~ extensionOptions[extensionName]\n                                            propertyKey=\"maxLODsToLoad\"\n                                            min={1}\n                                            max={10}\n                                            step={1}\n                                        />\n                                    )) ||\n                                    undefined\n                                }\n                            />\n                        );\n                    })}\n                </>\n            }\n        />\n    );\n};\n","import type { ISceneLoaderPlugin, ISceneLoaderPluginAsync, SceneLoaderPluginOptions } from \"core/Loading/sceneLoader\";\nimport type { GLTFFileLoader, IGLTFLoaderExtension } from \"loaders/glTF/glTFFileLoader\";\nimport type { ServiceDefinition } from \"../../../../modularity/serviceDefinition\";\nimport type { IToolsService } from \"../../toolsService\";\n\nimport { SceneLoader } from \"core/Loading/sceneLoader\";\nimport { GLTFLoaderDefaultOptions } from \"loaders/glTF/glTFFileLoader\";\nimport { MessageBar } from \"shared-ui-components/fluent/primitives/messageBar\";\nimport { GLTFExtensionOptionsTool, GLTFLoaderOptionsTool } from \"../../../../components/tools/import/gltfLoaderOptionsTool\";\nimport { ToolsServiceIdentity } from \"../../toolsService\";\n\nexport const GLTFLoaderServiceIdentity = Symbol(\"GLTFLoaderService\");\n\n// Options exposed in Inspector includes all the properties from the default loader options (GLTFLoaderDefaultOptions)\n// plus some options that only exist directly on the GLTFFileLoader class itself.\nconst CurrentLoaderOptions = Object.assign(\n    {\n        capturePerformanceCounters: false,\n        loggingEnabled: false,\n    } satisfies Pick<GLTFFileLoader, \"capturePerformanceCounters\" | \"loggingEnabled\">,\n    GLTFLoaderDefaultOptions\n);\n\nexport type GLTFLoaderOptionsType = typeof CurrentLoaderOptions;\n\nconst CurrentExtensionOptions = {\n    /* eslint-disable @typescript-eslint/naming-convention */\n    EXT_lights_image_based: { enabled: true },\n    EXT_mesh_gpu_instancing: { enabled: true },\n    EXT_texture_webp: { enabled: true },\n    EXT_texture_avif: { enabled: true },\n    KHR_draco_mesh_compression: { enabled: true },\n    KHR_materials_pbrSpecularGlossiness: { enabled: true },\n    KHR_materials_clearcoat: { enabled: true },\n    KHR_materials_iridescence: { enabled: true },\n    KHR_materials_anisotropy: { enabled: true },\n    KHR_materials_emissive_strength: { enabled: true },\n    KHR_materials_ior: { enabled: true },\n    KHR_materials_sheen: { enabled: true },\n    KHR_materials_specular: { enabled: true },\n    KHR_materials_unlit: { enabled: true },\n    KHR_materials_variants: { enabled: true },\n    KHR_materials_transmission: { enabled: true },\n    KHR_materials_diffuse_transmission: { enabled: true },\n    KHR_materials_volume: { enabled: true },\n    KHR_materials_dispersion: { enabled: true },\n    KHR_materials_diffuse_roughness: { enabled: true },\n    KHR_mesh_quantization: { enabled: true },\n    KHR_lights_punctual: { enabled: true },\n    EXT_lights_area: { enabled: true },\n    KHR_texture_basisu: { enabled: true },\n    KHR_texture_transform: { enabled: true },\n    KHR_xmp_json_ld: { enabled: true },\n    MSFT_lod: { enabled: true, maxLODsToLoad: 10 },\n    MSFT_minecraftMesh: { enabled: true },\n    MSFT_sRGBFactors: { enabled: true },\n    MSFT_audio_emitter: { enabled: true },\n} satisfies SceneLoaderPluginOptions[\"gltf\"][\"extensionOptions\"];\n\nexport type GLTFExtensionOptionsType = typeof CurrentExtensionOptions;\n\nexport const GLTFLoaderOptionsServiceDefinition: ServiceDefinition<[], [IToolsService]> = {\n    friendlyName: \"GLTF Loader Options\",\n    consumes: [ToolsServiceIdentity],\n    factory: (toolsService) => {\n        // Subscribe to plugin activation\n        const pluginObserver = SceneLoader.OnPluginActivatedObservable.add((plugin: ISceneLoaderPlugin | ISceneLoaderPluginAsync) => {\n            if (plugin.name === \"gltf\") {\n                const loader = plugin as GLTFFileLoader;\n\n                // Apply loader settings\n                Object.assign(loader, CurrentLoaderOptions);\n\n                // Subscribe to extension loading\n                loader.onExtensionLoadedObservable.add((extension: IGLTFLoaderExtension) => {\n                    const extensionOptions = CurrentExtensionOptions[extension.name as keyof GLTFExtensionOptionsType];\n                    if (extensionOptions) {\n                        // Apply extension settings\n                        Object.assign(extension, extensionOptions);\n                    }\n                });\n            }\n        });\n\n        const loaderToolsRegistration = toolsService.addSectionContent({\n            key: \"GLTFLoaderOptions\",\n            section: \"GLTF Loader\",\n            order: 50,\n            component: () => {\n                return (\n                    <>\n                        <MessageBar intent=\"info\" message=\"Reload the file for changes to take effect\" />\n                        <GLTFLoaderOptionsTool loaderOptions={CurrentLoaderOptions} />\n                        <GLTFExtensionOptionsTool extensionOptions={CurrentExtensionOptions} />\n                    </>\n                );\n            },\n        });\n\n        return {\n            dispose: () => {\n                pluginObserver.remove();\n                loaderToolsRegistration.dispose();\n            },\n        };\n    },\n};\n","import type { FunctionComponent } from \"react\";\n\nimport type { IGLTFValidationResults } from \"babylonjs-gltf2interface\";\n\nimport { useRef } from \"react\";\n\nimport { ButtonLine } from \"shared-ui-components/fluent/hoc/buttonLine\";\nimport { ChildWindow } from \"shared-ui-components/fluent/hoc/childWindow\";\nimport { StringifiedPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/stringifiedPropertyLine\";\nimport { MessageBar } from \"shared-ui-components/fluent/primitives/messageBar\";\n\nexport const GLTFValidationTool: FunctionComponent<{ validationResults: IGLTFValidationResults }> = ({ validationResults }) => {\n    const childWindow = useRef<ChildWindow>(null);\n\n    const issues = validationResults.issues;\n    const hasErrors = issues.numErrors > 0;\n\n    return (\n        <>\n            <MessageBar intent={hasErrors ? \"error\" : \"success\"} message={hasErrors ? \"Your file has validation issues\" : \"Your file is a valid glTF file\"} />\n            <StringifiedPropertyLine key=\"NumErrors\" label=\"Errors\" value={issues.numErrors} />\n            <StringifiedPropertyLine key=\"NumWarnings\" label=\"Warnings\" value={issues.numWarnings} />\n            <StringifiedPropertyLine key=\"NumInfos\" label=\"Infos\" value={issues.numInfos} />\n            <StringifiedPropertyLine key=\"NumHints\" label=\"Hints\" value={issues.numHints} />\n            <ButtonLine label=\"View Report Details\" onClick={() => childWindow.current?.open()} />\n            <ChildWindow id=\"gltfValidationResults\" imperativeRef={childWindow}>\n                <pre style={{ margin: 0, overflow: \"auto\" }}>\n                    <code>{JSON.stringify(validationResults, null, 2)}</code>\n                </pre>\n            </ChildWindow>\n        </>\n    );\n};\n","import type { ServiceDefinition } from \"../../../../modularity/serviceDefinition\";\nimport { SceneLoader } from \"core/Loading/sceneLoader\";\nimport type { ISceneLoaderPlugin, ISceneLoaderPluginAsync } from \"core/Loading/sceneLoader\";\nimport type { GLTFFileLoader } from \"loaders/glTF/glTFFileLoader\";\nimport { GLTFValidationTool } from \"../../../../components/tools/import/gltfValidationTool\";\nimport type { IToolsService } from \"../../toolsService\";\nimport { ToolsServiceIdentity } from \"../../toolsService\";\nimport { MessageBar } from \"shared-ui-components/fluent/primitives/messageBar\";\nimport { GLTFValidation } from \"loaders/glTF/glTFValidation\";\nimport { useProperty } from \"../../../../hooks/compoundPropertyHooks\";\n\nexport const GLTFValidationServiceDefinition: ServiceDefinition<[], [IToolsService]> = {\n    friendlyName: \"GLTF Validation\",\n    consumes: [ToolsServiceIdentity],\n    factory: (toolsService) => {\n        const pluginObserver = SceneLoader.OnPluginActivatedObservable.add((plugin: ISceneLoaderPlugin | ISceneLoaderPluginAsync) => {\n            if (plugin.name === \"gltf\") {\n                const loader = plugin as GLTFFileLoader;\n                loader.validate = true;\n            }\n        });\n\n        const sectionRegistration = toolsService.addSectionContent({\n            key: \"GLTFValidation\",\n            section: \"GLTF Validation\",\n            order: 60,\n            component: () => {\n                const validationState = useProperty(GLTFValidation, \"_LastResults\");\n\n                if (!validationState) {\n                    return <MessageBar intent=\"info\" message=\"Reload the file to see validation results\" />;\n                }\n\n                return <GLTFValidationTool validationResults={validationState} />;\n            },\n        });\n\n        return {\n            dispose: () => {\n                sectionRegistration.dispose();\n                pluginObserver.remove();\n            },\n        };\n    },\n};\n","import type { FunctionComponent } from \"react\";\r\n\r\nimport type { AbstractMesh, IMeshDataCache, Scene } from \"core/index\";\r\nimport type { IGizmoService } from \"../services/gizmoService\";\r\n\r\nimport { TargetRegular } from \"@fluentui/react-icons\";\r\nimport { useEffect, useMemo, useState } from \"react\";\r\n\r\nimport { PointerEventTypes } from \"core/Events/pointerEvents\";\r\nimport { TmpVectors, Vector3 } from \"core/Maths/math.vector\";\r\nimport { ToggleButton } from \"shared-ui-components/fluent/primitives/toggleButton\";\r\n\r\nexport const PickingToolbar: FunctionComponent<{\r\n    scene: Scene;\r\n    selectEntity: (entity: unknown) => void;\r\n    gizmoService: IGizmoService;\r\n    ignoreBackfaces?: boolean;\r\n}> = (props) => {\r\n    const { scene, selectEntity, gizmoService, ignoreBackfaces } = props;\r\n\r\n    const meshDataCache = useMemo(() => new WeakMap<AbstractMesh, IMeshDataCache>(), [scene]);\r\n    // Not sure why changing the cursor on the canvas itself doesn't work, so change it on the parent.\r\n    const sceneElement = scene.getEngine().getRenderingCanvas()?.parentElement;\r\n\r\n    const [pickingEnabled, setPickingEnabled] = useState(false);\r\n\r\n    useEffect(() => {\r\n        if (pickingEnabled && sceneElement) {\r\n            const originalCursor = getComputedStyle(sceneElement).cursor;\r\n            sceneElement.style.cursor = \"crosshair\";\r\n\r\n            const pointerObserver = scene.onPrePointerObservable.add(() => {\r\n                let pickedEntity: unknown = null;\r\n\r\n                // Check camera gizmos.\r\n                if (!pickedEntity) {\r\n                    for (const cameraGizmo of gizmoService.getCameraGizmos(scene)) {\r\n                        if (cameraGizmo.isHovered) {\r\n                            pickedEntity = cameraGizmo.camera;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                // Check light gizmos.\r\n                if (!pickedEntity) {\r\n                    for (const lightGizmo of gizmoService.getLightGizmos(scene)) {\r\n                        if (lightGizmo.isHovered) {\r\n                            pickedEntity = lightGizmo.light;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                // Check the main scene.\r\n                if (!pickedEntity) {\r\n                    // Refresh bounding info to ensure morph target and skeletal animations are taken into account.\r\n                    for (const mesh of scene.meshes) {\r\n                        let cache = meshDataCache.get(mesh);\r\n                        if (!cache) {\r\n                            cache = {};\r\n                            meshDataCache.set(mesh, cache);\r\n                        }\r\n                        mesh.refreshBoundingInfo({ applyMorph: true, applySkeleton: true, cache });\r\n                    }\r\n\r\n                    const pickingInfo = scene.pick(\r\n                        scene.unTranslatedPointer.x,\r\n                        scene.unTranslatedPointer.y,\r\n                        (mesh) => mesh.isEnabled() && mesh.isVisible && mesh.getTotalVertices() > 0,\r\n                        false,\r\n                        undefined,\r\n                        (p0, p1, p2, ray) => {\r\n                            if (!ignoreBackfaces) {\r\n                                return true;\r\n                            }\r\n\r\n                            const p0p1 = TmpVectors.Vector3[0];\r\n                            const p1p2 = TmpVectors.Vector3[1];\r\n                            let normal = TmpVectors.Vector3[2];\r\n\r\n                            p1.subtractToRef(p0, p0p1);\r\n                            p2.subtractToRef(p1, p1p2);\r\n\r\n                            normal = Vector3.Cross(p0p1, p1p2);\r\n\r\n                            return Vector3.Dot(normal, ray.direction) < 0;\r\n                        }\r\n                    );\r\n\r\n                    pickedEntity = pickingInfo.pickedMesh;\r\n                }\r\n\r\n                // If an entity was picked, select it.\r\n                if (pickedEntity) {\r\n                    selectEntity(pickedEntity);\r\n                }\r\n            }, PointerEventTypes.POINTERTAP);\r\n\r\n            // Exit picking mode if the escape key is pressed.\r\n            const handleKeyDown = (e: KeyboardEvent) => {\r\n                if (e.key === \"Escape\") {\r\n                    setPickingEnabled(false);\r\n                }\r\n            };\r\n            document.addEventListener(\"keydown\", handleKeyDown);\r\n\r\n            return () => {\r\n                sceneElement.style.cursor = originalCursor;\r\n                pointerObserver.remove();\r\n                document.removeEventListener(\"keydown\", handleKeyDown);\r\n            };\r\n        }\r\n\r\n        return () => {\r\n            /* No-op */\r\n        };\r\n    }, [pickingEnabled, sceneElement, ignoreBackfaces]);\r\n\r\n    return (\r\n        sceneElement && <ToggleButton title={`${pickingEnabled ? \"Disable\" : \"Enable\"} Picking`} checkedIcon={TargetRegular} value={pickingEnabled} onChange={setPickingEnabled} />\r\n    );\r\n};\r\n","import type { ServiceDefinition } from \"../modularity/serviceDefinition\";\r\nimport type { IGizmoService } from \"./gizmoService\";\r\nimport type { ISceneContext } from \"./sceneContext\";\r\nimport type { ISelectionService } from \"./selectionService\";\r\nimport type { ISettingsContext } from \"./settingsContext\";\r\nimport type { IShellService } from \"./shellService\";\r\n\r\nimport { useCallback } from \"react\";\r\nimport { PickingToolbar } from \"../components/pickingToolbar\";\r\nimport { useObservableState } from \"../hooks/observableHooks\";\r\nimport { GizmoServiceIdentity } from \"./gizmoService\";\r\nimport { SceneContextIdentity } from \"./sceneContext\";\r\nimport { SelectionServiceIdentity } from \"./selectionService\";\r\nimport { SettingsContextIdentity } from \"./settingsContext\";\r\nimport { ShellServiceIdentity } from \"./shellService\";\r\n\r\nexport const PickingServiceDefinition: ServiceDefinition<[], [ISceneContext, IShellService, ISelectionService, IGizmoService, ISettingsContext]> = {\r\n    friendlyName: \"Picking Service\",\r\n    consumes: [SceneContextIdentity, ShellServiceIdentity, SelectionServiceIdentity, GizmoServiceIdentity, SettingsContextIdentity],\r\n    factory: (sceneContext, shellService, selectionService, gizmoService, settingsContext) => {\r\n        shellService.addToolbarItem({\r\n            key: \"Picking Service\",\r\n            verticalLocation: \"top\",\r\n            horizontalLocation: \"left\",\r\n            suppressTeachingMoment: true,\r\n            component: () => {\r\n                const scene = useObservableState(() => sceneContext.currentScene, sceneContext.currentSceneObservable);\r\n                const selectEntity = useCallback((entity: unknown) => (selectionService.selectedEntity = entity), []);\r\n                const ignoreBackfacesForPicking = useObservableState(() => settingsContext.ignoreBackfacesForPicking, settingsContext.settingsChangedObservable);\r\n                return scene ? <PickingToolbar scene={scene} selectEntity={selectEntity} gizmoService={gizmoService} ignoreBackfaces={ignoreBackfacesForPicking} /> : null;\r\n            },\r\n        });\r\n    },\r\n};\r\n","import type { ServiceDefinition } from \"../modularity/serviceDefinition\";\r\nimport type { IShellService } from \"./shellService\";\r\n\r\nimport { PersonFeedbackRegular } from \"@fluentui/react-icons\";\r\n\r\nimport { Button } from \"shared-ui-components/fluent/primitives/button\";\r\nimport { Tooltip } from \"shared-ui-components/fluent/primitives/tooltip\";\r\nimport { ShellServiceIdentity } from \"./shellService\";\r\n\r\nexport const UserFeedbackServiceDefinition: ServiceDefinition<[], [IShellService]> = {\r\n    friendlyName: \"User Feedback\",\r\n    consumes: [ShellServiceIdentity],\r\n    factory: (shellService) => {\r\n        shellService.addToolbarItem({\r\n            key: \"User Feedback\",\r\n            verticalLocation: \"bottom\",\r\n            horizontalLocation: \"right\",\r\n            suppressTeachingMoment: true,\r\n            component: () => {\r\n                return (\r\n                    <Tooltip content=\"Give Feedback on Inspector v2\">\r\n                        <Button\r\n                            appearance=\"subtle\"\r\n                            icon={PersonFeedbackRegular}\r\n                            onClick={() => window.open(\"https://forum.babylonjs.com/t/introducing-inspector-v2/60937\", \"_blank\")} // TODO: Replace this with a direct link to the announcement post.\r\n                        />\r\n                    </Tooltip>\r\n                );\r\n            },\r\n        });\r\n    },\r\n};\r\n","import type { IDisposable, IReadonlyObservable, Nullable, Scene } from \"core/index\";\r\nimport type { WeaklyTypedServiceDefinition } from \"./modularity/serviceContainer\";\r\nimport type { ServiceDefinition } from \"./modularity/serviceDefinition\";\r\nimport type { ModularToolOptions } from \"./modularTool\";\r\nimport type { ISceneContext } from \"./services/sceneContext\";\r\nimport type { IShellService } from \"./services/shellService\";\r\n\r\nimport { AsyncLock } from \"core/Misc/asyncLock\";\r\nimport { Logger } from \"core/Misc/logger\";\r\nimport { Observable } from \"core/Misc/observable\";\r\nimport { useEffect, useRef } from \"react\";\r\nimport { DefaultInspectorExtensionFeed } from \"./extensibility/defaultInspectorExtensionFeed\";\r\nimport { LegacyInspectableObjectPropertiesServiceDefinition } from \"./legacy/inspectableCustomPropertiesService\";\r\nimport { MakeModularTool } from \"./modularTool\";\r\nimport { GizmoServiceDefinition } from \"./services/gizmoService\";\r\nimport { GizmoToolbarServiceDefinition } from \"./services/gizmoToolbarService\";\r\nimport { MiniStatsServiceDefinition } from \"./services/miniStatsService\";\r\nimport { DebugServiceDefinition } from \"./services/panes/debugService\";\r\nimport { AnimationGroupPropertiesServiceDefinition } from \"./services/panes/properties/animationGroupPropertiesService\";\r\nimport { AnimationPropertiesServiceDefinition } from \"./services/panes/properties/animationPropertiesService\";\r\nimport { AtmospherePropertiesServiceDefinition } from \"./services/panes/properties/atmospherePropertiesService\";\r\nimport { AudioPropertiesServiceDefinition } from \"./services/panes/properties/audioPropertiesService\";\r\nimport { CameraPropertiesServiceDefinition } from \"./services/panes/properties/cameraPropertiesService\";\r\nimport { CommonPropertiesServiceDefinition } from \"./services/panes/properties/commonPropertiesService\";\r\nimport { EffectLayerPropertiesServiceDefinition } from \"./services/panes/properties/effectLayerPropertiesService\";\r\nimport { FrameGraphPropertiesServiceDefinition } from \"./services/panes/properties/frameGraphPropertiesService\";\r\nimport { LightPropertiesServiceDefinition } from \"./services/panes/properties/lightPropertiesServices\";\r\nimport { MaterialPropertiesServiceDefinition } from \"./services/panes/properties/materialPropertiesService\";\r\nimport { MetadataPropertiesServiceDefinition } from \"./services/panes/properties/metadataPropertiesService\";\r\nimport { NodePropertiesServiceDefinition } from \"./services/panes/properties/nodePropertiesService\";\r\nimport { ParticleSystemPropertiesServiceDefinition } from \"./services/panes/properties/particleSystemPropertiesService\";\r\nimport { PhysicsPropertiesServiceDefinition } from \"./services/panes/properties/physicsPropertiesService\";\r\nimport { PostProcessPropertiesServiceDefinition } from \"./services/panes/properties/postProcessPropertiesService\";\r\nimport { PropertiesServiceDefinition } from \"./services/panes/properties/propertiesService\";\r\nimport { RenderingPipelinePropertiesServiceDefinition } from \"./services/panes/properties/renderingPipelinePropertiesService\";\r\nimport { ScenePropertiesServiceDefinition } from \"./services/panes/properties/scenePropertiesService\";\r\nimport { SkeletonPropertiesServiceDefinition } from \"./services/panes/properties/skeletonPropertiesService\";\r\nimport { SpritePropertiesServiceDefinition } from \"./services/panes/properties/spritePropertiesService\";\r\nimport { TexturePropertiesServiceDefinition } from \"./services/panes/properties/texturePropertiesService\";\r\nimport { TransformPropertiesServiceDefinition } from \"./services/panes/properties/transformPropertiesService\";\r\nimport { AnimationGroupExplorerServiceDefinition } from \"./services/panes/scene/animationGroupExplorerService\";\r\nimport { AtmosphereExplorerServiceDefinition } from \"./services/panes/scene/atmosphereExplorerService\";\r\nimport { EffectLayerExplorerServiceDefinition } from \"./services/panes/scene/effectLayersExplorerService\";\r\nimport { FrameGraphExplorerServiceDefinition } from \"./services/panes/scene/frameGraphExplorerService\";\r\nimport { GuiExplorerServiceDefinition } from \"./services/panes/scene/guiExplorerService\";\r\nimport { MaterialExplorerServiceDefinition } from \"./services/panes/scene/materialExplorerService\";\r\nimport { NodeExplorerServiceDefinition } from \"./services/panes/scene/nodeExplorerService\";\r\nimport { ParticleSystemExplorerServiceDefinition } from \"./services/panes/scene/particleSystemExplorerService\";\r\nimport { PostProcessExplorerServiceDefinition } from \"./services/panes/scene/postProcessExplorerService\";\r\nimport { RenderingPipelineExplorerServiceDefinition } from \"./services/panes/scene/renderingPipelinesExplorerService\";\r\nimport { SceneExplorerServiceDefinition } from \"./services/panes/scene/sceneExplorerService\";\r\nimport { SkeletonExplorerServiceDefinition } from \"./services/panes/scene/skeletonExplorerService\";\r\nimport { SoundExplorerServiceDefinition } from \"./services/panes/scene/soundExplorerService\";\r\nimport { SpriteManagerExplorerServiceDefinition } from \"./services/panes/scene/spriteManagerExplorerService\";\r\nimport { TextureExplorerServiceDefinition } from \"./services/panes/scene/texturesExplorerService\";\r\nimport { SettingsServiceDefinition } from \"./services/panes/settingsService\";\r\nimport { StatsServiceDefinition } from \"./services/panes/statsService\";\r\nimport { CaptureToolsDefinition } from \"./services/panes/tools/captureService\";\r\nimport { ExportServiceDefinition } from \"./services/panes/tools/exportService\";\r\nimport { GLTFAnimationImportServiceDefinition } from \"./services/panes/tools/import/gltfAnimationImportService\";\r\nimport { GLTFLoaderOptionsServiceDefinition } from \"./services/panes/tools/import/gltfLoaderOptionsService\";\r\nimport { GLTFValidationServiceDefinition } from \"./services/panes/tools/import/gltfValidationService\";\r\nimport { ToolsServiceDefinition } from \"./services/panes/toolsService\";\r\nimport { PickingServiceDefinition } from \"./services/pickingService\";\r\nimport { SceneContextIdentity } from \"./services/sceneContext\";\r\nimport { SelectionServiceDefinition } from \"./services/selectionService\";\r\nimport { ShellServiceIdentity } from \"./services/shellService\";\r\nimport { TextureEditorServiceDefinition } from \"./services/textureEditor/textureEditorService\";\r\nimport { UserFeedbackServiceDefinition } from \"./services/userFeedbackService\";\r\n\r\ntype LayoutMode = \"inline\" | \"overlay\";\r\n\r\nexport type InspectorOptions = Omit<ModularToolOptions, \"toolbarMode\"> & {\r\n    autoResizeEngine?: boolean;\r\n    layoutMode?: LayoutMode;\r\n};\r\n\r\nexport type InspectorToken = IDisposable & {\r\n    readonly isDisposed: boolean;\r\n    readonly onDisposed: IReadonlyObservable<void>;\r\n};\r\n\r\n// TODO: The key should probably be the Canvas, because we only want to show one inspector instance per canvas.\r\n//       If it is called for a different scene that is rendering to the same canvas, then we should probably\r\n//       switch the inspector instance to that scene (once this is supported).\r\nconst InspectorTokens = new WeakMap<Scene, IDisposable>();\r\n\r\n// This async lock is used to sequentialize all calls to ShowInspector and dispose of existing inspectors.\r\n// This is needed because each time Inspector is shown or hidden, it is potentially mutating the same DOM element.\r\nconst InspectorLock = new AsyncLock();\r\n\r\nexport function ShowInspector(scene: Scene, options: Partial<InspectorOptions> = {}): InspectorToken {\r\n    // Dispose of any existing inspector for this scene.\r\n    InspectorTokens.get(scene)?.dispose();\r\n\r\n    // Default the dispose logic to a no-op until we know that we are actually going\r\n    // to show the Inspector and there will be cleanup work to do.\r\n    let disposeAsync = async () => await Promise.resolve();\r\n\r\n    // Create an inspector dispose token. The dispose will use the same async lock to\r\n    // make sure async dispose (hide) does not actually start until async show is finished.\r\n    let isDisposed = false;\r\n    const onDisposed = new Observable<void>();\r\n    const inspectorToken = {\r\n        dispose() {\r\n            // eslint-disable-next-line @typescript-eslint/no-floating-promises\r\n            InspectorLock.lockAsync(async () => {\r\n                await disposeAsync();\r\n                isDisposed = true;\r\n                onDisposed.notifyObservers();\r\n                onDisposed.clear();\r\n            });\r\n        },\r\n        get isDisposed() {\r\n            return isDisposed;\r\n        },\r\n        get onDisposed() {\r\n            return onDisposed;\r\n        },\r\n    } as const satisfies InspectorToken;\r\n\r\n    // Track the inspector token for the scene.\r\n    InspectorTokens.set(scene, inspectorToken);\r\n\r\n    // Set default options.\r\n    options = {\r\n        autoResizeEngine: true,\r\n        layoutMode: \"overlay\",\r\n        ...options,\r\n    };\r\n\r\n    // Sequentialize showing the inspector (e.g. don't start showing until after a previous hide (for example) is finished).\r\n    // eslint-disable-next-line @typescript-eslint/no-floating-promises\r\n    InspectorLock.lockAsync(async () => {\r\n        let parentElement = options.containerElement ?? null;\r\n        // If a container element was not found, find an appropriate one above the engine's rendering canvas.\r\n        if (!parentElement) {\r\n            const renderingCanvas = scene.getEngine().getRenderingCanvas();\r\n            parentElement = renderingCanvas;\r\n            while (parentElement) {\r\n                const rootNode = parentElement.getRootNode();\r\n                // TODO: Right now we never parent the inspector within a ShadowRoot because we need to do more work to get FluentProvider to work correctly in this context.\r\n                if (rootNode instanceof ShadowRoot) {\r\n                    // If we are in a ShadowRoot, continue up the tree.\r\n                    parentElement = rootNode.host.parentElement;\r\n                } else {\r\n                    // Found the closest ancestor that is not in a ShadowRoot.\r\n                    break;\r\n                }\r\n            }\r\n\r\n            if (renderingCanvas && parentElement === renderingCanvas) {\r\n                // If we were not in a ShadowRoot, then the direct parent of the rendering canvas is the container.\r\n                parentElement = renderingCanvas.parentElement;\r\n            }\r\n\r\n            if (!parentElement) {\r\n                // If we still haven't found a parent element, default to document.body.\r\n                parentElement = document.body;\r\n            }\r\n        }\r\n\r\n        // If we couldn't find a parent element, we can't show the inspector.\r\n        if (!parentElement) {\r\n            Logger.Warn(\"Unable to find a parent element to host the Inspector.\");\r\n            return;\r\n        }\r\n\r\n        // This will keep track of all the cleanup work we need to do when hiding the inspector.\r\n        const disposeActions: (() => void | Promise<void>)[] = [];\r\n\r\n        // Update the disposeAsync function to walk the dispose actions in reverse order\r\n        // and call each one.\r\n        let disposed = false;\r\n        disposeAsync = async () => {\r\n            if (disposed) {\r\n                return;\r\n            }\r\n            disposed = true;\r\n\r\n            for (const disposeAction of disposeActions.reverse()) {\r\n                const result = disposeAction();\r\n                if (result) {\r\n                    // eslint-disable-next-line no-await-in-loop\r\n                    await result;\r\n                }\r\n            }\r\n        };\r\n\r\n        // If we were responsible for resizing the engine, resize one more after the inspector UI is hidden.\r\n        disposeActions.push(() => {\r\n            if (options.autoResizeEngine) {\r\n                scene.getEngine().resize();\r\n            }\r\n        });\r\n\r\n        // This array will contain all the default Inspector service definitions.\r\n        const serviceDefinitions: WeaklyTypedServiceDefinition[] = [];\r\n\r\n        // Create a container element for the inspector UI.\r\n        // This element will become the root React node, so it must be a new empty node\r\n        // since React will completely take over its contents.\r\n        const containerElement = document.createElement(\"div\");\r\n        containerElement.id = \"babylon-inspector-container\";\r\n        containerElement.style.position = \"absolute\";\r\n        containerElement.style.inset = \"0\";\r\n        containerElement.style.display = \"flex\";\r\n        // For \"overlay\" layout mode, we let pointer events pass through the inspector container.\r\n        // Pointer events are re-enabled specifically for toolbars, side panes, and central content elements.\r\n        containerElement.style.pointerEvents = \"none\";\r\n\r\n        // When the layoutMode is \"inline\", we will re-parent the child nodes of the parentElement under the containerElement.\r\n        if (options.layoutMode === \"inline\") {\r\n            // Remove all the existing children from the parent element.\r\n            const canvasContainerDisplay = parentElement.style.display;\r\n            const canvasContainerChildren = [...parentElement.childNodes];\r\n            parentElement.replaceChildren();\r\n\r\n            disposeActions.push(() => {\r\n                parentElement.replaceChildren(...canvasContainerChildren);\r\n            });\r\n\r\n            // This service is responsible for injecting the passed in canvas as the \"central content\" of the shell UI (the main area between the side panes and toolbars).\r\n            const canvasInjectorServiceDefinition: ServiceDefinition<[], [IShellService]> = {\r\n                friendlyName: \"Canvas Injector\",\r\n                consumes: [ShellServiceIdentity],\r\n                factory: (shellService) => {\r\n                    const registration = shellService.addCentralContent({\r\n                        key: \"Canvas Injector\",\r\n                        component: () => {\r\n                            const canvasContainerRef = useRef<HTMLDivElement>(null);\r\n                            useEffect(() => {\r\n                                canvasContainerRef.current?.replaceChildren(...canvasContainerChildren);\r\n                            }, []);\r\n\r\n                            return <div ref={canvasContainerRef} style={{ display: canvasContainerDisplay, position: \"absolute\", inset: \"0\" }} />;\r\n                        },\r\n                    });\r\n\r\n                    return {\r\n                        dispose: () => {\r\n                            registration.dispose();\r\n                        },\r\n                    };\r\n                },\r\n            };\r\n\r\n            serviceDefinitions.push(canvasInjectorServiceDefinition);\r\n        }\r\n\r\n        // Now it is safe to append the container element to the parent.\r\n        parentElement.appendChild(containerElement);\r\n        disposeActions.push(() => {\r\n            parentElement.removeChild(containerElement);\r\n        });\r\n\r\n        // This service exposes the scene that was passed into Inspector through ISceneContext, which is used by other services that may be used in other contexts outside of Inspector.\r\n        const sceneContextServiceDefinition: ServiceDefinition<[ISceneContext], []> = {\r\n            friendlyName: \"Inspector Scene Context\",\r\n            produces: [SceneContextIdentity],\r\n            factory: () => {\r\n                return {\r\n                    currentScene: scene,\r\n                    currentSceneObservable: new Observable<Nullable<Scene>>(),\r\n                };\r\n            },\r\n        };\r\n        serviceDefinitions.push(sceneContextServiceDefinition);\r\n\r\n        if (options.autoResizeEngine) {\r\n            const observer = scene.onBeforeRenderObservable.add(() => scene.getEngine().resize());\r\n            disposeActions.push(() => observer.remove());\r\n        }\r\n\r\n        serviceDefinitions.push(\r\n            // Helps with managing gizmos and a shared utility layer.\r\n            GizmoServiceDefinition,\r\n\r\n            // Scene explorer tab and related services.\r\n            SceneExplorerServiceDefinition,\r\n            NodeExplorerServiceDefinition,\r\n            SkeletonExplorerServiceDefinition,\r\n            MaterialExplorerServiceDefinition,\r\n            TextureExplorerServiceDefinition,\r\n            PostProcessExplorerServiceDefinition,\r\n            RenderingPipelineExplorerServiceDefinition,\r\n            EffectLayerExplorerServiceDefinition,\r\n            ParticleSystemExplorerServiceDefinition,\r\n            SpriteManagerExplorerServiceDefinition,\r\n            AnimationGroupExplorerServiceDefinition,\r\n            GuiExplorerServiceDefinition,\r\n            FrameGraphExplorerServiceDefinition,\r\n            AtmosphereExplorerServiceDefinition,\r\n            SoundExplorerServiceDefinition,\r\n\r\n            // Properties pane tab and related services.\r\n            ScenePropertiesServiceDefinition,\r\n            PropertiesServiceDefinition,\r\n            TexturePropertiesServiceDefinition,\r\n            CommonPropertiesServiceDefinition,\r\n            TransformPropertiesServiceDefinition,\r\n            AnimationPropertiesServiceDefinition,\r\n            NodePropertiesServiceDefinition,\r\n            PhysicsPropertiesServiceDefinition,\r\n            SkeletonPropertiesServiceDefinition,\r\n            MaterialPropertiesServiceDefinition,\r\n            LightPropertiesServiceDefinition,\r\n            SpritePropertiesServiceDefinition,\r\n            ParticleSystemPropertiesServiceDefinition,\r\n            CameraPropertiesServiceDefinition,\r\n            PostProcessPropertiesServiceDefinition,\r\n            RenderingPipelinePropertiesServiceDefinition,\r\n            EffectLayerPropertiesServiceDefinition,\r\n            FrameGraphPropertiesServiceDefinition,\r\n            AnimationGroupPropertiesServiceDefinition,\r\n            MetadataPropertiesServiceDefinition,\r\n            AtmospherePropertiesServiceDefinition,\r\n            AudioPropertiesServiceDefinition,\r\n\r\n            // Texture editor and related services.\r\n            TextureEditorServiceDefinition,\r\n\r\n            // Debug pane tab and related services.\r\n            DebugServiceDefinition,\r\n\r\n            // Stats pane tab and related services.\r\n            StatsServiceDefinition,\r\n\r\n            // Tools pane tab and related services.\r\n            ToolsServiceDefinition,\r\n            ExportServiceDefinition,\r\n            GLTFAnimationImportServiceDefinition,\r\n            GLTFLoaderOptionsServiceDefinition,\r\n            GLTFValidationServiceDefinition,\r\n            CaptureToolsDefinition,\r\n\r\n            // Settings pane tab and related services.\r\n            SettingsServiceDefinition,\r\n\r\n            // Tracks entity selection state (e.g. which Mesh or Material or other entity is currently selected in scene explorer and bound to the properties pane, etc.).\r\n            SelectionServiceDefinition,\r\n\r\n            // Gizmos for manipulating objects in the scene.\r\n            GizmoToolbarServiceDefinition,\r\n\r\n            // Allows picking objects from the scene to select them.\r\n            PickingServiceDefinition,\r\n\r\n            // Adds entry points for user feedback on Inspector v2 (probably eventually will be removed).\r\n            UserFeedbackServiceDefinition,\r\n\r\n            // Adds always present \"mini stats\" (like fps) to the toolbar, etc.\r\n            MiniStatsServiceDefinition,\r\n\r\n            // Legacy service to support custom inspectable properties on objects.\r\n            LegacyInspectableObjectPropertiesServiceDefinition\r\n        );\r\n\r\n        const modularTool = MakeModularTool({\r\n            containerElement,\r\n            serviceDefinitions: [\r\n                // Default Inspector services.\r\n                ...serviceDefinitions,\r\n\r\n                // Additional services passed in to the Inspector.\r\n                ...(options.serviceDefinitions ?? []),\r\n            ],\r\n            themeMode: options.themeMode,\r\n            showThemeSelector: options.showThemeSelector,\r\n            extensionFeeds: [DefaultInspectorExtensionFeed, ...(options.extensionFeeds ?? [])],\r\n            toolbarMode: \"compact\",\r\n            sidePaneRemapper: options.sidePaneRemapper,\r\n        });\r\n        disposeActions.push(() => modularTool.dispose());\r\n\r\n        const sceneDisposedObserver = scene.onDisposeObservable.addOnce(() => {\r\n            inspectorToken.dispose();\r\n        });\r\n\r\n        disposeActions.push(() => sceneDisposedObserver.remove());\r\n\r\n        disposeActions.push(() => {\r\n            InspectorTokens.delete(scene);\r\n        });\r\n    });\r\n\r\n    return inspectorToken;\r\n}\r\n","// Mappings for Inspector v1 property section names to Inspector v2 section names.\r\nexport const LegacyPropertiesSectionMapping = {\r\n    // Common sections\r\n    [\"GENERAL\"]: \"General\",\r\n    [\"CUSTOM\"]: \"Custom\",\r\n    [\"COMMANDS\"]: \"Commands\",\r\n    [\"DEBUG\"]: \"Debug\",\r\n    [\"ADVANCED\"]: \"Advanced\",\r\n    [\"PROPERTIES\"]: \"Properties\",\r\n\r\n    // Transform sections\r\n    [\"TRANSFORMATIONS\"]: \"Transform\",\r\n    [\"TRANSFORMS\"]: \"Transform\",\r\n    [\"TRANSFORM\"]: \"Transform\",\r\n\r\n    // Animation sections\r\n    [\"ANIMATION\"]: \"Animation\",\r\n    [\"ANIMATION RANGES\"]: \"Animation Ranges\",\r\n    [\"ANIMATIONS\"]: \"Animation\",\r\n    [\"ANIMATION GENERAL CONTROL\"]: \"Animation Control\",\r\n    [\"CONTROLS\"]: \"Control\",\r\n    [\"INFOS\"]: \"Info\",\r\n\r\n    // Camera sections\r\n    [\"COLLISIONS\"]: \"Collision\",\r\n    [\"LIMITS\"]: \"Limits\",\r\n    [\"BEHAVIORS\"]: \"Behaviors\",\r\n\r\n    // Material sections\r\n    [\"TRANSPARENCY\"]: \"Transparency\",\r\n    [\"STENCIL\"]: \"Stencil\",\r\n    [\"STENCIL - FRONT\"]: \"Stencil Front\",\r\n    [\"STENCIL - BACK\"]: \"Stencil Back\",\r\n    [\"TEXTURES\"]: \"Textures\",\r\n    [\"LIGHTING & COLORS\"]: \"Lighting & Colors\",\r\n    [\"LEVELS\"]: \"Levels\",\r\n    [\"NORMAL MAP\"]: \"Normal Map\",\r\n    [\"RENDERING\"]: \"Rendering\",\r\n    [\"CHANNELS\"]: \"Channels\",\r\n\r\n    // PBR Material sections\r\n    [\"METALLIC WORKFLOW\"]: \"Metallic Workflow\",\r\n    [\"CLEAR COAT\"]: \"Clear Coat\",\r\n    [\"IRIDESCENCE\"]: \"Iridescence\",\r\n    [\"ANISOTROPIC\"]: \"Anisotropic\",\r\n    [\"SHEEN\"]: \"Sheen\",\r\n    [\"SUBSURFACE\"]: \"Subsurface\",\r\n\r\n    // OpenPBR Material sections\r\n    [\"BASE\"]: \"Base\",\r\n    [\"SPECULAR\"]: \"Specular\",\r\n    [\"COAT\"]: \"Coat\",\r\n    [\"FUZZ\"]: \"Fuzz\",\r\n    [\"EMISSION\"]: \"Emission\",\r\n    [\"THIN FILM\"]: \"Thin Film\",\r\n    [\"GEOMETRY\"]: \"Geometry\",\r\n\r\n    // Sky Material\r\n    [\"SKY\"]: \"Sky\",\r\n\r\n    // Multi Material\r\n    [\"CHILDREN\"]: \"Children\",\r\n\r\n    // Mesh sections\r\n    [\"DISPLAY\"]: \"Display\",\r\n    [\"DISPLAY OPTIONS\"]: \"Display Options\",\r\n    [\"NODE GEOMETRY\"]: \"Node Geometry\",\r\n    [\"MORPH TARGETS\"]: \"Morph Targets\",\r\n    [\"PHYSICS\"]: \"Physics\",\r\n    [\"OCCLUSIONS\"]: \"Occlusions\",\r\n    [\"EDGE RENDERING\"]: \"Edge Rendering\",\r\n    [\"OUTLINE & OVERLAY\"]: \"Outlines & Overlays\",\r\n\r\n    // Light sections\r\n    [\"SETUP\"]: \"Setup\",\r\n    [\"SHADOWS\"]: \"Shadows\",\r\n    [\"SHADOW GENERATOR\"]: \"Shadow Generator\",\r\n\r\n    // Particle System sections\r\n    [\"NODE PARTICLE EDITOR\"]: \"Node Particle Editor\",\r\n    [\"FILE\"]: \"File\",\r\n    [\"SNIPPET\"]: \"Snippet\",\r\n    [\"ATTRACTORS\"]: \"Attractors\",\r\n    [\"IMPOSTORS\"]: \"Impostors\",\r\n    [\"EMITTER\"]: \"Emitter\",\r\n    [\"SIZE\"]: \"Size\",\r\n    [\"LIFETIME\"]: \"Lifetime\",\r\n    [\"COLORS\"]: \"Color\",\r\n    [\"ROTATION\"]: \"Rotation\",\r\n    [\"SPRITESHEET\"]: \"Spritesheet\",\r\n\r\n    // Sprite sections\r\n    [\"CELLS\"]: \"Cells\",\r\n    [\"CELL\"]: \"Cell\",\r\n    [\"SCALE\"]: \"Scale\",\r\n\r\n    // Post Process sections\r\n    [\"CONFIGURATION\"]: \"Configuration\",\r\n    [\"BLOOM\"]: \"Bloom\",\r\n    [\"CHROMATIC ABERRATION\"]: \"Chromatic Aberration\",\r\n    [\"DEPTH OF FIELD\"]: \"Depth of Field\",\r\n    [\"FXAA\"]: \"FXAA\",\r\n    [\"GLOW LAYER\"]: \"Glow Layer\",\r\n    [\"GRAIN\"]: \"Grain\",\r\n    [\"IMAGE PROCESSING\"]: \"Image Processing\",\r\n    [\"SHARPEN\"]: \"Sharpen\",\r\n    [\"OPTIONS\"]: \"Options\",\r\n    [\"SSAO\"]: \"SSAO\",\r\n    [\"Denoiser\"]: \"Denoiser\",\r\n    [\"SSR\"]: \"SSR\",\r\n    [\"Voxel Shadows\"]: \"Voxel Shadows\",\r\n    [\"Screenspace Shadows\"]: \"Screenspace Shadows\",\r\n    [\"Automatic thickness computation\"]: \"Automatic Thickness Computation\",\r\n    [\"Blur\"]: \"Blur\",\r\n    [\"Attenuations\"]: \"Attenuations\",\r\n    [\"Color space\"]: \"Color Space\",\r\n\r\n    // Scene sections\r\n    [\"RENDERING MODE\"]: \"Rendering\",\r\n    [\"ENVIRONMENT\"]: \"Environment\",\r\n    [\"MATERIAL IMAGE PROCESSING\"]: \"Material Image Processing\",\r\n\r\n    // Texture sections\r\n    [\"PREVIEW\"]: \"Preview\",\r\n    [\"ADVANCED TEXTURE PROPERTIES\"]: \"Advanced Texture Properties\",\r\n\r\n    // Frame Graph sections\r\n    [\"TASKS\"]: \"Tasks\",\r\n\r\n    // Metadata\r\n    [\"METADATA\"]: \"Metadata\",\r\n    [\"XMP METADATA\"]: \"XMP Metadata\",\r\n\r\n    // Variants\r\n    [\"VARIANTS\"]: \"Variants\",\r\n\r\n    // Node Material\r\n    [\"INPUTS\"]: \"Inputs\",\r\n} as const;\r\n","import type { IInspectorContextMenuItem, IInspectorContextMenuType, IInspectorOptions as InspectorV1Options, Nullable, Scene } from \"core/index\";\r\nimport type { InspectorOptions as InspectorV2Options, InspectorToken } from \"../inspector\";\r\nimport type { WeaklyTypedServiceDefinition } from \"../modularity/serviceContainer\";\r\nimport type { ServiceDefinition } from \"../modularity/serviceDefinition\";\r\nimport type { IGizmoService } from \"../services/gizmoService\";\r\nimport type { IPropertiesService } from \"../services/panes/properties/propertiesService\";\r\nimport type { ISceneExplorerService } from \"../services/panes/scene/sceneExplorerService\";\r\nimport type { ISelectionService } from \"../services/selectionService\";\r\nimport type { IShellService } from \"../services/shellService\";\r\n\r\nimport { BranchRegular } from \"@fluentui/react-icons\";\r\n\r\nimport { DebugLayerTab } from \"core/Debug/debugLayer\";\r\nimport { EngineStore } from \"core/Engines/engineStore\";\r\nimport { Observable } from \"core/Misc/observable\";\r\nimport { ShowInspector } from \"../inspector\";\r\nimport { InterceptProperty } from \"../instrumentation/propertyInstrumentation\";\r\nimport { GizmoServiceIdentity } from \"../services/gizmoService\";\r\nimport { PropertiesServiceIdentity } from \"../services/panes/properties/propertiesService\";\r\nimport { SceneExplorerServiceIdentity } from \"../services/panes/scene/sceneExplorerService\";\r\nimport { SelectionServiceIdentity } from \"../services/selectionService\";\r\nimport { ShellServiceIdentity } from \"../services/shellService\";\r\nimport { LegacyPropertiesSectionMapping } from \"./propertiesSectionMapping\";\r\n\r\ntype PropertyChangedEvent = {\r\n    object: any;\r\n    property: string;\r\n    value: any;\r\n    initialValue: any;\r\n    allowNullValue?: boolean;\r\n};\r\n\r\n/**\r\n * Converts Inspector v1 options to Inspector v2 options.\r\n * @param v1Options Inspector v1 options.\r\n * @returns Inspector v2 options.\r\n */\r\nexport function ConvertOptions(v1Options: Partial<InspectorV1Options>): Partial<InspectorV2Options> {\r\n    // Options not currently handled:\r\n    //  enablePopup: Do users care about this one?\r\n    //  enableClose: Currently Inspector v2 does not allow panes/tabs to be closed.\r\n    //  skipDefaultFontLoading: Probably doesn't make sense for Inspector v2 using Fluent.\r\n    //  contextMenuOverride: Currently there are no default section context menu items to override.\r\n    //                        If the create extension ends up adding context menu items to match v1\r\n    //                        behavior, then it should only enable that feature if contextMenuOverride\r\n    //                        is not set to true.\r\n\r\n    v1Options = {\r\n        overlay: false,\r\n        showExplorer: true,\r\n        showInspector: true,\r\n        embedMode: false,\r\n        enableClose: true,\r\n        handleResize: true,\r\n        enablePopup: true,\r\n        ...v1Options,\r\n    };\r\n\r\n    const serviceDefinitions: WeaklyTypedServiceDefinition[] = [];\r\n\r\n    if (v1Options.initialTab) {\r\n        const paneKey: string = (() => {\r\n            switch (v1Options.initialTab) {\r\n                case DebugLayerTab.Debug:\r\n                    return \"Debug\";\r\n                case DebugLayerTab.Statistics:\r\n                    return \"Statistics\";\r\n                case DebugLayerTab.Settings:\r\n                    return \"Settings\";\r\n                case DebugLayerTab.Tools:\r\n                    return \"Tools\";\r\n            }\r\n        })();\r\n\r\n        const initialTabServiceDefinition: ServiceDefinition<[], [IShellService]> = {\r\n            friendlyName: \"Initial Tab Selector (Backward Compatibility)\",\r\n            consumes: [ShellServiceIdentity],\r\n            factory: (shellService) => {\r\n                // Just find and select the requested initial tab.\r\n                shellService.sidePanes.find((pane) => pane.key === paneKey)?.select();\r\n            },\r\n        };\r\n        serviceDefinitions.push(initialTabServiceDefinition);\r\n    }\r\n\r\n    if (v1Options.gizmoCamera) {\r\n        const { gizmoCamera } = v1Options;\r\n        const gizmoCameraServiceDefinition: ServiceDefinition<[], [IGizmoService]> = {\r\n            friendlyName: \"Gizmo Camera (Backward Compatibility)\",\r\n            consumes: [GizmoServiceIdentity],\r\n            factory: (gizmoService) => {\r\n                // As a simple back compat solution, just keep the utility layer alive until Inspector is unloaded.\r\n                // This way we don't need to keep re-assigning the gizmo camera to the utility layer if it is recreated.\r\n                const utilityLayerRef = gizmoService.getUtilityLayer(gizmoCamera.getScene());\r\n                utilityLayerRef.value.setRenderCamera(gizmoCamera);\r\n                return {\r\n                    dispose: () => utilityLayerRef.dispose(),\r\n                };\r\n            },\r\n        };\r\n        serviceDefinitions.push(gizmoCameraServiceDefinition);\r\n    }\r\n\r\n    if (v1Options.additionalNodes && v1Options.additionalNodes.length > 0) {\r\n        const { additionalNodes } = v1Options;\r\n        const additionalNodesServiceDefinition: ServiceDefinition<[], [ISceneExplorerService]> = {\r\n            friendlyName: \"Additional Nodes (Backward Compatibility)\",\r\n            consumes: [SceneExplorerServiceIdentity],\r\n            factory: (sceneExplorerService) => {\r\n                const sceneExplorerSectionRegistrations = additionalNodes.map((node) =>\r\n                    sceneExplorerService.addSection({\r\n                        displayName: node.name,\r\n                        order: Number.MAX_SAFE_INTEGER,\r\n                        getRootEntities: () => node.getContent(),\r\n                        getEntityDisplayInfo: (entity) => {\r\n                            const onChangeObservable = new Observable<void>();\r\n\r\n                            const nameHookToken = InterceptProperty(entity, \"name\", {\r\n                                afterSet: () => {\r\n                                    onChangeObservable.notifyObservers();\r\n                                },\r\n                            });\r\n\r\n                            return {\r\n                                get name() {\r\n                                    return entity.name;\r\n                                },\r\n                                onChange: onChangeObservable,\r\n                                dispose: () => {\r\n                                    nameHookToken.dispose();\r\n                                    onChangeObservable.clear();\r\n                                },\r\n                            };\r\n                        },\r\n                        entityIcon: () => <BranchRegular />,\r\n                        getEntityAddedObservables: () => [],\r\n                        getEntityRemovedObservables: () => [],\r\n                    })\r\n                );\r\n\r\n                return {\r\n                    dispose: () => {\r\n                        sceneExplorerSectionRegistrations.forEach((registration) => registration.dispose());\r\n                    },\r\n                };\r\n            },\r\n        };\r\n        serviceDefinitions.push(additionalNodesServiceDefinition);\r\n    }\r\n\r\n    if (v1Options.explorerExtensibility && v1Options.explorerExtensibility.length > 0) {\r\n        const { explorerExtensibility } = v1Options;\r\n        const explorerExtensibilityServiceDefinition: ServiceDefinition<[], [ISceneExplorerService]> = {\r\n            friendlyName: \"Explorer Extensibility (Backward Compatibility)\",\r\n            consumes: [SceneExplorerServiceIdentity],\r\n            factory: (sceneExplorerService) => {\r\n                const sceneExplorerCommandRegistrations = explorerExtensibility.flatMap((command) =>\r\n                    command.entries.map((entry) =>\r\n                        sceneExplorerService.addEntityCommand({\r\n                            predicate: (entity): entity is unknown => command.predicate(entity),\r\n                            getCommand: (entity) => {\r\n                                return {\r\n                                    displayName: entry.label,\r\n                                    type: \"action\",\r\n                                    mode: \"contextMenu\",\r\n                                    execute: () => entry.action(entity),\r\n                                };\r\n                            },\r\n                        })\r\n                    )\r\n                );\r\n\r\n                return {\r\n                    dispose: () => {\r\n                        sceneExplorerCommandRegistrations.forEach((registration) => registration.dispose());\r\n                    },\r\n                };\r\n            },\r\n        };\r\n        serviceDefinitions.push(explorerExtensibilityServiceDefinition);\r\n    }\r\n\r\n    if (v1Options.contextMenu) {\r\n        const { contextMenu } = v1Options;\r\n        const sections = Object.entries(contextMenu) as [IInspectorContextMenuType, IInspectorContextMenuItem[]][];\r\n        if (sections.length > 0) {\r\n            const legacySectionMapping = {\r\n                pipeline: \"Rendering Pipelines\",\r\n                node: \"Nodes\",\r\n                materials: \"Materials\",\r\n                spriteManagers: \"Sprite Managers\",\r\n                particleSystems: \"Particle Systems\",\r\n                frameGraphs: \"Frame Graphs\",\r\n            } as const satisfies Record<IInspectorContextMenuType, string>;\r\n\r\n            const sectionContextMenuServiceDefinition: ServiceDefinition<[], [ISceneExplorerService]> = {\r\n                friendlyName: \"Context Menu (Backward Compatibility)\",\r\n                consumes: [SceneExplorerServiceIdentity],\r\n                factory: (sceneExplorerService) => {\r\n                    const sceneExlplorerCommandRegistrations = sections.flatMap(([sectionName, entries]) =>\r\n                        entries.map((entry) =>\r\n                            sceneExplorerService.addSectionCommand({\r\n                                predicate: (section): section is (typeof legacySectionMapping)[IInspectorContextMenuType] => legacySectionMapping[sectionName] === section,\r\n                                getCommand: () => {\r\n                                    return {\r\n                                        displayName: entry.label,\r\n                                        type: \"action\",\r\n                                        mode: \"contextMenu\",\r\n                                        execute: () => entry.action(),\r\n                                    };\r\n                                },\r\n                            })\r\n                        )\r\n                    );\r\n\r\n                    return {\r\n                        dispose: () => {\r\n                            sceneExlplorerCommandRegistrations.forEach((registration) => registration.dispose());\r\n                        },\r\n                    };\r\n                },\r\n            };\r\n            serviceDefinitions.push(sectionContextMenuServiceDefinition);\r\n        }\r\n    }\r\n\r\n    const v2Options: Partial<InspectorV2Options> = {\r\n        containerElement: v1Options.globalRoot,\r\n        layoutMode: v1Options.overlay ? \"overlay\" : \"inline\",\r\n        autoResizeEngine: v1Options.handleResize,\r\n        sidePaneRemapper: (sidePane) => {\r\n            if (v1Options.showExplorer === false && sidePane.key === \"Scene Explorer\") {\r\n                return null;\r\n            }\r\n\r\n            if (\r\n                v1Options.showInspector === false &&\r\n                (sidePane.key === \"Properties\" || sidePane.key === \"Debug\" || sidePane.key === \"Statistics\" || sidePane.key === \"Settings\" || sidePane.key === \"Tools\")\r\n            ) {\r\n                return null;\r\n            }\r\n\r\n            if (v1Options.embedMode) {\r\n                if (sidePane.horizontalLocation === \"right\") {\r\n                    // All right panes go to right bottom.\r\n                    return {\r\n                        horizontalLocation: \"right\",\r\n                        verticalLocation: \"bottom\",\r\n                    };\r\n                } else {\r\n                    // All left panes go to right top.\r\n                    return {\r\n                        horizontalLocation: \"right\",\r\n                        verticalLocation: \"top\",\r\n                    };\r\n                }\r\n            }\r\n\r\n            return sidePane;\r\n        },\r\n        serviceDefinitions,\r\n    };\r\n\r\n    return v2Options;\r\n}\r\n\r\n/**\r\n * @deprecated This class only exists for backward compatibility. Use the module-level ShowInspector function instead.\r\n */\r\nexport class Inspector {\r\n    private static _CurrentInstance: Nullable<{ scene: Scene; options: Partial<InspectorV2Options>; disposeToken: InspectorToken }> = null;\r\n    private static _PopupToggler: Nullable<(side: \"left\" | \"right\") => void> = null;\r\n    private static _SectionHighlighter: Nullable<(sectionIds: readonly string[]) => void> = null;\r\n    private static _SidePaneOpenCounter: Nullable<() => number> = null;\r\n\r\n    // @ts-expect-error TS6133: This is private, but used by debugLayer (same as Inspector v1).\r\n    private static get _OpenedPane() {\r\n        return this._SidePaneOpenCounter?.() ?? 0;\r\n    }\r\n\r\n    public static readonly OnSelectionChangeObservable = new Observable<any>();\r\n    public static readonly OnPropertyChangedObservable = new Observable<PropertyChangedEvent>();\r\n\r\n    public static MarkLineContainerTitleForHighlighting(title: string) {\r\n        this.MarkMultipleLineContainerTitlesForHighlighting([title]);\r\n    }\r\n\r\n    public static MarkMultipleLineContainerTitlesForHighlighting(titles: string[]) {\r\n        this._SectionHighlighter?.(titles);\r\n    }\r\n\r\n    public static PopupEmbed() {\r\n        this._PopupToggler?.(\"right\");\r\n    }\r\n\r\n    public static PopupSceneExplorer() {\r\n        this._PopupToggler?.(\"left\");\r\n    }\r\n\r\n    public static PopupInspector() {\r\n        this._PopupToggler?.(\"right\");\r\n    }\r\n\r\n    public static get IsVisible(): boolean {\r\n        return !!this._CurrentInstance;\r\n    }\r\n\r\n    public static Show(scene: Scene, userOptions: Partial<InspectorV1Options>) {\r\n        this._Show(scene, userOptions);\r\n    }\r\n\r\n    private static _Show(scene: Nullable<Scene>, userOptions: Partial<InspectorV1Options>) {\r\n        if (!scene) {\r\n            scene = EngineStore.LastCreatedScene;\r\n        }\r\n\r\n        if (!scene || scene.isDisposed) {\r\n            return;\r\n        }\r\n\r\n        let options = ConvertOptions(userOptions);\r\n        const serviceDefinitions: WeaklyTypedServiceDefinition[] = [];\r\n\r\n        const popupServiceDefinition: ServiceDefinition<[], [IShellService]> = {\r\n            friendlyName: \"Popup Service (Backward Compatibility)\",\r\n            consumes: [ShellServiceIdentity],\r\n            factory: (shellService) => {\r\n                this._PopupToggler = (side: \"left\" | \"right\") => {\r\n                    const sidePaneContainer = side === \"left\" ? shellService.leftSidePaneContainer : shellService.rightSidePaneContainer;\r\n                    if (sidePaneContainer) {\r\n                        if (sidePaneContainer.isDocked) {\r\n                            sidePaneContainer.undock();\r\n                        } else {\r\n                            sidePaneContainer.dock();\r\n                        }\r\n                    }\r\n                };\r\n\r\n                return {\r\n                    dispose: () => (this._PopupToggler = null),\r\n                };\r\n            },\r\n        };\r\n        serviceDefinitions.push(popupServiceDefinition);\r\n\r\n        const selectionChangedServiceDefinition: ServiceDefinition<[], [ISelectionService]> = {\r\n            friendlyName: \"Selection Changed Service (Backward Compatibility)\",\r\n            consumes: [SelectionServiceIdentity],\r\n            factory: (selectionService) => {\r\n                const selectionServiceObserver = selectionService.onSelectedEntityChanged.add(() => {\r\n                    this.OnSelectionChangeObservable.notifyObservers(selectionService.selectedEntity);\r\n                });\r\n\r\n                const legacyObserver = this.OnSelectionChangeObservable.add((entity) => {\r\n                    selectionService.selectedEntity = entity;\r\n                });\r\n\r\n                return {\r\n                    dispose: () => {\r\n                        selectionServiceObserver.remove();\r\n                        legacyObserver.remove();\r\n                    },\r\n                };\r\n            },\r\n        };\r\n        serviceDefinitions.push(selectionChangedServiceDefinition);\r\n\r\n        const propertyChangedServiceDefinition: ServiceDefinition<[], [IPropertiesService]> = {\r\n            friendlyName: \"Property Changed Service (Backward Compatibility)\",\r\n            consumes: [PropertiesServiceIdentity],\r\n            factory: (propertiesService) => {\r\n                const observer = propertiesService.onPropertyChanged.add((changeInfo) => {\r\n                    this.OnPropertyChangedObservable.notifyObservers({\r\n                        object: changeInfo.entity,\r\n                        property: changeInfo.propertyKey.toString(),\r\n                        value: changeInfo.newValue,\r\n                        initialValue: changeInfo.oldValue,\r\n                    });\r\n                });\r\n\r\n                return {\r\n                    dispose: () => {\r\n                        observer.remove();\r\n                    },\r\n                };\r\n            },\r\n        };\r\n        serviceDefinitions.push(propertyChangedServiceDefinition);\r\n\r\n        const sectionHighlighterServiceDefinition: ServiceDefinition<[], [IPropertiesService]> = {\r\n            friendlyName: \"Section Highlighter Service (Backward Compatibility)\",\r\n            consumes: [PropertiesServiceIdentity],\r\n            factory: (propertiesService) => {\r\n                this._SectionHighlighter = (sectionIds: readonly string[]) => {\r\n                    propertiesService.highlightSections(sectionIds.map((id) => (LegacyPropertiesSectionMapping as Record<string, string>)[id] ?? id));\r\n                };\r\n\r\n                return {\r\n                    dispose: () => {\r\n                        this._SectionHighlighter = null;\r\n                    },\r\n                };\r\n            },\r\n        };\r\n        serviceDefinitions.push(sectionHighlighterServiceDefinition);\r\n\r\n        const openedPanesServiceDefinition: ServiceDefinition<[], [IShellService]> = {\r\n            friendlyName: \"Opened Panes Service (Backward Compatibility)\",\r\n            consumes: [ShellServiceIdentity],\r\n            factory: (shellService) => {\r\n                this._SidePaneOpenCounter = () => (shellService.leftSidePaneContainer ? 1 : 0) + (shellService.rightSidePaneContainer ? 1 : 0);\r\n\r\n                return {\r\n                    dispose: () => {\r\n                        this._SidePaneOpenCounter = null;\r\n                    },\r\n                };\r\n            },\r\n        };\r\n        serviceDefinitions.push(openedPanesServiceDefinition);\r\n\r\n        options = {\r\n            ...options,\r\n            serviceDefinitions: [...(options.serviceDefinitions ?? []), ...serviceDefinitions],\r\n        };\r\n\r\n        this._CurrentInstance = {\r\n            scene,\r\n            options,\r\n            disposeToken: ShowInspector(scene, options),\r\n        };\r\n\r\n        this._CurrentInstance.disposeToken.onDisposed.addOnce(() => (this._CurrentInstance = null));\r\n    }\r\n\r\n    public static Hide() {\r\n        this._CurrentInstance?.disposeToken.dispose();\r\n    }\r\n\r\n    // @ts-expect-error TS6133: This is private, but used by debugLayer (same as Inspector v1).\r\n    private static _SetNewScene(scene: Scene) {\r\n        if (this._CurrentInstance && this._CurrentInstance.scene !== scene) {\r\n            // TODO: For now, just hide and re-show the Inspector.\r\n            // Need to think more about this when we work on multi-scene support in Inspector v2.\r\n            const options = this._CurrentInstance.options;\r\n            this.Hide();\r\n            this._CurrentInstance = {\r\n                scene,\r\n                options,\r\n                disposeToken: ShowInspector(scene, options),\r\n            };\r\n        }\r\n    }\r\n}\r\n","import type { IInspectorOptions } from \"core/index\";\r\n\r\nimport { DebugLayer } from \"core/Debug/debugLayer\";\r\nimport { Lazy } from \"core/Misc/lazy\";\r\nimport { Scene } from \"core/scene\";\r\n\r\nconst LazyInspectorModule = new Lazy(async () => await import(\"./inspector\"));\r\n\r\nclass DebugLayerEx extends DebugLayer {\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    override async show(config?: IInspectorOptions): Promise<DebugLayer> {\r\n        // If a custom inspector URL is not provided, default to a lazy dynamic import of the inspector module.\r\n        if (!config?.inspectorURL) {\r\n            this.BJSINSPECTOR = await LazyInspectorModule.value;\r\n        }\r\n        return await super.show(config);\r\n    }\r\n}\r\n\r\nlet CachedDebugLayerDescriptor: PropertyDescriptor | undefined;\r\n\r\nconst DebugLayerExKey = Symbol(\"DebugLayerEx\");\r\n\r\ndeclare module \"core/scene\" {\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    export interface Scene {\r\n        /**\r\n         * @internal\r\n         * Backing field\r\n         */\r\n        [DebugLayerExKey]?: DebugLayerEx;\r\n    }\r\n}\r\n\r\nconst DebugLayerExDescriptor: TypedPropertyDescriptor<DebugLayerEx> = {\r\n    get: function (this: Scene) {\r\n        // NOTE: We don't replace the _debugLayer property because we want to leave it\r\n        // intact so we can dynamically switch back to v1. Eventually when v1 is fully\r\n        // deprecated we can have just a single _debugLayer property.\r\n        // If there is no DebugLayerEx yet, create it.\r\n        if (!this[DebugLayerExKey]) {\r\n            this[DebugLayerExKey] = new DebugLayerEx(this);\r\n        }\r\n\r\n        return this[DebugLayerExKey];\r\n    },\r\n    enumerable: true,\r\n    configurable: true,\r\n};\r\n\r\n/**\r\n * Attaches Inspector v2 to Scene.debugLayer.\r\n */\r\nexport function AttachDebugLayer() {\r\n    const currentPropertyDescriptor = Reflect.getOwnPropertyDescriptor(Scene.prototype, \"debugLayer\");\r\n    // Check if Inspector v2 is already attached, but don't compare the property descriptors directly\r\n    // as getOwnPropertyDescriptor returns a new object instance each time.\r\n    // Instead, check the get function.\r\n    if (currentPropertyDescriptor?.get !== DebugLayerExDescriptor.get) {\r\n        // Cache the property descriptor so we can restore it if/when Inspector v2 is detached from Scene._debugLayer.\r\n        CachedDebugLayerDescriptor = currentPropertyDescriptor;\r\n\r\n        // Define the debugLayer property to return our extended DebugLayerEx (Inspector v2).\r\n        Reflect.defineProperty(Scene.prototype, \"debugLayer\", DebugLayerExDescriptor);\r\n    }\r\n}\r\n\r\n/**\r\n * Detaches Inspector v2 from Scene.debugLayer.\r\n */\r\nexport function DetachDebugLayer() {\r\n    const currentPropertyDescriptor = Reflect.getOwnPropertyDescriptor(Scene.prototype, \"debugLayer\");\r\n    // Check if Inspector v2 is already attached, but don't compare the property descriptors directly\r\n    // as getOwnPropertyDescriptor returns a new object instance each time.\r\n    // Instead, check the get function.\r\n    if (currentPropertyDescriptor?.get === DebugLayerExDescriptor.get) {\r\n        // Revert the debugLayer property descriptor.\r\n        if (CachedDebugLayerDescriptor) {\r\n            Reflect.defineProperty(Scene.prototype, \"debugLayer\", CachedDebugLayerDescriptor);\r\n            CachedDebugLayerDescriptor = undefined;\r\n        } else {\r\n            Reflect.deleteProperty(Scene.prototype, \"debugLayer\");\r\n        }\r\n    }\r\n}\r\n","import { makeStyles, tokens } from \"@fluentui/react-components\";\r\nimport { DeleteFilled } from \"@fluentui/react-icons\";\r\n\r\nexport type DraggableLineProps = {\r\n    format: string;\r\n    data: string;\r\n    tooltip: string;\r\n    label: string;\r\n    onDelete?: () => void;\r\n};\r\n\r\nconst useDraggableStyles = makeStyles({\r\n    draggable: {\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\",\r\n        position: \"relative\",\r\n        columnGap: tokens.spacingHorizontalS,\r\n        cursor: \"grab\",\r\n        textAlign: \"center\",\r\n        boxSizing: \"border-box\",\r\n        margin: `${tokens.spacingVerticalXS} 0px`,\r\n        padding: `${tokens.spacingVerticalSNudge} ${tokens.spacingHorizontalMNudge}`,\r\n\r\n        // Button-like styling\r\n        backgroundColor: tokens.colorNeutralBackground1,\r\n        border: `${tokens.strokeWidthThin} solid ${tokens.colorNeutralStroke1}`,\r\n        borderRadius: tokens.borderRadiusMedium,\r\n        color: tokens.colorNeutralForeground1,\r\n        fontSize: tokens.fontSizeBase300,\r\n        fontFamily: tokens.fontFamilyBase,\r\n        fontWeight: tokens.fontWeightRegular,\r\n        lineHeight: tokens.lineHeightBase300,\r\n        minHeight: \"32px\",\r\n\r\n        // eslint-disable-next-line @typescript-eslint/naming-convention\r\n        \":hover\": {\r\n            backgroundColor: tokens.colorNeutralBackground1Hover,\r\n        },\r\n\r\n        // eslint-disable-next-line @typescript-eslint/naming-convention\r\n        \":active\": {\r\n            backgroundColor: tokens.colorNeutralBackground1Pressed,\r\n        },\r\n    },\r\n    icon: {\r\n        pointerEvents: \"auto\", // reenable interaction\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        position: \"absolute\",\r\n        right: tokens.spacingHorizontalSNudge,\r\n        color: tokens.colorNeutralForeground2,\r\n        cursor: \"pointer\",\r\n        fontSize: tokens.fontSizeBase400,\r\n\r\n        // eslint-disable-next-line @typescript-eslint/naming-convention\r\n        \":hover\": {\r\n            color: tokens.colorNeutralForeground2Hover,\r\n        },\r\n    },\r\n});\r\n\r\nexport const DraggableLine: React.FunctionComponent<DraggableLineProps> = (props) => {\r\n    DraggableLine.displayName = \"DraggableLine\";\r\n    const classes = useDraggableStyles();\r\n    return (\r\n        <div\r\n            className={classes.draggable}\r\n            title={props.tooltip}\r\n            draggable={true}\r\n            onDragStart={(event) => {\r\n                event.dataTransfer.setData(props.format, props.data);\r\n            }}\r\n        >\r\n            {props.label}\r\n            {props.onDelete && <DeleteFilled className={classes.icon} onClick={props.onDelete} />}\r\n        </div>\r\n    );\r\n};\r\n","import { Popover, PopoverSurface, PopoverTrigger } from \"@fluentui/react-components\";\r\nimport type { OnOpenChangeData, OpenPopoverEvents } from \"@fluentui/react-components\";\r\nimport type { FunctionComponent, PropsWithChildren } from \"react\";\r\nimport { useState, useEffect } from \"react\";\r\n\r\ntype PositionedPopoverProps = {\r\n    x: number;\r\n    y: number;\r\n    visible: boolean;\r\n    hide: () => void;\r\n};\r\n\r\n/**\r\n * PositionedPopover component that shows a popover at specific coordinates\r\n * @param props - The component props\r\n * @returns The positioned popover component\r\n */\r\nexport const PositionedPopover: FunctionComponent<PropsWithChildren<PositionedPopoverProps>> = (props) => {\r\n    PositionedPopover.displayName = \"PositionedPopover\";\r\n    const [open, setOpen] = useState(false);\r\n\r\n    useEffect(() => {\r\n        setOpen(props.visible);\r\n    }, [props.visible, props.x, props.y]);\r\n\r\n    const handleOpenChange = (_: OpenPopoverEvents, data: OnOpenChangeData) => {\r\n        setOpen(data.open);\r\n\r\n        if (!data.open) {\r\n            props.hide();\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Popover\r\n            open={open}\r\n            onOpenChange={handleOpenChange}\r\n            positioning={{\r\n                position: \"below\", // Places the popover directly below the trigger element\r\n                autoSize: \"height-always\", //Automatically adjusts the popover height to fit within the viewport\r\n                fallbackPositions: [\"above\", \"after\", \"before\"], //If the primary position doesn't fit, automatically tries these positions in order\r\n            }}\r\n            withArrow={false} // Removes arrow that points to trigger element\r\n        >\r\n            <PopoverTrigger>\r\n                {/* Use the invisible div as the trigger location*/}\r\n                <div\r\n                    style={{\r\n                        position: \"absolute\",\r\n                        left: `${props.x}px`,\r\n                        top: `${props.y}px`,\r\n                        visibility: \"hidden\",\r\n                    }}\r\n                />\r\n            </PopoverTrigger>\r\n            <PopoverSurface>{props.children}</PopoverSurface>\r\n        </Popover>\r\n    );\r\n};\r\n","import { Field, SearchBox as FluentSearchBox, makeStyles } from \"@fluentui/react-components\";\r\nimport type { InputOnChangeData, SearchBoxChangeEvent } from \"@fluentui/react-components\";\r\nimport { forwardRef } from \"react\";\r\n\r\ntype SearchProps = {\r\n    onChange: (val: string) => void;\r\n    placeholder?: string;\r\n};\r\nconst useStyles = makeStyles({\r\n    search: {\r\n        minWidth: \"50px\",\r\n    },\r\n});\r\n\r\nexport const SearchBar = forwardRef<HTMLInputElement, SearchProps>((props, ref) => {\r\n    SearchBar.displayName = \"SearchBar\";\r\n\r\n    const classes = useStyles();\r\n    const onChange: (ev: SearchBoxChangeEvent, data: InputOnChangeData) => void = (_, data) => {\r\n        props.onChange(data.value);\r\n    };\r\n\r\n    return (\r\n        <Field>\r\n            <FluentSearchBox ref={ref} className={classes.search} placeholder={props.placeholder} onChange={onChange} />\r\n        </Field>\r\n    );\r\n});\r\n","import { makeStyles, tokens } from \"@fluentui/react-components\";\r\nimport { SearchBar } from \"./searchBar\";\r\nimport type { FunctionComponent } from \"react\";\r\nimport { useState, useEffect } from \"react\";\r\n\r\ntype SearchBoxProps = {\r\n    items: string[];\r\n    onItemSelected: (item: string) => void;\r\n    title?: string;\r\n};\r\n\r\nconst useSearchBoxStyles = makeStyles({\r\n    searchBox: {\r\n        width: \"300px\",\r\n        height: \"400px\",\r\n        backgroundColor: tokens.colorNeutralBackground1,\r\n        border: `${tokens.strokeWidthThick} solid ${tokens.colorNeutralStroke1}`,\r\n        borderRadius: tokens.borderRadiusMedium,\r\n        boxShadow: tokens.shadow16,\r\n        display: \"grid\",\r\n        gridTemplateRows: \"auto auto 1fr\",\r\n        overflow: \"hidden\", // Prevent content overflow\r\n    },\r\n    title: {\r\n        borderBottom: `${tokens.strokeWidthThin} solid ${tokens.colorNeutralStroke2}`,\r\n        margin: tokens.spacingVerticalXS,\r\n        paddingBottom: tokens.spacingVerticalXS,\r\n        color: tokens.colorNeutralForeground1,\r\n        gridRow: \"1\",\r\n        fontSize: tokens.fontSizeBase300,\r\n        fontWeight: tokens.fontWeightSemibold,\r\n    },\r\n    filterContainer: {\r\n        margin: tokens.spacingVerticalXS,\r\n        paddingBottom: tokens.spacingVerticalXS,\r\n        gridRow: \"2\",\r\n    },\r\n    list: {\r\n        gridRow: \"3\",\r\n        overflowY: \"auto\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        maxHeight: \"100%\",\r\n    },\r\n    listItem: {\r\n        marginLeft: tokens.spacingHorizontalXS,\r\n        marginRight: tokens.spacingHorizontalXS,\r\n        cursor: \"pointer\",\r\n        color: tokens.colorNeutralForeground1,\r\n        marginTop: tokens.spacingVerticalXXS,\r\n        marginBottom: tokens.spacingVerticalXXS,\r\n        padding: tokens.spacingVerticalXS,\r\n        borderRadius: tokens.borderRadiusSmall,\r\n\r\n        // eslint-disable-next-line @typescript-eslint/naming-convention\r\n        \":hover\": {\r\n            backgroundColor: tokens.colorNeutralBackground2Hover,\r\n        },\r\n    },\r\n    listItemSelected: {\r\n        backgroundColor: tokens.colorBrandBackground,\r\n        color: tokens.colorNeutralForegroundOnBrand,\r\n\r\n        // eslint-disable-next-line @typescript-eslint/naming-convention\r\n        \":hover\": {\r\n            backgroundColor: tokens.colorBrandBackgroundHover,\r\n        },\r\n    },\r\n});\r\n\r\n/**\r\n * SearchBox component that displays a popup with search functionality\r\n * @param props - The component props\r\n * @returns The search box component\r\n */\r\nexport const SearchBox: FunctionComponent<SearchBoxProps> = (props) => {\r\n    SearchBox.displayName = \"SearchBox\";\r\n\r\n    const classes = useSearchBoxStyles();\r\n    const [selectedIndex, setSelectedIndex] = useState(0);\r\n    const [items, setItems] = useState(props.items);\r\n    // In future could replace this with a fluent component like menuList or comboBox depending on desired UX\r\n    const onKeyDown = (evt: React.KeyboardEvent) => {\r\n        if (items.length === 0) {\r\n            return;\r\n        }\r\n        if (evt.code === \"Enter\") {\r\n            props.onItemSelected(items[selectedIndex]);\r\n            return;\r\n        }\r\n\r\n        if (evt.code === \"ArrowDown\") {\r\n            setSelectedIndex((prev) => Math.min(prev + 1, items.length - 1));\r\n            return;\r\n        }\r\n\r\n        if (evt.code === \"ArrowUp\") {\r\n            setSelectedIndex((prev) => Math.max(prev - 1, 0));\r\n            return;\r\n        }\r\n    };\r\n\r\n    const onFilterChange = (filter: string) => {\r\n        const filteredItems = props.items.filter((item) => item.toLowerCase().includes(filter.toLowerCase()));\r\n        setItems(filteredItems);\r\n    };\r\n\r\n    useEffect(() => {\r\n        setItems(props.items);\r\n    }, [props.items]);\r\n\r\n    return (\r\n        <div className={classes.searchBox} onKeyDown={onKeyDown}>\r\n            {props.title ? <div className={classes.title}>{props.title}</div> : null}\r\n            <div className={classes.filterContainer}>\r\n                <SearchBar onChange={onFilterChange} placeholder=\"Search...\" />\r\n            </div>\r\n            <div role=\"listbox\" className={classes.list}>\r\n                {items.map((item, index) => (\r\n                    <div\r\n                        role=\"option\"\r\n                        key={item}\r\n                        className={`${classes.listItem} ${index === selectedIndex ? classes.listItemSelected : \"\"}`}\r\n                        onClick={() => props.onItemSelected(item)}\r\n                    >\r\n                        {item}\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","import { Body1Strong, makeStyles, tokens } from \"@fluentui/react-components\";\r\nimport type { FluentIcon } from \"@fluentui/react-icons\";\r\nimport type { FunctionComponent, PropsWithChildren } from \"react\";\r\n\r\nconst useStyles = makeStyles({\r\n    rootDiv: {\r\n        flex: 1,\r\n        overflow: \"hidden\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n    },\r\n    icon: {\r\n        width: tokens.fontSizeBase400,\r\n        height: tokens.fontSizeBase400,\r\n        verticalAlign: \"middle\",\r\n    },\r\n    header: {\r\n        height: tokens.fontSizeBase400,\r\n        fontSize: tokens.fontSizeBase400,\r\n        textAlign: \"center\",\r\n        verticalAlign: \"middle\",\r\n    },\r\n});\r\n\r\nexport type PaneProps = {\r\n    title: string;\r\n    icon?: FluentIcon;\r\n};\r\nexport const Pane: FunctionComponent<PropsWithChildren<PaneProps>> = (props) => {\r\n    const classes = useStyles();\r\n    return (\r\n        <div className={classes.rootDiv}>\r\n            <div className={classes.header}>\r\n                {props.icon ? (\r\n                    <props.icon className={classes.icon} />\r\n                ) : (\r\n                    <img className={classes.icon} id=\"logo\" src=\"https://www.babylonjs.com/Assets/logo-babylonjs-social-twitter.png\" />\r\n                )}\r\n                <Body1Strong id=\"title\">{props.title}</Body1Strong>\r\n            </div>\r\n            {props.children}\r\n        </div>\r\n    );\r\n};\r\n","import { PropertyLine } from \"./propertyLine\";\r\nimport type { PropertyLineProps } from \"./propertyLine\";\r\nimport type { FunctionComponent } from \"react\";\r\nimport { Textarea } from \"../../primitives/textarea\";\r\nimport type { TextareaProps } from \"../../primitives/textarea\";\r\n/**\r\n * Wraps textarea in a property line\r\n * @param props - PropertyLineProps and TextProps\r\n * @returns property-line wrapped text\r\n */\r\nexport const TextAreaPropertyLine: FunctionComponent<PropertyLineProps<string> & TextareaProps> = (props) => {\r\n    TextAreaPropertyLine.displayName = \"TextAreaPropertyLine\";\r\n    return (\r\n        <PropertyLine {...props}>\r\n            <Textarea {...props} />\r\n        </PropertyLine>\r\n    );\r\n};\r\n","// Export the parts of inspector that are intended to be part of the public API.\r\nexport * from \"./components/properties/boundProperty\";\r\nexport * from \"./components/properties/linkToEntityPropertyLine\";\r\nexport type { EntityDisplayInfo, SceneExplorerCommand, SceneExplorerCommandProvider, SceneExplorerSection } from \"./components/scene/sceneExplorer\";\r\nexport * from \"./components/extensibleAccordion\";\r\nexport { SidePaneContainer } from \"./components/pane\";\r\nexport * from \"./components/theme\";\r\nexport * from \"./components/teachingMoment\";\r\nexport * from \"./extensibility/extensionFeed\";\r\nexport * from \"./extensibility/builtInsExtensionFeed\";\r\nexport * from \"./hooks/compoundPropertyHooks\";\r\nexport * from \"./hooks/instrumentationHooks\";\r\nexport * from \"./hooks/observableHooks\";\r\nexport * from \"./hooks/pollingHooks\";\r\nexport * from \"./hooks/resourceHooks\";\r\nexport * from \"./hooks/settingsHooks\";\r\nexport * from \"./hooks/teachingMomentHooks\";\r\nexport * from \"./instrumentation/functionInstrumentation\";\r\nexport * from \"./instrumentation/propertyInstrumentation\";\r\nexport * from \"./misc/observableCollection\";\r\nexport * from \"./modularity/serviceDefinition\";\r\nexport type { IPropertiesService } from \"./services/panes/properties/propertiesService\";\r\nexport { PropertiesServiceIdentity } from \"./services/panes/properties/propertiesService\";\r\nexport type { ISceneExplorerService } from \"./services/panes/scene/sceneExplorerService\";\r\nexport { SceneExplorerServiceIdentity } from \"./services/panes/scene/sceneExplorerService\";\r\nexport type { IDebugService } from \"./services/panes/debugService\";\r\nexport { DebugServiceIdentity } from \"./services/panes/debugService\";\r\n\r\nexport type { ISettingsService } from \"./services/panes/settingsService\";\r\nexport { SettingsServiceIdentity } from \"./services/panes/settingsService\";\r\n\r\nexport type { IStatsService } from \"./services/panes/statsService\";\r\nexport { StatsServiceIdentity } from \"./services/panes/statsService\";\r\n\r\nexport type { IToolsService } from \"./services/panes/toolsService\";\r\nexport { ToolsServiceIdentity } from \"./services/panes/toolsService\";\r\n\r\nexport * from \"./services/sceneContext\";\r\nexport * from \"./services/selectionService\";\r\nexport * from \"./services/settingsContext\";\r\nexport type { IShellService, ToolbarItemDefinition, SidePaneDefinition, CentralContentDefinition } from \"./services/shellService\";\r\nexport { ShellServiceIdentity } from \"./services/shellService\";\r\nexport * from \"./inspector\";\r\nexport { ConvertOptions, Inspector } from \"./legacy/inspector\";\r\nexport { AttachDebugLayer, DetachDebugLayer } from \"./legacy/debugLayer\";\r\n\r\n// Export the shared primitive UI controls that can be used for extending the inspector.\r\nexport * from \"shared-ui-components/fluent/primitives/accordion\";\r\nexport * from \"shared-ui-components/fluent/primitives/button\";\r\nexport * from \"shared-ui-components/fluent/primitives/checkbox\";\r\nexport * from \"shared-ui-components/fluent/primitives/collapse\";\r\nexport * from \"shared-ui-components/fluent/primitives/colorPicker\";\r\nexport * from \"shared-ui-components/fluent/primitives/comboBox\";\r\nexport * from \"shared-ui-components/fluent/primitives/draggable\";\r\nexport * from \"shared-ui-components/fluent/primitives/dropdown\";\r\nexport * from \"shared-ui-components/fluent/primitives/gradient\";\r\nexport * from \"shared-ui-components/fluent/primitives/infoLabel\";\r\nexport * from \"shared-ui-components/fluent/primitives/lazyComponent\";\r\nexport * from \"shared-ui-components/fluent/primitives/link\";\r\nexport * from \"shared-ui-components/fluent/primitives/list\";\r\nexport * from \"shared-ui-components/fluent/primitives/messageBar\";\r\nexport * from \"shared-ui-components/fluent/primitives/positionedPopover\";\r\nexport * from \"shared-ui-components/fluent/primitives/primitive\";\r\nexport * from \"shared-ui-components/fluent/primitives/searchBar\";\r\nexport * from \"shared-ui-components/fluent/primitives/searchBox\";\r\nexport * from \"shared-ui-components/fluent/primitives/spinButton\";\r\nexport * from \"shared-ui-components/fluent/primitives/switch\";\r\nexport * from \"shared-ui-components/fluent/primitives/syncedSlider\";\r\nexport * from \"shared-ui-components/fluent/primitives/textarea\";\r\nexport * from \"shared-ui-components/fluent/primitives/textInput\";\r\nexport * from \"shared-ui-components/fluent/primitives/toggleButton\";\r\n\r\n// Export the shared hoc UI controls that can be used for extending the inspector.\r\nexport * from \"shared-ui-components/fluent/hoc/buttonLine\";\r\nexport * from \"shared-ui-components/fluent/hoc/childWindow\";\r\nexport * from \"shared-ui-components/fluent/hoc/fileUploadLine\";\r\nexport * from \"shared-ui-components/fluent/hoc/gradientList\";\r\nexport * from \"shared-ui-components/fluent/hoc/pane\";\r\nexport * from \"shared-ui-components/fluent/hoc/propertyLines/booleanBadgePropertyLine\";\r\nexport * from \"shared-ui-components/fluent/hoc/propertyLines/checkboxPropertyLine\";\r\nexport * from \"shared-ui-components/fluent/hoc/propertyLines/colorPropertyLine\";\r\nexport { NumberDropdownPropertyLine, StringDropdownPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/dropdownPropertyLine\";\r\nexport * from \"shared-ui-components/fluent/hoc/propertyLines/hexPropertyLine\";\r\nexport * from \"shared-ui-components/fluent/hoc/propertyLines/inputPropertyLine\";\r\nexport * from \"shared-ui-components/fluent/hoc/propertyLines/linkPropertyLine\";\r\nexport * from \"shared-ui-components/fluent/hoc/propertyLines/propertyLine\";\r\nexport * from \"shared-ui-components/fluent/hoc/propertyLines/spinButtonPropertyLine\";\r\nexport * from \"shared-ui-components/fluent/hoc/propertyLines/stringifiedPropertyLine\";\r\nexport * from \"shared-ui-components/fluent/hoc/propertyLines/switchPropertyLine\";\r\nexport * from \"shared-ui-components/fluent/hoc/propertyLines/syncedSliderPropertyLine\";\r\nexport * from \"shared-ui-components/fluent/hoc/propertyLines/textAreaPropertyLine\";\r\nexport * from \"shared-ui-components/fluent/hoc/propertyLines/textPropertyLine\";\r\nexport * from \"shared-ui-components/fluent/hoc/propertyLines/vectorPropertyLine\";\r\n\r\nimport { AttachDebugLayer } from \"./legacy/debugLayer\";\r\n\r\n// Attach Inspector v2 to Scene.debugLayer as a side effect for back compat.\r\nAttachDebugLayer();\r\n"],"names":["useInputStyles","_jsx","FluentTooltip","FluentButton","useStyles","_jsxs","InterceptorHooksMaps","FluentCollapse","FluentLink","FluentToggleButton","FluentInfoLabel","Checkbox","FluentAccordion","Button","_Fragment","FluentToolbar","FluentFade","Tooltip","SearchBox","FluentSwitch","FluentSpinButton","FluentInput","FluentDropdown","FluentPopover","FluentColorPicker","BabylonObservable","List","LOOP_MODES","Dropdown","AnimationEnum","AnimationClass","FluentMessageBar","Color4Gradient","InputBlockPropertyLine","Fragment","FluentComboBox","FluentTextarea","SnippetDashboardStorageKey","FluentCheckbox","Toolbar","ToggleButton","IsAdvancedDynamicTexture","Popover","FluentSearchBox"],"mappings":"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"}